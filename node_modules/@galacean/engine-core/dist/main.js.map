{"version":3,"file":"main.js","sources":["../src/Platform.ts","../../../node_modules/.pnpm/@swc+helpers@0.5.0/node_modules/@swc/helpers/esm/_assert_this_initialized.js","../../../node_modules/.pnpm/@swc+helpers@0.5.0/node_modules/@swc/helpers/esm/_create_class.js","../../../node_modules/.pnpm/@swc+helpers@0.5.0/node_modules/@swc/helpers/esm/_set_prototype_of.js","../../../node_modules/.pnpm/@swc+helpers@0.5.0/node_modules/@swc/helpers/esm/_inherits.js","../../math/src/MathUtil.ts","../../math/src/Color.ts","../../../node_modules/.pnpm/tslib@2.5.0/node_modules/tslib/tslib.es6.js","../../../node_modules/.pnpm/@swc+helpers@0.5.0/node_modules/@swc/helpers/esm/_instanceof.js","../src/clone/enums/CloneMode.ts","../src/clone/CloneManager.ts","../src/base/EngineObject.ts","../src/asset/RefObject.ts","../src/texture/enums/RenderBufferDepthFormat.ts","../src/texture/enums/TextureCubeFace.ts","../src/texture/enums/TextureDepthCompareFunction.ts","../src/texture/enums/TextureFilterMode.ts","../src/texture/enums/TextureFormat.ts","../src/texture/enums/TextureWrapMode.ts","../src/base/Event.ts","../src/base/EventDispatcher.ts","../src/base/Logger.ts","../src/base/Time.ts","../src/base/Util.ts","../src/base/Constant.ts","../src/texture/Texture.ts","../src/texture/RenderTarget.ts","../src/texture/Texture2D.ts","../src/texture/Texture2DArray.ts","../src/texture/TextureCube.ts","../src/2d/atlas/FontAtlas.ts","../src/2d/text/SubFont.ts","../src/2d/text/Font.ts","../src/asset/AssetPromise.ts","../src/asset/ResourceManager.ts","../src/DisorderedArray.ts","../src/ComponentsManager.ts","../src/clone/ComponentCloner.ts","../src/ComponentsDependencies.ts","../src/Layer.ts","../src/UpdateFlag.ts","../src/BoolUpdateFlag.ts","../src/Component.ts","../src/UpdateFlagManager.ts","../src/Transform.ts","../src/Entity.ts","../src/enums/ColorSpace.ts","../src/input/enums/PointerPhase.ts","../src/input/pointer/Pointer.ts","../src/SystemInfo.ts","../src/input/enums/Keys.ts","../src/input/keyboard/KeyboardManager.ts","../src/enums/CameraClearFlags.ts","../src/physics/HitResult.ts","../src/physics/PhysicsManager.ts","../src/physics/enums/PhysicsMaterialCombineMode.ts","../src/physics/PhysicsMaterial.ts","../src/physics/Collider.ts","../src/physics/enums/ControllerNonWalkableMode.ts","../src/physics/CharacterController.ts","../src/physics/shape/ColliderShape.ts","../src/physics/shape/BoxColliderShape.ts","../src/physics/shape/SphereColliderShape.ts","../src/physics/shape/PlaneColliderShape.ts","../src/physics/enums/ColliderShapeUpAxis.ts","../src/physics/shape/CapsuleColliderShape.ts","../src/physics/joint/Joint.ts","../src/physics/joint/FixedJoint.ts","../src/physics/enums/HingeJointFlag.ts","../src/physics/joint/HingeJoint.ts","../src/physics/joint/SpringJoint.ts","../src/physics/joint/JointLimits.ts","../src/physics/joint/JointMotor.ts","../src/physics/enums/ControllerCollisionFlag.ts","../src/physics/StaticCollider.ts","../src/physics/DynamicCollider.ts","../src/input/enums/PointerButton.ts","../src/input/pointer/PointerManager.ts","../src/input/wheel/WheelManager.ts","../src/input/InputManager.ts","../src/shadow/enum/ShadowCascadesMode.ts","../src/shadow/enum/ShadowResolution.ts","../src/shadow/enum/ShadowType.ts","../src/shader/enums/RenderQueueType.ts","../src/shader/enums/BlendFactor.ts","../src/shader/enums/BlendOperation.ts","../src/shader/enums/ColorWriteMask.ts","../src/shader/enums/CompareFunction.ts","../src/shader/enums/CullMode.ts","../src/shader/enums/ShaderPropertyType.ts","../src/shader/enums/StencilOperation.ts","../src/shader/ShaderMacro.ts","../src/shader/ShaderMacroCollection.ts","../../../node_modules/.pnpm/@swc+helpers@0.5.0/node_modules/@swc/helpers/esm/_extends.js","../src/shaderlib/pbr/index.ts","../src/shaderlib/shadow/index.ts","../src/shaderlib/ShaderLib.ts","../src/shaderlib/ShaderFactory.ts","../src/shader/enums/ShaderDataGroup.ts","../src/shader/ShaderUniform.ts","../src/shader/ShaderUniformBlock.ts","../src/shader/ShaderProgram.ts","../src/shader/ShaderPass.ts","../src/shader/ShaderProperty.ts","../src/shader/Shader.ts","../src/shader/ShaderData.ts","../src/lighting/Light.ts","../src/lighting/DirectLight.ts","../src/lighting/PointLight.ts","../src/lighting/SpotLight.ts","../src/lighting/LightManager.ts","../src/shader/state/RenderTargetBlendState.ts","../src/shader/state/BlendState.ts","../src/shader/state/DepthState.ts","../src/shader/state/RasterState.ts","../src/shader/state/StencilState.ts","../src/shader/state/RenderState.ts","../src/material/Material.ts","../src/RenderPipeline/ClassPool.ts","../src/RenderPipeline/RenderElement.ts","../src/RenderPipeline/MeshRenderElement.ts","../src/RenderPipeline/RenderContext.ts","../src/RenderPipeline/SpriteElement.ts","../src/RenderPipeline/SpriteMaskElement.ts","../src/2d/enums/SpriteMaskInteraction.ts","../src/Renderer.ts","../src/base/StaticInterfaceImplement.ts","../src/2d/assembler/SimpleSpriteAssembler.ts","../src/2d/data/RenderData2D.ts","../src/2d/enums/SpriteMaskLayer.ts","../src/2d/enums/SpriteModifyFlags.ts","../src/2d/sprite/SpriteMask.ts","../src/graphic/enums/VertexElementFormat.ts","../src/graphic/enums/BufferUsage.ts","../src/graphic/enums/IndexFormat.ts","../src/graphic/BufferUtil.ts","../src/graphic/VertexElement.ts","../src/graphic/enums/BufferBindFlag.ts","../src/graphic/enums/SetDataOptions.ts","../src/graphic/Buffer.ts","../src/graphic/enums/MeshTopology.ts","../src/graphic/IndexBufferBinding.ts","../src/graphic/SubMesh.ts","../src/graphic/Mesh.ts","../src/graphic/VertexBufferBinding.ts","../src/mesh/BlendShapeManager.ts","../src/mesh/enums/VertexAttribute.ts","../src/mesh/ModelMesh.ts","../src/mesh/Skin.ts","../src/mesh/MeshRenderer.ts","../src/Utils.ts","../src/mesh/SkinnedMeshRenderer.ts","../src/mesh/PrimitiveMesh.ts","../src/mesh/BufferMesh.ts","../src/mesh/BlendShapeFrame.ts","../src/mesh/BlendShape.ts","../src/RenderPipeline/Basic2DBatcher.ts","../src/RenderPipeline/SpriteMaskBatcher.ts","../src/RenderPipeline/SpriteMaskManager.ts","../src/RenderPipeline/TextRenderElement.ts","../src/enums/BackgroundMode.ts","../src/enums/BackgroundTextureFillMode.ts","../src/sky/Sky.ts","../src/Background.ts","../src/enums/FogMode.ts","../src/lighting/enums/DiffuseMode.ts","../src/lighting/AmbientLight.ts","../src/Scene.ts","../src/SceneManager.ts","../src/shader/ShaderPool.ts","../src/shader/ShaderProgramPool.ts","../src/Engine.ts","../src/Script.ts","../src/RenderPipeline/SpriteBatcher.ts","../src/RenderPipeline/RenderQueue.ts","../src/VirtualCamera.ts","../src/shadow/ShadowSliceData.ts","../src/shadow/ShadowUtils.ts","../src/shadow/CascadedShadowCasterPass.ts","../src/RenderPipeline/RenderPass.ts","../src/RenderPipeline/BasicRenderPipeline.ts","../src/Camera.ts","../src/asset/request.ts","../src/asset/Loader.ts","../src/asset/AssetType.ts","../src/material/enums/BlendMode.ts","../src/material/enums/RenderFace.ts","../src/material/BaseMaterial.ts","../src/material/BlinnPhongMaterial.ts","../src/material/enums/TextureCoordinate.ts","../src/material/PBRBaseMaterial.ts","../src/material/PBRMaterial.ts","../src/material/PBRSpecularMaterial.ts","../src/material/UnlitMaterial.ts","../src/2d/enums/TextAlignment.ts","../src/2d/enums/TextOverflow.ts","../src/2d/enums/FontStyle.ts","../src/2d/atlas/SpriteAtlas.ts","../src/2d/enums/SpriteDrawMode.ts","../src/2d/sprite/Sprite.ts","../src/2d/assembler/SlicedSpriteAssembler.ts","../src/2d/sprite/SpriteRenderer.ts","../src/2d/text/CharRenderData.ts","../src/2d/text/CharRenderDataPool.ts","../src/2d/text/TextUtils.ts","../src/2d/text/TextRenderer.ts","../src/animation/internal/animationCurveOwner/assembler/UniversalAnimationCurveOwnerAssembler.ts","../src/animation/internal/animationCurveOwner/AnimationCurveOwner.ts","../src/animation/internal/animationCurveOwner/assembler/PositionAnimationCurveOwnerAssembler.ts","../src/animation/internal/animationCurveOwner/assembler/RotationAnimationCurveOwnerAssembler.ts","../src/animation/internal/animationCurveOwner/assembler/ScaleAnimationCurveOwnerAssembler.ts","../src/animation/internal/animationCurveOwner/assembler/BlendShapeWeightsAnimationCurveOwnerAssembler.ts","../src/animation/AnimationClipCurveBinding.ts","../src/animation/AnimationEvent.ts","../src/animation/AnimationClip.ts","../src/animation/enums/InterpolationType.ts","../src/animation/animationCurve/AnimationCurve.ts","../src/animation/animationCurve/AnimationArrayCurve.ts","../src/animation/animationCurve/AnimationBoolCurve.ts","../src/animation/animationCurve/AnimationColorCurve.ts","../src/animation/animationCurve/AnimationFloatArrayCurve.ts","../src/animation/animationCurve/AnimationFloatCurve.ts","../src/animation/animationCurve/AnimationQuaternionCurve.ts","../src/animation/animationCurve/AnimationVector2Curve.ts","../src/animation/animationCurve/AnimationVector3Curve.ts","../src/animation/animationCurve/AnimationVector4Curve.ts","../src/animation/enums/AnimatorCullingMode.ts","../src/animation/enums/AnimatorLayerBlendingMode.ts","../src/animation/enums/AnimatorStatePlayState.ts","../src/animation/enums/LayerState.ts","../src/animation/internal/AnimationEventHandler.ts","../src/animation/AnimatorTransition.ts","../src/animation/enums/WrapMode.ts","../src/animation/internal/AnimatorStatePlayData.ts","../src/animation/internal/AnimatorLayerData.ts","../src/animation/internal/AnimatorStateData.ts","../src/animation/Animator.ts","../src/animation/AnimatorController.ts","../src/animation/AnimatorControllerLayer.ts","../src/animation/StateMachineScript.ts","../src/animation/AnimatorState.ts","../src/animation/AnimatorStateMachine.ts","../src/animation/enums/AnimatorConditionMode.ts","../src/animation/Keyframe.ts","../src/sky/SkyBoxMaterial.ts","../src/particle/ParticleRenderer.ts","../src/trail/TrailMaterial.ts","../src/trail/TrailRenderer.ts","../src/env-probe/Probe.ts","../src/env-probe/CubeProbe.ts"],"sourcesContent":["/**\n * The platform (including operating system and hardware) is running on.\n */\nexport enum Platform {\n  /** Android platform. */\n  Android,\n  /** IPhone platform. */\n  IPhone,\n  /** IPad platform. */\n  IPad,\n  /** Mac platform. */\n  Mac,\n  /** Unknown platform. */\n  Unknown\n}\n","export function _assert_this_initialized(self) {\n    if (self === void 0) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n\n    return self;\n}\nexport { _assert_this_initialized as _ };\n","function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n\n        if (\"value\" in descriptor) descriptor.writable = true;\n\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\nexport function _create_class(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n\n    return Constructor;\n}\nexport { _create_class as _ };\n","export function _set_prototype_of(o, p) {\n    _set_prototype_of = Object.setPrototypeOf || function setPrototypeOf(o, p) {\n        o.__proto__ = p;\n\n        return o;\n    };\n\n    return _set_prototype_of(o, p);\n}\nexport { _set_prototype_of as _ };\n","import { _set_prototype_of } from \"./_set_prototype_of.js\";\n\nexport function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });\n\n    if (superClass) _set_prototype_of(subClass, superClass);\n}\nexport { _inherits as _ };\n","/**\n * Common utility methods for math operations.\n */\nexport class MathUtil {\n  /** The value for which all absolute numbers smaller than are considered equal to zero. */\n  static readonly zeroTolerance: number = 1e-6;\n  /** The conversion factor that radian to degree. */\n  static readonly radToDegreeFactor: number = 180 / Math.PI;\n  /** The conversion factor that degree to radian. */\n  static readonly degreeToRadFactor: number = Math.PI / 180;\n\n  /**\n   * Clamps the specified value.\n   * @param v - The specified value\n   * @param min - The min value\n   * @param max - The max value\n   * @returns The result of clamping a value between min and max\n   */\n  static clamp(v: number, min: number, max: number): number {\n    return Math.max(min, Math.min(max, v));\n  }\n\n  /**\n   * Checks if a and b are almost equals.\n   * The absolute value of the difference between a and b is close to zero.\n   * @param a - The left value to compare\n   * @param b - The right value to compare\n   * @returns True if a almost equal to b, false otherwise\n   */\n  static equals(a: number, b: number): boolean {\n    return Math.abs(a - b) <= MathUtil.zeroTolerance;\n  }\n\n  /**\n   * Determines whether the specified v is pow2.\n   * @param v - The specified v\n   * @returns True if the specified v is pow2, false otherwise\n   */\n  static isPowerOf2(v: number): boolean {\n    return (v & (v - 1)) === 0;\n  }\n\n  /**\n   * Modify the specified r from radian to degree.\n   * @param r - The specified r\n   * @returns The degree value\n   */\n  static radianToDegree(r: number): number {\n    return r * MathUtil.radToDegreeFactor;\n  }\n\n  /**\n   * Modify the specified d from degree to radian.\n   * @param d - The specified d\n   * @returns The radian value\n   */\n  static degreeToRadian(d: number): number {\n    return d * MathUtil.degreeToRadFactor;\n  }\n}\n","import { IClone } from \"./IClone\";\nimport { ICopy } from \"./ICopy\";\nimport { MathUtil } from \"./MathUtil\";\n\n/**\n * Describes a color in the from of RGBA (in order: R, G, B, A).\n */\nexport class Color implements IClone<Color>, ICopy<ColorLike, Color> {\n  /**\n   * Modify a value from the gamma space to the linear space.\n   * @param value - The value in gamma space\n   * @returns The value in linear space\n   */\n  static gammaToLinearSpace(value: number): number {\n    // https://www.khronos.org/registry/OpenGL/extensions/EXT/EXT_framebuffer_sRGB.txt\n    // https://www.khronos.org/registry/OpenGL/extensions/EXT/EXT_texture_sRGB_decode.txt\n\n    if (value <= 0.0) return 0.0;\n    else if (value <= 0.04045) return value / 12.92;\n    else if (value < 1.0) return Math.pow((value + 0.055) / 1.055, 2.4);\n    else return Math.pow(value, 2.4);\n  }\n\n  /**\n   * Modify a value from the linear space to the gamma space.\n   * @param value - The value in linear space\n   * @returns The value in gamma space\n   */\n  static linearToGammaSpace(value: number): number {\n    // https://www.khronos.org/registry/OpenGL/extensions/EXT/EXT_framebuffer_sRGB.txt\n    // https://www.khronos.org/registry/OpenGL/extensions/EXT/EXT_texture_sRGB_decode.txt\n\n    if (value <= 0.0) return 0.0;\n    else if (value < 0.0031308) return 12.92 * value;\n    else if (value < 1.0) return 1.055 * Math.pow(value, 0.41666) - 0.055;\n    else return Math.pow(value, 0.41666);\n  }\n\n  /**\n   * Determines whether the specified colors are equals.\n   * @param left - The first color to compare\n   * @param right - The second color to compare\n   * @returns True if the specified colors are equals, false otherwise\n   */\n  static equals(left: Color, right: Color): boolean {\n    return (\n      MathUtil.equals(left._r, right._r) &&\n      MathUtil.equals(left._g, right._g) &&\n      MathUtil.equals(left._b, right._b) &&\n      MathUtil.equals(left._a, right._a)\n    );\n  }\n\n  /**\n   * Determines the sum of two colors.\n   * @param left - The first color to add\n   * @param right - The second color to add\n   * @param out - The sum of two colors\n   * @returns The added color\n   */\n  static add(left: Color, right: Color, out: Color): Color {\n    out._r = left._r + right._r;\n    out._g = left._g + right._g;\n    out._b = left._b + right._b;\n    out._a = left._a + right._a;\n    out._onValueChanged && out._onValueChanged();\n\n    return out;\n  }\n\n  /**\n   * Determines the difference between two colors.\n   * @param left - The first color to subtract\n   * @param right - The second color to subtract\n   * @param out - The difference between two colors\n   */\n  static subtract(left: Color, right: Color, out: Color): void {\n    out._r = left._r - right._r;\n    out._g = left._g - right._g;\n    out._b = left._b - right._b;\n    out._a = left._a - right._a;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Scale a color by the given value.\n   * @param left - The color to scale\n   * @param s - The amount by which to scale the color\n   * @param out - The scaled color\n   * @returns The scaled color\n   */\n  static scale(left: Color, s: number, out: Color): Color {\n    out._r = left._r * s;\n    out._g = left._g * s;\n    out._b = left._b * s;\n    out._a = left._a * s;\n    out._onValueChanged && out._onValueChanged();\n\n    return out;\n  }\n\n  /**\n   * Performs a linear interpolation between two color.\n   * @param start - The first color\n   * @param end - The second color\n   * @param t - The blend amount where 0 returns start and 1 end\n   * @param out - The result of linear blending between two color\n   */\n  static lerp(start: Color, end: Color, t: number, out: Color): Color {\n    const { _r, _g, _b, _a } = start;\n    out._r = _r + (end._r - _r) * t;\n    out._g = _g + (end._g - _g) * t;\n    out._b = _b + (end._b - _b) * t;\n    out._a = _a + (end._a - _a) * t;\n    out._onValueChanged && out._onValueChanged();\n\n    return out;\n  }\n\n  /** @internal */\n  _r: number;\n  /** @internal */\n  _g: number;\n  /** @internal */\n  _b: number;\n  /** @internal */\n  _a: number;\n  /** @internal */\n  _onValueChanged: () => void = null;\n\n  /**\n   * The red component of the color, 0~1.\n   */\n  public get r(): number {\n    return this._r;\n  }\n\n  public set r(value: number) {\n    this._r = value;\n    this._onValueChanged && this._onValueChanged();\n  }\n\n  /**\n   * The green component of the color, 0~1.\n   */\n  public get g(): number {\n    return this._g;\n  }\n\n  public set g(value: number) {\n    this._g = value;\n    this._onValueChanged && this._onValueChanged();\n  }\n\n  /**\n   * The blue component of the color, 0~1.\n   */\n  public get b(): number {\n    return this._b;\n  }\n\n  public set b(value: number) {\n    this._b = value;\n    this._onValueChanged && this._onValueChanged();\n  }\n\n  /**\n   * The alpha component of the color, 0~1.\n   */\n  public get a(): number {\n    return this._a;\n  }\n\n  public set a(value: number) {\n    this._a = value;\n    this._onValueChanged && this._onValueChanged();\n  }\n\n  /**\n   * Constructor of Color.\n   * @param r - The red component of the color\n   * @param g - The green component of the color\n   * @param b - The blue component of the color\n   * @param a - The alpha component of the color\n   */\n  constructor(r: number = 1, g: number = 1, b: number = 1, a: number = 1) {\n    this._r = r;\n    this._g = g;\n    this._b = b;\n    this._a = a;\n  }\n\n  /**\n   * Set the value of this color.\n   * @param r - The red component of the color\n   * @param g - The green component of the color\n   * @param b - The blue component of the color\n   * @param a - The alpha component of the color\n   * @returns This color.\n   */\n  set(r: number, g: number, b: number, a: number): Color {\n    this._r = r;\n    this._g = g;\n    this._b = b;\n    this._a = a;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Determines the sum of this color and the specified color.\n   * @param color - The specified color\n   * @returns The added color\n   */\n  add(color: Color): Color {\n    this._r += color._r;\n    this._g += color._g;\n    this._b += color._b;\n    this._a += color._a;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Scale this color by the given value.\n   * @param s - The amount by which to scale the color\n   * @returns The scaled color\n   */\n  scale(s: number): Color {\n    this._r *= s;\n    this._g *= s;\n    this._b *= s;\n    this._a *= s;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Creates a clone of this color.\n   * @returns A clone of this color\n   */\n  clone(): Color {\n    const ret = new Color(this._r, this._g, this._b, this._a);\n    return ret;\n  }\n\n  /**\n   * Copy from color like object.\n   * @param source - Color like object.\n   * @returns This vector\n   */\n  copyFrom(source: ColorLike): Color {\n    this._r = source.r;\n    this._g = source.g;\n    this._b = source.b;\n    this._a = source.a;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Modify components (r, g, b) of this color from gamma space to linear space.\n   * @param out - The color in linear space\n   * @returns The color in linear space\n   */\n  toLinear(out: Color): Color {\n    out._r = Color.gammaToLinearSpace(this._r);\n    out._g = Color.gammaToLinearSpace(this._g);\n    out._b = Color.gammaToLinearSpace(this._b);\n    this._onValueChanged && this._onValueChanged();\n    return out;\n  }\n\n  /**\n   * Modify components (r, g, b) of this color from linear space to gamma space.\n   * @param out - The color in gamma space\n   * @returns The color in gamma space\n   */\n  toGamma(out: Color): Color {\n    out._r = Color.linearToGammaSpace(this._r);\n    out._g = Color.linearToGammaSpace(this._g);\n    out._b = Color.linearToGammaSpace(this._b);\n    this._onValueChanged && this._onValueChanged();\n    return out;\n  }\n\n  /**\n   * Gets the brightness.\n   * @returns The Hue-Saturation-Brightness (HSB) saturation for this\n   */\n  getBrightness(): number {\n    const r = this.r;\n    const g = this.g;\n    const b = this.b;\n\n    let max = r;\n    let min = r;\n    if (g > max) max = g;\n    if (b > max) max = b;\n\n    if (g < min) min = g;\n    if (b < min) min = b;\n\n    return (max + min) / 2;\n  }\n\n  /**\n   * Serialize this color to a JSON representation.\n   * @return A JSON representation of this color\n   */\n  toJSON(): ColorLike {\n    return {\n      r: this._r,\n      g: this._g,\n      b: this._b,\n      a: this._a\n    };\n  }\n}\n\ninterface ColorLike {\n  /** {@inheritDoc Color._r} */\n  r: number;\n  /** {@inheritDoc Color._g} */\n  g: number;\n  /** {@inheritDoc Color._b} */\n  b: number;\n  /** {@inheritDoc Color._a} */\n  a: number;\n}\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.push(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.push(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","export function _instanceof(left, right) {\n    if (right != null && typeof Symbol !== \"undefined\" && right[Symbol.hasInstance]) {\n        return !!right[Symbol.hasInstance](left);\n    } else return left instanceof right;\n}\nexport { _instanceof as _ };\n","/**\n * Clone mode.\n */\nexport enum CloneMode {\n  /** Ignore clone. */\n  Ignore,\n  /** Assignment clone. */\n  Assignment,\n  /** Shallow clone. */\n  Shallow,\n  /** Deep clone. */\n  Deep\n}\n","import { IClone } from \"@galacean/engine-design\";\nimport { CloneMode } from \"./enums/CloneMode\";\n\ntype TypeArray =\n  | Uint8Array\n  | Uint16Array\n  | Uint32Array\n  | Int8Array\n  | Int16Array\n  | Int32Array\n  | Float32Array\n  | Float64Array;\n\n/**\n * Property decorator, ignore the property when cloning.\n */\nexport function ignoreClone(target: Object, propertyKey: string): void {\n  CloneManager.registerCloneMode(target, propertyKey, CloneMode.Ignore);\n}\n\n/**\n * Property decorator, assign value to the property when cloning.\n *\n * @remarks\n * If it's a primitive type, the value will be copied.\n * If it's a class type, the reference will be copied.\n */\nexport function assignmentClone(target: Object, propertyKey: string): void {\n  CloneManager.registerCloneMode(target, propertyKey, CloneMode.Assignment);\n}\n\n/**\n * Property decorator, shallow clone the property when cloning.\n * After cloning, it will keep its own reference independent, and use the method of assignment to clone all its internal properties.\n * if the internal property is a primitive type, the value will be copied, if the internal property is a reference type, its reference address will be copied.。\n *\n * @remarks\n * Applicable to Object, Array, TypedArray and Class types.\n */\nexport function shallowClone(target: Object, propertyKey: string): void {\n  CloneManager.registerCloneMode(target, propertyKey, CloneMode.Shallow);\n}\n\n/**\n * Property decorator, deep clone the property when cloning.\n * After cloning, it will maintain its own reference independence, and all its internal deep properties will remain completely independent.\n *\n * @remarks\n * Applicable to Object, Array, TypedArray and Class types.\n * If Class is encountered during the deep cloning process, the custom cloning function of the object will be called first.\n * Custom cloning requires the object to implement the IClone interface.\n */\nexport function deepClone(target: Object, propertyKey: string): void {\n  CloneManager.registerCloneMode(target, propertyKey, CloneMode.Deep);\n}\n\n/**\n * @internal\n * Clone manager.\n */\nexport class CloneManager {\n  /** @internal */\n  static _subCloneModeMap = new Map<Object, Object>();\n  /** @internal */\n  static _cloneModeMap = new Map<Object, Object>();\n\n  private static _objectType = Object.getPrototypeOf(Object);\n\n  /**\n   * Register clone mode.\n   * @param target - Clone target\n   * @param propertyKey - Clone property name\n   * @param mode - Clone mode\n   */\n  static registerCloneMode(target: Object, propertyKey: string, mode: CloneMode): void {\n    let targetMap = CloneManager._subCloneModeMap.get(target.constructor);\n    if (!targetMap) {\n      targetMap = Object.create(null);\n      CloneManager._subCloneModeMap.set(target.constructor, targetMap);\n    }\n    targetMap[propertyKey] = mode;\n  }\n\n  /**\n   * Get the clone mode according to the prototype chain.\n   */\n  static getCloneMode(type: Function): Object {\n    let cloneModes = CloneManager._cloneModeMap.get(type);\n    if (!cloneModes) {\n      cloneModes = Object.create(null);\n      CloneManager._cloneModeMap.set(type, cloneModes);\n      const objectType = CloneManager._objectType;\n      const cloneModeMap = CloneManager._subCloneModeMap;\n      while (type !== objectType) {\n        const subCloneModes = cloneModeMap.get(type);\n        if (subCloneModes) {\n          Object.assign(cloneModes, subCloneModes);\n        }\n        type = Object.getPrototypeOf(type);\n      }\n    }\n    return cloneModes;\n  }\n\n  /**\n   * Deep clone the object.\n   * @param source - Clone source\n   * @param target - Clone target\n   */\n  static deepCloneObject(source: Object, target: Object): void {\n    const type = source.constructor;\n    switch (type) {\n      case Uint8Array:\n      case Uint16Array:\n      case Uint32Array:\n      case Int8Array:\n      case Int16Array:\n      case Int32Array:\n      case Float32Array:\n      case Float64Array:\n        // Type array clone.\n        (<TypeArray>target).set(<TypeArray>source);\n        break;\n      case Array:\n        // Array clone.\n        for (let i = 0, n = (<[]>source).length; i < n; i++) {\n          CloneManager._deepCloneObjectItem(source, target, i);\n        }\n        break;\n      default:\n        const customSource = <IClone>source;\n        if (customSource.clone && customSource.cloneTo) {\n          // Custom clone.\n          customSource.cloneTo(target);\n        } else {\n          // Object or other class not implements custom clone.\n          const keys = Object.keys(source);\n          for (let i = 0, n = keys.length; i < n; i++) {\n            CloneManager._deepCloneObjectItem(source, target, keys[i]);\n          }\n        }\n    }\n  }\n\n  private static _deepCloneObjectItem(source: object, target: object, k: number | string): void {\n    const sourceItem = source[k];\n    if (sourceItem instanceof Object) {\n      const itemType = (<Object>sourceItem).constructor;\n      switch (itemType) {\n        case Uint8Array:\n        case Uint16Array:\n        case Uint32Array:\n        case Int8Array:\n        case Int16Array:\n        case Int32Array:\n        case Float32Array:\n        case Float64Array:\n          // Type array clone.\n          const sourceTypeArrayItem = <TypeArray>sourceItem;\n          let targetTypeArrayItem = <TypeArray>target[k];\n          if (targetTypeArrayItem == null) {\n            target[k] = sourceTypeArrayItem.slice();\n          } else {\n            targetTypeArrayItem.set(sourceTypeArrayItem);\n          }\n          break;\n        case Array:\n          // Array clone.\n          const sourceArrayItem = <[]>sourceItem;\n          let targetArrayItem = <[]>target[k];\n          if (targetArrayItem == null) {\n            target[k] = new Array(sourceArrayItem.length);\n          } else {\n            targetArrayItem.length = sourceArrayItem.length;\n          }\n          CloneManager.deepCloneObject(sourceArrayItem, targetArrayItem);\n          break;\n        default:\n          if (sourceItem.clone && sourceItem.cloneTo) {\n            // Custom clone.\n            let sourceCustomItem = <IClone>sourceItem;\n            let targetCustomItem = <IClone>target[k];\n            if (targetCustomItem) {\n              sourceCustomItem.cloneTo(targetCustomItem);\n            } else {\n              target[k] = sourceCustomItem.clone();\n            }\n          } else {\n            // Object or other class not implements custom clone.\n            let targetItem = <Object>target[k];\n            targetItem == null && (target[k] = targetItem = new sourceItem.constructor());\n            CloneManager.deepCloneObject(sourceItem, targetItem);\n            break;\n          }\n      }\n    } else {\n      // Null or undefined and primitive type.\n      target[k] = sourceItem;\n    }\n  }\n}\n","import { ignoreClone } from \"../clone/CloneManager\";\nimport { Engine } from \"../Engine\";\n\n/**\n * EngineObject.\n */\nexport abstract class EngineObject {\n  private static _instanceIdCounter: number = 0;\n\n  /** Engine unique id. */\n  @ignoreClone\n  readonly instanceId: number = ++EngineObject._instanceIdCounter;\n\n  @ignoreClone\n  protected _engine: Engine;\n  protected _destroyed: boolean = false;\n\n  /**\n   * Get the engine which the object belongs.\n   */\n  get engine(): Engine {\n    return this._engine;\n  }\n\n  /**\n   * Whether it has been destroyed.\n   */\n  get destroyed(): boolean {\n    return this._destroyed;\n  }\n\n  constructor(engine: Engine) {\n    this._engine = engine;\n  }\n\n  /**\n   * Destroy self.\n   */\n  destroy(): void {\n    if (this._destroyed) return;\n\n    this._engine.resourceManager?._deleteAsset(this);\n    this._destroyed = true;\n  }\n}\n","import { EngineObject } from \"../base/EngineObject\";\nimport { Engine } from \"../Engine\";\nimport { IRefObject } from \"./IRefObject\";\n\n/**\n * The base class of assets, with reference counting capability.\n */\nexport abstract class RefObject extends EngineObject implements IRefObject {\n  /** Whether to ignore the garbage collection check, if it is true, it will not be affected by ResourceManager.gc(). */\n  isGCIgnored: boolean = false;\n\n  private _refCount: number = 0;\n\n  /**\n   * Counted by valid references.\n   */\n  get refCount(): number {\n    return this._refCount;\n  }\n\n  protected constructor(engine: Engine) {\n    super(engine);\n    engine.resourceManager._addRefObject(this.instanceId, this);\n  }\n\n  /**\n   * Destroy self.\n   * @param force - Whether to force the destruction, if it is false, refCount = 0 can be released successfully.\n   * @returns Whether the release was successful.\n   */\n  destroy(force: boolean = false): boolean {\n    if (this._destroyed) return true;\n    if (!force && this._refCount !== 0) return false;\n    const resourceManager = this._engine.resourceManager;\n    // resourceManager maybe null,because engine has destroyed.\n    // TODO:the right way to fix this is to ensure destroy all when call engine.destroy,thus don't need to add this project.\n    if (resourceManager) {\n      super.destroy();\n      resourceManager._deleteRefObject(this.instanceId);\n    }\n\n    const refCount = this._getRefCount();\n    if (refCount > 0) {\n      this._addRefCount(-refCount);\n    }\n    this._engine = null;\n    this._onDestroy();\n    \n    return true;\n  }\n\n  /**\n   * @internal\n   */\n  _getRefCount(): number {\n    return this._refCount;\n  }\n\n  /**\n   * @internal\n   */\n  _addRefCount(value: number): void {\n    this._refCount += value;\n  }\n\n  /**\n   * @internal\n   */\n  _addToResourceManager(path: string): void {\n    this._engine.resourceManager._addAsset(path, this);\n  }\n\n  /**\n   * Called when the resource is destroyed.\n   * Subclasses can override this function.\n   */\n  protected abstract _onDestroy(): void;\n}\n","/**\n * Render buffer depth format enumeration.\n */\nexport enum RenderBufferDepthFormat {\n  /** Render to depth buffer,engine will automatically select the supported precision. */\n  Depth,\n  /** Render to depth stencil buffer, engine will automatically select the supported precision. */\n  DepthStencil,\n  /** Render to stencil buffer. */\n  Stencil,\n\n  /** Force 16-bit depth buffer. */\n  Depth16,\n  /** Force 24-bit depth buffer. */\n  Depth24,\n  /** Force 32-bit depth buffer. */\n  Depth32,\n  /** Force 16-bit depth + 8-bit stencil buffer. */\n  Depth24Stencil8,\n  /** Force 32-bit depth + 8-bit stencil buffer. */\n  Depth32Stencil8\n}\n","/**\n * Define the face of the cube texture.\n */\nexport enum TextureCubeFace {\n  /** Positive X face for a cube-mapped texture. */\n  PositiveX = 0,\n  /** Negative X face for a cube-mapped texture. */\n  NegativeX = 1,\n  /** Positive Y face for a cube-mapped texture. */\n  PositiveY = 2,\n  /** Negative Y face for a cube-mapped texture. */\n  NegativeY = 3,\n  /** Positive Z face for a cube-mapped texture. */\n  PositiveZ = 4,\n  /** Negative Z face for a cube-mapped texture. */\n  NegativeZ = 5\n}\n","/**\n * Define the compare mode of depth texture.\n */\nexport enum TextureDepthCompareFunction {\n  /** never pass. */\n  Never,\n  /** pass if the compare value is less than the sample value. */\n  Less,\n  /** pass if the compare value equals the sample value. */\n  Equal,\n  /** pass if the compare value is less than or equal to the sample value. */\n  LessEqual,\n  /** pass if the compare value is greater than the sample value. */\n  Greater,\n  /** pass if the compare value is not equal to the sample value. */\n  NotEqual,\n  /** pass if the compare value is greater than or equal to the sample value. */\n  GreaterEqual,\n  /** always pass. */\n  Always\n}\n","/**\n * The filter mode of the texture.\n */\nexport enum TextureFilterMode {\n  /** Point filtering. */\n  Point = 0,\n  /** Bilinear filtering. */\n  Bilinear = 1,\n  /** Trilinear filtering. */\n  Trilinear = 2\n}\n","/**\n * Texture format enumeration.\n */\nexport enum TextureFormat {\n  /** RGB format,8 bits per channel. */\n  R8G8B8,\n  /** RGBA format,8 bits per channel. */\n  R8G8B8A8,\n  /** RGBA format,4 bits per channel. */\n  R4G4B4A4,\n  /** RGBA format,5 bits in R channel,5 bits in G channel,5 bits in B channel, 1 bit in A channel. */\n  R5G5B5A1,\n  /** RGB format,5 bits in R channel,6 bits in G channel,5 bits in B channel. */\n  R5G6B5,\n  /** Transparent format,8 bits. */\n  Alpha8,\n  /** Luminance/alpha in RGB channel, alpha in A channel. */\n  LuminanceAlpha,\n  /** RGBA format,16 bits per channel. */\n  R16G16B16A16,\n  /** RGBA format,32 bits per channel. */\n  R32G32B32A32,\n\n  /** RGB compressed format。*/\n  DXT1,\n  /** RGBA compressed format。*/\n  DXT5,\n  /** RGB compressed format,4 bits per pixel。*/\n  ETC1_RGB,\n  /** RGB compressed format,4 bits per pixel。*/\n  ETC2_RGB,\n  /** RGBA compressed format,5 bits per pixel,4 bit in RGB, 1 bit in A. */\n  ETC2_RGBA5,\n  /** RGB compressed format,8 bits per pixel. */\n  ETC2_RGBA8,\n  /** RGB compressed format,2 bits per pixel. */\n  PVRTC_RGB2,\n  /** RGBA compressed format,2 bits per pixel. */\n  PVRTC_RGBA2,\n  /** RGB compressed format,4 bits per pixel. */\n  PVRTC_RGB4,\n  /** RGBA compressed format,4 bits per pixel. */\n  PVRTC_RGBA4,\n  /** RGB(A) compressed format,128 bits per 4x4 pixel block. */\n  ASTC_4x4,\n  /** RGB(A) compressed format,128 bits per 5x5 pixel block. */\n  ASTC_5x5,\n  /** RGB(A) compressed format,128 bits per 6x6 pixel block. */\n  ASTC_6x6,\n  /** RGB(A) compressed format,128 bits per 8x8 pixel block. */\n  ASTC_8x8,\n  /** RGB(A) compressed format,128 bits per 10x10 pixel block. */\n  ASTC_10x10,\n  /** RGB(A) compressed format,128 bits per 12x12 pixel block. */\n  ASTC_12x12,\n\n  /** Automatic depth format,engine will automatically select the supported precision. */\n  Depth,\n  /** Automatic depth setncil format, engine will automatically select the supported precision. */\n  DepthStencil,\n  /** 16-bit depth format. */\n  Depth16,\n  /** 24-bit depth format. */\n  Depth24,\n  /** 32-bit depth format. */\n  Depth32,\n  /** 16-bit depth + 8-bit stencil format. */\n  Depth24Stencil8,\n  /** 32-bit depth + 8-bit stencil format. */\n  Depth32Stencil8\n}\n","/**\n * Wrapping mode of the texture.\n */\nexport enum TextureWrapMode {\n  /** Clamping mode. use the color of edge pixels beyond the texture boundary. */\n  Clamp = 0,\n  /** Repeating mode. tiling will be repeated if it exceeds the texture boundary. */\n  Repeat = 1,\n  /** Mirror repeat mode. tiling will be mirrored and repeated if it exceeds the texture boundary. */\n  Mirror = 2\n}\n","import { EventDispatcher } from \"./EventDispatcher\";\n\nexport type Listener = ((e: Event) => any) & { once?: boolean };\n\n/** Event Object. * @class */\nexport class Event {\n  get propagationStopped(): boolean {\n    return this._propagationStopped;\n  }\n\n  get target(): EventDispatcher {\n    return this._target;\n  }\n\n  set target(t) {\n    this._target = t;\n  }\n\n  get timeStamp(): number {\n    return this._timeStamp;\n  }\n\n  get currentTarget(): EventDispatcher {\n    return this._currentTarget;\n  }\n\n  set currentTarget(t) {\n    this._currentTarget = t;\n  }\n\n  get bubbles(): boolean {\n    return this._bubbles;\n  }\n\n  get type(): string | number {\n    return this._type;\n  }\n\n  public data: any;\n\n  private _timeStamp: number;\n\n  private _target: EventDispatcher;\n\n  private _currentTarget: any;\n\n  private _bubbles: boolean;\n\n  private _propagationStopped: boolean;\n\n  private _type: string | number;\n\n  constructor(type: string | number, target: EventDispatcher = null, data: any = {}, bubbles: boolean = true) {\n    this._timeStamp = new Date().getTime();\n    this._target = target;\n    this.data = data;\n    this._currentTarget = null;\n    this._bubbles = bubbles;\n    this._propagationStopped = false;\n    this._type = type;\n  }\n\n  public stopPropagation(): void {\n    this._propagationStopped = true;\n  }\n}\n","import { Event } from \"./Event\";\n\n/**\n * EventDispatcher, which can be inherited as a base class.\n */\nexport class EventDispatcher {\n  private _events: Record<string, EventData | EventData[]> = Object.create(null);\n  private _eventCount: number = 0;\n  private _dispatchingListeners: EventData[] = [];\n\n  /**\n   * Determine whether there is event listening.\n   * @param event - Event name\n   * @returns Returns whether there is a corresponding event\n   */\n  hasEvent(event: string): boolean {\n    return this._events[event] != null;\n  }\n\n  /**\n   * Returns the names of all registered events.\n   * @returns All event names\n   */\n  eventNames(): string[] {\n    if (this._eventCount === 0) return [];\n    return Object.keys(this._events);\n  }\n\n  /**\n   * Returns the number of listeners with the specified event name.\n   * @param event - Event name\n   * @returns The count of listeners\n   */\n  listenerCount(event: string): number {\n    const listeners = this._events[event];\n\n    if (!listeners) return 0;\n    if (Array.isArray(listeners)) return listeners.length;\n    return 1;\n  }\n\n  /**\n   * Dispatch the event with the specified event name.\n   * @param event - Event name\n   * @param data - Data\n   * @returns - Whether the dispatching is successful\n   */\n  dispatch(event: string, data?: any): boolean {\n    if (!this._events[event]) {\n      return false;\n    }\n\n    const listeners = this._events[event];\n\n    if (Array.isArray(listeners)) {\n      const count = listeners.length;\n\n      // cloning list to avoid structure breaking\n      const dispatchingListeners = this._dispatchingListeners;\n      dispatchingListeners.length = count;\n      for (let i = 0; i < count; i++) {\n        dispatchingListeners[i] = listeners[i];\n      }\n\n      for (let i = 0; i < count; i++) {\n        const listener = dispatchingListeners[i];\n        if (!listener.destroyed) {\n          if (listener.once) this.off(event, listener.fn);\n          listener.fn(data);\n        }\n      }\n\n      // remove hooked function to avoid gc problem\n      dispatchingListeners.length = 0;\n    } else {\n      if (listeners.once) this.off(event, listeners.fn);\n      listeners.fn(data);\n    }\n    return true;\n  }\n\n  /**\n   * Add a listener/\n   * @param event - Event name\n   * @param fn - Function\n   * @returns This\n   */\n  on(event: string, fn: Function): EventDispatcher {\n    return this.addEventListener(event, fn);\n  }\n\n  /**\n   * Add a one-time listener.\n   * @param event - Event name\n   * @param fn - Function\n   * @returns This\n   */\n  once(event: string, fn: Function): EventDispatcher {\n    return this.addEventListener(event, fn, true);\n  }\n\n  /**\n   * @deprecated Use `on/once` instead.\n   * Add a listener function with the specified event name.\n   * @param event - Event name\n   * @param fn - Function\n   * @param once - Is it a one-time listener\n   * @returns this\n   */\n  addEventListener(event: string, fn: Function, once?: boolean): EventDispatcher {\n    const listener = { fn, once };\n    const events = this._events;\n    const element = events[event];\n\n    if (!element) {\n      events[event] = listener;\n      this._eventCount++;\n    } else if (Array.isArray(element)) {\n      element.push(listener);\n    } else {\n      events[event] = [element, listener];\n    }\n    return this;\n  }\n\n  /**\n   * Remove the event listener(s) of the specified event name.\n   * @param event - Event name\n   * @param fn - Function, If is undefined, delete all corresponding event listeners.\n   */\n  off(event: string, fn?: Function): EventDispatcher {\n    if (!this._events[event]) return this;\n    if (!fn) {\n      this._clearEvent(event);\n      return this;\n    }\n\n    const listeners = this._events[event];\n    const isArray = Array.isArray(listeners);\n    if (!isArray && listeners.fn === fn) {\n      this._clearEvent(event);\n    } else if (isArray) {\n      for (let i = listeners.length - 1; i >= 0; i--) {\n        if (listeners[i].fn === fn) {\n          // mark as destroyed\n          listeners[i].destroyed = true;\n          listeners.splice(i, 1);\n        }\n      }\n      if (listeners.length === 0) {\n        this._clearEvent(event);\n      } else if (listeners.length === 1) {\n        this._events[event] = listeners[0];\n      }\n    }\n    return this;\n  }\n\n  /**\n   * @deprecated Use `off` instead.\n   * Remove the event listener(s) of the specified event name.\n   * @param event - Event name\n   * @param fn - Function, If is undefined, delete all corresponding event listeners.\n   */\n  removeEventListener(event: string, fn?: Function): EventDispatcher {\n    return this.off(event, fn);\n  }\n\n  /**\n   * Remove all event listeners.\n   * @param event - Event name, delete all events if not passed\n   */\n  removeAllEventListeners(event?: string): void {\n    if (event) {\n      if (this._events[event]) this._clearEvent(event);\n    } else {\n      this._events = Object.create(null);\n      this._eventCount = 0;\n    }\n  }\n\n  /**\n   * @deprecated Use `dispatch` instead.\n   */\n  trigger(e: Event) {\n    this.dispatch(e.type as string, e.data);\n  }\n\n  private _clearEvent(event: string) {\n    if (--this._eventCount === 0) {\n      this._events = Object.create(null);\n    } else {\n      delete this._events[event];\n    }\n  }\n}\n\ninterface EventData {\n  fn: Function;\n  once?: boolean;\n  destroyed?: boolean;\n}\n","/**\n * @class\n * @private\n */\n/* tslint:disable */\nconst noop = (message?: any, ...optionalParams: any[]) => {};\nconst debug = console.log.bind(console);\nconst info = console.info.bind(console);\nconst warn = console.warn.bind(console);\nconst error = console.error.bind(console);\n\nexport const Logger = {\n  debug: noop,\n  info: noop,\n  warn: noop,\n  error: noop,\n  isEnabled: false,\n\n  /** Turn on log */\n  enable() {\n    this.debug = debug;\n    this.info = info;\n    this.warn = warn;\n    this.error = error;\n    this.isEnabled = true;\n  },\n\n  /** Turn off log */\n  disable() {\n    this.debug = noop;\n    this.info = noop;\n    this.warn = noop;\n    this.error = noop;\n    this.isEnabled = false;\n  }\n};\n","/**\n * Tools for calculating the time per frame.\n */\nexport class Time {\n  /** @internal */\n  _frameCount: number = 0;\n\n  private _clock: { now: () => number };\n  private _timeScale: number;\n  private _deltaTime: number;\n  private _startTime: number;\n  private _lastTickTime: number;\n\n  /*\n   * The total number of frames since the start of the engine.\n   */\n  get frameCount(): number {\n    return this._frameCount;\n  }\n\n  /**\n   * Constructor of the Time.\n   */\n  constructor() {\n    this._clock = performance ? performance : Date;\n\n    this._timeScale = 1.0;\n    this._deltaTime = 0.0001;\n\n    const now = this._clock.now();\n    this._startTime = now;\n    this._lastTickTime = now;\n  }\n\n  reset() {\n    this._lastTickTime = this._clock.now();\n  }\n\n  /**\n   * Current Time\n   */\n  get nowTime(): number {\n    return this._clock.now();\n  }\n\n  /**\n   * Time between two ticks\n   */\n  get deltaTime(): number {\n    return this._deltaTime;\n  }\n\n  /**\n   * Scaled delta time.\n   */\n  get timeScale(): number {\n    return this._timeScale;\n  }\n  set timeScale(s) {\n    this._timeScale = s;\n  }\n\n  /**\n   * Unscaled delta time.\n   */\n  get unscaledDeltaTime(): number {\n    return this._deltaTime / this._timeScale;\n  }\n\n  /**\n   * The elapsed time, after the clock is initialized.\n   */\n  get timeSinceStartup(): number {\n    return this.nowTime - this._startTime;\n  }\n\n  /**\n   * Call every frame, update delta time and other data.\n   */\n  public tick(): void {\n    const now = this.nowTime;\n    this._deltaTime = (now - this._lastTickTime) * this._timeScale;\n    this._lastTickTime = now;\n    this._frameCount++;\n  }\n}\n","export const Util = {\n  isArray:\n    \"isArray\" in Array\n      ? Array.isArray\n      : (value: any): boolean => {\n          return toString.call(value) === \"[object Array]\";\n        },\n  isArrayLike(x: any): boolean {\n    return !!x && typeof x.length === \"number\" && typeof x !== \"function\";\n  },\n  clone<T>(obj: T): T {\n    if (typeof obj !== \"object\" || obj === null) {\n      return obj;\n    }\n    let rst;\n    if (Util.isArrayLike(obj)) {\n      rst = (obj as any).slice();\n      for (let i = 0, l = (obj as any).length; i < l; i++) {\n        rst[i] = Util.clone(obj[i]);\n      }\n    } else {\n      rst = {};\n      for (const k in obj) {\n        if (obj.hasOwnProperty(k)) {\n          rst[k] = Util.clone(obj[k]);\n        }\n      }\n    }\n\n    return rst;\n  },\n\n  downloadBlob(blob: Blob, fileName: string = \"\") {\n    let url = window.URL.createObjectURL(blob);\n    let a = document.createElement(\"a\");\n    document.body.appendChild(a);\n    a.style.display = \"none\";\n    a.href = url;\n    a.download = fileName;\n    a.addEventListener(\"click\", () => {\n      if (a.parentElement) {\n        a.parentElement.removeChild(a);\n      }\n    });\n    a.click();\n    window.URL.revokeObjectURL(url);\n  }\n};\n\nexport const isArrayLike = <T>(x: any): x is ArrayLike<T> =>\n  x && typeof x.length === \"number\" && typeof x !== \"function\";\n\n/**\n * Fastly remove an element from array.\n * @param array - Array\n * @param item - Element\n */\nexport function removeFromArray(array: any[], item: any): boolean {\n  const index = array.indexOf(item);\n  if (index < 0) {\n    return false;\n  }\n  const last = array.length - 1;\n  if (index !== last) {\n    const end = array[last];\n    array[index] = end;\n  }\n  array.length--;\n  return true;\n}\n\nexport function ObjectValues(obj: any) {\n  return Object.keys(obj).map((key: any) => obj[key]);\n}\n","/**\n * Data type enumeration\n */\nexport enum DataType {\n  /** Float */\n  FLOAT = 5126, // gl.FLOAT\n  /** Floating-point two-dimensional vector */\n  FLOAT_VEC2 = 35664, // gl.FLOAT_VEC2\n  /** Floating-point three-dimensional vector */\n  FLOAT_VEC3 = 35665, // gl.FLOAT_VEC3\n  /** Floating-point four-dimensional vector */\n  FLOAT_VEC4 = 35666, // gl.FLOAT_VEC4\n\n  /** Integer */\n  INT = 5124, // gl.INT\n  /** Integer two-dimensional vector */\n  INT_VEC2 = 35667, // gl.INT_VEC2\n  /** Integer three-dimensional vector */\n  INT_VEC3 = 35668, // gl.INT_VEC3\n  /** Integer four-dimensional vector */\n  INT_VEC4 = 35669, // gl.INT_VEC4\n\n  /** Boolean */\n  BOOL = 35670, // gl.BOOL\n  /** Boolean two-dimensional vector */\n  BOOL_VEC2 = 35671, // gl.BOOL_VEC2\n  /** Boolean three-dimensional vector */\n  BOOL_VEC3 = 35672, // gl.BOOL_VEC3\n  /** Boolean four-dimensional vector */\n  BOOL_VEC4 = 35673, // gl.BOOL_VEC4\n\n  /** Second-order matrix */\n  FLOAT_MAT2 = 35674, // gl.FLOAT_MAT2\n  /** Third-order matrix */\n  FLOAT_MAT3 = 35675, // gl.FLOAT_MAT3\n  /** Fourth-order matrix */\n  FLOAT_MAT4 = 35676, // gl.FLOAT_MAT4\n\n  /** Float array */\n  FLOAT_ARRAY = 35677, // gl.FLOAT_ARRAY\n  /** Floating-point two-dimensional vector array */\n  FLOAT_VEC2_ARRAY = 100000,\n  /** Floating-point three-dimensional vector array */\n  FLOAT_VEC3_ARRAY,\n  /** Floating-point four-dimensional vector array */\n  FLOAT_VEC4_ARRAY,\n\n  /** Integer array */\n  INT_ARRAY,\n  /** Integer two-dimensional vector array */\n  INT_VEC2_ARRAY,\n  /** Integer three-dimensional vector array */\n  INT_VEC3_ARRAY,\n  /** Integer four-dimensional vector array */\n  INT_VEC4_ARRAY,\n\n  /** Second-order matrix array */\n  FLOAT_MAT2_ARRAY,\n  /** Third-order matrix array */\n  FLOAT_MAT3_ARRAY,\n  /** Fourth-order matrix array */\n  FLOAT_MAT4_ARRAY,\n\n  /** 2D texture sampler array */\n  SAMPLER_2D_ARRAY,\n  /** Cube map texture sampler array */\n  SAMPLER_CUBE_ARRAY,\n\n  /** 2D sampler */\n  SAMPLER_2D = 35678, // gl.SAMPLER_2D\n  /** Cube map Texture sampler */\n  SAMPLER_CUBE = 35680, // gl.SAMPLER_CUBE\n\n  /** Byte */\n  BYTE = 5120, // gl.BYTE\n  /** Unsigned byte */\n  UNSIGNED_BYTE = 5121, // gl.UNSIGNED_BYTE\n  /** Short */\n  SHORT = 5122, // gl.SHORT\n  /** Unsigned short */\n  UNSIGNED_SHORT = 5123, // gl.UNSIGNED_SHORT\n  /** Unsigned int */\n  UNSIGNED_INT = 5125 // gl.UNSIGNED_INT\n}\n\n/**\n * GL Capabilities\n * Some capabilities can be smoothed out by extension, and some capabilities must use WebGL 2.0.\n * */\nexport enum GLCapabilityType {\n  shaderVertexID = \"shaderVertexID\",\n  standardDerivatives = \"OES_standard_derivatives\",\n  shaderTextureLod = \"EXT_shader_texture_lod\",\n  elementIndexUint = \"OES_element_index_uint\",\n  depthTexture = \"WEBGL_depth_texture\",\n  drawBuffers = \"WEBGL_draw_buffers\",\n  vertexArrayObject = \"OES_vertex_array_object\",\n  instancedArrays = \"ANGLE_instanced_arrays\",\n  multipleSample = \"multipleSampleOnlySupportedInWebGL2\",\n  textureFloat = \"OES_texture_float\",\n  textureFloatLinear = \"OES_texture_float_linear\",\n  textureHalfFloat = \"OES_texture_half_float\",\n  textureHalfFloatLinear = \"OES_texture_half_float_linear\",\n  WEBGL_colorBufferFloat = \"WEBGL_color_buffer_float\",\n  colorBufferFloat = \"EXT_color_buffer_float\",\n  colorBufferHalfFloat = \"EXT_color_buffer_half_float\",\n  textureFilterAnisotropic = \"EXT_texture_filter_anisotropic\",\n  blendMinMax = \"EXT_blend_minmax\",\n\n  astc = \"WEBGL_compressed_texture_astc\",\n  astc_webkit = \"WEBKIT_WEBGL_compressed_texture_astc\",\n  etc = \"WEBGL_compressed_texture_etc\",\n  etc_webkit = \"WEBKIT_WEBGL_compressed_texture_etc\",\n  etc1 = \"WEBGL_compressed_texture_etc1\",\n  etc1_webkit = \"WEBKIT_WEBGL_compressed_texture_etc1\",\n  pvrtc = \"WEBGL_compressed_texture_pvrtc\",\n  pvrtc_webkit = \"WEBKIT_WEBGL_compressed_texture_pvrtc\",\n  s3tc = \"WEBGL_compressed_texture_s3tc\",\n  s3tc_webkit = \"WEBKIT_WEBGL_compressed_texture_s3tc\"\n  // atc = \"WEBGL_compressed_texture_atc\",\n  // s3tc_srgb = \"WEBGL_compressed_texture_s3tc_srgb\"\n}\n\nexport type TypedArray =\n  | Int8Array\n  | Uint8Array\n  | Int16Array\n  | Uint16Array\n  | Int32Array\n  | Uint32Array\n  | Uint8ClampedArray\n  | Float32Array\n  | Float64Array;\n","import { RefObject } from \"../asset/RefObject\";\nimport { Logger } from \"../base/Logger\";\nimport { IPlatformTexture } from \"../renderingHardwareInterface\";\nimport { TextureDepthCompareFunction } from \"./enums/TextureDepthCompareFunction\";\nimport { TextureFilterMode } from \"./enums/TextureFilterMode\";\nimport { TextureFormat } from \"./enums/TextureFormat\";\nimport { TextureWrapMode } from \"./enums/TextureWrapMode\";\n\n/**\n * The base class of texture, contains some common functions of texture-related classes.\n */\nexport abstract class Texture extends RefObject {\n  name: string;\n\n  /** @internal */\n  _platformTexture: IPlatformTexture;\n  /** @internal */\n  _mipmap: boolean;\n  /** @internal */\n  _isDepthTexture: boolean = false;\n\n  protected _format: TextureFormat;\n  protected _width: number;\n  protected _height: number;\n  protected _mipmapCount: number;\n\n  private _wrapModeU: TextureWrapMode;\n  private _wrapModeV: TextureWrapMode;\n  private _filterMode: TextureFilterMode;\n  private _anisoLevel: number = 1;\n  private _depthCompareFunction: TextureDepthCompareFunction;\n  private _useDepthCompareMode: boolean = false;\n\n  /**\n   * Texture format.\n   */\n  get format(): TextureFormat {\n    return this._format;\n  }\n\n  /**\n   * The width of the texture.\n   */\n  get width(): number {\n    return this._width;\n  }\n\n  /**\n   * The height of the texture.\n   */\n  get height(): number {\n    return this._height;\n  }\n\n  /**\n   * Wrapping mode for texture coordinate S.\n   */\n  get wrapModeU(): TextureWrapMode {\n    return this._wrapModeU;\n  }\n\n  set wrapModeU(value: TextureWrapMode) {\n    if (value === this._wrapModeU) return;\n    this._wrapModeU = value;\n\n    this._platformTexture.wrapModeU = value;\n  }\n\n  /**\n   * Wrapping mode for texture coordinate T.\n   */\n  get wrapModeV(): TextureWrapMode {\n    return this._wrapModeV;\n  }\n\n  set wrapModeV(value: TextureWrapMode) {\n    if (value === this._wrapModeV) return;\n    this._wrapModeV = value;\n\n    this._platformTexture.wrapModeV = value;\n  }\n\n  /**\n   * Texture mipmapping count.\n   */\n  get mipmapCount(): number {\n    return this._mipmapCount;\n  }\n\n  /**\n   * Filter mode for texture.\n   */\n  get filterMode(): TextureFilterMode {\n    return this._filterMode;\n  }\n\n  set filterMode(value: TextureFilterMode) {\n    if (value === this._filterMode) return;\n    this._filterMode = value;\n\n    this._platformTexture.filterMode = value;\n  }\n\n  /**\n   * Anisotropic level for texture.\n   */\n  get anisoLevel(): number {\n    return this._anisoLevel;\n  }\n\n  set anisoLevel(value: number) {\n    const max = this._engine._hardwareRenderer.capability.maxAnisoLevel;\n\n    if (value > max) {\n      Logger.warn(`anisoLevel:${value}, exceeds the limit and is automatically downgraded to:${max}`);\n      value = max;\n    }\n\n    if (value < 1) {\n      Logger.warn(`anisoLevel:${value}, must be greater than 0, and is automatically downgraded to 1`);\n      value = 1;\n    }\n\n    if (value === this._anisoLevel) return;\n\n    this._anisoLevel = value;\n\n    this._platformTexture.anisoLevel = value;\n  }\n\n  /**\n   * Filter mode when texture as depth Texture.\n   * @remarks Only depth-related formats take effect.\n   */\n  get depthCompareFunction(): TextureDepthCompareFunction {\n    return this._depthCompareFunction;\n  }\n\n  set depthCompareFunction(value: TextureDepthCompareFunction) {\n    if (!this._engine._hardwareRenderer._isWebGL2) {\n      console.warn(\"depthCompareFunction only support WebGL2\");\n      return;\n    }\n\n    if (value !== this._depthCompareFunction) {\n      this._depthCompareFunction = value;\n      this._platformTexture.depthCompareFunction = value;\n    }\n  }\n\n  /**\n   * Generate multi-level textures based on the 0th level data.\n   */\n  generateMipmaps(): void {\n    if (!this._mipmap) return;\n\n    this._platformTexture.generateMipmaps();\n  }\n\n  /**\n   * @internal\n   */\n  _setUseDepthCompareMode(value: boolean): void {\n    if (this._useDepthCompareMode !== value) {\n      this._platformTexture.setUseDepthCompareMode(value);\n      this._useDepthCompareMode = value;\n    }\n  }\n\n  /**\n   * @override\n   */\n  _onDestroy() {\n    this._platformTexture.destroy();\n    this._platformTexture = null;\n  }\n\n  /**\n   * Get the maximum mip level of the corresponding size:rounding down.\n   * @remarks http://download.nvidia.com/developer/Papers/2005/NP2_Mipmapping/NP2_Mipmap_Creation.pdf\n   */\n  protected _getMaxMiplevel(size: number): number {\n    return Math.floor(Math.log2(size));\n  }\n\n  protected _getMipmapCount(): number {\n    return this._mipmap ? Math.floor(Math.log2(Math.max(this._width, this._height))) + 1 : 1;\n  }\n}\n","import { EngineObject } from \"../base\";\nimport { Engine } from \"../Engine\";\nimport { IPlatformRenderTarget } from \"../renderingHardwareInterface\";\nimport { RenderBufferDepthFormat } from \"./enums/RenderBufferDepthFormat\";\nimport { TextureCubeFace } from \"./enums/TextureCubeFace\";\nimport { Texture } from \"./Texture\";\n\n/**\n * The render target used for off-screen rendering.\n */\nexport class RenderTarget extends EngineObject {\n  /** @internal */\n  _platformRenderTarget: IPlatformRenderTarget;\n\n  /** @internal */\n  _depth: Texture | RenderBufferDepthFormat | null;\n  /** @internal */\n  _antiAliasing: number;\n\n  private _autoGenerateMipmaps: boolean = true;\n  private _width: number;\n  private _height: number;\n  private _colorTextures: Texture[];\n  private _depthTexture: Texture | null;\n\n  /**\n   * Whether to automatically generate multi-level textures.\n   */\n  get autoGenerateMipmaps(): boolean {\n    return this._autoGenerateMipmaps;\n  }\n\n  set autoGenerateMipmaps(value: boolean) {\n    this._autoGenerateMipmaps = value;\n  }\n\n  /**\n   * Render target width.\n   */\n  get width(): number {\n    return this._width;\n  }\n\n  /**\n   * Render target height.\n   */\n  get height(): number {\n    return this._height;\n  }\n\n  /**\n   * Render color texture count.\n   */\n  get colorTextureCount(): number {\n    return this._colorTextures.length;\n  }\n\n  /**\n   * Depth texture.\n   */\n  get depthTexture(): Texture | null {\n    return this._depthTexture;\n  }\n\n  /**\n   * Anti-aliasing level.\n   * @remarks If the anti-aliasing level set is greater than the maximum level supported by the hardware, the maximum level of the hardware will be used.\n   */\n  get antiAliasing(): number {\n    return this._antiAliasing;\n  }\n\n  /**\n   * Create a render target through color texture and depth format.\n   * @param engine - Define the engine to use for this off-screen rendering\n   * @param width - Render target width\n   * @param height - Render target height\n   * @param colorTexture - Render color texture\n   * @param depthFormat - Depth format. default RenderBufferDepthFormat.Depth, engine will automatically select the supported precision\n   * @param antiAliasing - Anti-aliasing level, default is 1\n   */\n  constructor(\n    engine: Engine,\n    width: number,\n    height: number,\n    colorTexture: Texture,\n    depthFormat?: RenderBufferDepthFormat | null,\n    antiAliasing?: number\n  );\n\n  /**\n   * Create a render target through color texture and depth format.\n   * @remarks If the color texture is not transmitted, only the depth texture is generated.\n   * @param engine - Define the engine to use for this off-screen rendering\n   * @param width - Render target width\n   * @param height - Render target height\n   * @param colorTexture - Render color texture\n   * @param depthTexture - Render depth texture\n   * @param antiAliasing - Anti-aliasing level, default is 1\n   */\n  constructor(\n    engine: Engine,\n    width: number,\n    height: number,\n    colorTexture: Texture | null,\n    depthTexture: Texture,\n    antiAliasing?: number\n  );\n\n  /**\n   * Create a render target with color texture array and depth format.\n   * @param engine - Define the engine to use for this off-screen rendering\n   * @param width - Render target width\n   * @param height - Render target height\n   * @param colorTextures - Render color texture array\n   * @param depthFormat - Depth format. default RenderBufferDepthFormat.Depth,engine will automatically select the supported precision\n   * @param antiAliasing - Anti-aliasing level, default is 1\n   */\n  constructor(\n    engine: Engine,\n    width: number,\n    height: number,\n    colorTextures: Texture[],\n    depthFormat?: RenderBufferDepthFormat | null,\n    antiAliasing?: number\n  );\n\n  /**\n   * Create a render target with color texture array and depth texture.\n   * @param engine - Define the engine to use for this off-screen rendering\n   * @param width - Render target width\n   * @param height - Render target height\n   * @param colorTextures - Render color texture array\n   * @param depthTexture - Depth texture\n   * @param antiAliasing - Anti-aliasing level, default is 1\n   */\n  constructor(\n    engine: Engine,\n    width: number,\n    height: number,\n    colorTextures: Texture[],\n    depthTexture: Texture,\n    antiAliasing?: number\n  );\n\n  /**\n   * @internal\n   */\n  constructor(\n    engine: Engine,\n    width: number,\n    height: number,\n    renderTexture: Texture | Texture[] | null,\n    depth: Texture | RenderBufferDepthFormat | null = RenderBufferDepthFormat.Depth,\n    antiAliasing: number = 1\n  ) {\n    super(engine);\n\n    this._width = width;\n    this._height = height;\n    this._antiAliasing = antiAliasing;\n    this._depth = depth;\n\n    if (renderTexture) {\n      const colorTextures = renderTexture instanceof Array ? renderTexture.slice() : [renderTexture];\n      for (let i = 0, n = colorTextures.length; i < n; i++) {\n        if (colorTextures[i]._isDepthTexture) {\n          throw \"Render texture can't use depth format.\";\n        }\n      }\n      this._colorTextures = colorTextures;\n    } else {\n      this._colorTextures = [];\n    }\n\n    if (depth instanceof Texture) {\n      if (!depth._isDepthTexture) {\n        throw \"Depth texture must use depth format.\";\n      }\n      this._depthTexture = depth;\n    }\n\n    this._platformRenderTarget = engine._hardwareRenderer.createPlatformRenderTarget(this);\n  }\n\n  /**\n   *\n   * Get the render color texture by index.\n   * @param index\n   */\n  getColorTexture(index: number = 0): Texture | null {\n    return this._colorTextures[index];\n  }\n\n  /**\n   * Generate the mipmap of each attachment texture of the renderTarget according to the configuration.\n   */\n  generateMipmaps(): void {\n    if (this._autoGenerateMipmaps) {\n      const colorTextures = this._colorTextures;\n      for (let i = 0, n = colorTextures.length; i < n; i++) {\n        const colorTexture = colorTextures[i];\n        colorTexture.generateMipmaps();\n      }\n      this._depthTexture && this._depthTexture.generateMipmaps();\n    }\n  }\n\n  /**\n   * Destroy render target.\n   */\n  destroy() {\n    this._platformRenderTarget.destroy();\n    this._colorTextures.length = 0;\n    this._depthTexture = null;\n    this._depth = null;\n  }\n\n  /**\n   * @internal\n   */\n  _setRenderTargetInfo(faceIndex: TextureCubeFace, mipLevel: number): void {\n    this._platformRenderTarget.setRenderTargetInfo(faceIndex, mipLevel);\n  }\n\n  /**\n   * @internal\n   */\n  _blitRenderTarget(): void {\n    this._platformRenderTarget.blitRenderTarget();\n  }\n}\n","import { Engine } from \"../Engine\";\nimport { IPlatformTexture2D } from \"../renderingHardwareInterface\";\nimport { TextureFilterMode } from \"./enums/TextureFilterMode\";\nimport { TextureFormat } from \"./enums/TextureFormat\";\nimport { TextureWrapMode } from \"./enums/TextureWrapMode\";\nimport { Texture } from \"./Texture\";\n\n/**\n * Two-dimensional texture.\n */\nexport class Texture2D extends Texture {\n  /**\n   * Create Texture2D.\n   * @param engine - Define the engine to use to render this texture\n   * @param width - Texture width\n   * @param height - Texture height\n   * @param format - Texture format. default  `TextureFormat.R8G8B8A8`\n   * @param mipmap - Whether to use multi-level texture\n   */\n  constructor(\n    engine: Engine,\n    width: number,\n    height: number,\n    format: TextureFormat = TextureFormat.R8G8B8A8,\n    mipmap: boolean = true\n  ) {\n    super(engine);\n    this._mipmap = mipmap;\n    this._width = width;\n    this._height = height;\n    this._format = format;\n    this._mipmapCount = this._getMipmapCount();\n\n    this._isDepthTexture =\n      format == TextureFormat.Depth ||\n      format == TextureFormat.DepthStencil ||\n      format == TextureFormat.Depth16 ||\n      format == TextureFormat.Depth24 ||\n      format == TextureFormat.Depth32 ||\n      format == TextureFormat.Depth24Stencil8 ||\n      format == TextureFormat.Depth32Stencil8;\n\n    this._platformTexture = engine._hardwareRenderer.createPlatformTexture2D(this);\n\n    this.filterMode = TextureFilterMode.Bilinear;\n    this.wrapModeU = this.wrapModeV = TextureWrapMode.Repeat;\n  }\n\n  /**\n   * Setting pixels data through color buffer data, designated area and texture mipmapping level,it's also applicable to compressed formats.\n   * @remarks If it is the WebGL1.0 platform and the texture format is compressed, the first upload must be filled with textures.\n   * @param colorBuffer - Color buffer data\n   * @param mipLevel - Texture mipmapping level\n   * @param x - X coordinate of area start\n   * @param y - Y coordinate of area start\n   * @param width - Data width. if it's empty, width is the width corresponding to mipLevel minus x , width corresponding to mipLevel is Math.max(1, this.width >> mipLevel)\n   * @param height - Data height. if it's empty, height is the height corresponding to mipLevel minus y , height corresponding to mipLevel is Math.max(1, this.height >> mipLevel)\n   */\n  setPixelBuffer(\n    colorBuffer: ArrayBufferView,\n    mipLevel: number = 0,\n    x: number = 0,\n    y: number = 0,\n    width?: number,\n    height?: number\n  ): void {\n    (this._platformTexture as IPlatformTexture2D).setPixelBuffer(colorBuffer, mipLevel, x, y, width, height);\n  }\n\n  /**\n   * Setting pixels data through TexImageSource, designated area and texture mipmapping level.\n   * @param imageSource - The source of texture\n   * @param mipLevel - Texture mipmapping level\n   * @param flipY - Whether to flip the Y axis\n   * @param premultiplyAlpha - Whether to premultiply the transparent channel\n   * @param x - X coordinate of area start\n   * @param y - Y coordinate of area start\n   */\n  setImageSource(\n    imageSource: TexImageSource | OffscreenCanvas,\n    mipLevel: number = 0,\n    flipY: boolean = false,\n    premultiplyAlpha: boolean = false,\n    x: number = 0,\n    y: number = 0\n  ): void {\n    (this._platformTexture as IPlatformTexture2D).setImageSource(imageSource, mipLevel, flipY, premultiplyAlpha, x, y);\n  }\n\n  /**\n   * Get pixel color buffer.\n   * @param out - Color buffer\n   */\n  getPixelBuffer(out: ArrayBufferView): void;\n\n  /**\n   * Get the pixel color buffer according to the specified mip level.\n   * @param mipLevel - Tet mip level want to get\n   * @param out - Color buffer\n   */\n  getPixelBuffer(mipLevel: number, out: ArrayBufferView): void;\n\n  /**\n   * Get the pixel color buffer according to the specified area.\n   * @param x - X coordinate of area start\n   * @param y - Y coordinate of area start\n   * @param width - Area width\n   * @param height - Area height\n   * @param out - Color buffer\n   */\n  getPixelBuffer(x: number, y: number, width: number, height: number, out: ArrayBufferView): void;\n\n  /**\n   * Get the pixel color buffer according to the specified area and mip level.\n   * @param x - X coordinate of area start\n   * @param y - Y coordinate of area start\n   * @param width - Area width\n   * @param height - Area height\n   * @param mipLevel - Tet mip level want to get\n   * @param out - Color buffer\n   */\n  getPixelBuffer(x: number, y: number, width: number, height: number, mipLevel: number, out: ArrayBufferView): void;\n\n  getPixelBuffer(\n    xOrMipLevelOrOut: number | ArrayBufferView,\n    yOrMipLevel?: number | ArrayBufferView,\n    width?: number,\n    height?: number,\n    mipLevelOrOut?: number | ArrayBufferView,\n    out?: ArrayBufferView\n  ): void {\n    const argsLength = arguments.length;\n    if (argsLength === 1) {\n      (this._platformTexture as IPlatformTexture2D).getPixelBuffer(\n        0,\n        0,\n        this._width,\n        this._height,\n        0,\n        <ArrayBufferView>xOrMipLevelOrOut\n      );\n    } else if (argsLength === 2) {\n      (this._platformTexture as IPlatformTexture2D).getPixelBuffer(\n        0,\n        0,\n        this._width >> (<number>xOrMipLevelOrOut),\n        this._height >> (<number>xOrMipLevelOrOut),\n        <number>xOrMipLevelOrOut,\n        <ArrayBufferView>yOrMipLevel\n      );\n    } else if (argsLength === 5) {\n      (this._platformTexture as IPlatformTexture2D).getPixelBuffer(\n        <number>xOrMipLevelOrOut,\n        <number>yOrMipLevel,\n        width,\n        height,\n        0,\n        <ArrayBufferView>mipLevelOrOut\n      );\n    } else if (argsLength === 6) {\n      (this._platformTexture as IPlatformTexture2D).getPixelBuffer(\n        <number>xOrMipLevelOrOut,\n        <number>yOrMipLevel,\n        width,\n        height,\n        <number>mipLevelOrOut,\n        out\n      );\n    }\n  }\n}\n","import { Engine } from \"../Engine\";\nimport { IPlatformTexture2DArray } from \"../renderingHardwareInterface\";\nimport { TextureFilterMode } from \"./enums/TextureFilterMode\";\nimport { TextureFormat } from \"./enums/TextureFormat\";\nimport { TextureWrapMode } from \"./enums/TextureWrapMode\";\nimport { Texture } from \"./Texture\";\n\n/**\n * Two-dimensional texture array.\n */\nexport class Texture2DArray extends Texture {\n  private readonly _length: number;\n\n  /**\n   * The length of the texture.\n   */\n  get length(): number {\n    return this._length;\n  }\n\n  /**\n   * Create Texture2D Array.\n   * @param engine - Define the engine to use to render this texture\n   * @param width - Texture width\n   * @param height - Texture height\n   * @param length - Texture length\n   * @param format - Texture format. default `TextureFormat.R8G8B8A8`\n   * @param mipmap - Whether to use multi-level texture\n   */\n  constructor(\n    engine: Engine,\n    width: number,\n    height: number,\n    length: number,\n    format: TextureFormat = TextureFormat.R8G8B8A8,\n    mipmap: boolean = true\n  ) {\n    super(engine);\n    this._mipmap = mipmap;\n    this._width = width;\n    this._height = height;\n    this._length = length;\n    this._format = format;\n    this._mipmapCount = this._getMipmapCount();\n\n    this._platformTexture = engine._hardwareRenderer.createPlatformTexture2DArray(this);\n\n    this.filterMode = TextureFilterMode.Bilinear;\n    this.wrapModeU = this.wrapModeV = TextureWrapMode.Repeat;\n  }\n\n  /**\n   * Setting pixels data through color buffer data, designated area and texture mipmapping level,it's also applicable to compressed formats.\n   * @remarks If it is the WebGL1.0 platform and the texture format is compressed, the first upload must be filled with textures.\n   * @param offsetIndex - The texture array element offset index\n   * @param colorBuffer - Color buffer data\n   * @param mipLevel - Texture mipmapping level\n   * @param x - X coordinate of area start\n   * @param y - Y coordinate of area start\n   * @param width - Data width. if it's empty, width is the width corresponding to mipLevel minus x , width corresponding to mipLevel is Math.max(1, this.width >> mipLevel)\n   * @param height - Data height. if it's empty, height is the height corresponding to mipLevel minus y , height corresponding to mipLevel is Math.max(1, this.height >> mipLevel)\n   * @param length - Data length. if it's empty, length is the length of Texture2DArray.length\n   */\n  setPixelBuffer(\n    offsetIndex: number,\n    colorBuffer: ArrayBufferView,\n    mipLevel: number = 0,\n    x: number = 0,\n    y: number = 0,\n    width?: number,\n    height?: number,\n    length?: number\n  ): void {\n    (this._platformTexture as IPlatformTexture2DArray).setPixelBuffer(\n      offsetIndex,\n      colorBuffer,\n      mipLevel,\n      x,\n      y,\n      width,\n      height,\n      length\n    );\n  }\n\n  /**\n   * Setting pixels data through TexImageSource, designated area and texture mipmapping level.\n   * @param elementIndex - The texture array element index\n   * @param imageSource - The source of texture\n   * @param mipLevel - Texture mipmapping level\n   * @param flipY - Whether to flip the Y axis\n   * @param premultiplyAlpha - Whether to premultiply the transparent channel\n   * @param x - X coordinate of area start\n   * @param y - Y coordinate of area start\n   */\n  setImageSource(\n    elementIndex: number,\n    imageSource: TexImageSource | OffscreenCanvas,\n    mipLevel: number = 0,\n    flipY: boolean = false,\n    premultiplyAlpha: boolean = false,\n    x: number = 0,\n    y: number = 0\n  ): void {\n    (this._platformTexture as IPlatformTexture2DArray).setImageSource(\n      elementIndex,\n      imageSource,\n      mipLevel,\n      flipY,\n      premultiplyAlpha,\n      x,\n      y\n    );\n  }\n\n  /**\n   * Get pixel color buffer.\n   * @param elementIndex - The texture array element index\n   * @param out - Color buffer\n   */\n  getPixelBuffer(elementIndex: number, out: ArrayBufferView): void;\n\n  /**\n   * Get the pixel color buffer according to the specified mip level.\n   * @param elementIndex - The texture array element index\n   * @param mipLevel - Tet mip level want to get\n   * @param out - Color buffer\n   */\n  getPixelBuffer(elementIndex: number, mipLevel: number, out: ArrayBufferView): void;\n\n  /**\n   * Get the pixel color buffer according to the specified area.\n   * @param elementIndex - The texture array element index\n   * @param x - X coordinate of area start\n   * @param y - Y coordinate of area start\n   * @param width - Area width\n   * @param height - Area height\n   * @param out - Color buffer\n   */\n  getPixelBuffer(elementIndex: number, x: number, y: number, width: number, height: number, out: ArrayBufferView): void;\n\n  /**\n   * Get the pixel color buffer according to the specified area and mip level.\n   * @param elementIndex - The texture array element index\n   * @param x - X coordinate of area start\n   * @param y - Y coordinate of area start\n   * @param width - Area width\n   * @param height - Area height\n   * @param mipLevel - Tet mip level want to get\n   * @param out - Color buffer\n   */\n  getPixelBuffer(\n    elementIndex: number,\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n    mipLevel: number,\n    out: ArrayBufferView\n  ): void;\n\n  getPixelBuffer(\n    elementIndex: number,\n    xOrMipLevelOrOut: number | ArrayBufferView,\n    yOrMipLevel?: number | ArrayBufferView,\n    width?: number,\n    height?: number,\n    mipLevelOrOut?: number | ArrayBufferView,\n    out?: ArrayBufferView\n  ): void {\n    const argsLength = arguments.length;\n    if (argsLength === 1) {\n      (this._platformTexture as IPlatformTexture2DArray).getPixelBuffer(\n        elementIndex,\n        0,\n        0,\n        this._width,\n        this._height,\n        0,\n        <ArrayBufferView>xOrMipLevelOrOut\n      );\n    } else if (argsLength === 2) {\n      (this._platformTexture as IPlatformTexture2DArray).getPixelBuffer(\n        elementIndex,\n        0,\n        0,\n        this._width >> (<number>xOrMipLevelOrOut),\n        this._height >> (<number>xOrMipLevelOrOut),\n        <number>xOrMipLevelOrOut,\n        <ArrayBufferView>yOrMipLevel\n      );\n    } else if (argsLength === 5) {\n      (this._platformTexture as IPlatformTexture2DArray).getPixelBuffer(\n        elementIndex,\n        <number>xOrMipLevelOrOut,\n        <number>yOrMipLevel,\n        width,\n        height,\n        0,\n        <ArrayBufferView>mipLevelOrOut\n      );\n    } else if (argsLength === 6) {\n      (this._platformTexture as IPlatformTexture2DArray).getPixelBuffer(\n        elementIndex,\n        <number>xOrMipLevelOrOut,\n        <number>yOrMipLevel,\n        width,\n        height,\n        <number>mipLevelOrOut,\n        out\n      );\n    }\n  }\n}\n","import { Engine } from \"../Engine\";\nimport { IPlatformTextureCube } from \"../renderingHardwareInterface\";\nimport { TextureCubeFace } from \"./enums/TextureCubeFace\";\nimport { TextureFilterMode } from \"./enums/TextureFilterMode\";\nimport { TextureFormat } from \"./enums/TextureFormat\";\nimport { TextureWrapMode } from \"./enums/TextureWrapMode\";\nimport { Texture } from \"./Texture\";\n\n/**\n * Cube texture.\n */\nexport class TextureCube extends Texture {\n  /**\n   * Create TextureCube.\n   * @param engine - Define the engine to use to render this texture\n   * @param size - Texture size. texture width must be equal to height in cube texture\n   * @param format - Texture format,default TextureFormat.R8G8B8A8\n   * @param mipmap - Whether to use multi-level texture\n   */\n  constructor(engine: Engine, size: number, format: TextureFormat = TextureFormat.R8G8B8A8, mipmap: boolean = true) {\n    super(engine);\n\n    this._mipmap = mipmap;\n    this._width = size;\n    this._height = size;\n    this._format = format;\n    this._mipmapCount = this._getMipmapCount();\n\n    this._platformTexture = engine._hardwareRenderer.createPlatformTextureCube(this);\n\n    this.filterMode = TextureFilterMode.Bilinear;\n    this.wrapModeU = this.wrapModeV = TextureWrapMode.Clamp;\n  }\n\n  /**\n   * Setting pixels data through cube face,color buffer data, designated area and texture mipmapping level,it's also applicable to compressed formats.\n   * @remarks When compressed texture is in WebGL1, the texture must be filled first before writing the sub-region\n   * @param face - Cube face\n   * @param colorBuffer - Color buffer data\n   * @param mipLevel - Texture mipmapping level\n   * @param x - X coordinate of area start\n   * @param y -  Y coordinate of area start\n   * @param width - Data width.if it's empty, width is the width corresponding to mipLevel minus x , width corresponding to mipLevel is Math.max(1, this.width >> mipLevel)\n   * @param height - Data height.if it's empty, height is the height corresponding to mipLevel minus y , height corresponding to mipLevel is Math.max(1, this.height >> mipLevel)\n   */\n  setPixelBuffer(\n    face: TextureCubeFace,\n    colorBuffer: ArrayBufferView,\n    mipLevel: number = 0,\n    x: number = 0,\n    y: number = 0,\n    width?: number,\n    height?: number\n  ): void {\n    (this._platformTexture as IPlatformTextureCube).setPixelBuffer(face, colorBuffer, mipLevel, x, y, width, height);\n  }\n\n  /**\n   * Setting pixels data through cube face, TexImageSource, designated area and texture mipmapping level.\n   * @param face - Cube face\n   * @param imageSource - The source of texture\n   * @param mipLevel - Texture mipmapping level\n   * @param flipY - Whether to flip the Y axis\n   * @param premultiplyAlpha - Whether to premultiply the transparent channel\n   * @param x - X coordinate of area start\n   * @param y - Y coordinate of area start\n   */\n  setImageSource(\n    face: TextureCubeFace,\n    imageSource: TexImageSource | OffscreenCanvas,\n    mipLevel: number = 0,\n    flipY: boolean = false,\n    premultiplyAlpha: boolean = false,\n    x: number = 0,\n    y: number = 0\n  ): void {\n    (this._platformTexture as IPlatformTextureCube).setImageSource(\n      face,\n      imageSource,\n      mipLevel,\n      flipY,\n      premultiplyAlpha,\n      x,\n      y\n    );\n  }\n\n  /**\n   * Get pixel color buffer.\n   * @param out - Color buffer\n   */\n  getPixelBuffer(face: TextureCubeFace, out: ArrayBufferView): void;\n\n  /**\n   * Get the pixel color buffer according to the specified mip level.\n   * @param mipLevel - Tet mip level want to get\n   * @param out - Color buffer\n   */\n  getPixelBuffer(face: TextureCubeFace, mipLevel: number, out: ArrayBufferView): void;\n\n  /**\n   * Get the pixel color buffer according to the specified area.\n   * @param x - X coordinate of area start\n   * @param y - Y coordinate of area start\n   * @param width - Area width\n   * @param height - Area height\n   * @param out - Color buffer\n   */\n  getPixelBuffer(\n    face: TextureCubeFace,\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n    out: ArrayBufferView\n  ): void;\n\n  /**\n   * Get the pixel color buffer according to the specified area and mip level.\n   * @param x - X coordinate of area start\n   * @param y - Y coordinate of area start\n   * @param width - Area width\n   * @param height - Area height\n   * @param mipLevel - Tet mip level want to get\n   * @param out - Color buffer\n   */\n  getPixelBuffer(\n    face: TextureCubeFace,\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n    mipLevel: number,\n    out: ArrayBufferView\n  ): void;\n\n  getPixelBuffer(\n    face: TextureCubeFace,\n    xOrMipLevelOrOut: number | ArrayBufferView,\n    yOrMipLevel?: number | ArrayBufferView,\n    width?: number,\n    height?: number,\n    mipLevelOrOut?: number | ArrayBufferView,\n    out?: ArrayBufferView\n  ): void {\n    const argsLength = arguments.length;\n    if (argsLength === 2) {\n      (this._platformTexture as IPlatformTextureCube).getPixelBuffer(\n        face,\n        0,\n        0,\n        this._width,\n        this._height,\n        0,\n        <ArrayBufferView>xOrMipLevelOrOut\n      );\n    } else if (argsLength === 3) {\n      (this._platformTexture as IPlatformTextureCube).getPixelBuffer(\n        face,\n        0,\n        0,\n        this._width >> (<number>xOrMipLevelOrOut),\n        this._height >> (<number>xOrMipLevelOrOut),\n        <number>xOrMipLevelOrOut,\n        <ArrayBufferView>yOrMipLevel\n      );\n    } else if (argsLength === 6) {\n      (this._platformTexture as IPlatformTextureCube).getPixelBuffer(\n        face,\n        <number>xOrMipLevelOrOut,\n        <number>yOrMipLevel,\n        width,\n        height,\n        0,\n        <ArrayBufferView>mipLevelOrOut\n      );\n    } else if (argsLength === 7) {\n      (this._platformTexture as IPlatformTextureCube).getPixelBuffer(\n        face,\n        <number>xOrMipLevelOrOut,\n        <number>yOrMipLevel,\n        width,\n        height,\n        <number>mipLevelOrOut,\n        out\n      );\n    }\n  }\n}\n","import { RefObject } from \"../../asset/RefObject\";\nimport { Engine } from \"../../Engine\";\nimport { Texture2D } from \"../../texture/Texture2D\";\nimport { CharInfo } from \"../text/CharInfo\";\n\n/**\n * @internal\n * Font Atlas.\n */\nexport class FontAtlas extends RefObject {\n  private _charInfoMap: Record<number, CharInfo> = {};\n  private _texture: Texture2D;\n  private _space: number = 1;\n  private _curX: number = 1;\n  private _curY: number = 1;\n  private _nextY: number = 1;\n\n  get texture(): Texture2D {\n    return this._texture;\n  }\n\n  set texture(value: Texture2D) {\n    this._texture = value;\n  }\n\n  /**\n   * Constructor a FontAtlas.\n   * @param engine - Engine to which the FontAtlas belongs\n   */\n  constructor(engine: Engine) {\n    super(engine);\n  }\n\n  /**\n   * @override\n   */\n  _onDestroy(): void {\n    this._texture.destroy();\n    this._texture = null;\n    this._charInfoMap = {};\n  }\n\n  uploadCharTexture(charInfo: CharInfo): boolean {\n    const { w: width, h: height, data } = charInfo;\n    const { _space: space, texture } = this;\n    const textureSize = texture.width;\n    const offsetWidth = width + space;\n    const offsetHeight = height + space;\n    if (1 + offsetWidth >= textureSize || 1 + offsetHeight >= textureSize) {\n      throw Error(\"The char fontSize is too large.\");\n    }\n\n    const endX = this._curX + offsetWidth;\n    if (endX >= textureSize) {\n      this._curX = space;\n      this._curY = this._nextY + space;\n    }\n    const endY = this._curY + offsetHeight;\n    if (endY > this._nextY) {\n      this._nextY = endY;\n    }\n    if (endY >= textureSize) {\n      return false;\n    }\n\n    if (width > 0 && height > 0 && data) {\n      texture.setPixelBuffer(data, 0, this._curX, this._curY, width, height);\n      texture.generateMipmaps();\n    }\n\n    const textureSizeReciprocal = 1.0 / textureSize;\n    const x = this._curX;\n    const y = this._curY;\n    const w = width;\n    const h = height;\n    const u0 = x * textureSizeReciprocal;\n    const u1 = (x + w) * textureSizeReciprocal;\n    const v0 = y * textureSizeReciprocal;\n    const v1 = (y + h) * textureSizeReciprocal;\n\n    charInfo.x = x;\n    charInfo.y = y;\n    const uvs = charInfo.uvs;\n    uvs[0].set(u0, v0);\n    uvs[1].set(u1, v0);\n    uvs[2].set(u1, v1);\n    uvs[3].set(u0, v1);\n\n    this._curX += offsetWidth + space;\n    return true;\n  }\n\n  addCharInfo(char: string, charInfo: CharInfo) {\n    this._charInfoMap[char.charCodeAt(0)] = charInfo;\n  }\n\n  getCharInfo(char: string): CharInfo {\n    return this._charInfoMap[char.charCodeAt(0)];\n  }\n}\n","import { Engine } from \"../../Engine\";\nimport { Texture2D } from \"../../texture\";\nimport { FontAtlas } from \"../atlas/FontAtlas\";\nimport { CharInfo } from \"./CharInfo\";\n\n/**\n * @internal\n */\nexport class SubFont {\n  private _engine: Engine;\n  private _fontAtlases: FontAtlas[] = [];\n  private _lastIndex: number = -1;\n\n  constructor(engine: Engine) {\n    this._engine = engine;\n  }\n\n  destroy(): void {\n    const fontAtlases = this._fontAtlases;\n    for (let i = 0, n = fontAtlases.length; i < n; ++i) {\n      fontAtlases[i].destroy(true);\n    }\n    fontAtlases.length = 0;\n  }\n\n  /**\n   * @internal\n   */\n  _uploadCharTexture(charInfo: CharInfo): void {\n    const fontAtlases = this._fontAtlases;\n    let lastIndex = this._lastIndex;\n    if (lastIndex === -1) {\n      this._createFontAtlas();\n      lastIndex++;\n    }\n    let fontAtlas = fontAtlases[lastIndex];\n    if (!fontAtlas.uploadCharTexture(charInfo)) {\n      fontAtlas = this._createFontAtlas();\n      fontAtlas.uploadCharTexture(charInfo);\n      lastIndex++;\n    }\n    this._lastIndex = lastIndex;\n    charInfo.data = null;\n  }\n\n  /**\n   * @internal\n   */\n  _addCharInfo(char: string, charInfo: CharInfo): void {\n    const lastIndex = this._lastIndex;\n    charInfo.index = lastIndex;\n    this._fontAtlases[lastIndex].addCharInfo(char, charInfo);\n  }\n\n  /**\n   * @internal\n   */\n  _getCharInfo(char: string): CharInfo {\n    const fontAtlases = this._fontAtlases;\n    for (let i = 0, n = fontAtlases.length; i < n; ++i) {\n      const fontAtlas = fontAtlases[i];\n      const charInfo = fontAtlas.getCharInfo(char);\n      if (charInfo) {\n        return charInfo;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * @internal\n   */\n  _getTextureByIndex(index: number): Texture2D {\n    const fontAtlas = this._fontAtlases[index];\n    if (fontAtlas) {\n      return fontAtlas.texture;\n    }\n    return null;\n  }\n\n  /**\n   * @internal\n   */\n  _getLastIndex(): number {\n    return this._lastIndex;\n  }\n\n  private _createFontAtlas(): FontAtlas {\n    const { _engine: engine } = this;\n    const fontAtlas = new FontAtlas(engine);\n    const texture = new Texture2D(engine, 256, 256);\n    fontAtlas.texture = texture;\n    this._fontAtlases.push(fontAtlas);\n    return fontAtlas;\n  }\n}\n","import { RefObject } from \"../../asset/RefObject\";\nimport { Engine } from \"../../Engine\";\nimport { FontStyle } from \"../enums/FontStyle\";\nimport { SubFont } from \"./SubFont\";\n\n/**\n * Font.\n */\nexport class Font extends RefObject {\n  private static _fontMap: Record<string, Font> = {};\n\n  /**\n   * Create a system font.\n   * @param engine - Engine to which the font belongs\n   * @param name - The name of font want to create\n   * @returns The font object has been create\n   */\n  static createFromOS(engine: Engine, name: string): Font {\n    if (name) {\n      const fontMap = Font._fontMap;\n      let font = fontMap[name];\n      if (font) {\n        return font;\n      }\n      font = new Font(engine, name);\n      fontMap[name] = font;\n      return font;\n    }\n    return null;\n  }\n\n  private _name: string = \"\";\n  private _subFontMap: Record<string, SubFont> = {};\n\n  /**\n   * The name of the font object.\n   */\n  get name(): string {\n    return this._name;\n  }\n\n  constructor(engine: Engine, name: string = \"\") {\n    super(engine);\n    this._name = name;\n  }\n\n  /**\n   * @internal\n   */\n  _getSubFont(fontSize: number, fontStyle: FontStyle): SubFont {\n    const key = `${fontSize}-${fontStyle}`;\n    const subFontMap = this._subFontMap;\n    let subFont = subFontMap[key];\n    if (subFont) {\n      return subFont;\n    }\n    subFont = new SubFont(this.engine);\n    subFontMap[key] = subFont;\n    return subFont;\n  }\n\n  /**\n   * @override\n   */\n  _onDestroy(): void {\n    const subFontMap = this._subFontMap;\n    for (let k in subFontMap) {\n      subFontMap[k].destroy();\n    }\n    this._subFontMap = null;\n    delete Font._fontMap[this._name];\n  }\n}\n","/**\n * Asset Loading Promise.\n */\nexport class AssetPromise<T> implements PromiseLike<T> {\n  /**\n   * Return a new resource Promise through the provided asset promise collection.\n   * The resolved of the new AssetPromise will be triggered when all the Promises in the provided set are completed.\n   * @param - Promise Collection\n   * @returns AssetPromise\n   */\n  static all<T = any>(promises: (PromiseLike<T> | T)[]) {\n    return new AssetPromise<T[]>((resolve, reject, setProgress) => {\n      const count = promises.length;\n      const results: T[] = new Array(count);\n      let completed = 0;\n\n      if (count === 0) {\n        return resolve(results);\n      }\n\n      function onComplete(index: number, resultValue: T) {\n        completed++;\n        results[index] = resultValue;\n        setProgress(completed / count);\n        if (completed === count) {\n          resolve(results);\n        }\n      }\n\n      function onProgress(promise: PromiseLike<T> | T, index: number) {\n        if (promise instanceof Promise || promise instanceof AssetPromise) {\n          promise.then(function (value) {\n            onComplete(index, value);\n          }, reject);\n        } else {\n          Promise.resolve().then(() => {\n            onComplete(index, promise as T);\n          });\n        }\n      }\n\n      for (let i = 0; i < count; i++) {\n        onProgress(promises[i], i);\n      }\n    });\n  }\n\n  /** compatible with Promise */\n  get [Symbol.toStringTag]() {\n    return \"AssetPromise\";\n  }\n\n  private _promise: Promise<T>;\n  private _state = PromiseState.Pending;\n  private _onProgressCallback: Array<(progress: number) => void> = [];\n  private _onCancelHandler: () => void;\n  private _reject: (reason: any) => void;\n\n  /**\n   * Create an asset loading Promise.\n   * @param executor - A callback used to initialize the promise. This callback is passed two arguments:\n   * a resolve callback used to resolve the promise with a value or the result of another promise,\n   * and a reject callback used to reject the promise with a provided reason or error.\n   * and a setProgress callback used to set promise progress with a percent.\n   */\n  constructor(executor: AssetPromiseExecutor<T>) {\n    this._promise = new Promise((resolve, reject) => {\n      this._reject = reject;\n      const onResolve = (value: T) => {\n        if (this._state === PromiseState.Pending) {\n          resolve(value);\n          this._state = PromiseState.Fulfilled;\n          this._onProgressCallback = undefined;\n        }\n      };\n      const onReject = (reason) => {\n        if (this._state === PromiseState.Pending) {\n          reject(reason);\n          this._state = PromiseState.Rejected;\n          this._onProgressCallback = undefined;\n        }\n      };\n      const onCancel = (callback) => {\n        if (this._state === PromiseState.Pending) {\n          this._onCancelHandler = callback;\n        }\n      };\n      const setProgress = (progress: number) => {\n        if (this._state === PromiseState.Pending) {\n          this._onProgressCallback.forEach((callback) => callback(progress));\n        }\n      };\n\n      executor(onResolve, onReject, setProgress, onCancel);\n    });\n  }\n\n  /**\n   * Progress callback.\n   * @param callback\n   * @returns AssetPromise\n   */\n  onProgress(callback: (progress: number) => void): AssetPromise<T> {\n    this._onProgressCallback.push(callback);\n    return this;\n  }\n\n  then<TResult1 = T, TResult2 = never>(\n    onfulfilled?: (value: T) => TResult1 | PromiseLike<TResult1>,\n    onrejected?: (reason: any) => TResult2 | PromiseLike<TResult2>\n  ): AssetPromise<TResult1 | TResult2> {\n    return new AssetPromise<TResult1 | TResult2>((resolve, reject) => {\n      this._promise.then(onfulfilled, onrejected).then(resolve).catch(reject);\n    });\n  }\n\n  /**\n   * Attaches a callback for only the rejection of the Promise.\n   * @param onRejected - The callback to execute when the Promise is rejected.\n   * @returns A Promise for the completion of the callback.\n   */\n  catch(onRejected: (reason: any) => any): AssetPromise<T> {\n    return new AssetPromise<T>((resolve, reject) => {\n      this._promise.catch(onRejected).then(resolve).catch(reject);\n    });\n  }\n\n  /**\n   * Attaches a callback that is invoked when the Promise is settled (fulfilled or rejected). The\n   * resolved value cannot be modified from the callback.\n   * @param onfinally The callback to execute when the Promise is settled (fulfilled or rejected).\n   * @returns A Promise for the completion of the callback.\n   */\n  finally(onFinally?: () => void): Promise<T> {\n    return this._promise.finally(onFinally);\n  }\n\n  /**\n   * Cancel promise request.\n   * @returns Asset promise\n   */\n  cancel(): AssetPromise<T> {\n    if (this._state !== PromiseState.Pending) {\n      return;\n    }\n    this._state = PromiseState.Canceled;\n    this._reject(\"canceled\");\n    this._onCancelHandler && this._onCancelHandler();\n    return this;\n  }\n}\n\ninterface AssetPromiseExecutor<T> {\n  (\n    resolve: (value?: T | PromiseLike<T>) => void,\n    reject?: (reason?: any) => void,\n    setProgress?: (progress: number) => void,\n    onCancel?: (callback: () => void) => void\n  ): void;\n}\n\n/** @internal */\nenum PromiseState {\n  Pending = \"pending\",\n  Fulfilled = \"fulfilled\",\n  Rejected = \"rejected\",\n  Canceled = \"canceled\"\n}\n","import { Engine, EngineObject, Logger } from \"..\";\nimport { ObjectValues } from \"../base/Util\";\nimport { AssetPromise } from \"./AssetPromise\";\nimport { Loader } from \"./Loader\";\nimport { LoadItem } from \"./LoadItem\";\nimport { RefObject } from \"./RefObject\";\n\n/**\n * ResourceManager\n */\nexport class ResourceManager {\n  /** Loader collection. */\n  private static _loaders: { [key: string]: Loader<any> } = {};\n  private static _extTypeMapping: { [key: string]: string } = {};\n\n  /**\n   * @internal\n   */\n  static _addLoader(type: string, loader: Loader<any>, extNames: string[]) {\n    this._loaders[type] = loader;\n    for (let i = 0, len = extNames.length; i < len; i++) {\n      this._extTypeMapping[extNames[i]] = type;\n    }\n  }\n\n  private static _getTypeByUrl(url: string): string {\n    const path = url.split(\"?\")[0];\n    return this._extTypeMapping[path.substring(path.lastIndexOf(\".\") + 1)];\n  }\n\n  /** The number of retries after failing to load assets. */\n  retryCount: number = 1;\n  /** Retry delay time after failed to load assets, in milliseconds. */\n  retryInterval: number = 0;\n  /** The default timeout period for loading assets, in milliseconds. */\n  timeout: number = Infinity;\n\n  /** Asset path pool, key is asset ID, value is asset path */\n  private _assetPool: { [key: number]: string } = Object.create(null);\n  /** Asset pool, the key is the asset path and the value is the asset. */\n  private _assetUrlPool: { [key: string]: Object } = Object.create(null);\n  /** Reference counted object pool, key is the object ID, and reference counted objects are put into this pool. */\n  private _refObjectPool: { [key: number]: RefObject } = Object.create(null);\n  /** Loading promises. */\n  private _loadingPromises: { [url: string]: AssetPromise<any> } = {};\n\n  /**\n   * Create a ResourceManager.\n   * @param engine - Engine to which the current ResourceManager belongs\n   */\n  constructor(public readonly engine: Engine) {}\n\n  /**\n   * Load asset asynchronously through the path.\n   * @param path - Path\n   * @returns Asset promise\n   */\n  load<T>(path: string): AssetPromise<T>;\n\n  /**\n   * Load asset collection asynchronously through urls.\n   * @param paths - Path collections\n   * @returns Asset Promise\n   */\n  load(paths: string[]): AssetPromise<Object[]>;\n\n  /**\n   * Load the asset asynchronously by asset item information.\n   * @param assetItem - AssetItem\n   * @returns AssetPromise\n   */\n  load<T>(assetItem: LoadItem): AssetPromise<T>;\n\n  /**\n   * Load the asset collection asynchronously by loading the information collection.\n   * @param assetItems - Asset collection\n   * @returns AssetPromise\n   */\n  load(assetItems: LoadItem[]): AssetPromise<Object[]>;\n\n  load<T>(assetInfo: string | LoadItem | (LoadItem | string)[]): AssetPromise<T | Object[]> {\n    // single item\n    if (!Array.isArray(assetInfo)) {\n      return this._loadSingleItem(assetInfo);\n    }\n    // multi items\n    const promises = assetInfo.map((item) => this._loadSingleItem<T>(item));\n    return AssetPromise.all(promises);\n  }\n\n  /**\n   * Get the resource from cache by asset url, return the resource object if it loaded, otherwise return null.\n   * @param url - Resource url\n   * @returns Resource object\n   */\n  getFromCache<T>(url: string): T {\n    return (this._assetUrlPool[url] as T) ?? null;\n  }\n\n  /**\n   * Get asset url from instanceId.\n   * @param instanceId - Engine instance id\n   * @returns Asset url\n   */\n  getAssetPath(instanceId: number): string {\n    return this._assetPool[instanceId];\n  }\n\n  /**\n   * Cancel all assets that have not finished loading.\n   */\n  cancelNotLoaded(): void;\n\n  /**\n   * Cancel assets whose url has not finished loading.\n   * @param url - Resource url\n   */\n  cancelNotLoaded(url: string): void;\n\n  /**\n   * Cancel the incompletely loaded assets in urls.\n   * @param urls - Resource urls\n   */\n  cancelNotLoaded(urls: string[]): void;\n\n  cancelNotLoaded(url?: string | string[]): void {\n    if (!url) {\n      ObjectValues(this._loadingPromises).forEach((promise) => {\n        promise.cancel();\n      });\n    } else if (typeof url === \"string\") {\n      this._loadingPromises[url]?.cancel();\n    } else {\n      url.forEach((p) => {\n        this._loadingPromises[p]?.cancel();\n      });\n    }\n  }\n\n  /**\n   * Garbage collection will release resource objects managed by reference counting.\n   * @remarks The release principle is that it is not referenced by the components, including direct and indirect reference.\n   */\n  gc(): void {\n    this._gc(false);\n  }\n\n  /**\n   * @internal\n   */\n  _addAsset(path: string, asset: EngineObject): void {\n    this._assetPool[asset.instanceId] = path;\n    this._assetUrlPool[path] = asset;\n  }\n\n  /**\n   * @internal\n   */\n  _deleteAsset(asset: EngineObject): void {\n    const id = asset.instanceId;\n    const path = this._assetPool[id];\n    if (path) {\n      delete this._assetPool[id];\n      delete this._assetUrlPool[path];\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _addRefObject(id: number, asset: RefObject): void {\n    this._refObjectPool[id] = asset;\n  }\n\n  /**\n   * @internal\n   */\n  _deleteRefObject(id: number): void {\n    delete this._refObjectPool[id];\n  }\n\n  /**\n   * @internal\n   */\n  _destroy(): void {\n    this.cancelNotLoaded();\n    this._gc(true);\n    this._assetPool = null;\n    this._assetUrlPool = null;\n    this._refObjectPool = null;\n  }\n\n  private _assignDefaultOptions(assetInfo: LoadItem): LoadItem | never {\n    assetInfo.type = assetInfo.type ?? ResourceManager._getTypeByUrl(assetInfo.url);\n    if (assetInfo.type === undefined) {\n      throw `asset type should be specified: ${assetInfo.url}`;\n    }\n    assetInfo.retryCount = assetInfo.retryCount ?? this.retryCount;\n    assetInfo.timeout = assetInfo.timeout ?? this.timeout;\n    assetInfo.retryInterval = assetInfo.retryInterval ?? this.retryInterval;\n    assetInfo.url = assetInfo.url ?? assetInfo.urls.join(\",\");\n    return assetInfo;\n  }\n\n  private _loadSingleItem<T>(itemOrURL: LoadItem | string): AssetPromise<T> {\n    const item = this._assignDefaultOptions(typeof itemOrURL === \"string\" ? { url: itemOrURL } : itemOrURL);\n\n    // Check url mapping\n    const itemURL = item.url;\n    const url = this._virtualPathMap[itemURL] ? this._virtualPathMap[itemURL] : itemURL;\n\n    // Parse url\n    const { assetBaseURL, queryPath } = this._parseURL(url);\n    const paths = queryPath ? this._parseQueryPath(queryPath) : [];\n\n    // Check cache\n    const cacheObject = this._assetUrlPool[assetBaseURL];\n    if (cacheObject) {\n      return new AssetPromise((resolve) => {\n        resolve(this._getResolveResource(cacheObject, paths) as T);\n      });\n    }\n\n    // Get asset url\n    let assetURL = assetBaseURL;\n    if (queryPath) {\n      assetURL += \"?q=\" + paths.shift();\n    }\n\n    // Check is loading\n    const loadingPromises = this._loadingPromises;\n    const loadingPromise = loadingPromises[assetURL];\n    if (loadingPromise) {\n      return new AssetPromise((resolve, reject) => {\n        loadingPromise\n          .then((resource: EngineObject) => {\n            resolve(this._getResolveResource(resource, paths) as T);\n          })\n          .catch((error: Error) => {\n            reject(error);\n          });\n      });\n    }\n\n    // Check loader\n    const loader = ResourceManager._loaders[item.type];\n    if (!loader) {\n      throw `loader not found: ${item.type}`;\n    }\n\n    // Load asset\n    item.url = assetBaseURL;\n    const promise = loader.load(item, this);\n    if (promise instanceof AssetPromise) {\n      loadingPromises[assetBaseURL] = promise;\n      promise.then(\n        (resource: EngineObject) => {\n          if (loader.useCache) {\n            this._addAsset(assetBaseURL, resource);\n          }\n          delete loadingPromises[assetBaseURL];\n        },\n        () => delete loadingPromises[assetBaseURL]\n      );\n      return promise;\n    } else {\n      for (let subURL in promise) {\n        const subPromise = promise[subURL];\n        const isMaster = assetBaseURL === subURL;\n        loadingPromises[subURL] = subPromise;\n\n        subPromise.then(\n          (resource: EngineObject) => {\n            if (isMaster) {\n              if (loader.useCache) {\n                this._addAsset(subURL, resource);\n                for (let k in promise) delete loadingPromises[k];\n              }\n            }\n          },\n          () => {\n            for (let k in promise) delete loadingPromises[k];\n          }\n        );\n      }\n\n      return promise[assetURL].then((resource: EngineObject) => this._getResolveResource(resource, paths) as T);\n    }\n  }\n\n  private _gc(forceDestroy: boolean): void {\n    const objects = ObjectValues(this._refObjectPool);\n    for (let i = 0, len = objects.length; i < len; i++) {\n      if (!objects[i].isGCIgnored || forceDestroy) {\n        objects[i].destroy();\n      }\n    }\n  }\n\n  private _getResolveResource(resource: any, paths: string[]): any {\n    let subResource = resource;\n    if (paths) {\n      for (let i = 0, n = paths.length; i < n; i++) {\n        const path = paths[i];\n        subResource = subResource[path];\n      }\n    }\n    return subResource;\n  }\n\n  private _parseURL(path: string): { assetBaseURL: string; queryPath: string } {\n    let assetBaseURL = path;\n    const index = assetBaseURL.indexOf(\"?\");\n    if (index !== -1) {\n      assetBaseURL = assetBaseURL.slice(0, index);\n    }\n    return { assetBaseURL, queryPath: this._getParameterByName(\"q\", path) };\n  }\n\n  private _getParameterByName(name, url = window.location.href) {\n    name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n    var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n      results = regex.exec(url);\n    if (!results) return null;\n    if (!results[2]) return \"\";\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n  }\n\n  private _parseQueryPath(string): string[] {\n    const result = [];\n    if (string.charCodeAt(0) === charCodeOfDot) {\n      result.push(\"\");\n    }\n    string.replace(rePropName, (match, expression, quote, subString) => {\n      let key = match;\n      if (quote) {\n        key = subString.replace(reEscapeChar, \"$1\");\n      } else if (expression) {\n        key = expression.trim();\n      }\n      result.push(key);\n    });\n    return result;\n  }\n\n  //-----------------Editor temp solution-----------------\n\n  /** @internal */\n  _objectPool: { [key: string]: any } = Object.create(null);\n  /** @internal */\n  _editorResourceConfig: EditorResourceConfig = Object.create(null);\n  /** @internal */\n  _virtualPathMap: Record<string, string> = Object.create(null);\n\n  /**\n   * @internal\n   * @beta Just for internal editor, not recommended for developers.\n   */\n  getResourceByRef<T>(ref: { refId: string; key?: string; isClone?: boolean }): Promise<T> {\n    const { refId, key, isClone } = ref;\n    const obj = this._objectPool[refId];\n    let promise;\n    if (obj) {\n      promise = Promise.resolve(obj);\n    } else {\n      let url = this._editorResourceConfig[refId]?.path;\n      if (!url) {\n        Logger.warn(`refId:${refId} is not find in this._editorResourceConfig.`);\n        return Promise.resolve(null);\n      }\n      url = key ? `${url}${url.indexOf(\"?\") > -1 ? \"&\" : \"?\"}q=${key}` : url;\n      promise = this.load<any>({\n        url,\n        type: this._editorResourceConfig[refId].type\n      });\n    }\n    return promise.then((item) => (isClone ? item.clone() : item));\n  }\n\n  /**\n   * @internal\n   * @beta Just for internal editor, not recommended for developers.\n   */\n  initVirtualResources(config: EditorResourceItem[]): void {\n    config.forEach((element) => {\n      this._virtualPathMap[element.virtualPath] = element.path;\n      this._editorResourceConfig[element.id] = element;\n    });\n  }\n  //-----------------Editor temp solution-----------------\n}\n\n/**\n * Declare ResourceLoader's decorator.\n * @param assetType - Type of asset\n * @param extnames - Name of file extension\n */\nexport function resourceLoader(assetType: string, extnames: string[], useCache: boolean = true) {\n  return <T extends Loader<any>>(Target: { new (useCache: boolean): T }) => {\n    const loader = new Target(useCache);\n    ResourceManager._addLoader(assetType, loader, extnames);\n  };\n}\n\nconst charCodeOfDot = \".\".charCodeAt(0);\nconst reEscapeChar = /\\\\(\\\\)?/g;\nconst rePropName = RegExp(\n  // Match anything that isn't a dot or bracket.\n  \"[^.[\\\\]]+\" +\n    \"|\" +\n    // Or match property names within brackets.\n    \"\\\\[(?:\" +\n    // Match a non-string expression.\n    \"([^\\\"'][^[]*)\" +\n    \"|\" +\n    // Or match strings (supports escaping characters).\n    \"([\\\"'])((?:(?!\\\\2)[^\\\\\\\\]|\\\\\\\\.)*?)\\\\2\" +\n    \")\\\\]\" +\n    \"|\" +\n    // Or match \"\" as the space between consecutive dots or empty brackets.\n    \"(?=(?:\\\\.|\\\\[\\\\])(?:\\\\.|\\\\[\\\\]|$))\",\n  \"g\"\n);\n\ntype EditorResourceItem = { virtualPath: string; path: string; type: string; id: string };\ntype EditorResourceConfig = Record<string, EditorResourceItem>;\n","/**\n * High-performance unordered array, delete uses exchange method to improve performance, internal capacity only increases.\n */\nexport class DisorderedArray<T> {\n  _elements: T[];\n\n  length: number = 0;\n\n  constructor(count: number = 0) {\n    this._elements = new Array<T>(count);\n  }\n\n  add(element: T): void {\n    if (this.length === this._elements.length) this._elements.push(element);\n    else this._elements[this.length] = element;\n    this.length++;\n  }\n\n  delete(element: T): void {\n    //TODO: It can be optimized for custom binary search and other algorithms, currently this._elements>=this.length wastes performance.\n    const index = this._elements.indexOf(element);\n    this.deleteByIndex(index);\n  }\n\n  get(index: number): T {\n    if (index >= this.length) {\n      throw \"Index is out of range.\";\n    }\n    return this._elements[index];\n  }\n\n  /**\n   *\n   * @param index\n   * @returns The replaced item is used to reset its index.\n   */\n  deleteByIndex(index: number): T {\n    var elements: T[] = this._elements;\n    let end: T = null;\n    const lastIndex = this.length - 1;\n    if (index !== lastIndex) {\n      end = elements[lastIndex];\n      elements[index] = end;\n    }\n    this.length--;\n    return end;\n  }\n\n  garbageCollection(): void {\n    this._elements.length = this.length;\n  }\n}\n","import { Camera } from \"./Camera\";\nimport { Component } from \"./Component\";\nimport { DisorderedArray } from \"./DisorderedArray\";\nimport { Renderer } from \"./Renderer\";\nimport { Script } from \"./Script\";\n\n/**\n * The manager of the components.\n */\nexport class ComponentsManager {\n  /** @internal */\n  _renderers: DisorderedArray<Renderer> = new DisorderedArray();\n\n  // Script\n  private _onStartScripts: DisorderedArray<Script> = new DisorderedArray();\n  private _onUpdateScripts: DisorderedArray<Script> = new DisorderedArray();\n  private _onLateUpdateScripts: DisorderedArray<Script> = new DisorderedArray();\n  private _onPhysicsUpdateScripts: DisorderedArray<Script> = new DisorderedArray();\n  private _disableScripts: Script[] = [];\n\n  private _pendingDestroyScripts: Script[] = [];\n  private _disposeDestroyScripts: Script[] = [];\n\n  // Animation\n  private _onUpdateAnimations: DisorderedArray<Component> = new DisorderedArray();\n\n  // Render\n  private _onUpdateRenderers: DisorderedArray<Renderer> = new DisorderedArray();\n\n  // Delay dispose active/inActive Pool\n  private _componentsContainerPool: Component[][] = [];\n\n  addRenderer(renderer: Renderer) {\n    renderer._rendererIndex = this._renderers.length;\n    this._renderers.add(renderer);\n  }\n\n  removeRenderer(renderer: Renderer) {\n    const replaced = this._renderers.deleteByIndex(renderer._rendererIndex);\n    replaced && (replaced._rendererIndex = renderer._rendererIndex);\n    renderer._rendererIndex = -1;\n  }\n\n  addOnStartScript(script: Script) {\n    script._onStartIndex = this._onStartScripts.length;\n    this._onStartScripts.add(script);\n  }\n\n  removeOnStartScript(script: Script): void {\n    const replaced = this._onStartScripts.deleteByIndex(script._onStartIndex);\n    replaced && (replaced._onStartIndex = script._onStartIndex);\n    script._onStartIndex = -1;\n  }\n\n  addOnUpdateScript(script: Script) {\n    script._onUpdateIndex = this._onUpdateScripts.length;\n    this._onUpdateScripts.add(script);\n  }\n\n  removeOnUpdateScript(script: Script): void {\n    const replaced = this._onUpdateScripts.deleteByIndex(script._onUpdateIndex);\n    replaced && (replaced._onUpdateIndex = script._onUpdateIndex);\n    script._onUpdateIndex = -1;\n  }\n\n  addOnLateUpdateScript(script: Script): void {\n    script._onLateUpdateIndex = this._onLateUpdateScripts.length;\n    this._onLateUpdateScripts.add(script);\n  }\n\n  removeOnLateUpdateScript(script: Script): void {\n    const replaced = this._onLateUpdateScripts.deleteByIndex(script._onLateUpdateIndex);\n    replaced && (replaced._onLateUpdateIndex = script._onLateUpdateIndex);\n    script._onLateUpdateIndex = -1;\n  }\n\n  addOnPhysicsUpdateScript(script: Script): void {\n    script._onPhysicsUpdateIndex = this._onPhysicsUpdateScripts.length;\n    this._onPhysicsUpdateScripts.add(script);\n  }\n\n  removeOnPhysicsUpdateScript(script: Script): void {\n    const replaced = this._onPhysicsUpdateScripts.deleteByIndex(script._onPhysicsUpdateIndex);\n    replaced && (replaced._onPhysicsUpdateIndex = script._onPhysicsUpdateIndex);\n    script._onPhysicsUpdateIndex = -1;\n  }\n\n  addOnUpdateAnimations(animation: Component): void {\n    //@ts-ignore\n    animation._onUpdateIndex = this._onUpdateAnimations.length;\n    this._onUpdateAnimations.add(animation);\n  }\n\n  removeOnUpdateAnimations(animation: Component): void {\n    //@ts-ignore\n    const replaced = this._onUpdateAnimations.deleteByIndex(animation._onUpdateIndex);\n    //@ts-ignore\n    replaced && (replaced._onUpdateIndex = animation._onUpdateIndex);\n    //@ts-ignore\n    animation._onUpdateIndex = -1;\n  }\n\n  addOnUpdateRenderers(renderer: Renderer): void {\n    renderer._onUpdateIndex = this._onUpdateRenderers.length;\n    this._onUpdateRenderers.add(renderer);\n  }\n\n  removeOnUpdateRenderers(renderer: Renderer): void {\n    const replaced = this._onUpdateRenderers.deleteByIndex(renderer._onUpdateIndex);\n    replaced && (replaced._onUpdateIndex = renderer._onUpdateIndex);\n    renderer._onUpdateIndex = -1;\n  }\n\n  addDisableScript(component: Script): void {\n    this._disableScripts.push(component);\n  }\n\n  addPendingDestroyScript(component: Script): void {\n    this._pendingDestroyScripts.push(component);\n  }\n\n  callScriptOnStart(): void {\n    const onStartScripts = this._onStartScripts;\n    if (onStartScripts.length > 0) {\n      const elements = onStartScripts._elements;\n      // The 'onStartScripts.length' maybe add if you add some Script with addComponent() in some Script's onStart()\n      for (let i = 0; i < onStartScripts.length; i++) {\n        const script = elements[i];\n        if (!script._waitHandlingInValid) {\n          script._started = true;\n          script._onStartIndex = -1;\n          script.onStart();\n        }\n      }\n      onStartScripts.length = 0;\n    }\n  }\n\n  callScriptOnUpdate(deltaTime: number): void {\n    const elements = this._onUpdateScripts._elements;\n    for (let i = this._onUpdateScripts.length - 1; i >= 0; --i) {\n      const element = elements[i];\n      if (!element._waitHandlingInValid && element._started) {\n        element.onUpdate(deltaTime);\n      }\n    }\n  }\n\n  callScriptOnLateUpdate(deltaTime: number): void {\n    const elements = this._onLateUpdateScripts._elements;\n    for (let i = this._onLateUpdateScripts.length - 1; i >= 0; --i) {\n      const element = elements[i];\n      if (!element._waitHandlingInValid && element._started) {\n        element.onLateUpdate(deltaTime);\n      }\n    }\n  }\n\n  callScriptOnPhysicsUpdate(): void {\n    const elements = this._onPhysicsUpdateScripts._elements;\n    for (let i = this._onPhysicsUpdateScripts.length - 1; i >= 0; --i) {\n      const element = elements[i];\n      if (!element._waitHandlingInValid && element._started) {\n        element.onPhysicsUpdate();\n      }\n    }\n  }\n\n  callAnimationUpdate(deltaTime: number): void {\n    const elements = this._onUpdateAnimations._elements;\n    for (let i = this._onUpdateAnimations.length - 1; i >= 0; --i) {\n      //@ts-ignore\n      elements[i].update(deltaTime);\n    }\n  }\n\n  callRendererOnUpdate(deltaTime: number): void {\n    const elements = this._onUpdateRenderers._elements;\n    for (let i = this._onUpdateRenderers.length - 1; i >= 0; --i) {\n      elements[i].update(deltaTime);\n    }\n  }\n\n  handlingInvalidScripts(): void {\n    const { _disableScripts: disableScripts } = this;\n    let length = disableScripts.length;\n    if (length > 0) {\n      for (let i = length - 1; i >= 0; i--) {\n        const disableScript = disableScripts[i];\n        disableScript._waitHandlingInValid && disableScript._handlingInValid();\n      }\n      disableScripts.length = 0;\n    }\n\n    const { _disposeDestroyScripts: pendingDestroyScripts, _pendingDestroyScripts: disposeDestroyScripts } = this;\n    this._disposeDestroyScripts = disposeDestroyScripts;\n    this._pendingDestroyScripts = pendingDestroyScripts;\n    length = disposeDestroyScripts.length;\n    if (length > 0) {\n      for (let i = length - 1; i >= 0; i--) {\n        disposeDestroyScripts[i].onDestroy();\n      }\n      disposeDestroyScripts.length = 0;\n    }\n  }\n\n  callCameraOnBeginRender(camera: Camera): void {\n    const scripts = camera.entity._scripts;\n    for (let i = scripts.length - 1; i >= 0; --i) {\n      const script = scripts.get(i);\n      script._waitHandlingInValid || script.onBeginRender(camera);\n    }\n  }\n\n  callCameraOnEndRender(camera: Camera): void {\n    const scripts = camera.entity._scripts;\n    for (let i = scripts.length - 1; i >= 0; --i) {\n      const script = scripts.get(i);\n      script._waitHandlingInValid || script.onEndRender(camera);\n    }\n  }\n\n  getActiveChangedTempList(): Component[] {\n    return this._componentsContainerPool.length ? this._componentsContainerPool.pop() : [];\n  }\n\n  putActiveChangedTempList(componentContainer: Component[]): void {\n    componentContainer.length = 0;\n    this._componentsContainerPool.push(componentContainer);\n  }\n}\n","import { Component } from \"../Component\";\nimport { CloneManager } from \"./CloneManager\";\nimport { CloneMode } from \"./enums/CloneMode\";\n\n/**\n * Custom clone interface.\n */\nexport interface ICustomClone {\n  /**\n   * @internal\n   */\n  _cloneTo(target: ICustomClone): void;\n}\n\nexport class ComponentCloner {\n  /**\n   * Clone component.\n   * @param source - Clone source\n   * @param target - Clone target\n   */\n  static cloneComponent(source: Component, target: Component): void {\n    const cloneModes = CloneManager.getCloneMode(source.constructor);\n    const keys = Object.keys(source);\n    for (let i = 0, n = keys.length; i < n; i++) {\n      const k = keys[i];\n      const cloneMode = cloneModes[k];\n      switch (cloneMode) {\n        case undefined:\n        case CloneMode.Assignment:\n          target[k] = source[k];\n          break;\n        case CloneMode.Shallow:\n          const sourcePropS: Object = source[k];\n          if (sourcePropS instanceof Object) {\n            let tarProp = <Object>target[k];\n            tarProp == null && (tarProp = target[k] = sourcePropS.constructor());\n            Object.assign(tarProp, sourcePropS);\n          } else {\n            // Null or undefined and primitive type.\n            target[k] = sourcePropS;\n          }\n          break;\n        case CloneMode.Deep:\n          const sourcePropD: Object = source[k];\n          if (sourcePropD instanceof Object) {\n            let tarProp = <Object>target[k];\n            tarProp == null && (tarProp = target[k] = sourcePropD.constructor());\n            CloneManager.deepCloneObject(sourcePropD, tarProp);\n          } else {\n            // Null or undefined and primitive type.\n            target[k] = sourcePropD;\n          }\n          break;\n      }\n    }\n    if ((<any>source)._cloneTo) {\n      (<any>source)._cloneTo(target);\n    }\n  }\n}\n","import { Component } from \"./Component\";\nimport { Entity } from \"./Entity\";\n\ntype ComponentConstructor = new (entity: Entity) => Component;\n\n/**\n * Used for component dependency registration.\n */\nexport class ComponentsDependencies {\n  /**\n   * @internal\n   */\n  private static _dependenciesMap = new Map<ComponentConstructor, ComponentConstructor[]>();\n  private static _invDependenciesMap = new Map<ComponentConstructor, ComponentConstructor[]>();\n\n  /**\n   * @internal\n   */\n  static _register(currentComponent: ComponentConstructor, dependentComponent: ComponentConstructor): void {\n    this._addDependency(currentComponent, dependentComponent, this._dependenciesMap);\n    this._addDependency(dependentComponent, currentComponent, this._invDependenciesMap);\n  }\n\n  /**\n   * @internal\n   */\n  static _addCheck(entity: Entity, type: ComponentConstructor): void {\n    // Check if there are dependent components.\n    const dependentComponents = ComponentsDependencies._dependenciesMap.get(type);\n    if (dependentComponents) {\n      for (let i = 0, n = dependentComponents.length; i < n; i++) {\n        const dependentComponent = dependentComponents[i];\n        if (!entity.getComponent(dependentComponent)) {\n          entity.addComponent(dependentComponent);\n        }\n      }\n    }\n  }\n\n  /**\n   * @internal\n   */\n  static _removeCheck(entity: Entity, type: ComponentConstructor): void {\n    const invDependencies = ComponentsDependencies._invDependenciesMap.get(type);\n    if (invDependencies) {\n      for (let i = 0, len = invDependencies.length; i < len; i++) {\n        if (entity.getComponent(invDependencies[i])) {\n          throw `you should remove ${invDependencies[i]} before adding ${type}`;\n        }\n      }\n    }\n  }\n\n  private static _addDependency(\n    currentComponent: ComponentConstructor,\n    dependentComponent: ComponentConstructor,\n    map: Map<ComponentConstructor, ComponentConstructor[]>\n  ): void {\n    let components = map.get(currentComponent);\n    if (!components) {\n      components = [];\n      map.set(currentComponent, components);\n    }\n    if (components.indexOf(dependentComponent) === -1) {\n      components.push(dependentComponent);\n    }\n  }\n\n  private constructor() {}\n}\n\n/**\n * Dependent components, automatically added if they do not exist.\n * @param components -  Dependent components\n */\nexport function dependentComponents(...components: ComponentConstructor[]) {\n  return function <T extends ComponentConstructor>(target: T): void {\n    components.forEach((component) => ComponentsDependencies._register(target, component));\n  };\n}\n","/**\n * Layer, used for bit operations.\n */\nexport enum Layer {\n  /** Layer 0. */\n  Layer0 = 0x1,\n  /** Layer 1. */\n  Layer1 = 0x2,\n  /** Layer 2. */\n  Layer2 = 0x4,\n  /** Layer 3. */\n  Layer3 = 0x8,\n  /** Layer 4. */\n  Layer4 = 0x10,\n  /** Layer 5. */\n  Layer5 = 0x20,\n  /** Layer 6. */\n  Layer6 = 0x40,\n  /** Layer 7. */\n  Layer7 = 0x80,\n  /** Layer 8. */\n  Layer8 = 0x100,\n  /** Layer 9. */\n  Layer9 = 0x200,\n  /** Layer 10. */\n  Layer10 = 0x400,\n  /** Layer 11. */\n  Layer11 = 0x800,\n  /** Layer 12. */\n  Layer12 = 0x1000,\n  /** Layer 13. */\n  Layer13 = 0x2000,\n  /** Layer 14. */\n  Layer14 = 0x4000,\n  /** Layer 15. */\n  Layer15 = 0x8000,\n  /** Layer 16. */\n  Layer16 = 0x10000,\n  /** Layer 17. */\n  Layer17 = 0x20000,\n  /** Layer 18. */\n  Layer18 = 0x40000,\n  /** Layer 19. */\n  Layer19 = 0x80000,\n  /** Layer 20. */\n  Layer20 = 0x100000,\n  /** Layer 21. */\n  Layer21 = 0x200000,\n  /** Layer 22. */\n  Layer22 = 0x400000,\n  /** Layer 23. */\n  Layer23 = 0x800000,\n  /** Layer 24. */\n  Layer24 = 0x1000000,\n  /** Layer 25. */\n  Layer25 = 0x2000000,\n  /** Layer 26. */\n  Layer26 = 0x4000000,\n  /** Layer 27. */\n  Layer27 = 0x8000000,\n  /** Layer 28. */\n  Layer28 = 0x10000000,\n  /** Layer 29. */\n  Layer29 = 0x20000000,\n  /** Layer 30. */\n  Layer30 = 0x40000000,\n  /** Layer 31. */\n  Layer31 = 0x80000000,\n  /** All layers. */\n  Everything = 0xffffffff,\n  /** None layer. */\n  Nothing = 0x0\n}\n","import { removeFromArray } from \"./base/Util\";\nimport { UpdateFlagManager } from \"./UpdateFlagManager\";\n\n/**\n * Used to update tags.\n */\nexport abstract class UpdateFlag {\n  /** @internal */\n  _flagManagers: UpdateFlagManager[] = [];\n\n  /**\n   * Dispatch.\n   * @param bit - Bit\n   * @param param - Parameter\n   */\n  abstract dispatch(bit?: number, param?: Object): void;\n\n  /**\n   * Clear.\n   */\n  clearFromManagers(): void {\n    this._removeFromManagers();\n    this._flagManagers.length = 0;\n  }\n\n  /**\n   * Destroy.\n   */\n  destroy(): void {\n    this._removeFromManagers();\n    this._flagManagers = null;\n  }\n\n  private _removeFromManagers(): void {\n    const flagManagers = this._flagManagers;\n    for (let i = 0, n = flagManagers.length; i < n; i++) {\n      removeFromArray(flagManagers[i]._updateFlags, this);\n    }\n  }\n}\n","import { UpdateFlag } from \"./UpdateFlag\";\n\n/**\n * Bool update flag.\n */\nexport class BoolUpdateFlag extends UpdateFlag {\n  /** Bool flag. */\n  flag: boolean = true;\n\n  /**\n   * @inheritdoc\n   */\n  dispatch(): void {\n    this.flag = true;\n  }\n}\n","import { EngineObject } from \"./base\";\nimport { assignmentClone, ignoreClone } from \"./clone/CloneManager\";\nimport { Entity } from \"./Entity\";\nimport { Scene } from \"./Scene\";\n\n/**\n * The base class of the components.\n */\nexport class Component extends EngineObject {\n  /** @internal */\n  @ignoreClone\n  _entity: Entity;\n  /** @internal */\n  @ignoreClone\n  _awoken: boolean = false;\n  /** @internal */\n  @ignoreClone\n  _destroyed: boolean = false;\n\n  @ignoreClone\n  private _phasedActive: boolean = false;\n  @assignmentClone\n  private _enabled: boolean = true;\n\n  /**\n   * Indicates whether the component is enabled.\n   */\n  get enabled(): boolean {\n    return this._enabled;\n  }\n\n  set enabled(value: boolean) {\n    if (value !== this._enabled) {\n      this._enabled = value;\n      if (this._entity.isActiveInHierarchy) {\n        if (value) {\n          this._phasedActive = true;\n          this._onEnable();\n        } else {\n          this._phasedActive = false;\n          this._onDisable();\n        }\n      }\n    }\n  }\n\n  /**\n   * Indicates whether the component is destroyed.\n   */\n  get destroyed(): boolean {\n    return this._destroyed;\n  }\n\n  /**\n   * The entity which the component belongs to.\n   */\n  get entity(): Entity {\n    return this._entity;\n  }\n\n  /**\n   * The scene which the component's entity belongs to.\n   */\n  get scene(): Scene {\n    return this._entity.scene;\n  }\n\n  constructor(entity: Entity) {\n    super(entity.engine);\n    this._entity = entity;\n  }\n\n  /**\n   * Destroy this instance.\n   */\n  destroy(): void {\n    if (this._destroyed) {\n      return;\n    }\n    this._entity._removeComponent(this);\n    if (this._entity.isActiveInHierarchy) {\n      this._enabled && this._onDisable();\n    }\n    this._destroyed = true;\n    this._onDestroy();\n  }\n\n  /**\n   * @internal\n   */\n  _onAwake(): void {}\n\n  /**\n   * @internal\n   */\n  _onEnable(): void {}\n\n  /**\n   * @internal\n   */\n  _onDisable(): void {}\n\n  /**\n   * @internal\n   */\n  _onDestroy(): void {}\n\n  /**\n   * @internal\n   */\n  _setActive(value: boolean): void {\n    const entity = this._entity;\n    if (value) {\n      // Awake condition is un awake && current entity is active in hierarchy\n      if (!this._awoken && entity._isActiveInHierarchy) {\n        this._awoken = true;\n        this._onAwake();\n      }\n      // Developer maybe do `isActive = false` in `onAwake` method\n      // Enable condition is phased active state is false && current compoment is active in hierarchy\n      if (!this._phasedActive && entity._isActiveInHierarchy && this._enabled) {\n        this._phasedActive = true;\n        this._onEnable();\n      }\n    } else {\n      // Disable condition is phased active state is true && current compoment is inActive in hierarchy\n      if (this._phasedActive && !(entity._isActiveInHierarchy && this._enabled)) {\n        this._phasedActive = false;\n        this._onDisable();\n      }\n    }\n  }\n}\n","import { removeFromArray } from \"./base/Util\";\nimport { UpdateFlag } from \"./UpdateFlag\";\n\n/**\n * @internal\n */\nexport class UpdateFlagManager {\n  /** @internal */\n  _updateFlags: UpdateFlag[] = [];\n\n  private _listensers: ((type?: number, param?: Object) => void)[] = [];\n\n  /**\n   * Create a UpdateFlag.\n   * @returns - The UpdateFlag.\n   */\n  createFlag<T extends UpdateFlag>(type: new () => T): T {\n    const flag = new type();\n    this.addFlag(flag);\n    return flag;\n  }\n\n  /**\n   * Add a UpdateFlag.\n   * @param flag - The UpdateFlag.\n   */\n  addFlag(flag: UpdateFlag): void {\n    this._updateFlags.push(flag);\n    flag._flagManagers.push(this);\n  }\n\n  /**\n   * Remove a UpdateFlag.\n   * @param flag - The UpdateFlag.\n   */\n  removeFlag(flag: UpdateFlag): void {\n    const success = removeFromArray(this._updateFlags, flag);\n    if (success) {\n      removeFromArray(flag._flagManagers, this);\n    }\n  }\n\n  /**\n   * Add a listener.\n   * @param listener - The listener\n   */\n  addListener(listener: (type?: number, param?: Object) => void): void {\n    this._listensers.push(listener);\n  }\n\n  /**\n   * Remove a listener.\n   * @param listener - The listener\n   */\n  removeListener(listener: (type?: number, param?: Object) => void): void {\n    removeFromArray(this._listensers, listener);\n  }\n\n  /**\n   * Dispatch a event.\n   * @param type - Event type, usually in the form of enumeration\n   * @param param - Event param\n   */\n  dispatch(type?: number, param?: Object): void {\n    const updateFlags = this._updateFlags;\n    for (let i = updateFlags.length - 1; i >= 0; i--) {\n      updateFlags[i].dispatch(type, param);\n    }\n\n    const listeners = this._listensers;\n    for (let i = listeners.length - 1; i >= 0; i--) {\n      listeners[i](type, param);\n    }\n  }\n}\n","import { MathUtil, Matrix, Matrix3x3, Quaternion, Vector3 } from \"@galacean/engine-math\";\nimport { BoolUpdateFlag } from \"./BoolUpdateFlag\";\nimport { assignmentClone, deepClone, ignoreClone } from \"./clone/CloneManager\";\nimport { Component } from \"./Component\";\nimport { Entity } from \"./Entity\";\nimport { UpdateFlagManager } from \"./UpdateFlagManager\";\n\n/**\n * Used to implement transformation related functions.\n */\nexport class Transform extends Component {\n  private static _tempQuat0: Quaternion = new Quaternion();\n  private static _tempVec30: Vector3 = new Vector3();\n  private static _tempVec31: Vector3 = new Vector3();\n  private static _tempVec32: Vector3 = new Vector3();\n  private static _tempMat30: Matrix3x3 = new Matrix3x3();\n  private static _tempMat31: Matrix3x3 = new Matrix3x3();\n  private static _tempMat32: Matrix3x3 = new Matrix3x3();\n  private static _tempMat41: Matrix = new Matrix();\n  private static _tempMat42: Matrix = new Matrix();\n\n  @deepClone\n  private _position: Vector3 = new Vector3();\n  @deepClone\n  private _rotation: Vector3 = new Vector3();\n  @deepClone\n  private _rotationQuaternion: Quaternion = new Quaternion();\n  @deepClone\n  private _scale: Vector3 = new Vector3(1, 1, 1);\n  @deepClone\n  private _worldPosition: Vector3 = new Vector3();\n  @deepClone\n  private _worldRotation: Vector3 = new Vector3();\n  @deepClone\n  private _worldRotationQuaternion: Quaternion = new Quaternion();\n  @deepClone\n  private _lossyWorldScale: Vector3 = new Vector3(1, 1, 1);\n  @deepClone\n  private _localMatrix: Matrix = new Matrix();\n  @deepClone\n  private _worldMatrix: Matrix = new Matrix();\n  @ignoreClone\n  private _isParentDirty: boolean = true;\n  @ignoreClone\n  private _parentTransformCache: Transform = null;\n  private _dirtyFlag: number = TransformModifyFlags.WmWpWeWqWs;\n\n  /** @internal */\n  @ignoreClone\n  _updateFlagManager: UpdateFlagManager = new UpdateFlagManager();\n\n  /**\n   * Local position.\n   */\n  get position(): Vector3 {\n    return this._position;\n  }\n\n  set position(value: Vector3) {\n    if (this._position !== value) {\n      this._position.copyFrom(value);\n    }\n  }\n\n  /**\n   * World position.\n   */\n  get worldPosition(): Vector3 {\n    const worldPosition = this._worldPosition;\n    if (this._isContainDirtyFlag(TransformModifyFlags.WorldPosition)) {\n      //@ts-ignore\n      worldPosition._onValueChanged = null;\n      if (this._getParentTransform()) {\n        this.worldMatrix.getTranslation(worldPosition);\n      } else {\n        worldPosition.copyFrom(this._position);\n      }\n      //@ts-ignore\n      worldPosition._onValueChanged = this._onWorldPositionChanged;\n      this._setDirtyFlagFalse(TransformModifyFlags.WorldPosition);\n    }\n\n    return worldPosition;\n  }\n\n  set worldPosition(value: Vector3) {\n    if (this._worldPosition !== value) {\n      this._worldPosition.copyFrom(value);\n    }\n  }\n\n  /**\n   * Local rotation, defining the rotation value in degrees.\n   * Rotations are performed around the Y axis, the X axis, and the Z axis, in that order.\n   */\n  get rotation(): Vector3 {\n    const rotation = this._rotation;\n    if (this._isContainDirtyFlag(TransformModifyFlags.LocalEuler)) {\n      //@ts-ignore\n      rotation._onValueChanged = null;\n      this._rotationQuaternion.toEuler(rotation);\n      rotation.scale(MathUtil.radToDegreeFactor); // radians to degrees\n      //@ts-ignore\n      rotation._onValueChanged = this._onRotationChanged;\n      this._setDirtyFlagFalse(TransformModifyFlags.LocalEuler);\n    }\n\n    return rotation;\n  }\n\n  set rotation(value: Vector3) {\n    if (this._rotation !== value) {\n      this._rotation.copyFrom(value);\n    }\n  }\n\n  /**\n   * World rotation, defining the rotation value in degrees.\n   * Rotations are performed around the Y axis, the X axis, and the Z axis, in that order.\n   */\n  get worldRotation(): Vector3 {\n    const worldRotation = this._worldRotation;\n    if (this._isContainDirtyFlag(TransformModifyFlags.WorldEuler)) {\n      //@ts-ignore\n      worldRotation._onValueChanged = null;\n      this.worldRotationQuaternion.toEuler(worldRotation);\n      worldRotation.scale(MathUtil.radToDegreeFactor); // Radian to angle\n      //@ts-ignore\n      worldRotation._onValueChanged = this._onWorldRotationChanged;\n      this._setDirtyFlagFalse(TransformModifyFlags.WorldEuler);\n    }\n    return worldRotation;\n  }\n\n  set worldRotation(value: Vector3) {\n    if (this._worldRotation !== value) {\n      this._worldRotation.copyFrom(value);\n    }\n  }\n\n  /**\n   * Local rotation, defining the rotation by using a unit quaternion.\n   */\n  get rotationQuaternion(): Quaternion {\n    const rotationQuaternion = this._rotationQuaternion;\n    if (this._isContainDirtyFlag(TransformModifyFlags.LocalQuat)) {\n      //@ts-ignore\n      rotationQuaternion._onValueChanged = null;\n      Quaternion.rotationEuler(\n        MathUtil.degreeToRadian(this._rotation.x),\n        MathUtil.degreeToRadian(this._rotation.y),\n        MathUtil.degreeToRadian(this._rotation.z),\n        rotationQuaternion\n      );\n      //@ts-ignore\n      rotationQuaternion._onValueChanged = this._onRotationQuaternionChanged;\n      this._setDirtyFlagFalse(TransformModifyFlags.LocalQuat);\n    }\n    return rotationQuaternion;\n  }\n\n  set rotationQuaternion(value: Quaternion) {\n    if (this._rotationQuaternion !== value) {\n      if (value.normalized) {\n        this._rotationQuaternion.copyFrom(value);\n      } else {\n        Quaternion.normalize(value, this._rotationQuaternion);\n      }\n    } else {\n      value.normalized || value.normalize();\n    }\n  }\n\n  /**\n   * World rotation, defining the rotation by using a unit quaternion.\n   */\n  get worldRotationQuaternion(): Quaternion {\n    const worldRotationQuaternion = this._worldRotationQuaternion;\n    if (this._isContainDirtyFlag(TransformModifyFlags.WorldQuat)) {\n      //@ts-ignore\n      worldRotationQuaternion._onValueChanged = null;\n      const parent = this._getParentTransform();\n      if (parent != null) {\n        Quaternion.multiply(parent.worldRotationQuaternion, this.rotationQuaternion, worldRotationQuaternion);\n      } else {\n        worldRotationQuaternion.copyFrom(this.rotationQuaternion);\n      }\n      //@ts-ignore\n      worldRotationQuaternion._onValueChanged = this._onWorldRotationQuaternionChanged;\n      this._setDirtyFlagFalse(TransformModifyFlags.WorldQuat);\n    }\n    return worldRotationQuaternion;\n  }\n\n  set worldRotationQuaternion(value: Quaternion) {\n    if (this._worldRotationQuaternion !== value) {\n      if (value.normalized) {\n        this._worldRotationQuaternion.copyFrom(value);\n      } else {\n        Quaternion.normalize(value, this._worldRotationQuaternion);\n      }\n    }\n    value.normalized || value.normalize();\n  }\n\n  /**\n   * Local scaling.\n   */\n  get scale(): Vector3 {\n    return this._scale;\n  }\n\n  set scale(value: Vector3) {\n    if (this._scale !== value) {\n      this._scale.copyFrom(value);\n    }\n  }\n\n  /**\n   * Local lossy scaling.\n   * @remarks The value obtained may not be correct under certain conditions(for example, the parent node has scaling,\n   * and the child node has a rotation), the scaling will be tilted. Vector3 cannot be used to correctly represent the scaling. Must use Matrix3x3.\n   */\n  get lossyWorldScale(): Vector3 {\n    if (this._isContainDirtyFlag(TransformModifyFlags.WorldScale)) {\n      if (this._getParentTransform()) {\n        const scaleMat = this._getScaleMatrix();\n        const e = scaleMat.elements;\n        this._lossyWorldScale.set(e[0], e[4], e[8]);\n      } else {\n        this._lossyWorldScale.copyFrom(this._scale);\n      }\n      this._setDirtyFlagFalse(TransformModifyFlags.WorldScale);\n    }\n    return this._lossyWorldScale;\n  }\n\n  /**\n   * Local matrix.\n   * @remarks Need to re-assign after modification to ensure that the modification takes effect.\n   */\n  get localMatrix(): Matrix {\n    if (this._isContainDirtyFlag(TransformModifyFlags.LocalMatrix)) {\n      Matrix.affineTransformation(this._scale, this.rotationQuaternion, this._position, this._localMatrix);\n      this._setDirtyFlagFalse(TransformModifyFlags.LocalMatrix);\n    }\n    return this._localMatrix;\n  }\n\n  set localMatrix(value: Matrix) {\n    if (this._localMatrix !== value) {\n      this._localMatrix.copyFrom(value);\n    }\n\n    // @ts-ignore\n    this._position._onValueChanged = this._rotationQuaternion._onValueChanged = this._scale._onValueChanged = null;\n    this._localMatrix.decompose(this._position, this._rotationQuaternion, this._scale);\n    // @ts-ignore\n    this._position._onValueChanged = this._onPositionChanged;\n    // @ts-ignore\n    this._rotationQuaternion._onValueChanged = this._onRotationQuaternionChanged;\n    // @ts-ignore\n    this._scale._onValueChanged = this._onScaleChanged;\n\n    this._setDirtyFlagTrue(TransformModifyFlags.LocalEuler);\n    this._setDirtyFlagFalse(TransformModifyFlags.LocalMatrix | TransformModifyFlags.LocalQuat);\n    this._updateAllWorldFlag();\n  }\n\n  /**\n   * World matrix.\n   * @remarks Need to re-assign after modification to ensure that the modification takes effect.\n   */\n  get worldMatrix(): Matrix {\n    if (this._isContainDirtyFlag(TransformModifyFlags.WorldMatrix)) {\n      const parent = this._getParentTransform();\n      if (parent) {\n        Matrix.multiply(parent.worldMatrix, this.localMatrix, this._worldMatrix);\n      } else {\n        this._worldMatrix.copyFrom(this.localMatrix);\n      }\n      this._setDirtyFlagFalse(TransformModifyFlags.WorldMatrix);\n    }\n    return this._worldMatrix;\n  }\n\n  set worldMatrix(value: Matrix) {\n    if (this._worldMatrix !== value) {\n      this._worldMatrix.copyFrom(value);\n    }\n    const parent = this._getParentTransform();\n    if (parent) {\n      Matrix.invert(parent.worldMatrix, Transform._tempMat42);\n      Matrix.multiply(Transform._tempMat42, value, this._localMatrix);\n    } else {\n      this._localMatrix.copyFrom(value);\n    }\n    this.localMatrix = this._localMatrix;\n    this._setDirtyFlagFalse(TransformModifyFlags.WorldMatrix);\n  }\n\n  /**\n   * @internal\n   */\n  constructor(entity: Entity) {\n    super(entity);\n\n    this._onPositionChanged = this._onPositionChanged.bind(this);\n    this._onWorldPositionChanged = this._onWorldPositionChanged.bind(this);\n    this._onRotationChanged = this._onRotationChanged.bind(this);\n    this._onWorldRotationChanged = this._onWorldRotationChanged.bind(this);\n    this._onRotationQuaternionChanged = this._onRotationQuaternionChanged.bind(this);\n    this._onWorldRotationQuaternionChanged = this._onWorldRotationQuaternionChanged.bind(this);\n    this._onScaleChanged = this._onScaleChanged.bind(this);\n\n    //@ts-ignore\n    this._position._onValueChanged = this._onPositionChanged;\n    //@ts-ignore\n    this._worldPosition._onValueChanged = this._onWorldPositionChanged;\n    //@ts-ignore\n    this._rotation._onValueChanged = this._onRotationChanged;\n    //@ts-ignore\n    this._worldRotation._onValueChanged = this._onWorldRotationChanged;\n    //@ts-ignore\n    this._rotationQuaternion._onValueChanged = this._onRotationQuaternionChanged;\n    //@ts-ignore\n    this._worldRotationQuaternion._onValueChanged = this._onWorldRotationQuaternionChanged;\n    //@ts-ignore\n    this._scale._onValueChanged = this._onScaleChanged;\n  }\n\n  /**\n   * Set local position by X, Y, Z value.\n   * @param x - X coordinate\n   * @param y - Y coordinate\n   * @param z - Z coordinate\n   */\n  setPosition(x: number, y: number, z: number): void {\n    this._position.set(x, y, z);\n  }\n\n  /**\n   * Set local rotation by the X, Y, Z components of the euler angle, unit in degrees.\n   * Rotations are performed around the Y axis, the X axis, and the Z axis, in that order.\n   * @param x - The angle of rotation around the X axis\n   * @param y - The angle of rotation around the Y axis\n   * @param z - The angle of rotation around the Z axis\n   */\n  setRotation(x: number, y: number, z: number): void {\n    this._rotation.set(x, y, z);\n  }\n\n  /**\n   * Set local rotation by the X, Y, Z, and W components of the quaternion.\n   * @param x - X component of quaternion\n   * @param y - Y component of quaternion\n   * @param z - Z component of quaternion\n   * @param w - W component of quaternion\n   */\n  setRotationQuaternion(x: number, y: number, z: number, w: number): void {\n    this._rotationQuaternion.set(x, y, z, w);\n  }\n\n  /**\n   * Set local scaling by scaling values along X, Y, Z axis.\n   * @param x - Scaling along X axis\n   * @param y - Scaling along Y axis\n   * @param z - Scaling along Z axis\n   */\n  setScale(x: number, y: number, z: number): void {\n    this._scale.set(x, y, z);\n  }\n\n  /**\n   * Set world position by X, Y, Z value.\n   * @param x - X coordinate\n   * @param y - Y coordinate\n   * @param z - Z coordinate\n   */\n  setWorldPosition(x: number, y: number, z: number): void {\n    this._worldPosition.set(x, y, z);\n  }\n\n  /**\n   * Set world rotation by the X, Y, Z components of the euler angle, unit in degrees, Yaw/Pitch/Roll sequence.\n   * @param x - The angle of rotation around the X axis\n   * @param y - The angle of rotation around the Y axis\n   * @param z - The angle of rotation around the Z axis\n   */\n  setWorldRotation(x: number, y: number, z: number): void {\n    this._worldRotation.set(x, y, z);\n  }\n\n  /**\n   * Set local rotation by the X, Y, Z, and W components of the quaternion.\n   * @param x - X component of quaternion\n   * @param y - Y component of quaternion\n   * @param z - Z component of quaternion\n   * @param w - W component of quaternion\n   */\n  setWorldRotationQuaternion(x: number, y: number, z: number, w: number): void {\n    this._worldRotationQuaternion.set(x, y, z, w);\n  }\n\n  /**\n   * Get the forward direction in world space.\n   * @param forward - Forward vector\n   * @returns Forward vector\n   */\n  getWorldForward(forward: Vector3): Vector3 {\n    const e = this.worldMatrix.elements;\n    forward.set(-e[8], -e[9], -e[10]);\n    return forward.normalize();\n  }\n\n  /**\n   * Get the right direction in world space.\n   * @param right - Right vector\n   * @returns Right vector\n   */\n  getWorldRight(right: Vector3): Vector3 {\n    const e = this.worldMatrix.elements;\n    right.set(e[0], e[1], e[2]);\n    return right.normalize();\n  }\n\n  /**\n   * Get the up direction in world space.\n   * @param up - Up vector\n   * @returns Up vector\n   */\n  getWorldUp(up: Vector3): Vector3 {\n    const e = this.worldMatrix.elements;\n    up.set(e[4], e[5], e[6]);\n    return up.normalize();\n  }\n\n  /**\n   * Translate in the direction and distance of the translation.\n   * @param translation - Direction and distance of translation\n   * @param relativeToLocal = `true` - Is relative to the local coordinate system\n   */\n  translate(translation: Vector3, relativeToLocal?: boolean): void;\n\n  /**\n   * Translate some distance by x along the x axis, y along the y axis, and z along the z axis.\n   * @param x - Distance along the x axis\n   * @param y - Distance along the y axis\n   * @param z - Distance along the z axis\n   * @param relativeToLocal = `true` - Is relative to the local coordinate system\n   */\n  translate(x: number, y: number, z: number, relativeToLocal?: boolean): void;\n\n  translate(\n    translationOrX: Vector3 | number,\n    relativeToLocalOrY?: boolean | number,\n    z?: number,\n    relativeToLocal?: boolean\n  ): void {\n    if (typeof translationOrX === \"number\") {\n      const translate = Transform._tempVec30;\n      translate.set(translationOrX, <number>relativeToLocalOrY, z);\n      this._translate(translate, relativeToLocal);\n    } else {\n      this._translate(translationOrX, <boolean>relativeToLocalOrY);\n    }\n  }\n\n  /**\n   * Rotate around the passed Vector3.\n   * @param rotation - Euler angle in degrees\n   * @param relativeToLocal = `true` - Is relative to the local coordinate system\n   */\n  rotate(rotation: Vector3, relativeToLocal?: boolean): void;\n\n  /**\n   * Rotate around the passed Vector3.\n   * @param x - Rotation along x axis, in degrees\n   * @param y - Rotation along y axis, in degrees\n   * @param z - Rotation along z axis, in degrees\n   * @param relativeToLocal = `true` - Is relative to the local coordinate system\n   */\n  rotate(x: number, y: number, z: number, relativeToLocal?: boolean): void;\n\n  rotate(\n    rotationOrX: Vector3 | number,\n    relativeToLocalOrY?: boolean | number,\n    z?: number,\n    relativeToLocal?: boolean\n  ): void {\n    if (typeof rotationOrX === \"number\") {\n      this._rotateXYZ(rotationOrX, <number>relativeToLocalOrY, z, relativeToLocal);\n    } else {\n      this._rotateXYZ(rotationOrX.x, rotationOrX.y, rotationOrX.z, <boolean>relativeToLocalOrY);\n    }\n  }\n\n  /**\n   * Rotate around the specified axis according to the specified angle.\n   * @param axis - Rotate axis\n   * @param angle - Rotate angle in degrees\n   * @param relativeToLocal = `true` - Relative to local space\n   */\n  rotateByAxis(axis: Vector3, angle: number, relativeToLocal: boolean = true): void {\n    const rad = angle * MathUtil.degreeToRadFactor;\n    Quaternion.rotationAxisAngle(axis, rad, Transform._tempQuat0);\n    this._rotateByQuat(Transform._tempQuat0, relativeToLocal);\n  }\n\n  /**\n   * Rotate and ensure that the world front vector points to the target world position.\n   * @param targetPosition - Target world position\n   * @param worldUp - Up direction in world space, default is Vector3(0, 1, 0)\n   */\n  lookAt(targetPosition: Vector3, worldUp?: Vector3): void {\n    const zAxis = Transform._tempVec30;\n    Vector3.subtract(this.worldPosition, targetPosition, zAxis);\n    let axisLen = zAxis.length();\n    if (axisLen <= MathUtil.zeroTolerance) {\n      // The current position and the target position are almost the same.\n      return;\n    }\n    zAxis.scale(1 / axisLen);\n    const xAxis = Transform._tempVec31;\n    if (worldUp) {\n      Vector3.cross(worldUp, zAxis, xAxis);\n    } else {\n      xAxis.set(zAxis.z, 0, -zAxis.x);\n    }\n    axisLen = xAxis.length();\n    if (axisLen <= MathUtil.zeroTolerance) {\n      // @todo:\n      // 1.worldUp is（0,0,0）\n      // 2.worldUp is parallel to zAxis\n      return;\n    }\n    xAxis.scale(1 / axisLen);\n    const yAxis = Transform._tempVec32;\n    Vector3.cross(zAxis, xAxis, yAxis);\n\n    const rotMat = Transform._tempMat41;\n    const { elements: e } = rotMat;\n    (e[0] = xAxis.x), (e[1] = xAxis.y), (e[2] = xAxis.z);\n    (e[4] = yAxis.x), (e[5] = yAxis.y), (e[6] = yAxis.z);\n    (e[8] = zAxis.x), (e[9] = zAxis.y), (e[10] = zAxis.z);\n    rotMat.getRotation(this._worldRotationQuaternion);\n  }\n\n  /**\n   * Register world transform change flag.\n   * @returns Change flag\n   */\n  registerWorldChangeFlag(): BoolUpdateFlag {\n    return this._updateFlagManager.createFlag(BoolUpdateFlag);\n  }\n\n  /**\n   * @internal\n   */\n  _parentChange(): void {\n    this._isParentDirty = true;\n    this._updateAllWorldFlag();\n  }\n\n  /**\n   * @internal\n   */\n  _isFrontFaceInvert(): boolean {\n    const scale = this.lossyWorldScale;\n    let isInvert = scale.x < 0;\n    scale.y < 0 && (isInvert = !isInvert);\n    scale.z < 0 && (isInvert = !isInvert);\n    return isInvert;\n  }\n\n  /**\n   * Get worldMatrix: Will trigger the worldMatrix update of itself and all parent entities.\n   * Get worldPosition: Will trigger the worldMatrix, local position update of itself and the worldMatrix update of all parent entities.\n   * In summary, any update of related variables will cause the dirty mark of one of the full process (worldMatrix or worldRotationQuaternion) to be false.\n   */\n  private _updateWorldPositionFlag(): void {\n    if (!this._isContainDirtyFlags(TransformModifyFlags.WmWp)) {\n      this._worldAssociatedChange(TransformModifyFlags.WmWp);\n      const nodeChildren = this._entity._children;\n      for (let i: number = 0, n: number = nodeChildren.length; i < n; i++) {\n        nodeChildren[i].transform?._updateWorldPositionFlag();\n      }\n    }\n  }\n\n  /**\n   * Get worldMatrix: Will trigger the worldMatrix update of itself and all parent entities.\n   * Get worldPosition: Will trigger the worldMatrix, local position update of itself and the worldMatrix update of all parent entities.\n   * Get worldRotationQuaternion: Will trigger the world rotation (in quaternion) update of itself and all parent entities.\n   * Get worldRotation: Will trigger the world rotation(in euler and quaternion) update of itself and world rotation(in quaternion) update of all parent entities.\n   * In summary, any update of related variables will cause the dirty mark of one of the full process (worldMatrix or worldRotationQuaternion) to be false.\n   */\n  private _updateWorldRotationFlag() {\n    if (!this._isContainDirtyFlags(TransformModifyFlags.WmWeWq)) {\n      this._worldAssociatedChange(TransformModifyFlags.WmWeWq);\n      const nodeChildren = this._entity._children;\n      for (let i: number = 0, n: number = nodeChildren.length; i < n; i++) {\n        nodeChildren[i].transform?._updateWorldPositionAndRotationFlag(); // Rotation update of parent entity will trigger world position and rotation update of all child entity.\n      }\n    }\n  }\n\n  /**\n   * Get worldMatrix: Will trigger the worldMatrix update of itself and all parent entities.\n   * Get worldPosition: Will trigger the worldMatrix, local position update of itself and the worldMatrix update of all parent entities.\n   * Get worldRotationQuaternion: Will trigger the world rotation (in quaternion) update of itself and all parent entities.\n   * Get worldRotation: Will trigger the world rotation(in euler and quaternion) update of itself and world rotation(in quaternion) update of all parent entities.\n   * In summary, any update of related variables will cause the dirty mark of one of the full process (worldMatrix or worldRotationQuaternion) to be false.\n   */\n  private _updateWorldPositionAndRotationFlag() {\n    if (!this._isContainDirtyFlags(TransformModifyFlags.WmWpWeWq)) {\n      this._worldAssociatedChange(TransformModifyFlags.WmWpWeWq);\n      const nodeChildren = this._entity._children;\n      for (let i: number = 0, n: number = nodeChildren.length; i < n; i++) {\n        nodeChildren[i].transform?._updateWorldPositionAndRotationFlag();\n      }\n    }\n  }\n\n  /**\n   * Get worldMatrix: Will trigger the worldMatrix update of itself and all parent entities.\n   * Get worldPosition: Will trigger the worldMatrix, local position update of itself and the worldMatrix update of all parent entities.\n   * Get worldScale: Will trigger the scaling update of itself and all parent entities.\n   * In summary, any update of related variables will cause the dirty mark of one of the full process (worldMatrix) to be false.\n   */\n  private _updateWorldScaleFlag() {\n    if (!this._isContainDirtyFlags(TransformModifyFlags.WmWs)) {\n      this._worldAssociatedChange(TransformModifyFlags.WmWs);\n      const nodeChildren = this._entity._children;\n      for (let i: number = 0, n: number = nodeChildren.length; i < n; i++) {\n        nodeChildren[i].transform?._updateWorldPositionAndScaleFlag();\n      }\n    }\n  }\n\n  /**\n   * Get worldMatrix: Will trigger the worldMatrix update of itself and all parent entities.\n   * Get worldPosition: Will trigger the worldMatrix, local position update of itself and the worldMatrix update of all parent entities.\n   * Get worldScale: Will trigger the scaling update of itself and all parent entities.\n   * In summary, any update of related variables will cause the dirty mark of one of the full process (worldMatrix) to be false.\n   */\n  private _updateWorldPositionAndScaleFlag(): void {\n    if (!this._isContainDirtyFlags(TransformModifyFlags.WmWpWs)) {\n      this._worldAssociatedChange(TransformModifyFlags.WmWpWs);\n      const nodeChildren = this._entity._children;\n      for (let i: number = 0, n: number = nodeChildren.length; i < n; i++) {\n        nodeChildren[i].transform?._updateWorldPositionAndScaleFlag();\n      }\n    }\n  }\n\n  /**\n   * Update all world transform property dirty flag, the principle is the same as above.\n   */\n  private _updateAllWorldFlag(): void {\n    if (!this._isContainDirtyFlags(TransformModifyFlags.WmWpWeWqWs)) {\n      this._worldAssociatedChange(TransformModifyFlags.WmWpWeWqWs);\n      const nodeChildren = this._entity._children;\n      for (let i: number = 0, n: number = nodeChildren.length; i < n; i++) {\n        nodeChildren[i].transform?._updateAllWorldFlag();\n      }\n    }\n  }\n\n  private _getParentTransform(): Transform | null {\n    if (!this._isParentDirty) {\n      return this._parentTransformCache;\n    }\n    let parentCache: Transform = null;\n    let parent = this._entity.parent;\n    while (parent) {\n      const transform = parent.transform;\n      if (transform) {\n        parentCache = transform;\n        break;\n      } else {\n        parent = parent.parent;\n      }\n    }\n    this._parentTransformCache = parentCache;\n    this._isParentDirty = false;\n    return parentCache;\n  }\n\n  private _getScaleMatrix(): Matrix3x3 {\n    const invRotation = Transform._tempQuat0;\n    const invRotationMat = Transform._tempMat30;\n    const worldRotScaMat = Transform._tempMat31;\n    const scaMat = Transform._tempMat32;\n    worldRotScaMat.copyFromMatrix(this.worldMatrix);\n    Quaternion.invert(this.worldRotationQuaternion, invRotation);\n    Matrix3x3.rotationQuaternion(invRotation, invRotationMat);\n    Matrix3x3.multiply(invRotationMat, worldRotScaMat, scaMat);\n    return scaMat;\n  }\n\n  private _isContainDirtyFlags(targetDirtyFlags: number): boolean {\n    return (this._dirtyFlag & targetDirtyFlags) === targetDirtyFlags;\n  }\n\n  private _isContainDirtyFlag(type: number): boolean {\n    return (this._dirtyFlag & type) != 0;\n  }\n\n  private _setDirtyFlagTrue(type: number) {\n    this._dirtyFlag |= type;\n  }\n\n  private _setDirtyFlagFalse(type: number) {\n    this._dirtyFlag &= ~type;\n  }\n\n  private _worldAssociatedChange(type: number): void {\n    this._dirtyFlag |= type;\n    this._updateFlagManager.dispatch(TransformModifyFlags.WorldMatrix);\n  }\n\n  private _rotateByQuat(rotateQuat: Quaternion, relativeToLocal: boolean): void {\n    if (relativeToLocal) {\n      Quaternion.multiply(this.rotationQuaternion, rotateQuat, this._rotationQuaternion);\n    } else {\n      Quaternion.multiply(rotateQuat, this.worldRotationQuaternion, this._worldRotationQuaternion);\n    }\n  }\n\n  private _translate(translation: Vector3, relativeToLocal: boolean = true): void {\n    if (relativeToLocal) {\n      const { _tempVec30 } = Transform;\n      Vector3.transformByQuat(translation, this.worldRotationQuaternion, _tempVec30);\n      this._worldPosition.add(_tempVec30);\n    } else {\n      this._worldPosition.add(translation);\n    }\n  }\n\n  private _rotateXYZ(x: number, y: number, z: number, relativeToLocal: boolean = true): void {\n    const radFactor = MathUtil.degreeToRadFactor;\n    const rotQuat = Transform._tempQuat0;\n    Quaternion.rotationEuler(x * radFactor, y * radFactor, z * radFactor, rotQuat);\n    this._rotateByQuat(rotQuat, relativeToLocal);\n  }\n\n  @ignoreClone\n  private _onPositionChanged(): void {\n    this._setDirtyFlagTrue(TransformModifyFlags.LocalMatrix);\n    this._updateWorldPositionFlag();\n  }\n\n  @ignoreClone\n  private _onWorldPositionChanged(): void {\n    const worldPosition = this._worldPosition;\n    const parent = this._getParentTransform();\n    if (parent) {\n      Matrix.invert(parent.worldMatrix, Transform._tempMat41);\n      Vector3.transformCoordinate(worldPosition, Transform._tempMat41, this._position);\n    } else {\n      this._position.copyFrom(worldPosition);\n    }\n    this._setDirtyFlagFalse(TransformModifyFlags.WorldPosition);\n  }\n\n  @ignoreClone\n  private _onRotationChanged(): void {\n    this._setDirtyFlagTrue(TransformModifyFlags.LocalMatrix | TransformModifyFlags.LocalQuat);\n    this._setDirtyFlagFalse(TransformModifyFlags.LocalEuler);\n    this._updateWorldRotationFlag();\n  }\n\n  @ignoreClone\n  private _onWorldRotationChanged(): void {\n    const worldRotation = this._worldRotation;\n    Quaternion.rotationEuler(\n      MathUtil.degreeToRadian(worldRotation.x),\n      MathUtil.degreeToRadian(worldRotation.y),\n      MathUtil.degreeToRadian(worldRotation.z),\n      this._worldRotationQuaternion\n    );\n    this._setDirtyFlagFalse(TransformModifyFlags.WorldEuler);\n  }\n\n  @ignoreClone\n  private _onRotationQuaternionChanged(): void {\n    this._setDirtyFlagTrue(TransformModifyFlags.LocalMatrix | TransformModifyFlags.LocalEuler);\n    this._setDirtyFlagFalse(TransformModifyFlags.LocalQuat);\n    this._updateWorldRotationFlag();\n  }\n\n  @ignoreClone\n  private _onWorldRotationQuaternionChanged(): void {\n    const worldRotationQuaternion = this._worldRotationQuaternion;\n    const parent = this._getParentTransform();\n    if (parent) {\n      const invParentQuaternion = Transform._tempQuat0;\n      Quaternion.invert(parent.worldRotationQuaternion, invParentQuaternion);\n      Quaternion.multiply(invParentQuaternion, worldRotationQuaternion, this._rotationQuaternion);\n    } else {\n      this._rotationQuaternion.copyFrom(worldRotationQuaternion);\n    }\n    this._setDirtyFlagFalse(TransformModifyFlags.WorldQuat);\n  }\n\n  @ignoreClone\n  private _onScaleChanged(): void {\n    this._setDirtyFlagTrue(TransformModifyFlags.LocalMatrix);\n    this._updateWorldScaleFlag();\n  }\n}\n\n/**\n * @internal\n */\nexport enum TransformModifyFlags {\n  LocalEuler = 0x1,\n  LocalQuat = 0x2,\n  WorldPosition = 0x4,\n  WorldEuler = 0x8,\n  WorldQuat = 0x10,\n  WorldScale = 0x20,\n  LocalMatrix = 0x40,\n  WorldMatrix = 0x80,\n\n  /** WorldMatrix | WorldPosition */\n  WmWp = 0x84,\n  /** WorldMatrix | WorldEuler | WorldQuat */\n  WmWeWq = 0x98,\n  /** WorldMatrix | WorldPosition | WorldEuler | WorldQuat */\n  WmWpWeWq = 0x9c,\n  /** WorldMatrix | WorldScale */\n  WmWs = 0xa0,\n  /** WorldMatrix | WorldPosition | WorldScale */\n  WmWpWs = 0xa4,\n  /** WorldMatrix | WorldPosition | WorldEuler | WorldQuat | WorldScale */\n  WmWpWeWqWs = 0xbc\n}\n","import { Matrix } from \"@galacean/engine-math\";\nimport { EngineObject } from \"./base\";\nimport { BoolUpdateFlag } from \"./BoolUpdateFlag\";\nimport { ComponentCloner } from \"./clone/ComponentCloner\";\nimport { Component } from \"./Component\";\nimport { ComponentsDependencies } from \"./ComponentsDependencies\";\nimport { DisorderedArray } from \"./DisorderedArray\";\nimport { Engine } from \"./Engine\";\nimport { Layer } from \"./Layer\";\nimport { Scene } from \"./Scene\";\nimport { Script } from \"./Script\";\nimport { Transform } from \"./Transform\";\n\n/**\n * Entity, be used as components container.\n */\nexport class Entity extends EngineObject {\n  /**\n   * @internal\n   */\n  static _findChildByName(root: Entity, name: string): Entity {\n    const children = root._children;\n    for (let i = children.length - 1; i >= 0; i--) {\n      const child = children[i];\n      if (child.name === name) {\n        return child;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * @internal\n   */\n  static _traverseSetOwnerScene(entity: Entity, scene: Scene): void {\n    entity._scene = scene;\n    const children = entity._children;\n    for (let i = entity.childCount - 1; i >= 0; i--) {\n      this._traverseSetOwnerScene(children[i], scene);\n    }\n  }\n\n  /** The name of entity. */\n  name: string;\n  /** The layer the entity belongs to. */\n  layer: Layer = Layer.Layer0;\n  /** Transform component. */\n  readonly transform: Transform;\n\n  /** @internal */\n  _isActiveInHierarchy: boolean = false;\n  /** @internal */\n  _components: Component[] = [];\n  /** @internal */\n  _scripts: DisorderedArray<Script> = new DisorderedArray<Script>();\n  /** @internal */\n  _children: Entity[] = [];\n  /** @internal */\n  _scene: Scene;\n  /** @internal */\n  _isRoot: boolean = false;\n  /** @internal */\n  _isActive: boolean = true;\n  /** @internal */\n  _siblingIndex: number = -1;\n\n  private _parent: Entity = null;\n  private _activeChangedComponents: Component[];\n\n  /**\n   * Whether to activate locally.\n   */\n  get isActive(): boolean {\n    return this._isActive;\n  }\n\n  set isActive(value: boolean) {\n    if (value !== this._isActive) {\n      this._isActive = value;\n      if (value) {\n        const parent = this._parent;\n        if (parent?._isActiveInHierarchy || (this._isRoot && this._scene._isActiveInEngine)) {\n          this._processActive();\n        }\n      } else {\n        if (this._isActiveInHierarchy) {\n          this._processInActive();\n        }\n      }\n    }\n  }\n\n  /**\n   * Whether it is active in the hierarchy.\n   */\n  get isActiveInHierarchy(): boolean {\n    return this._isActiveInHierarchy;\n  }\n\n  /**\n   * The parent entity.\n   */\n  get parent(): Entity {\n    return this._parent;\n  }\n\n  set parent(value: Entity) {\n    this._setParent(value);\n  }\n\n  /**\n   * The children entities\n   */\n  get children(): Readonly<Entity[]> {\n    return this._children;\n  }\n\n  /**\n   * @deprecated Please use `children.length` property instead.\n   * Number of the children entities\n   */\n  get childCount(): number {\n    return this._children.length;\n  }\n\n  /**\n   * The scene the entity belongs to.\n   */\n  get scene(): Scene {\n    return this._scene;\n  }\n\n  /**\n   * The sibling index.\n   */\n  get siblingIndex(): number {\n    return this._siblingIndex;\n  }\n\n  set siblingIndex(value: number) {\n    if (this._siblingIndex === -1) {\n      throw `The entity ${this.name} is not in the hierarchy`;\n    }\n\n    this._setSiblingIndex(this._isRoot ? this._scene._rootEntities : this._parent._children, value);\n  }\n\n  /**\n   * Create a entity.\n   * @param engine - The engine the entity belongs to\n   */\n  constructor(engine: Engine, name?: string) {\n    super(engine);\n    this.name = name;\n    this.transform = this.addComponent(Transform);\n    this._inverseWorldMatFlag = this.transform.registerWorldChangeFlag();\n  }\n\n  /**\n   * Add component based on the component type.\n   * @param type - The type of the component\n   * @returns\tThe component which has been added\n   */\n  addComponent<T extends Component>(type: new (entity: Entity) => T): T {\n    ComponentsDependencies._addCheck(this, type);\n    const component = new type(this);\n    this._components.push(component);\n    component._setActive(true);\n    return component;\n  }\n\n  /**\n   * Get component which match the type.\n   * @param type - The type of the component\n   * @returns\tThe first component which match type\n   */\n  getComponent<T extends Component>(type: new (entity: Entity) => T): T {\n    const components = this._components;\n    // @todo: should inverse traversal\n    for (let i = components.length - 1; i >= 0; i--) {\n      const component = components[i];\n      if (component instanceof type) {\n        return component;\n      }\n    }\n  }\n\n  /**\n   * Get components which match the type.\n   * @param type - The type of the component\n   * @param results - The components which match type\n   * @returns\tThe components which match type\n   */\n  getComponents<T extends Component>(type: new (entity: Entity) => T, results: T[]): T[] {\n    results.length = 0;\n    const components = this._components;\n    for (let i = 0, n = components.length; i < n; i++) {\n      const component = components[i];\n      if (component instanceof type) {\n        results.push(component);\n      }\n    }\n    return results;\n  }\n\n  /**\n   * Get the components which match the type of the entity and it's children.\n   * @param type - The component type\n   * @param results - The components collection\n   * @returns\tThe components collection which match the type\n   */\n  getComponentsIncludeChildren<T extends Component>(type: new (entity: Entity) => T, results: T[]): T[] {\n    results.length = 0;\n    this._getComponentsInChildren<T>(type, results);\n    return results;\n  }\n\n  /**\n   * Add child entity.\n   * @param child - The child entity which want to be added\n   */\n  addChild(child: Entity): void;\n\n  /**\n   * Add child entity at specified index.\n   * @param index - specified index\n   * @param child - The child entity which want to be added\n   */\n  addChild(index: number, child: Entity): void;\n\n  addChild(indexOrChild: number | Entity, child?: Entity): void {\n    let index: number;\n    if (typeof indexOrChild === \"number\") {\n      index = indexOrChild;\n    } else {\n      index = undefined;\n      child = indexOrChild;\n    }\n\n    if (child._isRoot) {\n      child._scene._removeFromEntityList(child);\n      child._isRoot = false;\n\n      this._addToChildrenList(index, child);\n      child._parent = this;\n\n      const newScene = this._scene;\n      if (child._scene !== newScene) {\n        Entity._traverseSetOwnerScene(child, newScene);\n      }\n\n      if (this._isActiveInHierarchy) {\n        !child._isActiveInHierarchy && child._isActive && child._processActive();\n      } else {\n        child._isActiveInHierarchy && child._processInActive();\n      }\n\n      child._setTransformDirty();\n    } else {\n      child._setParent(this, index);\n    }\n  }\n\n  /**\n   * Remove child entity.\n   * @param child - The child entity which want to be removed\n   */\n  removeChild(child: Entity): void {\n    child._setParent(null);\n  }\n\n  /**\n   * @deprecated Please use `children` property instead.\n   * Find child entity by index.\n   * @param index - The index of the child entity\n   * @returns\tThe component which be found\n   */\n  getChild(index: number): Entity {\n    return this._children[index];\n  }\n\n  /**\n   * Find entity by name.\n   * @param name - The name of the entity which want to be found\n   * @returns The component which be found\n   */\n  findByName(name: string): Entity {\n    if (name === this.name) {\n      return this;\n    }\n    const children = this._children;\n    for (let i = 0, n = children.length; i < n; i++) {\n      const target = children[i].findByName(name);\n      if (target) {\n        return target;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Find the entity by path.\n   * @param path - The path fo the entity eg: /entity\n   * @returns The component which be found\n   */\n  findByPath(path: string): Entity {\n    const splits = path.split(\"/\");\n    let entity: Entity = this;\n    for (let i = 0, length = splits.length; i < length; ++i) {\n      const split = splits[i];\n      if (split) {\n        entity = Entity._findChildByName(entity, split);\n        if (!entity) {\n          return null;\n        }\n      }\n    }\n    return entity;\n  }\n\n  /**\n   * Create child entity.\n   * @param name - The child entity's name\n   * @returns The child entity\n   */\n  createChild(name?: string): Entity {\n    const child = new Entity(this.engine, name);\n    child.layer = this.layer;\n    child.parent = this;\n    return child;\n  }\n\n  /**\n   * Clear children entities.\n   */\n  clearChildren(): void {\n    const children = this._children;\n    for (let i = children.length - 1; i >= 0; i--) {\n      const child = children[i];\n      child._parent = null;\n      child._isActiveInHierarchy && child._processInActive();\n      Entity._traverseSetOwnerScene(child, null); // Must after child._processInActive().\n    }\n    children.length = 0;\n  }\n\n  /**\n   * Clone.\n   * @returns Cloned entity\n   */\n  clone(): Entity {\n    const cloneEntity = new Entity(this._engine, this.name);\n\n    cloneEntity._isActive = this._isActive;\n    cloneEntity.transform.localMatrix = this.transform.localMatrix;\n\n    const children = this._children;\n    for (let i = 0, len = this._children.length; i < len; i++) {\n      const child = children[i];\n      cloneEntity.addChild(child.clone());\n    }\n\n    const components = this._components;\n    for (let i = 0, n = components.length; i < n; i++) {\n      const sourceComp = components[i];\n      if (!(sourceComp instanceof Transform)) {\n        const targetComp = cloneEntity.addComponent(<new (entity: Entity) => Component>sourceComp.constructor);\n        ComponentCloner.cloneComponent(sourceComp, targetComp);\n      }\n    }\n\n    return cloneEntity;\n  }\n\n  /**\n   * Destroy self.\n   */\n  destroy(): void {\n    if (this._destroyed) {\n      return;\n    }\n\n    super.destroy();\n    const components = this._components;\n    for (let i = components.length - 1; i >= 0; i--) {\n      components[i].destroy();\n    }\n    this._components.length = 0;\n\n    const children = this._children;\n    while (children.length > 0) {\n      children[0].destroy();\n    }\n\n    if (this._isRoot) {\n      this._scene._removeFromEntityList(this);\n      this._isRoot = false;\n    } else {\n      this._removeFromParent();\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _removeComponent(component: Component): void {\n    ComponentsDependencies._removeCheck(this, component.constructor as any);\n    const components = this._components;\n    components.splice(components.indexOf(component), 1);\n  }\n\n  /**\n   * @internal\n   */\n  _addScript(script: Script) {\n    script._entityScriptsIndex = this._scripts.length;\n    this._scripts.add(script);\n  }\n\n  /**\n   * @internal\n   */\n  _removeScript(script: Script): void {\n    const replaced = this._scripts.deleteByIndex(script._entityScriptsIndex);\n    replaced && (replaced._entityScriptsIndex = script._entityScriptsIndex);\n    script._entityScriptsIndex = -1;\n  }\n\n  /**\n   * @internal\n   */\n  _removeFromParent(): void {\n    const oldParent = this._parent;\n    if (oldParent != null) {\n      const oldSibling = oldParent._children;\n      let index = this._siblingIndex;\n      oldSibling.splice(index, 1);\n      for (let n = oldSibling.length; index < n; index++) {\n        oldSibling[index]._siblingIndex--;\n      }\n      this._parent = null;\n      this._siblingIndex = -1;\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _processActive(): void {\n    if (this._activeChangedComponents) {\n      throw \"Note: can't set the 'main inActive entity' active in hierarchy, if the operation is in main inActive entity or it's children script's onDisable Event.\";\n    }\n    this._activeChangedComponents = this._engine._componentsManager.getActiveChangedTempList();\n    this._setActiveInHierarchy(this._activeChangedComponents);\n    this._setActiveComponents(true);\n  }\n\n  /**\n   * @internal\n   */\n  _processInActive(): void {\n    if (this._activeChangedComponents) {\n      throw \"Note: can't set the 'main active entity' inActive in hierarchy, if the operation is in main active entity or it's children script's onEnable Event.\";\n    }\n    this._activeChangedComponents = this._engine._componentsManager.getActiveChangedTempList();\n    this._setInActiveInHierarchy(this._activeChangedComponents);\n    this._setActiveComponents(false);\n  }\n\n  private _addToChildrenList(index: number, child: Entity): void {\n    const children = this._children;\n    const childCount = children.length;\n    if (index === undefined) {\n      child._siblingIndex = childCount;\n      children.push(child);\n    } else {\n      if (index < 0 || index > childCount) {\n        throw `The index ${index} is out of child list bounds ${childCount}`;\n      }\n      child._siblingIndex = index;\n      children.splice(index, 0, child);\n      for (let i = index + 1, n = childCount + 1; i < n; i++) {\n        children[i]._siblingIndex++;\n      }\n    }\n  }\n\n  private _setParent(parent: Entity, siblingIndex?: number): void {\n    const oldParent = this._parent;\n    if (parent !== oldParent) {\n      this._removeFromParent();\n      this._parent = parent;\n      if (parent) {\n        parent._addToChildrenList(siblingIndex, this);\n\n        const parentScene = parent._scene;\n        if (this._scene !== parentScene) {\n          Entity._traverseSetOwnerScene(this, parentScene);\n        }\n\n        if (parent._isActiveInHierarchy) {\n          !this._isActiveInHierarchy && this._isActive && this._processActive();\n        } else {\n          this._isActiveInHierarchy && this._processInActive();\n        }\n      } else {\n        this._isActiveInHierarchy && this._processInActive();\n        if (oldParent) {\n          Entity._traverseSetOwnerScene(this, null);\n        }\n      }\n      this._setTransformDirty();\n    }\n  }\n\n  private _getComponentsInChildren<T extends Component>(type: new (entity: Entity) => T, results: T[]): void {\n    for (let i = this._components.length - 1; i >= 0; i--) {\n      const component = this._components[i];\n      if (component instanceof type) {\n        results.push(component);\n      }\n    }\n    for (let i = this._children.length - 1; i >= 0; i--) {\n      this._children[i]._getComponentsInChildren<T>(type, results);\n    }\n  }\n\n  private _setActiveComponents(isActive: boolean): void {\n    const activeChangedComponents = this._activeChangedComponents;\n    for (let i = 0, length = activeChangedComponents.length; i < length; ++i) {\n      activeChangedComponents[i]._setActive(isActive);\n    }\n    this._engine._componentsManager.putActiveChangedTempList(activeChangedComponents);\n    this._activeChangedComponents = null;\n  }\n\n  private _setActiveInHierarchy(activeChangedComponents: Component[]): void {\n    this._isActiveInHierarchy = true;\n    const components = this._components;\n    for (let i = components.length - 1; i >= 0; i--) {\n      const component = components[i];\n      (component.enabled || !component._awoken) && activeChangedComponents.push(component);\n    }\n    const children = this._children;\n    for (let i = children.length - 1; i >= 0; i--) {\n      const child = children[i];\n      child.isActive && child._setActiveInHierarchy(activeChangedComponents);\n    }\n  }\n\n  private _setInActiveInHierarchy(activeChangedComponents: Component[]): void {\n    this._isActiveInHierarchy = false;\n    const components = this._components;\n    for (let i = components.length - 1; i >= 0; i--) {\n      const component = components[i];\n      component.enabled && activeChangedComponents.push(component);\n    }\n    const children = this._children;\n    for (let i = children.length - 1; i >= 0; i--) {\n      const child: Entity = children[i];\n      child.isActive && child._setInActiveInHierarchy(activeChangedComponents);\n    }\n  }\n\n  private _setTransformDirty() {\n    if (this.transform) {\n      this.transform._parentChange();\n    } else {\n      for (let i = 0, len = this._children.length; i < len; i++) {\n        this._children[i]._setTransformDirty();\n      }\n    }\n  }\n\n  private _setSiblingIndex(sibling: Entity[], target: number): void {\n    target = Math.min(target, sibling.length - 1);\n    if (target < 0) {\n      throw `Sibling index ${target} should large than 0`;\n    }\n    if (this._siblingIndex !== target) {\n      const oldIndex = this._siblingIndex;\n      if (target < oldIndex) {\n        for (let i = oldIndex; i >= target; i--) {\n          const child = i == target ? this : sibling[i - 1];\n          sibling[i] = child;\n          child._siblingIndex = i;\n        }\n      } else {\n        for (let i = oldIndex; i <= target; i++) {\n          const child = i == target ? this : sibling[i + 1];\n          sibling[i] = child;\n          child._siblingIndex = i;\n        }\n      }\n    }\n  }\n\n  //--------------------------------------------------------------deprecated----------------------------------------------------------------\n  private _invModelMatrix: Matrix = new Matrix();\n  private _inverseWorldMatFlag: BoolUpdateFlag;\n\n  /**\n   * @deprecated\n   */\n  getInvModelMatrix(): Matrix {\n    if (this._inverseWorldMatFlag.flag) {\n      Matrix.invert(this.transform.worldMatrix, this._invModelMatrix);\n      this._inverseWorldMatFlag.flag = false;\n    }\n    return this._invModelMatrix;\n  }\n}\n","/**\n * Color Space.\n */\nexport enum ColorSpace {\n  /** Linear color space. */\n  Linear,\n  /** Gamma color space. */\n  Gamma\n}\n","/**\n *  The current phase of the pointer.\n */\nexport enum PointerPhase {\n  /** A Pointer pressed on the screen. */\n  Down,\n  /** A pointer moved on the screen. */\n  Move,\n  /** A Pointer pressed on the screen but hasn't moved. */\n  Stationary,\n  /** A pointer was lifted from the screen. */\n  Up,\n  /** The system cancelled tracking for the pointer. */\n  Leave\n}\n","import { Vector2 } from \"@galacean/engine-math\";\nimport { DisorderedArray } from \"../../DisorderedArray\";\nimport { Entity } from \"../../Entity\";\nimport { PointerButton } from \"../enums/PointerButton\";\nimport { PointerPhase } from \"../enums/PointerPhase\";\n\n/**\n * Pointer.\n */\nexport class Pointer {\n  /**\n   * Unique id.\n   * @remarks Start from 0.\n   */\n  readonly id: number;\n  /** The phase of pointer. */\n  phase: PointerPhase = PointerPhase.Leave;\n  /** The button that triggers the pointer event. */\n  button: PointerButton;\n  /** The currently pressed buttons for this pointer. */\n  pressedButtons: PointerButton;\n  /** The position of the pointer in screen space pixel coordinates. */\n  position: Vector2 = new Vector2();\n  /** The change of the pointer. */\n  deltaPosition: Vector2 = new Vector2();\n  /** @internal */\n  _events: PointerEvent[] = [];\n  /** @internal */\n  _uniqueID: number;\n  /** @internal */\n  _upMap: number[] = [];\n  /** @internal */\n  _downMap: number[] = [];\n  /** @internal */\n  _upList: DisorderedArray<PointerButton> = new DisorderedArray();\n  /** @internal */\n  _downList: DisorderedArray<PointerButton> = new DisorderedArray();\n\n  private _currentPressedEntity: Entity;\n  private _currentEnteredEntity: Entity;\n\n  /** @internal */\n  _firePointerExitAndEnter(rayCastEntity: Entity): void {\n    if (this._currentEnteredEntity !== rayCastEntity) {\n      if (this._currentEnteredEntity) {\n        const scripts = this._currentEnteredEntity._scripts;\n        for (let i = scripts.length - 1; i >= 0; i--) {\n          const script = scripts.get(i);\n          script._waitHandlingInValid || script.onPointerExit(this);\n        }\n      }\n      if (rayCastEntity) {\n        const scripts = rayCastEntity._scripts;\n        for (let i = scripts.length - 1; i >= 0; i--) {\n          const script = scripts.get(i);\n          script._waitHandlingInValid || script.onPointerEnter(this);\n        }\n      }\n      this._currentEnteredEntity = rayCastEntity;\n    }\n  }\n\n  /** @internal */\n  _firePointerDown(rayCastEntity: Entity): void {\n    if (rayCastEntity) {\n      const scripts = rayCastEntity._scripts;\n      for (let i = scripts.length - 1; i >= 0; i--) {\n        const script = scripts.get(i);\n        script._waitHandlingInValid || script.onPointerDown(this);\n      }\n    }\n    this._currentPressedEntity = rayCastEntity;\n  }\n\n  /** @internal */\n  _firePointerDrag(): void {\n    if (this._currentPressedEntity) {\n      const scripts = this._currentPressedEntity._scripts;\n      for (let i = scripts.length - 1; i >= 0; i--) {\n        const script = scripts.get(i);\n        script._waitHandlingInValid || script.onPointerDrag(this);\n      }\n    }\n  }\n\n  /** @internal */\n  _firePointerUpAndClick(rayCastEntity: Entity): void {\n    const { _currentPressedEntity: pressedEntity } = this;\n    if (pressedEntity) {\n      const sameTarget = pressedEntity === rayCastEntity;\n      const scripts = pressedEntity._scripts;\n      for (let i = scripts.length - 1; i >= 0; i--) {\n        const script = scripts.get(i);\n        if (!script._waitHandlingInValid) {\n          sameTarget && script.onPointerClick(this);\n          script.onPointerUp(this);\n        }\n      }\n      this._currentPressedEntity = null;\n    }\n  }\n\n  /**\n   * @internal\n   */\n  constructor(id: number) {\n    this.id = id;\n  }\n}\n","import { Platform } from \"./Platform\";\n\n/**\n * System info.\n */\nexport class SystemInfo {\n  /** The platform is running on. */\n  static platform: Platform = Platform.Unknown;\n  /** The operating system is running on. */\n  static operatingSystem: string = \"\";\n\n  /**\n   * The pixel ratio of the device.\n   */\n  static get devicePixelRatio(): number {\n    return window.devicePixelRatio;\n  }\n\n  /**\n   * @internal\n   */\n  static _initialize(): void {\n    {\n      if (typeof navigator == \"undefined\") {\n        return;\n      }\n\n      const userAgent = navigator.userAgent;\n\n      if (/iPhone/i.test(userAgent)) {\n        SystemInfo.platform = Platform.IPhone;\n      } else if (/iPad/i.test(userAgent)) {\n        SystemInfo.platform = Platform.IPad;\n      } else if (/Android/i.test(userAgent)) {\n        SystemInfo.platform = Platform.Android;\n      } else if (/Macintosh/i.test(userAgent)) {\n        SystemInfo.platform = Platform.Mac;\n      }\n\n      let v: RegExpMatchArray;\n      switch (SystemInfo.platform) {\n        case Platform.IPhone:\n          v = userAgent.match(/OS (\\d+)_?(\\d+)?_?(\\d+)?/);\n          this.operatingSystem = v ? `iPhone OS ${v[1]}.${v[2] || 0}.${v[3] || 0}` : \"iPhone OS\";\n          break;\n        case Platform.IPad:\n          v = userAgent.match(/OS (\\d+)_?(\\d+)?_?(\\d+)?/);\n          this.operatingSystem = v ? `iPad OS ${v[1]}.${v[2] || 0}.${v[3] || 0}` : \"iPad OS\";\n          break;\n        case Platform.Android:\n          v = userAgent.match(/Android (\\d+).?(\\d+)?.?(\\d+)?/);\n          this.operatingSystem = v ? `Android ${v[1]}.${v[2] || 0}.${v[3] || 0}` : \"Android\";\n          break;\n        case Platform.Mac:\n          v = userAgent.match(/Mac OS X (\\d+)_?(\\d+)?_?(\\d+)?/);\n          this.operatingSystem = v ? `Mac OS X ${v[1]}.${v[2] || 0}.${v[3] || 0}` : \"Mac OS X\";\n          break;\n      }\n    }\n  }\n}\n\nSystemInfo._initialize();\n","/**\n * The keys of the keyboard.\n * Keep up with W3C standards.(https://www.w3.org/TR/2017/CR-uievents-code-20170601/)\n */\nexport enum Keys {\n    /** `~ on a US keyboard. This is the 半角/全角/漢字 (hankaku/zenkaku/kanji) key on Japanese keyboards. */\n    Backquote,\n    /** Used for both the US \\| (on the 101-key layout) and also for the key located between the \" and Enter keys on row C of the 102-, 104- and 106-key layouts. Labelled #~ on a UK (102) keyboard. */\n    Backslash,\n    /**\tBackspace or ⌫. Labelled Delete on Apple keyboards. */\n    Backspace,\n    /** [{ on a US keyboard. */\n    BracketLeft,\n    /** ]} on a US keyboard. */\n    BracketRight,\n    /** ,< on a US keyboard. */\n    Comma,\n    /** 0) on a US keyboard. */\n    Digit0,\n    /** 1! on a US keyboard. */\n    Digit1,\n    /** 2@ on a US keyboard. */\n    Digit2,\n    /** 3# on a US keyboard. */\n    Digit3,\n    /** 4$ on a US keyboard. */\n    Digit4,\n    /** 5% on a US keyboard. */\n    Digit5,\n    /** 6^ on a US keyboard. */\n    Digit6,\n    /** 7& on a US keyboard. */\n    Digit7,\n    /** 8* on a US keyboard. */\n    Digit8,\n    /** 9( on a US keyboard. */\n    Digit9,\n    /** =+ on a US keyboard. */\n    Equal,\n    /** Located between the left Shift and Z keys. Labelled \\| on a UK keyboard. */\n    IntlBackslash,\n    /** Located between the / and right Shift keys. Labelled \\ろ (ro) on a Japanese keyboard. */\n    IntlRo,\n    /** Located between the = and Backspace keys. Labelled ¥ (yen) on a Japanese keyboard. \\/ on a Russian keyboard. */\n    IntlYen,\n    /** a on a US keyboard. Labelled q on an AZERTY (e.g., French) keyboard. */\n    KeyA,\n    /** b on a US keyboard. */\n    KeyB,\n    /** c on a US keyboard. */\n    KeyC,\n    /** d on a US keyboard. */\n    KeyD,\n    /** e on a US keyboard. */\n    KeyE,\n    /** f on a US keyboard. */\n    KeyF,\n    /** g on a US keyboard. */\n    KeyG,\n    /** h on a US keyboard. */\n    KeyH,\n    /** i on a US keyboard. */\n    KeyI,\n    /** j on a US keyboard. */\n    KeyJ,\n    /** k on a US keyboard. */\n    KeyK,\n    /** l on a US keyboard. */\n    KeyL,\n    /** m on a US keyboard. */\n    KeyM,\n    /** n on a US keyboard. */\n    KeyN,\n    /** o on a US keyboard. */\n    KeyO,\n    /** p on a US keyboard. */\n    KeyP,\n    /** q on a US keyboard. Labelled a on an AZERTY (e.g., French) keyboard. */\n    KeyQ,\n    /** r on a US keyboard. */\n    KeyR,\n    /** s on a US keyboard. */\n    KeyS,\n    /** t on a US keyboard. */\n    KeyT,\n    /** u on a US keyboard. */\n    KeyU,\n    /** v on a US keyboard. */\n    KeyV,\n    /** w on a US keyboard. Labelled z on an AZERTY (e.g., French) keyboard. */\n    KeyW,\n    /** x on a US keyboard. */\n    KeyX,\n    /** y on a US keyboard. Labelled z on a QWERTZ (e.g., German) keyboard. */\n    KeyY,\n    /** z on a US keyboard. Labelled w on an AZERTY (e.g., French) keyboard, and y on a QWERTZ (e.g., German) keyboard. */\n    KeyZ,\n    /** -_ on a US keyboard. */\n    Minus,\n    /** .> on a US keyboard. */\n    Period,\n    /** '\" on a US keyboard. */\n    Quote,\n    /** ;: on a US keyboard. */\n    Semicolon,\n    /** /? on a US keyboard. */\n    Slash,\n\n    /** Alt, Option or ⌥. */\n    AltLeft,\n    /** Alt, Option or ⌥. This is labelled AltGr key on many keyboard layouts. */\n    AltRight,\n    /** CapsLock or ⇪. */\n    CapsLock,\n    /** The application context menu key, which is typically found between the right Meta key and the right Control key. */\n    ContextMenu,\n    /** Control or ⌃. */\n    ControlLeft,\n    /** Control or ⌃. */\n    ControlRight,\n    /** Enter or ↵. Labelled Return on Apple keyboards. */\n    Enter,\n    /** The Windows, ⌘, Command or other OS symbol key. */\n    MetaLeft,\n    /** The Windows, ⌘, Command or other OS symbol key. */\n    MetaRight,\n    /** Shift or ⇧. */\n    ShiftLeft,\n    /** Shift or ⇧. */\n    ShiftRight,\n    /** Space. */\n    Space,\n    /** Tab or ⇥. */\n    Tab,\n\n    /** Japanese: 変換 (henkan). */\n    Convert,\n    /** Japanese: カタカナ/ひらがな/ローマ字 (katakana/hiragana/romaji). */\n    KanaMode,\n    /** \n     * Korean: HangulMode 한/영 (han/yeong).\n     * Japanese (Mac keyboard): かな (kana).\n     * */\n    Lang1,\n    /**\n     * \tKorean: Hanja 한자 (hanja).\n     *  Japanese (Mac keyboard): 英数 (eisu).\n     */\n    Lang2,\n    /** Japanese (word-processing keyboard): Katakana. */\n    Lang3,\n    /** Japanese (word-processing keyboard): Hiragana. */\n    Lang4,\n    /** Japanese (word-processing keyboard): Zenkaku/Hankaku. */\n    Lang5,\n    /** Japanese: 無変換 (muhenkan). */\n    NonConvert,\n\n    /** ⌦. The forward delete key. Note that on Apple keyboards, the key labelled Delete on the main part of the keyboard should be encoded as \"Backspace\". */\n    Delete,\n    /** Page Down, End or ↘. */\n    End,\n    /** Help. Not present on standard PC keyboards. */\n    Help,\n    /** Home or ↖. */\n    Home,\n    /** Insert or Ins. Not present on Apple keyboards. */\n    Insert,\n    /** Page Down, PgDn or ⇟. */\n    PageDown,\n    /** Page Up, PgUp or ⇞. */\n    PageUp,\n\n    /** ↓ */\n    ArrowDown,\n    /** ← */\n    ArrowLeft,\n    /** → */\n    ArrowRight,\n    /** ↑ */\n    ArrowUp,\n\n    /** On the Mac, the \"NumLock\" code should be used for the numpad Clear key. */\n    NumLock,\n    /** \n     * 0 Ins on a keyboard.\n     * 0 on a phone or remote control.\n     * */\n    Numpad0,\n    /**\n     * 1 End on a keyboard.\n     * 1 or 1 QZ on a phone or remote control.\n     */\n    Numpad1,\n    /**\n     * 2 ↓ on a keyboard.\n     * 2 ABC on a phone or remote control.\n     */\n    Numpad2,\n    /**\n     * 3 PgDn on a keyboard.\n     * 3 DEF on a phone or remote control.\n     */\n    Numpad3,\n    /**\n     * 4 ← on a keyboard.\n     * 4 GHI on a phone or remote control.\n     */\n    Numpad4,\n    /**\n     * 5 on a keyboard.\n     * 5 JKL on a phone or remote control.\n     */\n    Numpad5,\n    /**\n     * 6 → on a keyboard.\n     * 6 MNO on a phone or remote control.\n     */\n    Numpad6,\n    /**\n     * 7 Home on a keyboard.\n     * 7 PQRS or 7 PRS on a phone or remote control.\n     */\n    Numpad7,\n    /**\n     * 8 ↑ on a keyboard.\n     * 8 TUV on a phone or remote control.\n     */\n    Numpad8,\n    /**\n     * 9 PgUp on a keyboard.\n     * 9 WXYZ or 9 WXY on a phone or remote control.\n     */\n    Numpad9,\n    /** + */\n    NumpadAdd,\n    /** Found on the Microsoft Natural Keyboard. */\n    NumpadBackspace,\n    /** C or AC (All Clear). Also for use with numpads that have a Clear key that is separate from the NumLock key. On the Mac, the numpad Clear key should always be encoded as \"NumLock\". */\n    NumpadClear,\n    /** CE (Clear Entry) */\n    NumpadClearEntry,\n    /** , (thousands separator). For locales where the thousands separator is a \".\" (e.g., Brazil), this key may generate a .. */\n    NumpadComma,\n    /** . Del. For locales where the decimal separator is \",\" (e.g., Brazil), this key may generate a ,. */\n    NumpadDecimal,\n    /** / */\n    NumpadDivide,\n    /** Numpad Enter */\n    NumpadEnter,\n    /** = */\n    NumpadEqual,\n    /** # on a phone or remote control device. This key is typically found below the 9 key and to the right of the 0 key. */\n    NumpadHash,\n    /** M+ Add current entry to the value stored in memory. */\n    NumpadMemoryAdd,\n    /** MC Clear the value stored in memory. */\n    NumpadMemoryClear,\n    /** MR Replace the current entry with the value stored in memory. */\n    NumpadMemoryRecall,\n    /** MS Replace the value stored in memory with the current entry. */\n    NumpadMemoryStore,\n    /** M- Subtract current entry from the value stored in memory. */\n    NumpadMemorySubtract,\n    /** \n     * * on a keyboard. For use with numpads that provide mathematical operations (+, -, * and /).\n     * Use \"NumpadStar\" for the * key on phones and remote controls.\n     */\n    NumpadMultiply,\n    /** ( Found on the Microsoft Natural Keyboard. */\n    NumpadParenLeft,\n    /** ) Found on the Microsoft Natural Keyboard. */\n    NumpadParenRight,\n    /**\n     * * on a phone or remote control device. This key is typically found below the 7 key and to the left of the 0 key.\n     * Use \"NumpadMultiply\" for the * key on numeric keypads.\n     */\n    NumpadStar,\n    /** - */\n    NumpadSubtract,\n\n    /** Esc or ⎋. */\n    Escape,\n    /** F1 */\n    F1,\n    /** F2 */\n    F2,\n    /** F3 */\n    F3,\n    /** F4 */\n    F4,\n    /** F5 */\n    F5,\n    /** F6 */\n    F6,\n    /** F7 */\n    F7,\n    /** F8 */\n    F8,\n    /** F9 */\n    F9,\n    /** F10 */\n    F10,\n    /** F11 */\n    F11,\n    /** F12 */\n    F12,\n    /** F13 */\n    F13,\n    /** F14 */\n    F14,\n    /** F15 */\n    F15,\n    /** Fn This is typically a hardware key that does not generate a separate code. Most keyboards do not place this key in the function section, but it is included here to keep it with related keys. */\n    Fn,\n    /** FLock or FnLock. Function Lock key. Found on the Microsoft Natural Keyboard. */\n    FnLock,\n    /** PrtScr SysRq or Print Screen. */\n    PrintScreen,\n    /** Scroll Lock */\n    ScrollLock,\n    /** Pause Break */\n    Pause,\n\n    /** Some laptops place this key to the left of the ↑ key. */\n    BrowserBack,\n    /** Browser Favorites */\n    BrowserFavorites,\n    /** Some laptops place this key to the right of the ↑ key. */\n    BrowserForward,\n    /** Browser Home */\n    BrowserHome,\n    /** Browser Refresh */\n    BrowserRefresh,\n    /** Browser Search */\n    BrowserSearch,\n    /** Browser Stop */\n    BrowserStop,\n    /** Eject or ⏏. This key is placed in the function section on some Apple keyboards. */\n    Eject,\n    /** Sometimes labelled My Computer on the keyboard. */\n    LaunchApp1,\n    /** Sometimes labelled Calculator on the keyboard. */\n    LaunchApp2,\n    /** Launch Mail */\n    LaunchMail,\n    /** Media Play/Pause */\n    MediaPlayPause,\n    /** Media Select */\n    MediaSelect,\n    /** Media Stop */\n    MediaStop,\n    /** Media Track Next */\n    MediaTrackNext,\n    /** Media Track Previous */\n    MediaTrackPrevious,\n    /** This key is placed in the function section on some Apple keyboards, replacing the Eject key. */\n    Power,\n    /** Sleep */\n    Sleep,\n    /** Audio Volume Down */\n    AudioVolumeDown,\n    /** Audio Volume Mute */\n    AudioVolumeMute,\n    /** Audio Volume Up */\n    AudioVolumeUp,\n    /** Wake Up */\n    WakeUp,\n\n    /** Hyper */\n    Hyper,\n    /** Super */\n    Super,\n    /** Turbo */\n    Turbo,\n\n    /** Abort */\n    Abort,\n    /** Resume */\n    Resume,\n    /** Suspend */\n    Suspend,\n\n    /** Found on Sun’s USB keyboard. */\n    Again,\n    /** Found on Sun’s USB keyboard. */\n    Copy,\n    /** Found on Sun’s USB keyboard. */\n    Cut,\n    /** Found on Sun’s USB keyboard. */\n    Find,\n    /** Found on Sun’s USB keyboard. */\n    Open,\n    /** Found on Sun’s USB keyboard. */\n    Paste,\n    /** Found on Sun’s USB keyboard. */\n    Props,\n    /** Found on Sun’s USB keyboard. */\n    Select,\n    /** Found on Sun’s USB keyboard. */\n    Undo,\n\n    /** Use for dedicated ひらがな key found on some Japanese word processing keyboards. */\n    Hiragana,\n    /** Use for dedicated カタカナ key found on some Japanese word processing keyboards. */\n    Katakana,\n\n    /** This value code should be used when no other value given in this specification is appropriate. */\n    Unidentified,\n}","import { DisorderedArray } from \"../../DisorderedArray\";\nimport { Platform } from \"../../Platform\";\nimport { SystemInfo } from \"../../SystemInfo\";\nimport { Keys } from \"../enums/Keys\";\nimport { IInput } from \"../interface/IInput\";\n\n/**\n * Keyboard Manager.\n * @internal\n */\nexport class KeyboardManager implements IInput {\n  /** @internal */\n  _curHeldDownKeyToIndexMap: number[] = [];\n  /** @internal */\n  _upKeyToFrameCountMap: number[] = [];\n  /** @internal */\n  _downKeyToFrameCountMap: number[] = [];\n\n  /** @internal */\n  _curFrameHeldDownList: DisorderedArray<Keys> = new DisorderedArray();\n  /** @internal */\n  _curFrameDownList: DisorderedArray<Keys> = new DisorderedArray();\n  /** @internal */\n  _curFrameUpList: DisorderedArray<Keys> = new DisorderedArray();\n\n  private _htmlCanvas: HTMLCanvasElement;\n  private _nativeEvents: KeyboardEvent[] = [];\n  private _hadListener: boolean = false;\n\n  /**\n   * Create a KeyboardManager.\n   */\n  constructor(htmlCanvas: HTMLCanvasElement) {\n    this._htmlCanvas = htmlCanvas;\n    // Need to set tabIndex to make the canvas focus.\n    htmlCanvas.tabIndex = htmlCanvas.tabIndex;\n    this._onKeyEvent = this._onKeyEvent.bind(this);\n    htmlCanvas.addEventListener(\"keydown\", this._onKeyEvent);\n    htmlCanvas.addEventListener(\"keyup\", this._onKeyEvent);\n    this._hadListener = true;\n  }\n\n  /**\n   * @internal\n   */\n  _update(frameCount: number): void {\n    const { _nativeEvents: nativeEvents, _curFrameDownList: curFrameDownList, _curFrameUpList: curFrameUpList } = this;\n    curFrameDownList.length = 0;\n    curFrameUpList.length = 0;\n    if (nativeEvents.length > 0) {\n      const {\n        _curHeldDownKeyToIndexMap: curHeldDownKeyToIndexMap,\n        _curFrameHeldDownList: curFrameHeldDownList,\n        _downKeyToFrameCountMap: downKeyToFrameCountMap,\n        _upKeyToFrameCountMap: upKeyToFrameCountMap\n      } = this;\n      for (let i = 0, n = nativeEvents.length; i < n; i++) {\n        const evt = nativeEvents[i];\n        const codeKey = <Keys>Keys[evt.code];\n        switch (evt.type) {\n          case \"keydown\":\n            // Filter the repeated triggers of the keyboard.\n            if (curHeldDownKeyToIndexMap[codeKey] == null) {\n              curFrameDownList.add(codeKey);\n              curFrameHeldDownList.add(codeKey);\n              curHeldDownKeyToIndexMap[codeKey] = curFrameHeldDownList.length - 1;\n              downKeyToFrameCountMap[codeKey] = frameCount;\n            }\n            break;\n          case \"keyup\":\n            const delIndex = curHeldDownKeyToIndexMap[codeKey];\n            if (delIndex != null) {\n              curHeldDownKeyToIndexMap[codeKey] = null;\n              const swapCode = curFrameHeldDownList.deleteByIndex(delIndex);\n              swapCode && (curHeldDownKeyToIndexMap[swapCode] = delIndex);\n            }\n            curFrameUpList.add(codeKey);\n            upKeyToFrameCountMap[codeKey] = frameCount;\n            // Because on the mac, the keyup event is not responded to when the meta key is held down,\n            // in order to maintain the correct keystroke record, it is necessary to clear the record\n            // when the meta key is lifted.\n            // link: https://stackoverflow.com/questions/11818637/why-does-javascript-drop-keyup-events-when-the-metakey-is-pressed-on-mac-browser\n            if (SystemInfo.platform === Platform.Mac && (codeKey === Keys.MetaLeft || codeKey === Keys.MetaRight)) {\n              for (let i = 0, len = curFrameHeldDownList.length; i < len; i++) {\n                curHeldDownKeyToIndexMap[curFrameHeldDownList.get(i)] = null;\n              }\n              curFrameHeldDownList.length = 0;\n            }\n            break;\n          default:\n            break;\n        }\n      }\n      nativeEvents.length = 0;\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _onFocus(): void {\n    if (!this._hadListener) {\n      this._htmlCanvas.addEventListener(\"keydown\", this._onKeyEvent);\n      this._htmlCanvas.addEventListener(\"keyup\", this._onKeyEvent);\n      this._hadListener = true;\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _onBlur(): void {\n    if (this._hadListener) {\n      this._htmlCanvas.removeEventListener(\"keydown\", this._onKeyEvent);\n      this._htmlCanvas.removeEventListener(\"keyup\", this._onKeyEvent);\n      this._curHeldDownKeyToIndexMap.length = 0;\n      this._curFrameHeldDownList.length = 0;\n      this._curFrameDownList.length = 0;\n      this._curFrameUpList.length = 0;\n      this._nativeEvents.length = 0;\n      this._hadListener = false;\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _destroy(): void {\n    if (this._hadListener) {\n      this._htmlCanvas.removeEventListener(\"keydown\", this._onKeyEvent);\n      this._htmlCanvas.removeEventListener(\"keyup\", this._onKeyEvent);\n      this._hadListener = false;\n    }\n    this._curHeldDownKeyToIndexMap = null;\n    this._upKeyToFrameCountMap = null;\n    this._downKeyToFrameCountMap = null;\n    this._nativeEvents = null;\n\n    this._curFrameHeldDownList = null;\n    this._curFrameDownList = null;\n    this._curFrameUpList = null;\n  }\n\n  private _onKeyEvent(evt: KeyboardEvent): void {\n    this._nativeEvents.push(evt);\n  }\n}\n","/**\n * Camera clear flags enumeration.\n */\nexport enum CameraClearFlags {\n  /* Do nothing. */\n  None = 0x0,\n  /* Clear color with scene background. */\n  Color = 0x1,\n  /* Clear depth only. */\n  Depth = 0x2,\n  /* Clear depth only. */\n  Stencil = 0x4,\n\n  /* Clear color with scene background and depth. */\n  ColorDepth = 0x3,\n  /* Clear color with scene background and stencil. */\n  ColorStencil = 0x5,\n  /* Clear depth and stencil. */\n  DepthStencil = 0x6,\n\n  /* Clear color with scene background, depth, and stencil. */\n  All = 0x7\n}\n","import { Entity } from \"../Entity\";\nimport { Vector3 } from \"@galacean/engine-math\";\n\n/**\n * Structure used to get information back from a raycast or a sweep.\n */\nexport class HitResult {\n  /** The entity that was hit. */\n  entity: Entity = null;\n  /** The distance from the ray's origin to the impact point. */\n  distance: number = 0;\n  /** The impact point in world space where the ray hit the collider. */\n  point: Vector3 = new Vector3();\n  /** The normal of the surface the ray hit. */\n  normal: Vector3 = new Vector3();\n}\n","import { ICharacterController, ICollider, IPhysics, IPhysicsManager } from \"@galacean/engine-design\";\nimport { Ray, Vector3 } from \"@galacean/engine-math\";\nimport { DisorderedArray } from \"../DisorderedArray\";\nimport { Engine } from \"../Engine\";\nimport { Layer } from \"../Layer\";\nimport { CharacterController } from \"./CharacterController\";\nimport { Collider } from \"./Collider\";\nimport { HitResult } from \"./HitResult\";\nimport { ColliderShape } from \"./shape\";\n\n/**\n * A physics manager is a collection of colliders and constraints which can interact.\n */\nexport class PhysicsManager {\n  /** @internal */\n  static _nativePhysics: IPhysics;\n  /** @internal */\n  _initialized: boolean = false;\n\n  private _engine: Engine;\n  private _restTime: number = 0;\n\n  private _colliders: DisorderedArray<Collider> = new DisorderedArray();\n\n  private _gravity: Vector3 = new Vector3(0, -9.81, 0);\n  private _nativePhysicsManager: IPhysicsManager;\n  private _physicalObjectsMap: Record<number, ColliderShape> = {};\n  private _onContactEnter = (obj1: number, obj2: number) => {\n    const shape1 = this._physicalObjectsMap[obj1];\n    const shape2 = this._physicalObjectsMap[obj2];\n\n    let scripts = shape1.collider.entity._scripts;\n    for (let i = 0, len = scripts.length; i < len; i++) {\n      const script = scripts.get(i);\n      script._waitHandlingInValid || script.onCollisionEnter(shape2);\n    }\n\n    scripts = shape2.collider.entity._scripts;\n    for (let i = 0, len = scripts.length; i < len; i++) {\n      const script = scripts.get(i);\n      script._waitHandlingInValid || script.onCollisionEnter(shape1);\n    }\n  };\n  private _onContactExit = (obj1: number, obj2: number) => {\n    const shape1 = this._physicalObjectsMap[obj1];\n    const shape2 = this._physicalObjectsMap[obj2];\n\n    let scripts = shape1.collider.entity._scripts;\n    for (let i = 0, len = scripts.length; i < len; i++) {\n      const script = scripts.get(i);\n      script._waitHandlingInValid || script.onCollisionExit(shape2);\n    }\n\n    scripts = shape2.collider.entity._scripts;\n    for (let i = 0, len = scripts.length; i < len; i++) {\n      const script = scripts.get(i);\n      script._waitHandlingInValid || script.onCollisionExit(shape1);\n    }\n  };\n  private _onContactStay = (obj1: number, obj2: number) => {\n    const shape1 = this._physicalObjectsMap[obj1];\n    const shape2 = this._physicalObjectsMap[obj2];\n\n    let scripts = shape1.collider.entity._scripts;\n    for (let i = 0, len = scripts.length; i < len; i++) {\n      const script = scripts.get(i);\n      script._waitHandlingInValid || script.onCollisionStay(shape2);\n    }\n\n    scripts = shape2.collider.entity._scripts;\n    for (let i = 0, len = scripts.length; i < len; i++) {\n      const script = scripts.get(i);\n      script._waitHandlingInValid || script.onCollisionStay(shape1);\n    }\n  };\n  private _onTriggerEnter = (obj1: number, obj2: number) => {\n    const shape1 = this._physicalObjectsMap[obj1];\n    const shape2 = this._physicalObjectsMap[obj2];\n\n    let scripts = shape1.collider.entity._scripts;\n    for (let i = 0, len = scripts.length; i < len; i++) {\n      const script = scripts.get(i);\n      script._waitHandlingInValid || script.onTriggerEnter(shape2);\n    }\n\n    scripts = shape2.collider.entity._scripts;\n    for (let i = 0, len = scripts.length; i < len; i++) {\n      const script = scripts.get(i);\n      script._waitHandlingInValid || script.onTriggerEnter(shape1);\n    }\n  };\n\n  private _onTriggerExit = (obj1: number, obj2: number) => {\n    const shape1 = this._physicalObjectsMap[obj1];\n    const shape2 = this._physicalObjectsMap[obj2];\n\n    let scripts = shape1.collider.entity._scripts;\n    for (let i = 0, n = scripts.length; i < n; i++) {\n      const script = scripts.get(i);\n      script._waitHandlingInValid || script.onTriggerExit(shape2);\n    }\n\n    scripts = shape2.collider.entity._scripts;\n    for (let i = 0, n = scripts.length; i < n; i++) {\n      const script = scripts.get(i);\n      script._waitHandlingInValid || script.onTriggerExit(shape1);\n    }\n  };\n\n  private _onTriggerStay = (obj1: number, obj2: number) => {\n    const shape1 = this._physicalObjectsMap[obj1];\n    const shape2 = this._physicalObjectsMap[obj2];\n\n    let scripts = shape1.collider.entity._scripts;\n    for (let i = 0, len = scripts.length; i < len; i++) {\n      const script = scripts.get(i);\n      script._waitHandlingInValid || script.onTriggerStay(shape2);\n    }\n\n    scripts = shape2.collider.entity._scripts;\n    for (let i = 0, len = scripts.length; i < len; i++) {\n      const script = scripts.get(i);\n      script._waitHandlingInValid || script.onTriggerStay(shape1);\n    }\n  };\n\n  /** The fixed time step in seconds at which physics are performed. */\n  fixedTimeStep: number = 1 / 60;\n\n  /**\n   * The max allowed time step in seconds one frame.\n   *\n   * @remarks\n   * When the frame rate is low or stutter occurs, the maximum execution time of physics will not exceed this value.\n   * So physics will slow down a bit when performance hitch occurs.\n   */\n  maxAllowedTimeStep: number = 1 / 3;\n\n  /**\n   * The gravity of physics scene.\n   */\n  get gravity(): Vector3 {\n    return this._gravity;\n  }\n\n  set gravity(value: Vector3) {\n    const gravity = this._gravity;\n    if (gravity !== value) {\n      gravity.copyFrom(value);\n    }\n  }\n\n  /**\n   * @deprecated\n   * Please use `maxAllowedTimeStep` instead.\n   */\n  get maxSumTimeStep(): number {\n    return this.maxAllowedTimeStep;\n  }\n\n  set maxSumTimeStep(value: number) {\n    this.maxAllowedTimeStep = value;\n  }\n\n  constructor(engine: Engine) {\n    this._engine = engine;\n\n    this._setGravity = this._setGravity.bind(this);\n    //@ts-ignore\n    this._gravity._onValueChanged = this._setGravity;\n  }\n\n  /**\n   * initialize PhysicsManager.\n   * @param physics - Physics Engine\n   */\n  initialize(physics: IPhysics): void {\n    if (this._initialized) {\n      return;\n    }\n    PhysicsManager._nativePhysics = physics;\n    this._nativePhysicsManager = PhysicsManager._nativePhysics.createPhysicsManager(\n      this._onContactEnter,\n      this._onContactExit,\n      this._onContactStay,\n      this._onTriggerEnter,\n      this._onTriggerExit,\n      this._onTriggerStay\n    );\n    this._initialized = true;\n  }\n\n  /**\n   * Casts a ray through the Scene and returns the first hit.\n   * @param ray - The ray\n   * @returns Returns True if the ray intersects with a collider, otherwise false\n   */\n  raycast(ray: Ray): boolean;\n\n  /**\n   * Casts a ray through the Scene and returns the first hit.\n   * @param ray - The ray\n   * @param outHitResult - If true is returned, outHitResult will contain more detailed collision information\n   * @returns Returns True if the ray intersects with a collider, otherwise false\n   */\n  raycast(ray: Ray, outHitResult: HitResult): boolean;\n\n  /**\n   * Casts a ray through the Scene and returns the first hit.\n   * @param ray - The ray\n   * @param distance - The max distance the ray should check\n   * @returns Returns True if the ray intersects with a collider, otherwise false\n   */\n  raycast(ray: Ray, distance: number): boolean;\n\n  /**\n   * Casts a ray through the Scene and returns the first hit.\n   * @param ray - The ray\n   * @param distance - The max distance the ray should check\n   * @param outHitResult - If true is returned, outHitResult will contain more detailed collision information\n   * @returns Returns True if the ray intersects with a collider, otherwise false\n   */\n  raycast(ray: Ray, distance: number, outHitResult: HitResult): boolean;\n\n  /**\n   * Casts a ray through the Scene and returns the first hit.\n   * @param ray - The ray\n   * @param distance - The max distance the ray should check\n   * @param layerMask - Layer mask that is used to selectively ignore Colliders when casting\n   * @returns Returns True if the ray intersects with a collider, otherwise false\n   */\n  raycast(ray: Ray, distance: number, layerMask: Layer): boolean;\n\n  /**\n   * Casts a ray through the Scene and returns the first hit.\n   * @param ray - The ray\n   * @param distance - The max distance the ray should check\n   * @param layerMask - Layer mask that is used to selectively ignore Colliders when casting\n   * @param outHitResult - If true is returned, outHitResult will contain more detailed collision information\n   * @returns Returns True if the ray intersects with a collider, otherwise false.\n   */\n  raycast(ray: Ray, distance: number, layerMask: Layer, outHitResult: HitResult): boolean;\n\n  raycast(\n    ray: Ray,\n    distanceOrResult?: number | HitResult,\n    layerMaskOrResult?: Layer | HitResult,\n    outHitResult?: HitResult\n  ): boolean {\n    let hitResult: HitResult;\n\n    let distance = Number.MAX_VALUE;\n    if (typeof distanceOrResult === \"number\") {\n      distance = distanceOrResult;\n    } else if (distanceOrResult != undefined) {\n      hitResult = distanceOrResult;\n    }\n\n    let layerMask = Layer.Everything;\n    if (typeof layerMaskOrResult === \"number\") {\n      layerMask = layerMaskOrResult;\n    } else if (layerMaskOrResult != undefined) {\n      hitResult = layerMaskOrResult;\n    }\n\n    if (outHitResult) {\n      hitResult = outHitResult;\n    }\n\n    const onRaycast = (obj: number) => {\n      const shape = this._physicalObjectsMap[obj];\n      return shape.collider.entity.layer & layerMask && shape.isSceneQuery;\n    };\n\n    if (hitResult != undefined) {\n      const result = this._nativePhysicsManager.raycast(ray, distance, onRaycast, (idx, distance, position, normal) => {\n        hitResult.entity = this._physicalObjectsMap[idx]._collider.entity;\n        hitResult.distance = distance;\n        hitResult.normal.copyFrom(normal);\n        hitResult.point.copyFrom(position);\n      });\n\n      if (result) {\n        return true;\n      } else {\n        hitResult.entity = null;\n        hitResult.distance = 0;\n        hitResult.point.set(0, 0, 0);\n        hitResult.normal.set(0, 0, 0);\n        return false;\n      }\n    } else {\n      return this._nativePhysicsManager.raycast(ray, distance, onRaycast);\n    }\n  }\n\n  /**\n   * Call on every frame to update pose of objects.\n   * @internal\n   */\n  _update(deltaTime: number): void {\n    const { fixedTimeStep: fixedTimeStep, _nativePhysicsManager: nativePhysicsManager } = this;\n    const componentsManager = this._engine._componentsManager;\n\n    const simulateTime = Math.min(this.maxAllowedTimeStep, this._restTime + deltaTime);\n    const step = Math.floor(simulateTime / fixedTimeStep);\n    this._restTime = simulateTime - step * fixedTimeStep;\n    for (let i = 0; i < step; i++) {\n      componentsManager.callScriptOnPhysicsUpdate();\n      this._callColliderOnUpdate();\n      nativePhysicsManager.update(fixedTimeStep);\n      this._callColliderOnLateUpdate();\n    }\n  }\n\n  /**\n   * Add ColliderShape into the manager.\n   * @param colliderShape - The Collider Shape.\n   * @internal\n   */\n  _addColliderShape(colliderShape: ColliderShape): void {\n    this._physicalObjectsMap[colliderShape.id] = colliderShape;\n    this._nativePhysicsManager.addColliderShape(colliderShape._nativeShape);\n  }\n\n  /**\n   * Remove ColliderShape.\n   * @param colliderShape - The Collider Shape.\n   * @internal\n   */\n  _removeColliderShape(colliderShape: ColliderShape): void {\n    delete this._physicalObjectsMap[colliderShape.id];\n    this._nativePhysicsManager.removeColliderShape(colliderShape._nativeShape);\n  }\n\n  /**\n   * Add collider into the manager.\n   * @param collider - StaticCollider or DynamicCollider.\n   * @internal\n   */\n  _addCollider(collider: Collider): void {\n    if (collider._index === -1) {\n      collider._index = this._colliders.length;\n      this._colliders.add(collider);\n    }\n    this._nativePhysicsManager.addCollider(<ICollider>collider._nativeCollider);\n  }\n\n  /**\n   * Add character controller into the manager.\n   * @param controller - Character Controller.\n   * @internal\n   */\n  _addCharacterController(controller: CharacterController): void {\n    if (controller._index === -1) {\n      controller._index = this._colliders.length;\n      this._colliders.add(controller);\n    }\n    this._nativePhysicsManager.addCharacterController(<ICharacterController>controller._nativeCollider);\n  }\n\n  /**\n   * Remove collider.\n   * @param collider - StaticCollider or DynamicCollider.\n   * @internal\n   */\n  _removeCollider(collider: Collider): void {\n    const replaced = this._colliders.deleteByIndex(collider._index);\n    replaced && (replaced._index = collider._index);\n    collider._index = -1;\n    this._nativePhysicsManager.removeCollider(<ICollider>collider._nativeCollider);\n  }\n\n  /**\n   * Remove collider.\n   * @param controller - Character Controller.\n   * @internal\n   */\n  _removeCharacterController(controller: CharacterController): void {\n    const replaced = this._colliders.deleteByIndex(controller._index);\n    replaced && (replaced._index = controller._index);\n    controller._index = -1;\n    this._nativePhysicsManager.removeCharacterController(<ICharacterController>controller._nativeCollider);\n  }\n\n  /**\n   * @internal\n   */\n  _callColliderOnUpdate(): void {\n    const elements = this._colliders._elements;\n    for (let i = this._colliders.length - 1; i >= 0; --i) {\n      elements[i]._onUpdate();\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _callColliderOnLateUpdate(): void {\n    const elements = this._colliders._elements;\n    for (let i = this._colliders.length - 1; i >= 0; --i) {\n      elements[i]._onLateUpdate();\n    }\n  }\n\n  private _setGravity(): void {\n    this._nativePhysicsManager.setGravity(this._gravity);\n  }\n}\n","/**\n * Describes how physics materials of the colliding objects are combined.\n */\nexport enum PhysicsMaterialCombineMode {\n  /** Averages the friction/bounce of the two colliding materials. */\n  Average,\n  /** Uses the smaller friction/bounce of the two colliding materials. */\n  Minimum,\n  /** Multiplies the friction/bounce of the two colliding materials. */\n  Multiply,\n  /** Uses the larger friction/bounce of the two colliding materials. */\n  Maximum\n}\n","import { IPhysicsMaterial } from \"@galacean/engine-design\";\nimport { PhysicsManager } from \"./PhysicsManager\";\nimport { PhysicsMaterialCombineMode } from \"./enums/PhysicsMaterialCombineMode\";\n\n/**\n * Material class to represent a set of surface properties.\n */\nexport class PhysicsMaterial {\n  private _bounciness: number = 0.1;\n  private _dynamicFriction: number = 0.1;\n  private _staticFriction: number = 0.1;\n  private _bounceCombine: PhysicsMaterialCombineMode = PhysicsMaterialCombineMode.Average;\n  private _frictionCombine: PhysicsMaterialCombineMode = PhysicsMaterialCombineMode.Average;\n\n  /** @internal */\n  _nativeMaterial: IPhysicsMaterial;\n\n  constructor() {\n    this._nativeMaterial = PhysicsManager._nativePhysics.createPhysicsMaterial(\n      this._staticFriction,\n      this._dynamicFriction,\n      this._bounciness,\n      this._bounceCombine,\n      this._frictionCombine\n    );\n  }\n\n  /**\n   * The coefficient of bounciness.\n   */\n  get bounciness(): number {\n    return this._bounciness;\n  }\n\n  set bounciness(value: number) {\n    if (this._bounciness !== value) {\n      this._bounciness = value;\n      this._nativeMaterial.setBounciness(value);\n    }\n  }\n\n  /**\n   * The DynamicFriction value.\n   */\n  get dynamicFriction(): number {\n    return this._dynamicFriction;\n  }\n\n  set dynamicFriction(value: number) {\n    if (this._dynamicFriction !== value) {\n      this._dynamicFriction = value;\n      this._nativeMaterial.setDynamicFriction(value);\n    }\n  }\n\n  /**\n   * The coefficient of static friction.\n   */\n  get staticFriction(): number {\n    return this._staticFriction;\n  }\n\n  set staticFriction(value: number) {\n    if (this._staticFriction !== value) {\n      this._staticFriction = value;\n      this._nativeMaterial.setStaticFriction(value);\n    }\n  }\n\n  /**\n   * The restitution combine mode.\n   */\n  get bounceCombine(): PhysicsMaterialCombineMode {\n    return this._bounceCombine;\n  }\n\n  set bounceCombine(value: PhysicsMaterialCombineMode) {\n    if (this._bounceCombine !== value) {\n      this._bounceCombine = value;\n      this._nativeMaterial.setBounceCombine(value);\n    }\n  }\n\n  /**\n   * The friction combine mode.\n   */\n  get frictionCombine(): PhysicsMaterialCombineMode {\n    return this._frictionCombine;\n  }\n\n  set frictionCombine(value: PhysicsMaterialCombineMode) {\n    if (this._frictionCombine !== value) {\n      this._frictionCombine = value;\n      this._nativeMaterial.setFrictionCombine(value);\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _destroy() {\n    this._nativeMaterial.destroy();\n  }\n}\n","import { ICollider, IStaticCollider } from \"@galacean/engine-design\";\nimport { BoolUpdateFlag } from \"../BoolUpdateFlag\";\nimport { ignoreClone } from \"../clone/CloneManager\";\nimport { Component } from \"../Component\";\nimport { dependentComponents } from \"../ComponentsDependencies\";\nimport { Entity } from \"../Entity\";\nimport { Transform } from \"../Transform\";\nimport { ColliderShape } from \"./shape/ColliderShape\";\n\n/**\n * Base class for all colliders.\n * @decorator `@dependentComponents(Transform)`\n */\n@dependentComponents(Transform)\nexport class Collider extends Component {\n  /** @internal */\n  @ignoreClone\n  _index: number = -1;\n  /** @internal */\n  _nativeCollider: ICollider;\n\n  protected _updateFlag: BoolUpdateFlag;\n  protected _shapes: ColliderShape[] = [];\n\n  /**\n   * The shapes of this collider.\n   */\n  get shapes(): Readonly<ColliderShape[]> {\n    return this._shapes;\n  }\n\n  /**\n   * @internal\n   */\n  constructor(entity: Entity) {\n    super(entity);\n    this._updateFlag = this.entity.transform.registerWorldChangeFlag();\n  }\n\n  /**\n   * Add collider shape on this collider.\n   * @param shape - Collider shape\n   */\n  addShape(shape: ColliderShape): void {\n    const oldCollider = shape._collider;\n    if (oldCollider !== this) {\n      if (oldCollider) {\n        oldCollider.removeShape(shape);\n      }\n\n      this._shapes.push(shape);\n      this.engine.physicsManager._addColliderShape(shape);\n      shape._collider = this;\n      this._nativeCollider.addShape(shape._nativeShape);\n    }\n  }\n\n  /**\n   * Remove a collider shape.\n   * @param shape - The collider shape.\n   */\n  removeShape(shape: ColliderShape): void {\n    const index = this._shapes.indexOf(shape);\n    if (index !== -1) {\n      this._shapes.splice(index, 1);\n      this.engine.physicsManager._removeColliderShape(shape);\n      shape._collider = null;\n      this._nativeCollider.removeShape(shape._nativeShape);\n    }\n  }\n\n  /**\n   * Remove all shape attached.\n   */\n  clearShapes(): void {\n    const shapes = this._shapes;\n    for (let i = 0, n = shapes.length; i < n; i++) {\n      const shape = shapes[i];\n      this.engine.physicsManager._removeColliderShape(shape);\n      shape._destroy();\n      this._nativeCollider.removeShape(shape._nativeShape);\n    }\n    shapes.length = 0;\n  }\n\n  /**\n   * @internal\n   */\n  _onUpdate(): void {\n    if (this._updateFlag.flag) {\n      const { transform } = this.entity;\n      (<IStaticCollider>this._nativeCollider).setWorldTransform(\n        transform.worldPosition,\n        transform.worldRotationQuaternion\n      );\n\n      const worldScale = transform.lossyWorldScale;\n      for (let i = 0, n = this.shapes.length; i < n; i++) {\n        this.shapes[i]._nativeShape.setWorldScale(worldScale);\n      }\n      this._updateFlag.flag = false;\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _onLateUpdate(): void {}\n\n  /**\n   * @override\n   * @internal\n   */\n  _onEnable(): void {\n    this.engine.physicsManager._addCollider(this);\n  }\n\n  /**\n   * @override\n   * @internal\n   */\n  _onDisable(): void {\n    this.engine.physicsManager._removeCollider(this);\n  }\n\n  /**\n   * @override\n   * @internal\n   */\n  _onDestroy(): void {\n    this.clearShapes();\n    this._nativeCollider.destroy();\n  }\n}\n","/**\n * The up axis of the collider shape.\n */\nexport enum ControllerNonWalkableMode {\n  /** Stops character from climbing up non-walkable slopes, but doesn't move it otherwise. */\n  PreventClimbing,\n  /** Stops character from climbing up non-walkable slopes, and forces it to slide down those slopes. */\n  PreventClimbingAndForceSliding\n}\n","import { ICharacterController } from \"@galacean/engine-design\";\nimport { Vector3 } from \"@galacean/engine-math\";\nimport { Entity } from \"../Entity\";\nimport { Collider } from \"./Collider\";\nimport { ControllerNonWalkableMode } from \"./enums/ControllerNonWalkableMode\";\nimport { PhysicsManager } from \"./PhysicsManager\";\nimport { ColliderShape } from \"./shape\";\n\n/**\n * The character controllers.\n */\nexport class CharacterController extends Collider {\n  /** @internal */\n  _index: number = -1;\n\n  private _stepOffset: number = 0.5;\n  private _nonWalkableMode: ControllerNonWalkableMode = ControllerNonWalkableMode.PreventClimbing;\n  private _upDirection = new Vector3(0, 1, 0);\n  private _slopeLimit: number = 0.707;\n\n  /**\n   * The step offset for the controller.\n   */\n  get stepOffset(): number {\n    return this._stepOffset;\n  }\n\n  set stepOffset(value: number) {\n    if (this._stepOffset !== value) {\n      this._stepOffset = value;\n      (<ICharacterController>this._nativeCollider).setStepOffset(value);\n    }\n  }\n\n  /**\n   * The value of the non-walkable mode.\n   */\n  get nonWalkableMode(): ControllerNonWalkableMode {\n    return this._nonWalkableMode;\n  }\n\n  set nonWalkableMode(value: ControllerNonWalkableMode) {\n    if (this._nonWalkableMode !== value) {\n      this._nonWalkableMode = value;\n      (<ICharacterController>this._nativeCollider).setNonWalkableMode(value);\n    }\n  }\n\n  /**\n   * The up direction for the controller.\n   */\n  get upDirection(): Vector3 {\n    return this._upDirection;\n  }\n\n  set upDirection(value: Vector3) {\n    if (this._upDirection !== value) {\n      this._upDirection.copyFrom(value);\n    }\n  }\n\n  /**\n   * The slope limit for the controller.\n   */\n  get slopeLimit(): number {\n    return this._slopeLimit;\n  }\n\n  set slopeLimit(value: number) {\n    if (this._slopeLimit !== value) {\n      this._slopeLimit = value;\n      (<ICharacterController>this._nativeCollider).setSlopeLimit(value);\n    }\n  }\n\n  /**\n   * @internal\n   */\n  constructor(entity: Entity) {\n    super(entity);\n    (<ICharacterController>this._nativeCollider) = PhysicsManager._nativePhysics.createCharacterController();\n\n    this._setUpDirection = this._setUpDirection.bind(this);\n    //@ts-ignore\n    this._upDirection._onValueChanged = this._setUpDirection;\n  }\n\n  /**\n   * Moves the character using a \"collide-and-slide\" algorithm.\n   * @param disp - Displacement vector\n   * @param minDist - The minimum travelled distance to consider.\n   * @param elapsedTime - Time elapsed since last call\n   * @return flags - The ControllerCollisionFlag\n   */\n  move(disp: Vector3, minDist: number, elapsedTime: number): number {\n    return (<ICharacterController>this._nativeCollider).move(disp, minDist, elapsedTime);\n  }\n\n  /**\n   * Add collider shape on this controller.\n   * @param shape - Collider shape\n   * @override\n   */\n  addShape(shape: ColliderShape): void {\n    if (this._shapes.length > 0) {\n      throw \"only allow single shape on controller!\";\n    }\n    super.addShape(shape);\n    this._updateFlag.flag = true;\n  }\n\n  /**\n   * Remove all shape attached.\n   * @override\n   */\n  clearShapes(): void {\n    if (this._shapes.length > 0) {\n      super.removeShape(this._shapes[0]);\n    }\n  }\n\n  /**\n   * @internal\n   * @override\n   */\n  _onUpdate() {\n    if (this._updateFlag.flag) {\n      const { transform } = this.entity;\n      const shapes = this.shapes;\n      (<ICharacterController>this._nativeCollider).setWorldPosition(transform.worldPosition);\n\n      const worldScale = transform.lossyWorldScale;\n      for (let i = 0, n = shapes.length; i < n; i++) {\n        shapes[i]._nativeShape.setWorldScale(worldScale);\n      }\n      this._updateFlag.flag = false;\n    }\n  }\n\n  /**\n   * @internal\n   * @override\n   */\n  _onLateUpdate() {\n    const position = this.entity.transform.worldPosition;\n    (<ICharacterController>this._nativeCollider).getWorldPosition(position);\n    this.entity.transform.worldPosition = position;\n    this._updateFlag.flag = false;\n  }\n\n  /**\n   * @override\n   * @internal\n   */\n  _onEnable() {\n    this.engine.physicsManager._addCharacterController(this);\n  }\n\n  /**\n   * @override\n   * @internal\n   */\n  _onDisable() {\n    this.engine.physicsManager._removeCharacterController(this);\n  }\n\n  private _setUpDirection(): void {\n    (<ICharacterController>this._nativeCollider).setUpDirection(this._upDirection);\n  }\n}\n","import { IColliderShape } from \"@galacean/engine-design\";\nimport { PhysicsMaterial } from \"../PhysicsMaterial\";\nimport { Vector3 } from \"@galacean/engine-math\";\nimport { Collider } from \"../Collider\";\n\n/**\n * Abstract class for collider shapes.\n */\nexport abstract class ColliderShape {\n  private static _idGenerator: number = 0;\n\n  /** @internal */\n  _collider: Collider;\n  /** @internal */\n  _nativeShape: IColliderShape;\n\n  protected _id: number;\n  protected _material: PhysicsMaterial;\n  private _isTrigger: boolean = false;\n  private _rotation: Vector3 = new Vector3();\n  private _position: Vector3 = new Vector3();\n  private _contactOffset: number = 0.02;\n\n  /**\n   * @internal\n   * @beta\n   * Whether raycast can select it.\n   */\n  isSceneQuery: boolean = true;\n\n  /**\n   * Collider owner of this shape.\n   */\n  get collider(): Collider {\n    return this._collider;\n  }\n\n  /**\n   * Unique id for this shape.\n   */\n  get id(): number {\n    return this._id;\n  }\n\n  /**\n   * Contact offset for this shape.\n   */\n  get contactOffset(): number {\n    return this._contactOffset;\n  }\n\n  set contactOffset(value: number) {\n    if (this._contactOffset !== value) {\n      this._contactOffset = value;\n      this._nativeShape.setContactOffset(value);\n    }\n  }\n\n  /**\n   * Physical material.\n   */\n  get material(): PhysicsMaterial {\n    return this._material;\n  }\n\n  set material(value: PhysicsMaterial) {\n    if (this._material !== value) {\n      this._material = value;\n      this._nativeShape.setMaterial(value._nativeMaterial);\n    }\n  }\n\n  /**\n   * The local rotation of this ColliderShape.\n   */\n  get rotation(): Vector3 {\n    return this._rotation;\n  }\n\n  set rotation(value: Vector3) {\n    if (this._rotation != value) {\n      this._rotation.copyFrom(value);\n    }\n  }\n\n  /**\n   * The local position of this ColliderShape.\n   */\n  get position(): Vector3 {\n    return this._position;\n  }\n\n  set position(value: Vector3) {\n    if (this._position !== value) {\n      this._position.copyFrom(value);\n    }\n  }\n\n  /**\n   * True for TriggerShape, false for SimulationShape.\n   */\n  get isTrigger(): boolean {\n    return this._isTrigger;\n  }\n\n  set isTrigger(value: boolean) {\n    if (this._isTrigger !== value) {\n      this._isTrigger = value;\n      this._nativeShape.setIsTrigger(value);\n    }\n  }\n\n  protected constructor() {\n    this._material = new PhysicsMaterial();\n    this._id = ColliderShape._idGenerator++;\n\n    this._setRotation = this._setRotation.bind(this);\n    this._setPosition = this._setPosition.bind(this);\n    //@ts-ignore\n    this._rotation._onValueChanged = this._setRotation;\n    //@ts-ignore\n    this._position._onValueChanged = this._setPosition;\n  }\n\n  /**\n   * @internal\n   */\n  _destroy() {\n    this._material._destroy();\n    this._nativeShape.destroy();\n  }\n\n  private _setPosition(): void {\n    this._nativeShape.setPosition(this._position);\n  }\n\n  private _setRotation(): void {\n    this._nativeShape.setRotation(this._rotation);\n  }\n}\n","import { ColliderShape } from \"./ColliderShape\";\nimport { IBoxColliderShape } from \"@galacean/engine-design\";\nimport { Vector3 } from \"@galacean/engine-math\";\nimport { PhysicsManager } from \"../PhysicsManager\";\n\n/**\n * Physical collider shape for box.\n */\nexport class BoxColliderShape extends ColliderShape {\n  private _size: Vector3 = new Vector3(1, 1, 1);\n\n  /**\n   * Size of box shape.\n   */\n  get size(): Vector3 {\n    return this._size;\n  }\n\n  set size(value: Vector3) {\n    if (this._size !== value) {\n      this._size.copyFrom(value);\n    }\n  }\n\n  constructor() {\n    super();\n    this._nativeShape = PhysicsManager._nativePhysics.createBoxColliderShape(\n      this._id,\n      this._size,\n      this._material._nativeMaterial\n    );\n\n    this._setSize = this._setSize.bind(this);\n    //@ts-ignore\n    this._size._onValueChanged = this._setSize;\n  }\n\n  private _setSize(): void {\n    (<IBoxColliderShape>this._nativeShape).setSize(this._size);\n  }\n}\n","import { ColliderShape } from \"./ColliderShape\";\nimport { ISphereColliderShape } from \"@galacean/engine-design\";\nimport { PhysicsManager } from \"../PhysicsManager\";\n\n/**\n * Physical collider shape for sphere.\n */\nexport class SphereColliderShape extends ColliderShape {\n  private _radius: number = 1;\n\n  /**\n   * Radius of sphere shape.\n   */\n  get radius(): number {\n    return this._radius;\n  }\n\n  set radius(value: number) {\n    if (this._radius !== value) {\n      this._radius = value;\n      (<ISphereColliderShape>this._nativeShape).setRadius(value);\n    }\n  }\n\n  constructor() {\n    super();\n    this._nativeShape = PhysicsManager._nativePhysics.createSphereColliderShape(\n      this._id,\n      this._radius,\n      this._material._nativeMaterial\n    );\n  }\n}\n","import { PhysicsManager } from \"../PhysicsManager\";\nimport { ColliderShape } from \"./ColliderShape\";\n\n/**\n * Physical collider shape plane.\n */\nexport class PlaneColliderShape extends ColliderShape {\n  constructor() {\n    super();\n    this._nativeShape = PhysicsManager._nativePhysics.createPlaneColliderShape(\n      this._id,\n      this._material._nativeMaterial\n    );\n  }\n}\n","/**\n * The up axis of the collider shape.\n */\nexport enum ColliderShapeUpAxis {\n  /** Up axis is X. */\n  X,\n  /** Up axis is Y. */\n  Y,\n  /** Up axis is Z. */\n  Z\n}","import { ColliderShape } from \"./ColliderShape\";\nimport { ICapsuleColliderShape } from \"@galacean/engine-design\";\nimport { PhysicsManager } from \"../PhysicsManager\";\nimport { ColliderShapeUpAxis } from \"../enums/ColliderShapeUpAxis\";\n\n/**\n * Physical collider shape for capsule.\n */\nexport class CapsuleColliderShape extends ColliderShape {\n  private _radius: number = 1;\n  private _height: number = 2;\n  private _upAxis: ColliderShapeUpAxis = ColliderShapeUpAxis.Y;\n\n  /**\n   * Radius of capsule.\n   */\n  get radius(): number {\n    return this._radius;\n  }\n\n  set radius(value: number) {\n    if (this._radius !== value) {\n      this._radius = value;\n      (<ICapsuleColliderShape>this._nativeShape).setRadius(value);\n    }\n  }\n\n  /**\n   * Height of capsule.\n   */\n  get height(): number {\n    return this._height;\n  }\n\n  set height(value: number) {\n    if (this._height !== value) {\n      this._height = value;\n      (<ICapsuleColliderShape>this._nativeShape).setHeight(value);\n    }\n  }\n\n  /**\n   * Up axis of capsule.\n   */\n  get upAxis(): ColliderShapeUpAxis {\n    return this._upAxis;\n  }\n\n  set upAxis(value: ColliderShapeUpAxis) {\n    if (this._upAxis !== value) {\n      this._upAxis = value;\n      (<ICapsuleColliderShape>this._nativeShape).setUpAxis(value);\n    }\n  }\n\n  constructor() {\n    super();\n    this._nativeShape = PhysicsManager._nativePhysics.createCapsuleColliderShape(\n      this._id,\n      this._radius,\n      this._height,\n      this._material._nativeMaterial\n    );\n  }\n}\n","import { IJoint } from \"@galacean/engine-design\";\nimport { Vector3, Quaternion } from \"@galacean/engine-math\";\nimport { Component } from \"../../Component\";\nimport { Collider } from \"../Collider\";\nimport { dependentComponents } from \"../../ComponentsDependencies\";\nimport { Entity } from \"../../Entity\";\n\n/**\n * A base class providing common functionality for joints.\n * @decorator `@dependentComponents(Collider)`\n */\n@dependentComponents(Collider)\nexport class Joint extends Component {\n  protected _connectedCollider = new JointCollider();\n  protected _collider = new JointCollider();\n  protected _nativeJoint: IJoint;\n  private _force: number = 0;\n  private _torque: number = 0;\n\n  /**\n   * The connected collider.\n   */\n  get connectedCollider(): Collider {\n    return this._connectedCollider.collider;\n  }\n\n  set connectedCollider(value: Collider) {\n    if (this._connectedCollider.collider !== value) {\n      this._connectedCollider.collider = value;\n      this._nativeJoint.setConnectedCollider(value._nativeCollider);\n    }\n  }\n\n  /**\n   * The connected anchor position.\n   * @remarks If connectedCollider is set, this anchor is relative offset, or the anchor is world position.\n   */\n  get connectedAnchor(): Vector3 {\n    return this._connectedCollider.localPosition;\n  }\n\n  set connectedAnchor(value: Vector3) {\n    const connectedAnchor = this._connectedCollider.localPosition;\n    if (value !== connectedAnchor) {\n      connectedAnchor.copyFrom(value);\n    }\n    this._nativeJoint.setConnectedAnchor(value);\n  }\n\n  /**\n   *  The scale to apply to the inverse mass of collider 0 for resolving this constraint.\n   */\n  get connectedMassScale(): number {\n    return this._connectedCollider.massScale;\n  }\n\n  set connectedMassScale(value: number) {\n    if (value !== this._connectedCollider.massScale) {\n      this._connectedCollider.massScale = value;\n      this._nativeJoint.setConnectedMassScale(value);\n    }\n  }\n\n  /**\n   * The scale to apply to the inverse inertia of collider0 for resolving this constraint.\n   */\n  get connectedInertiaScale(): number {\n    return this._connectedCollider.inertiaScale;\n  }\n\n  set connectedInertiaScale(value: number) {\n    if (value !== this._connectedCollider.inertiaScale) {\n      this._connectedCollider.inertiaScale = value;\n      this._nativeJoint.setConnectedInertiaScale(value);\n    }\n  }\n\n  /**\n   * The scale to apply to the inverse mass of collider 1 for resolving this constraint.\n   */\n  get massScale(): number {\n    return this._collider.massScale;\n  }\n\n  set massScale(value: number) {\n    if (value !== this._collider.massScale) {\n      this._collider.massScale = value;\n      this._nativeJoint.setMassScale(value);\n    }\n  }\n\n  /**\n   * The scale to apply to the inverse inertia of collider1 for resolving this constraint.\n   */\n  get inertiaScale(): number {\n    return this._collider.inertiaScale;\n  }\n\n  set inertiaScale(value: number) {\n    if (value !== this._collider.inertiaScale) {\n      this._collider.inertiaScale = value;\n      this._nativeJoint.setInertiaScale(value);\n    }\n  }\n\n  /**\n   * The maximum force the joint can apply before breaking.\n   */\n  get breakForce(): number {\n    return this._force;\n  }\n\n  set breakForce(value: number) {\n    if (value !== this._force) {\n      this._force = value;\n      this._nativeJoint.setBreakForce(value);\n    }\n  }\n\n  /**\n   * The maximum torque the joint can apply before breaking.\n   */\n  get breakTorque(): number {\n    return this._torque;\n  }\n\n  set breakTorque(value: number) {\n    if (value !== this._torque) {\n      this._torque = value;\n      this._nativeJoint.setBreakTorque(value);\n    }\n  }\n\n  constructor(entity: Entity) {\n    super(entity);\n    this._connectedCollider.localPosition = new Vector3();\n  }\n}\n\n/**\n * @internal\n */\nclass JointCollider {\n  collider: Collider = null;\n  localPosition: Vector3;\n  localRotation: Quaternion;\n  massScale: number = 0;\n  inertiaScale: number = 0;\n}\n","import { Joint } from \"./Joint\";\nimport { PhysicsManager } from \"../PhysicsManager\";\nimport { Collider } from \"../Collider\";\n\n/*\n * A fixed joint permits no relative movement between two colliders. ie the colliders are glued together.\n */\nexport class FixedJoint extends Joint {\n  /**\n   * @override\n   * @internal\n   */\n  _onAwake() {\n    const collider = this._collider;\n    collider.collider = this.entity.getComponent(Collider);\n    this._nativeJoint = PhysicsManager._nativePhysics.createFixedJoint(collider.collider._nativeCollider);\n  }\n}\n","/**\n * Flags specific to the Hinge Joint.\n * @internal\n */\nexport enum HingeJointFlag {\n  /** enable the limit */\n  LimitEnabled = 1,\n  /** enable the drive */\n  DriveEnabled = 2,\n  /** if the existing velocity is beyond the drive velocity, do not add force */\n  DriveFreeSpin = 4\n}\n","import { Joint } from \"./Joint\";\nimport { IHingeJoint } from \"@galacean/engine-design\";\nimport { PhysicsManager } from \"../PhysicsManager\";\nimport { HingeJointFlag } from \"../enums/HingeJointFlag\";\nimport { Collider } from \"../Collider\";\nimport { Vector3 } from \"@galacean/engine-math\";\nimport { JointMotor } from \"./JointMotor\";\nimport { JointLimits } from \"./JointLimits\";\n\n/**\n * A joint which behaves in a similar way to a hinge or axle.\n */\nexport class HingeJoint extends Joint {\n  private _axis: Vector3 = new Vector3(1, 0, 0);\n  private _hingeFlags: number = 0;\n  private _useSpring: boolean = false;\n  private _jointMonitor: JointMotor;\n  private _limits: JointLimits;\n\n  /**\n   * The anchor rotation.\n   */\n  get axis(): Vector3 {\n    return this._axis;\n  }\n\n  set axis(value: Vector3) {\n    const axis = this._axis;\n    if (value !== axis) {\n      axis.copyFrom(value);\n    }\n    (<IHingeJoint>this._nativeJoint).setAxis(axis);\n  }\n\n  /**\n   * The swing offset.\n   */\n  get swingOffset(): Vector3 {\n    return this._collider.localPosition;\n  }\n\n  set swingOffset(value: Vector3) {\n    const swingOffset = this._collider.localPosition;\n    if (value !== swingOffset) {\n      swingOffset.copyFrom(value);\n    }\n    (<IHingeJoint>this._nativeJoint).setSwingOffset(swingOffset);\n  }\n\n  /**\n   * The current angle in degrees of the joint relative to its rest position.\n   */\n  get angle(): number {\n    return (<IHingeJoint>this._nativeJoint).getAngle();\n  }\n\n  /**\n   * The angular velocity of the joint in degrees per second.\n   */\n  get velocity(): Readonly<Vector3> {\n    return (<IHingeJoint>this._nativeJoint).getVelocity();\n  }\n\n  /**\n   * Enables the joint's limits. Disabled by default.\n   */\n  get useLimits(): boolean {\n    return (this._hingeFlags & HingeJointFlag.LimitEnabled) == HingeJointFlag.LimitEnabled;\n  }\n\n  set useLimits(value: boolean) {\n    if (value !== this.useLimits) {\n      this._hingeFlags |= HingeJointFlag.LimitEnabled;\n    }\n    (<IHingeJoint>this._nativeJoint).setHingeJointFlag(HingeJointFlag.LimitEnabled, value);\n  }\n\n  /**\n   * Enables the joint's motor. Disabled by default.\n   */\n  get useMotor(): boolean {\n    return (this._hingeFlags & HingeJointFlag.DriveEnabled) == HingeJointFlag.DriveEnabled;\n  }\n\n  set useMotor(value: boolean) {\n    if (value !== this.useMotor) {\n      this._hingeFlags |= HingeJointFlag.DriveEnabled;\n    }\n    (<IHingeJoint>this._nativeJoint).setHingeJointFlag(HingeJointFlag.DriveEnabled, value);\n  }\n\n  /**\n   * Enables the joint's spring. Disabled by default.\n   */\n  get useSpring(): boolean {\n    return this._useSpring;\n  }\n\n  set useSpring(value: boolean) {\n    if (this._useSpring !== value) {\n      this._useSpring = value;\n      this.limits = this._limits;\n    }\n  }\n\n  /**\n   * The motor will apply a force up to a maximum force to achieve the target velocity in degrees per second.\n   */\n  get motor(): JointMotor {\n    return this._jointMonitor;\n  }\n\n  set motor(value: JointMotor) {\n    if (this._jointMonitor !== value) {\n      this._jointMonitor = value;\n      (<IHingeJoint>this._nativeJoint).setDriveVelocity(value.targetVelocity);\n      (<IHingeJoint>this._nativeJoint).setDriveForceLimit(value.forceLimit);\n      (<IHingeJoint>this._nativeJoint).setDriveGearRatio(value.gearRation);\n      (<IHingeJoint>this._nativeJoint).setHingeJointFlag(HingeJointFlag.DriveFreeSpin, value.freeSpin);\n    }\n  }\n\n  /**\n   * Limit of angular rotation (in degrees) on the hinge joint.\n   */\n  get limits(): JointLimits {\n    return this._limits;\n  }\n\n  set limits(value: JointLimits) {\n    if (this._limits !== value) {\n      this._limits = value;\n      if (this.useSpring) {\n        (<IHingeJoint>this._nativeJoint).setSoftLimit(value.min, value.max, value.stiffness, value.damping);\n      } else {\n        (<IHingeJoint>this._nativeJoint).setHardLimit(value.min, value.max, value.contactDistance);\n      }\n    }\n  }\n\n  /**\n   * @override\n   * @internal\n   */\n  _onAwake() {\n    const collider = this._collider;\n    collider.localPosition = new Vector3();\n    collider.collider = this.entity.getComponent(Collider);\n    this._nativeJoint = PhysicsManager._nativePhysics.createHingeJoint(collider.collider._nativeCollider);\n  }\n}\n","import { Joint } from \"./Joint\";\nimport { ISpringJoint } from \"@galacean/engine-design\";\nimport { PhysicsManager } from \"../PhysicsManager\";\nimport { Collider } from \"../Collider\";\nimport { Vector3 } from \"@galacean/engine-math\";\n\n/**\n * A joint that maintains an upper or lower bound (or both) on the distance between two points on different objects.\n */\nexport class SpringJoint extends Joint {\n  private _minDistance: number = 0;\n  private _maxDistance: number = 0;\n  private _tolerance: number = 0.25;\n  private _stiffness: number = 0;\n  private _damping: number = 0;\n\n  /**\n   * The swing offset.\n   */\n  get swingOffset(): Vector3 {\n    return this._collider.localPosition;\n  }\n\n  set swingOffset(value: Vector3) {\n    const swingOffset = this._collider.localPosition;\n    if (value !== swingOffset) {\n      swingOffset.copyFrom(value);\n    }\n    (<ISpringJoint>this._nativeJoint).setSwingOffset(value);\n  }\n\n  /**\n   * The minimum distance.\n   */\n  get minDistance(): number {\n    return this._minDistance;\n  }\n\n  set minDistance(value: number) {\n    if (this._minDistance !== value) {\n      this._minDistance = value;\n      (<ISpringJoint>this._nativeJoint).setMinDistance(value);\n    }\n  }\n\n  /**\n   * The maximum distance.\n   */\n  get maxDistance(): number {\n    return this._maxDistance;\n  }\n\n  set maxDistance(value: number) {\n    if (this._maxDistance !== value) {\n      this._maxDistance = value;\n      (<ISpringJoint>this._nativeJoint).setMaxDistance(value);\n    }\n  }\n\n  /**\n   * The distance beyond the allowed range at which the joint becomes active.\n   */\n  get tolerance(): number {\n    return this._tolerance;\n  }\n\n  set tolerance(value: number) {\n    if (this._tolerance !== value) {\n      this._tolerance = value;\n      (<ISpringJoint>this._nativeJoint).setTolerance(value);\n    }\n  }\n\n  /**\n   * The spring strength of the joint.\n   */\n  get stiffness(): number {\n    return this._stiffness;\n  }\n\n  set stiffness(value: number) {\n    if (this._stiffness !== value) {\n      this._stiffness = value;\n      (<ISpringJoint>this._nativeJoint).setStiffness(value);\n    }\n  }\n\n  /**\n   * The degree of damping of the joint spring of the joint.\n   */\n  get damping(): number {\n    return this._damping;\n  }\n\n  set damping(value: number) {\n    if (this._damping !== value) {\n      this._damping = value;\n      (<ISpringJoint>this._nativeJoint).setDamping(value);\n    }\n  }\n\n  /**\n   * @override\n   * @internal\n   */\n  _onAwake() {\n    const collider = this._collider;\n    collider.localPosition = new Vector3();\n    collider.collider = this.entity.getComponent(Collider);\n    this._nativeJoint = PhysicsManager._nativePhysics.createSpringJoint(collider.collider._nativeCollider);\n  }\n}\n","/**\n * JointLimits is used to limit the joints angle.\n */\nexport class JointLimits {\n  /** The upper angular limit (in degrees) of the joint. */\n  max: number = 0;\n  /** The lower angular limit (in degrees) of the joint. */\n  min: number = 0;\n  /** Distance inside the limit value at which the limit will be considered to be active by the solver. */\n  contactDistance: number = -1;\n\n  /** The spring forces used to reach the target position. */\n  stiffness: number = 0;\n  /** The damper force uses to dampen the spring. */\n  damping: number = 0;\n}\n","/**\n * The JointMotor is used to motorize a joint.\n */\nexport class JointMotor {\n  /** The motor will apply a force up to force to achieve targetVelocity. */\n  targetVelocity: number = 0;\n  /** The force limit.*/\n  forceLimit: number = Number.MAX_VALUE;\n  /** Gear ration for the motor */\n  gearRation: number = 1.0;\n  /** If freeSpin is enabled the motor will only accelerate but never slow down. */\n  freeSpin: boolean = false;\n}\n","/**\n * The up axis of the collider shape.\n */\nexport enum ControllerCollisionFlag {\n  /** Character is colliding to the sides. */\n  Sides = 1,\n  /** Character has collision above. */\n  Up = 2,\n  /** Character has collision below. */\n  Down = 4\n}\n","import { Entity } from \"../Entity\";\nimport { Collider } from \"./Collider\";\nimport { PhysicsManager } from \"./PhysicsManager\";\n\n/**\n * A static collider component that will not move.\n * @remarks Mostly used for object which always stays at the same place and never moves around.\n */\nexport class StaticCollider extends Collider {\n  /**\n   * @internal\n   */\n  constructor(entity: Entity) {\n    super(entity);\n    const { transform } = this.entity;\n    this._nativeCollider = PhysicsManager._nativePhysics.createStaticCollider(\n      transform.worldPosition,\n      transform.worldRotationQuaternion\n    );\n  }\n}\n","import { IDynamicCollider } from \"@galacean/engine-design\";\nimport { Quaternion, Vector3 } from \"@galacean/engine-math\";\nimport { Entity } from \"../Entity\";\nimport { Collider } from \"./Collider\";\nimport { PhysicsManager } from \"./PhysicsManager\";\n\n/**\n * A dynamic collider can act with self-defined movement or physical force.\n */\nexport class DynamicCollider extends Collider {\n  private _linearDamping: number = 0;\n  private _angularDamping: number = 0.05;\n  private _linearVelocity = new Vector3();\n  private _angularVelocity = new Vector3();\n  private _mass: number = 1.0;\n  private _centerOfMass = new Vector3();\n  private _inertiaTensor = new Vector3(1, 1, 1);\n  private _maxAngularVelocity: number = 100;\n  private _maxDepenetrationVelocity: number = 1000;\n  private _solverIterations: number = 4;\n  private _isKinematic: boolean = false;\n  private _constraints: DynamicColliderConstraints = 0;\n  private _collisionDetectionMode: CollisionDetectionMode = CollisionDetectionMode.Discrete;\n  private _sleepThreshold: number = 5e-3;\n\n  /**\n   * The linear damping of the dynamic collider.\n   */\n  get linearDamping(): number {\n    return this._linearDamping;\n  }\n\n  set linearDamping(value: number) {\n    if (this._linearDamping !== value) {\n      this._linearDamping = value;\n      (<IDynamicCollider>this._nativeCollider).setLinearDamping(value);\n    }\n  }\n\n  /**\n   * The angular damping of the dynamic collider.\n   */\n  get angularDamping(): number {\n    return this._angularDamping;\n  }\n\n  set angularDamping(value: number) {\n    if (this._angularDamping !== value) {\n      this._angularDamping = value;\n      (<IDynamicCollider>this._nativeCollider).setAngularDamping(value);\n    }\n  }\n\n  /**\n   * The linear velocity vector of the dynamic collider measured in world unit per second.\n   */\n  get linearVelocity(): Vector3 {\n    return this._linearVelocity;\n  }\n\n  set linearVelocity(value: Vector3) {\n    if (this._linearVelocity !== value) {\n      this._linearVelocity.copyFrom(value);\n    }\n  }\n\n  /**\n   * The angular velocity vector of the dynamic collider measured in radians per second.\n   */\n  get angularVelocity(): Vector3 {\n    return this._angularVelocity;\n  }\n\n  set angularVelocity(value: Vector3) {\n    if (this._angularVelocity !== value) {\n      this._angularVelocity.copyFrom(value);\n    }\n  }\n\n  /**\n   * The mass of the dynamic collider.\n   */\n  get mass(): number {\n    return this._mass;\n  }\n\n  set mass(value: number) {\n    if (this._mass !== value) {\n      this._mass = value;\n      (<IDynamicCollider>this._nativeCollider).setMass(value);\n    }\n  }\n\n  /**\n   * The center of mass relative to the transform's origin.\n   */\n  get centerOfMass(): Vector3 {\n    return this._centerOfMass;\n  }\n\n  set centerOfMass(value: Vector3) {\n    if (this._centerOfMass !== value) {\n      this._centerOfMass.copyFrom(value);\n    }\n  }\n\n  /**\n   * The diagonal inertia tensor of mass relative to the center of mass.\n   */\n  get inertiaTensor(): Vector3 {\n    return this._inertiaTensor;\n  }\n\n  set inertiaTensor(value: Vector3) {\n    if (this._inertiaTensor !== value) {\n      this._inertiaTensor.copyFrom(value);\n    }\n  }\n\n  /**\n   * The maximum angular velocity of the collider measured in radians per second. (Default 7) range { 0, infinity }.\n   */\n  get maxAngularVelocity(): number {\n    return this._maxAngularVelocity;\n  }\n\n  set maxAngularVelocity(value: number) {\n    if (this._maxAngularVelocity !== value) {\n      this._maxAngularVelocity = value;\n      (<IDynamicCollider>this._nativeCollider).setMaxAngularVelocity(value);\n    }\n  }\n\n  /**\n   * Maximum velocity of a collider when moving out of penetrating state.\n   */\n  get maxDepenetrationVelocity(): number {\n    return this._maxDepenetrationVelocity;\n  }\n\n  set maxDepenetrationVelocity(value: number) {\n    if (this._maxDepenetrationVelocity !== value) {\n      this._maxDepenetrationVelocity = value;\n      (<IDynamicCollider>this._nativeCollider).setMaxDepenetrationVelocity(value);\n    }\n  }\n\n  /**\n   * The mass-normalized energy threshold, below which objects start going to sleep.\n   */\n  get sleepThreshold(): number {\n    return this._sleepThreshold;\n  }\n\n  set sleepThreshold(value: number) {\n    if (value !== this._sleepThreshold) {\n      this._sleepThreshold = value;\n      (<IDynamicCollider>this._nativeCollider).setSleepThreshold(value);\n    }\n  }\n\n  /**\n   * The solverIterations determines how accurately collider joints and collision contacts are resolved.\n   */\n  get solverIterations(): number {\n    return this._solverIterations;\n  }\n\n  set solverIterations(value: number) {\n    if (this._solverIterations !== value) {\n      this._solverIterations = value;\n      (<IDynamicCollider>this._nativeCollider).setSolverIterations(value);\n    }\n  }\n\n  /**\n   * Controls whether physics affects the dynamic collider.\n   */\n  get isKinematic(): boolean {\n    return this._isKinematic;\n  }\n\n  set isKinematic(value: boolean) {\n    if (this._isKinematic !== value) {\n      this._isKinematic = value;\n      (<IDynamicCollider>this._nativeCollider).setIsKinematic(value);\n    }\n  }\n\n  /**\n   * The particular rigid dynamic lock flag.\n   */\n  get constraints(): DynamicColliderConstraints {\n    return this._constraints;\n  }\n\n  set constraints(value: DynamicColliderConstraints) {\n    if (this._constraints !== value) {\n      this._constraints = value;\n      (<IDynamicCollider>this._nativeCollider).setConstraints(value);\n    }\n  }\n\n  /**\n   * The colliders' collision detection mode.\n   */\n  get collisionDetectionMode(): CollisionDetectionMode {\n    return this._collisionDetectionMode;\n  }\n\n  set collisionDetectionMode(value: CollisionDetectionMode) {\n    if (this._collisionDetectionMode !== value) {\n      this._collisionDetectionMode = value;\n      (<IDynamicCollider>this._nativeCollider).setCollisionDetectionMode(value);\n    }\n  }\n\n  /**\n   * @internal\n   */\n  constructor(entity: Entity) {\n    super(entity);\n    const { transform } = this.entity;\n    this._nativeCollider = PhysicsManager._nativePhysics.createDynamicCollider(\n      transform.worldPosition,\n      transform.worldRotationQuaternion\n    );\n\n    this._setLinearVelocity = this._setLinearVelocity.bind(this);\n    this._setAngularVelocity = this._setAngularVelocity.bind(this);\n    this._setCenterOfMass = this._setCenterOfMass.bind(this);\n    this._setInertiaTensor = this._setInertiaTensor.bind(this);\n\n    //@ts-ignore\n    this._linearVelocity._onValueChanged = this._setLinearVelocity;\n    //@ts-ignore\n    this._angularVelocity._onValueChanged = this._setAngularVelocity;\n    //@ts-ignore\n    this._centerOfMass._onValueChanged = this._setCenterOfMass;\n    //@ts-ignore\n    this._inertiaTensor._onValueChanged = this._setInertiaTensor;\n  }\n\n  /**\n   * Apply a force to the DynamicCollider.\n   * @param force - The force make the collider move\n   */\n  applyForce(force: Vector3): void {\n    (<IDynamicCollider>this._nativeCollider).addForce(force);\n  }\n\n  /**\n   * Apply a torque to the DynamicCollider.\n   * @param torque - The force make the collider rotate\n   */\n  applyTorque(torque: Vector3): void {\n    (<IDynamicCollider>this._nativeCollider).addTorque(torque);\n  }\n\n  /**\n   * Moves kinematically controlled dynamic actors through the game world.\n   * @param position - The desired position for the kinematic actor\n   */\n  move(position: Vector3): void;\n\n  /**\n   * Moves kinematically controlled dynamic actors through the game world.\n   * @param rotation - The desired rotation for the kinematic actor\n   */\n  move(rotation: Quaternion): void;\n\n  /**\n   * Moves kinematically controlled dynamic actors through the game world.\n   * @param position - The desired position for the kinematic actor\n   * @param rotation - The desired rotation for the kinematic actor\n   */\n  move(position: Vector3, rotation: Quaternion): void;\n\n  move(positionOrRotation: Vector3 | Quaternion, rotation?: Quaternion): void {\n    (<IDynamicCollider>this._nativeCollider).move(positionOrRotation, rotation);\n  }\n\n  /**\n   * Forces a collider to sleep at least one frame.\n   */\n  sleep(): void {\n    (<IDynamicCollider>this._nativeCollider).sleep();\n  }\n\n  /**\n   * Forces a collider to wake up.\n   */\n  wakeUp(): void {\n    (<IDynamicCollider>this._nativeCollider).wakeUp();\n  }\n\n  /**\n   * @override\n   * @internal\n   */\n  _onLateUpdate(): void {\n    const { transform } = this.entity;\n    const { worldPosition, worldRotationQuaternion } = transform;\n    (<IDynamicCollider>this._nativeCollider).getWorldTransform(worldPosition, worldRotationQuaternion);\n    this._updateFlag.flag = false;\n  }\n\n  private _setLinearVelocity(): void {\n    (<IDynamicCollider>this._nativeCollider).setLinearVelocity(this._linearVelocity);\n  }\n\n  private _setAngularVelocity(): void {\n    (<IDynamicCollider>this._nativeCollider).setAngularVelocity(this._angularVelocity);\n  }\n\n  private _setCenterOfMass(): void {\n    (<IDynamicCollider>this._nativeCollider).setCenterOfMass(this._centerOfMass);\n  }\n\n  private _setInertiaTensor(): void {\n    (<IDynamicCollider>this._nativeCollider).setInertiaTensor(this._inertiaTensor);\n  }\n}\n\n/**\n * The collision detection mode constants.\n */\nexport enum CollisionDetectionMode {\n  /** Continuous collision detection is off for this dynamic collider. */\n  Discrete,\n  /** Continuous collision detection is on for colliding with static mesh geometry. */\n  Continuous,\n  /** Continuous collision detection is on for colliding with static and dynamic geometry. */\n  ContinuousDynamic,\n  /** Speculative continuous collision detection is on for static and dynamic geometries */\n  ContinuousSpeculative\n}\n\n/**\n * Use these flags to constrain motion of dynamic collider.\n */\nexport enum DynamicColliderConstraints {\n  /** Not Freeze. */\n  None = 0,\n  /** Freeze motion along the X-axis. */\n  FreezePositionX = 1,\n  /** Freeze motion along the Y-axis. */\n  FreezePositionY = 2,\n  /** Freeze motion along the Z-axis. */\n  FreezePositionZ = 4,\n  /** Freeze rotation along the X-axis. */\n  FreezeRotationX = 8,\n  /** Freeze rotation along the Y-axis. */\n  FreezeRotationY = 16,\n  /** Freeze rotation along the Z-axis. */\n  FreezeRotationZ = 32\n}\n","/**\n * Defines values that specify the buttons on a pointer device.\n * Refer to the W3C standards:\n * (https://www.w3.org/TR/uievents/#dom-mouseevent-button)\n * (https://www.w3.org/TR/uievents/#dom-mouseevent-buttons)\n * Refer to Microsoft's documentation.(https://docs.microsoft.com/en-us/dotnet/api/system.windows.input.mousebutton?view=windowsdesktop-6.0)\n */\nexport enum PointerButton {\n  /** No button. */\n  None = 0x0,\n  /** Indicate the primary pointer of the device (in general, the left button or the only button on single-button devices, used to activate a user interface control or select text) or the un-initialized value. */\n  Primary = 0x1,\n  /** Indicate the secondary pointer (in general, the right button, often used to display a context menu). */\n  Secondary = 0x2,\n  /** Indicate the auxiliary pointer (in general, the middle button, often combined with a mouse wheel). */\n  Auxiliary = 0x4,\n  /** Indicate the X1 (back) pointer. */\n  XButton1 = 0x8,\n  /** Indicate the X2 (forward) pointer. */\n  XButton2 = 0x10,\n  /** Indicate the X3 pointer. */\n  XButton3 = 0x20,\n  /** Indicate the X4 pointer. */\n  XButton4 = 0x40,\n  /** Indicate the X5 pointer. */\n  XButton5 = 0x80,\n  /** Indicate the X6 pointer. */\n  XButton6 = 0x100,\n  /** Indicate the X7 pointer. */\n  XButton7 = 0x200,\n  /** Indicate the X8 pointer. */\n  XButton8 = 0x400\n}\n\n/**\n * @internal\n */\nexport const _pointerDec2BinMap = [\n  PointerButton.Primary,\n  PointerButton.Auxiliary,\n  PointerButton.Secondary,\n  PointerButton.XButton1,\n  PointerButton.XButton2,\n  PointerButton.XButton3,\n  PointerButton.XButton4,\n  PointerButton.XButton5,\n  PointerButton.XButton6,\n  PointerButton.XButton7,\n  PointerButton.XButton8\n];\n\n/**\n * @internal\n */\nexport const _pointerBin2DecMap: Record<number, number> = {\n  /** Primary */\n  0x1: 0,\n  /** Secondary */\n  0x2: 2,\n  /** Auxiliary */\n  0x4: 1,\n  /** XButton1 */\n  0x8: 3,\n  /** XButton2 */\n  0x10: 4,\n  /** XButton3 */\n  0x20: 5,\n  /** XButton4 */\n  0x40: 6,\n  /** XButton5 */\n  0x80: 7,\n  /** XButton6 */\n  0x100: 8,\n  /** XButton7 */\n  0x200: 9,\n  /** XButton8 */\n  0x400: 10\n};\n","import { Ray, Vector2 } from \"@galacean/engine-math\";\nimport { Canvas } from \"../../Canvas\";\nimport { DisorderedArray } from \"../../DisorderedArray\";\nimport { Engine } from \"../../Engine\";\nimport { Entity } from \"../../Entity\";\nimport { CameraClearFlags } from \"../../enums/CameraClearFlags\";\nimport { HitResult } from \"../../physics\";\nimport { PointerPhase } from \"../enums/PointerPhase\";\nimport { PointerButton, _pointerBin2DecMap, _pointerDec2BinMap } from \"../enums/PointerButton\";\nimport { IInput } from \"../interface/IInput\";\nimport { Pointer } from \"./Pointer\";\n\n/**\n * Pointer Manager.\n * @internal\n */\nexport class PointerManager implements IInput {\n  private static _tempRay: Ray = new Ray();\n  private static _tempPoint: Vector2 = new Vector2();\n  private static _tempHitResult: HitResult = new HitResult();\n  /** @internal */\n  _pointers: Pointer[] = [];\n  /** @internal */\n  _multiPointerEnabled: boolean = true;\n  /** @internal */\n  _buttons: PointerButton = PointerButton.None;\n  /** @internal */\n  _upMap: number[] = [];\n  /** @internal */\n  _downMap: number[] = [];\n  /** @internal */\n  _upList: DisorderedArray<PointerButton> = new DisorderedArray();\n  /** @internal */\n  _downList: DisorderedArray<PointerButton> = new DisorderedArray();\n\n  private _engine: Engine;\n  private _canvas: Canvas;\n  private _htmlCanvas: HTMLCanvasElement;\n  private _nativeEvents: PointerEvent[] = [];\n  private _pointerPool: Pointer[];\n  private _hadListener: boolean = false;\n\n  /**\n   * Create a PointerManager.\n   * @param engine - The current engine instance\n   * @param htmlCanvas - HTMLCanvasElement\n   */\n  constructor(engine: Engine, htmlCanvas: HTMLCanvasElement) {\n    this._engine = engine;\n    this._canvas = engine.canvas;\n    this._htmlCanvas = htmlCanvas;\n    this._onPointerEvent = this._onPointerEvent.bind(this);\n    this._updatePointerWithPhysics = this._updatePointerWithPhysics.bind(this);\n    this._updatePointerWithoutPhysics = this._updatePointerWithoutPhysics.bind(this);\n    this._onFocus();\n    // If there are no compatibility issues, navigator.maxTouchPoints should be used here\n    this._pointerPool = new Array<Pointer>(11);\n  }\n\n  /**\n   * @internal\n   */\n  _update(frameCount: number): void {\n    const { _pointers: pointers, _nativeEvents: nativeEvents } = this;\n    // Clean up the pointer released in the previous frame\n    let lastIndex = pointers.length - 1;\n    if (lastIndex >= 0) {\n      for (let i = lastIndex; i >= 0; i--) {\n        if (pointers[i].phase === PointerPhase.Leave) {\n          pointers.splice(i, 1);\n        }\n      }\n    }\n\n    // Generate the pointer received for this frame\n    lastIndex = nativeEvents.length - 1;\n    if (lastIndex >= 0) {\n      for (let i = 0; i <= lastIndex; i++) {\n        const evt = nativeEvents[i];\n        this._getPointer(evt.pointerId)?._events.push(evt);\n      }\n      nativeEvents.length = 0;\n    }\n\n    // Pointer handles its own events\n    this._upList.length = this._downList.length = 0;\n    this._buttons = PointerButton.None;\n    lastIndex = pointers.length - 1;\n    if (lastIndex >= 0) {\n      const updatePointer = this._engine.physicsManager._initialized\n        ? this._updatePointerWithPhysics\n        : this._updatePointerWithoutPhysics;\n      const clientRect = this._htmlCanvas.getBoundingClientRect();\n      const { clientWidth, clientHeight } = this._htmlCanvas;\n      const { width, height } = this._canvas;\n      for (let i = lastIndex; i >= 0; i--) {\n        const pointer = pointers[i];\n        pointer._upList.length = pointer._downList.length = 0;\n        updatePointer(frameCount, pointer, clientRect, clientWidth, clientHeight, width, height);\n        this._buttons |= pointer.pressedButtons;\n      }\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _onFocus(): void {\n    if (!this._hadListener) {\n      const { _htmlCanvas: htmlCanvas, _onPointerEvent: onPointerEvent } = this;\n      htmlCanvas.addEventListener(\"pointerdown\", onPointerEvent);\n      htmlCanvas.addEventListener(\"pointerup\", onPointerEvent);\n      htmlCanvas.addEventListener(\"pointerleave\", onPointerEvent);\n      htmlCanvas.addEventListener(\"pointermove\", onPointerEvent);\n      htmlCanvas.addEventListener(\"pointercancel\", onPointerEvent);\n      this._hadListener = true;\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _onBlur(): void {\n    if (this._hadListener) {\n      const { _htmlCanvas: htmlCanvas, _onPointerEvent: onPointerEvent } = this;\n      htmlCanvas.removeEventListener(\"pointerdown\", onPointerEvent);\n      htmlCanvas.removeEventListener(\"pointerup\", onPointerEvent);\n      htmlCanvas.removeEventListener(\"pointerleave\", onPointerEvent);\n      htmlCanvas.removeEventListener(\"pointermove\", onPointerEvent);\n      htmlCanvas.removeEventListener(\"pointercancel\", onPointerEvent);\n      this._hadListener = false;\n      this._downList.length = 0;\n      this._upList.length = 0;\n      const { _pointers: pointers } = this;\n      for (let i = pointers.length - 1; i >= 0; i--) {\n        pointers[i].phase = PointerPhase.Leave;\n      }\n      pointers.length = 0;\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _destroy(): void {\n    // @ts-ignore\n    if (this._hadListener) {\n      const { _htmlCanvas: htmlCanvas, _onPointerEvent: onPointerEvent } = this;\n      htmlCanvas.removeEventListener(\"pointerdown\", onPointerEvent);\n      htmlCanvas.removeEventListener(\"pointerup\", onPointerEvent);\n      htmlCanvas.removeEventListener(\"pointerleave\", onPointerEvent);\n      htmlCanvas.removeEventListener(\"pointermove\", onPointerEvent);\n      htmlCanvas.removeEventListener(\"pointercancel\", onPointerEvent);\n      this._hadListener = false;\n    }\n    this._pointerPool.length = 0;\n    this._pointers.length = 0;\n    this._downList.length = 0;\n    this._upList.length = 0;\n    this._htmlCanvas = null;\n    this._engine = null;\n  }\n\n  private _onPointerEvent(evt: PointerEvent) {\n    evt.type === \"pointerdown\" && this._htmlCanvas.focus();\n    this._nativeEvents.push(evt);\n  }\n\n  private _getIndexByPointerID(pointerId: number): number {\n    const { _pointers: pointers } = this;\n    for (let i = pointers.length - 1; i >= 0; i--) {\n      if (pointers[i]._uniqueID === pointerId) {\n        return i;\n      }\n    }\n    return -1;\n  }\n\n  private _getPointer(pointerId: number): Pointer {\n    const { _pointers: pointers } = this;\n    const index = this._getIndexByPointerID(pointerId);\n    if (index >= 0) {\n      return pointers[index];\n    } else {\n      const lastCount = pointers.length;\n      if (lastCount === 0 || this._multiPointerEnabled) {\n        const { _pointerPool: pointerPool } = this;\n        // Get Pointer smallest index\n        let i = 0;\n        for (; i < lastCount; i++) {\n          if (pointers[i].id > i) {\n            break;\n          }\n        }\n        let pointer = pointerPool[i];\n        if (!pointer) {\n          pointer = pointerPool[i] = new Pointer(i);\n        }\n        pointer._uniqueID = pointerId;\n        pointers.splice(i, 0, pointer);\n        return pointer;\n      } else {\n        return null;\n      }\n    }\n  }\n\n  private _pointerRayCast(normalizedX: number, normalizedY: number): Entity {\n    const { _tempPoint: point, _tempRay: ray, _tempHitResult: hitResult } = PointerManager;\n    const { _activeCameras: cameras } = this._engine.sceneManager.activeScene;\n    for (let i = cameras.length - 1; i >= 0; i--) {\n      const camera = cameras[i];\n      if (!camera.enabled || camera.renderTarget) {\n        continue;\n      }\n      const { x: vpX, y: vpY, z: vpW, w: vpH } = camera.viewport;\n      if (normalizedX >= vpX && normalizedY >= vpY && normalizedX - vpX <= vpW && normalizedY - vpY <= vpH) {\n        point.set((normalizedX - vpX) / vpW, (normalizedY - vpY) / vpH);\n        if (\n          this._engine.physicsManager.raycast(\n            camera.viewportPointToRay(point, ray),\n            Number.MAX_VALUE,\n            camera.cullingMask,\n            hitResult\n          )\n        ) {\n          return hitResult.entity;\n        } else if (camera.clearFlags & CameraClearFlags.Color) {\n          return null;\n        }\n      }\n    }\n  }\n\n  private _updatePointerWithPhysics(\n    frameCount: number,\n    pointer: Pointer,\n    rect: DOMRect,\n    clientW: number,\n    clientH: number,\n    canvasW: number,\n    canvasH: number\n  ): void {\n    const { _events: events, position } = pointer;\n    const length = events.length;\n    if (length > 0) {\n      const { _upList, _upMap, _downList, _downMap } = this;\n      const latestEvent = events[length - 1];\n      const normalizedX = (latestEvent.clientX - rect.left) / clientW;\n      const normalizedY = (latestEvent.clientY - rect.top) / clientH;\n      const currX = normalizedX * canvasW;\n      const currY = normalizedY * canvasH;\n      pointer.deltaPosition.set(currX - position.x, currY - position.y);\n      position.set(currX, currY);\n      pointer._firePointerDrag();\n      const rayCastEntity = this._pointerRayCast(normalizedX, normalizedY);\n      pointer._firePointerExitAndEnter(rayCastEntity);\n      for (let i = 0; i < length; i++) {\n        const event = events[i];\n        const { button } = event;\n        pointer.button = _pointerDec2BinMap[button] || PointerButton.None;\n        pointer.pressedButtons = event.buttons;\n        switch (event.type) {\n          case \"pointerdown\":\n            _downList.add(button);\n            _downMap[button] = frameCount;\n            pointer._downList.add(button);\n            pointer._downMap[button] = frameCount;\n            pointer.phase = PointerPhase.Down;\n            pointer._firePointerDown(rayCastEntity);\n            break;\n          case \"pointerup\":\n            _upList.add(button);\n            _upMap[button] = frameCount;\n            pointer._upList.add(button);\n            pointer._upMap[button] = frameCount;\n            pointer.phase = PointerPhase.Up;\n            pointer._firePointerUpAndClick(rayCastEntity);\n            break;\n          case \"pointermove\":\n            pointer.phase = PointerPhase.Move;\n            break;\n          case \"pointerleave\":\n          case \"pointercancel\":\n            pointer.phase = PointerPhase.Leave;\n            pointer._firePointerExitAndEnter(null);\n          default:\n            break;\n        }\n      }\n      pointer._events.length = 0;\n    } else {\n      pointer.deltaPosition.set(0, 0);\n      pointer.phase = PointerPhase.Stationary;\n      pointer._firePointerDrag();\n      pointer._firePointerExitAndEnter(this._pointerRayCast(position.x / canvasW, position.y / canvasH));\n    }\n  }\n\n  private _updatePointerWithoutPhysics(\n    frameCount: number,\n    pointer: Pointer,\n    rect: DOMRect,\n    clientW: number,\n    clientH: number,\n    canvasW: number,\n    canvasH: number\n  ): void {\n    const { _events: events } = pointer;\n    const length = events.length;\n    if (length > 0) {\n      const { position } = pointer;\n      const latestEvent = events[length - 1];\n      const currX = ((latestEvent.clientX - rect.left) / clientW) * canvasW;\n      const currY = ((latestEvent.clientY - rect.top) / clientH) * canvasH;\n      pointer.deltaPosition.set(currX - position.x, currY - position.y);\n      position.set(currX, currY);\n      pointer.button = _pointerDec2BinMap[latestEvent.button] || PointerButton.None;\n      pointer.pressedButtons = latestEvent.buttons;\n      const { _upList, _upMap, _downList, _downMap } = this;\n      for (let i = 0; i < length; i++) {\n        const { button } = events[i];\n        switch (events[i].type) {\n          case \"pointerdown\":\n            _downList.add(button);\n            _downMap[button] = frameCount;\n            pointer._downList.add(button);\n            pointer._downMap[button] = frameCount;\n            pointer.phase = PointerPhase.Down;\n            break;\n          case \"pointerup\":\n            _upList.add(button);\n            _upMap[button] = frameCount;\n            pointer._upList.add(button);\n            pointer._upMap[button] = frameCount;\n            pointer.phase = PointerPhase.Up;\n            break;\n          case \"pointermove\":\n            pointer.phase = PointerPhase.Move;\n            break;\n          case \"pointerleave\":\n          case \"pointercancel\":\n            pointer.phase = PointerPhase.Leave;\n          default:\n            break;\n        }\n      }\n      pointer._events.length = 0;\n    } else {\n      pointer.deltaPosition.set(0, 0);\n      pointer.phase = PointerPhase.Stationary;\n    }\n  }\n}\n","import { Vector3 } from \"@galacean/engine-math\";\nimport { IInput } from \"../interface/IInput\";\n\n/**\n * Wheel Manager.\n * @internal\n */\nexport class WheelManager implements IInput {\n  /** @internal */\n  _delta: Vector3 = new Vector3();\n\n  private _nativeEvents: WheelEvent[] = [];\n  private _canvas: HTMLCanvasElement;\n  private _hadListener: boolean;\n\n  /**\n   * Create a KeyboardManager.\n   */\n  constructor(htmlCanvas: HTMLCanvasElement) {\n    this._onWheelEvent = this._onWheelEvent.bind(this);\n    htmlCanvas.addEventListener(\"wheel\", this._onWheelEvent);\n    this._canvas = htmlCanvas;\n    this._hadListener = true;\n  }\n\n  /**\n   * @internal\n   */\n  _update(): void {\n    const { _delta: delta } = this;\n    delta.set(0, 0, 0);\n    const { _nativeEvents: nativeEvents } = this;\n    if (nativeEvents.length > 0) {\n      for (let i = nativeEvents.length - 1; i >= 0; i--) {\n        const evt = nativeEvents[i];\n        delta.x += evt.deltaX;\n        delta.y += evt.deltaY;\n        delta.z += evt.deltaZ;\n      }\n      nativeEvents.length = 0;\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _onFocus(): void {\n    if (!this._hadListener) {\n      this._canvas.addEventListener(\"wheel\", this._onWheelEvent);\n      this._hadListener = true;\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _onBlur(): void {\n    if (this._hadListener) {\n      this._canvas.removeEventListener(\"wheel\", this._onWheelEvent);\n      this._nativeEvents.length = 0;\n      this._delta.set(0, 0, 0);\n      this._hadListener = false;\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _destroy(): void {\n    if (this._hadListener) {\n      this._canvas.removeEventListener(\"wheel\", this._onWheelEvent);\n      this._hadListener = false;\n    }\n    this._nativeEvents = null;\n  }\n\n  private _onWheelEvent(evt: WheelEvent): void {\n    evt.cancelable && evt.preventDefault();\n    this._nativeEvents.push(evt);\n  }\n}\n","import { Engine } from \"../Engine\";\nimport { KeyboardManager } from \"./keyboard/KeyboardManager\";\nimport { Keys } from \"./enums/Keys\";\nimport { Pointer } from \"./pointer/Pointer\";\nimport { PointerManager } from \"./pointer/PointerManager\";\nimport { PointerButton, _pointerBin2DecMap } from \"./enums/PointerButton\";\nimport { WheelManager } from \"./wheel/WheelManager\";\nimport { Vector3 } from \"@galacean/engine-math\";\n\n/**\n * InputManager manages device input such as mouse, touch, keyboard, etc.\n */\nexport class InputManager {\n  /** Sometimes the input module will not be initialized, such as off-screen rendering. */\n  private _initialized: boolean = false;\n  private _curFrameCount: number = 0;\n  private _wheelManager: WheelManager;\n  private _pointerManager: PointerManager;\n  private _keyboardManager: KeyboardManager;\n\n  /**\n   * Pointer list.\n   */\n  get pointers(): Readonly<Pointer[]> {\n    return this._initialized ? this._pointerManager._pointers : [];\n  }\n\n  /**\n   *  Whether to handle multi-pointer.\n   */\n  get multiPointerEnabled(): boolean {\n    return this._initialized ? this._pointerManager._multiPointerEnabled : false;\n  }\n\n  set multiPointerEnabled(enabled: boolean) {\n    this._initialized && (this._pointerManager._multiPointerEnabled = enabled);\n  }\n\n  /**\n   * Get the change of the scroll wheel on the x-axis.\n   * @returns Change value\n   */\n  get wheelDelta(): Readonly<Vector3 | null> {\n    return this._initialized ? this._wheelManager._delta : null;\n  }\n\n  /**\n   * Whether the key is being held down, if there is no parameter, return whether any key is being held down.\n   * @param key - The keys of the keyboard\n   * @returns Whether the key is being held down\n   */\n  isKeyHeldDown(key?: Keys): boolean {\n    if (this._initialized) {\n      if (key === undefined) {\n        return this._keyboardManager._curFrameHeldDownList.length > 0;\n      } else {\n        return this._keyboardManager._curHeldDownKeyToIndexMap[key] != null;\n      }\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Whether the key starts to be pressed down during the current frame, if there is no parameter, return whether any key starts to be pressed down during the current frame.\n   * @param key - The keys of the keyboard\n   * @returns Whether the key starts to be pressed down during the current frame\n   */\n  isKeyDown(key?: Keys): boolean {\n    if (this._initialized) {\n      if (key === undefined) {\n        return this._keyboardManager._curFrameDownList.length > 0;\n      } else {\n        return this._keyboardManager._downKeyToFrameCountMap[key] === this._curFrameCount;\n      }\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Whether the key is released during the current frame, if there is no parameter, return whether any key released during the current frame.\n   * @param key - The keys of the keyboard\n   * @returns Whether the key is released during the current frame\n   */\n  isKeyUp(key?: Keys): boolean {\n    if (this._initialized) {\n      if (key === undefined) {\n        return this._keyboardManager._curFrameUpList.length > 0;\n      } else {\n        return this._keyboardManager._upKeyToFrameCountMap[key] === this._curFrameCount;\n      }\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Whether the pointer is being held down, if there is no parameter, return whether any pointer is being held down.\n   * @param pointerButton - The pointerButton on a pointer device\n   * @returns Whether the pointer is being held down\n   */\n  isPointerHeldDown(pointerButton?: PointerButton): boolean {\n    if (this._initialized) {\n      if (pointerButton === undefined) {\n        return this._pointerManager._buttons !== 0;\n      } else {\n        return (this._pointerManager._buttons & pointerButton) !== 0;\n      }\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Whether the pointer starts to be pressed down during the current frame, if there is no parameter, return whether any pointer starts to be pressed down during the current frame.\n   * @param pointerButton - The pointerButton on a pointer device\n   * @returns Whether the pointer starts to be pressed down during the current frame\n   */\n  isPointerDown(pointerButton?: PointerButton): boolean {\n    if (this._initialized) {\n      if (pointerButton === undefined) {\n        return this._pointerManager._downList.length > 0;\n      } else {\n        return this._pointerManager._downMap[_pointerBin2DecMap[pointerButton]] === this._curFrameCount;\n      }\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Whether the pointer is released during the current frame, if there is no parameter, return whether any pointer released during the current frame.\n   * @param pointerButton - The pointerButtons on a mouse device\n   * @returns Whether the pointer is released during the current frame\n   */\n  isPointerUp(pointerButton?: PointerButton): boolean {\n    if (this._initialized) {\n      if (pointerButton === undefined) {\n        return this._pointerManager._upList.length > 0;\n      } else {\n        return this._pointerManager._upMap[_pointerBin2DecMap[pointerButton]] === this._curFrameCount;\n      }\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * @internal\n   */\n  constructor(engine: Engine) {\n    // @ts-ignore\n    const canvas = engine._canvas._webCanvas;\n    if (typeof OffscreenCanvas === \"undefined\" || !(canvas instanceof OffscreenCanvas)) {\n      this._wheelManager = new WheelManager(canvas);\n      this._pointerManager = new PointerManager(engine, canvas);\n      this._keyboardManager = new KeyboardManager(canvas);\n      this._onBlur = this._onBlur.bind(this);\n      window.addEventListener(\"blur\", this._onBlur);\n      this._onFocus = this._onFocus.bind(this);\n      window.addEventListener(\"focus\", this._onFocus);\n      this._initialized = true;\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _update(): void {\n    if (this._initialized) {\n      ++this._curFrameCount;\n      this._wheelManager._update();\n      this._pointerManager._update(this._curFrameCount);\n      this._keyboardManager._update(this._curFrameCount);\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _destroy(): void {\n    if (this._initialized) {\n      window.removeEventListener(\"blur\", this._onBlur);\n      window.removeEventListener(\"focus\", this._onFocus);\n      this._wheelManager._destroy();\n      this._pointerManager._destroy();\n      this._keyboardManager._destroy();\n    }\n  }\n\n  private _onBlur(): void {\n    this._wheelManager._onBlur();\n    this._pointerManager._onBlur();\n    this._keyboardManager._onBlur();\n  }\n\n  private _onFocus(): void {\n    this._wheelManager._onFocus();\n    this._pointerManager._onFocus();\n    this._keyboardManager._onFocus();\n  }\n}\n","/**\n * Number of cascades to use for directional light shadows.\n */\nexport enum ShadowCascadesMode {\n  /** No cascades */\n  NoCascades = 1,\n  /** Two cascades */\n  TwoCascades = 2,\n  /** Four cascades */\n  FourCascades = 4\n}\n","/**\n * Default shadow resolution.\n */\nexport enum ShadowResolution {\n  /** Low shadow map resolution. */\n  Low,\n  /** Medium shadow map resolution. */\n  Medium,\n  /**  High shadow map resolution. */\n  High,\n  /** Very high shadow map resolution. */\n  VeryHigh\n}\n","/**\n * Determines which type of shadows should be used.\n */\nexport enum ShadowType {\n  /** Disable Shadows. */\n  None,\n  /** Hard Shadows Only. */\n  Hard,\n  /** Cast \"soft\" shadows with low range. */\n  SoftLow,\n  /** Cast \"soft\" shadows with large range. */\n  SoftHigh\n}\n","/**\n * Render queue type.\n */\nexport enum RenderQueueType {\n  /** Opaque queue. */\n  Opaque,\n  /** Opaque queue, alpha cutoff. */\n  AlphaTest,\n  /** Transparent queue, rendering from back to front to ensure correct rendering of transparent objects. */\n  Transparent\n}\n","/**\n * Blend factor.\n * @remarks defines which function is used for blending pixel arithmetic\n */\nexport enum BlendFactor {\n  /** (0, 0, 0, 0)*/\n  Zero,\n  /** (1, 1, 1, 1)*/\n  One,\n  /** (Rs, Gs, Bs, As) */\n  SourceColor,\n  /** (1 - Rs, 1 - Gs, 1 - Bs, 1 - As)*/\n  OneMinusSourceColor,\n  /** (Rd, Gd, Bd, Ad)*/\n  DestinationColor,\n  /** (1 - Rd, 1 - Gd, 1 - Bd, 1 - Ad)*/\n  OneMinusDestinationColor,\n  /** (As, As, As, As)*/\n  SourceAlpha,\n  /** (1 - As, 1 - As, 1 - As, 1 - As)*/\n  OneMinusSourceAlpha,\n  /** (Ad, Ad, Ad, Ad)*/\n  DestinationAlpha,\n  /** (1 - Ad, 1 - Ad, 1 - Ad, 1 - Ad)*/\n  OneMinusDestinationAlpha,\n  /** (min(As, 1 - Ad), min(As, 1 - Ad), min(As, 1 - Ad), 10)*/\n  SourceAlphaSaturate,\n  /** (Rc, Gc, Bc, Ac)*/\n  BlendColor,\n  /** (1 - Rc, 1 - Gc, 1 - Bc, 1 - Ac)*/\n  OneMinusBlendColor\n}\n","/**\n * Blend operation function.\n * @remarks defines how a new pixel is combined with a pixel.\n */\nexport enum BlendOperation {\n  /** src + dst. */\n  Add,\n  /** src - dst. */\n  Subtract,\n  /** dst - src. */\n  ReverseSubtract,\n  /** Minimum of source and destination. */\n  Min,\n  /** Maximum of source and destination. */\n  Max\n}\n","/**\n * Set which color channels can be rendered to frame buffer.\n * @remarks enumeration can be combined using bit operations.\n */\nexport enum ColorWriteMask {\n  /** Do not write to any channel. */\n  None = 0,\n  /** Write to the red channel. */\n  Red = 0x1,\n  /** Write to the green channel. */\n  Green = 0x2,\n  /** Write to the blue channel. */\n  Blue = 0x4,\n  /** Write to the alpha channel. */\n  Alpha = 0x8,\n  /** Write to all channel. */\n  All = 0xf\n}\n","/**\n * Depth/Stencil comparison function.\n * @remarks Specifies a function that compares incoming pixel depth/stencil to the current depth/stencil buffer value.\n */\nexport enum CompareFunction {\n  /** never pass. */\n  Never,\n  /** pass if the incoming value is less than the depth/stencil buffer value. */\n  Less,\n  /** pass if the incoming value equals the depth/stencil buffer value. */\n  Equal,\n  /** pass if the incoming value is less than or equal to the depth/stencil buffer value. */\n  LessEqual,\n  /** pass if the incoming value is greater than the depth/stencil buffer value. */\n  Greater,\n  /** pass if the incoming value is not equal to the depth/stencil buffer value. */\n  NotEqual,\n  /** pass if the incoming value is greater than or equal to the depth/stencil buffer value. */\n  GreaterEqual,\n  /** always pass. */\n  Always\n}\n","/**\n * Culling mode.\n * @remarks specifies whether or not front- and/or back-facing polygons can be culled.\n */\nexport enum CullMode {\n  /** Disable culling. */\n  Off,\n  /** cut the front-face of the polygons. */\n  Front,\n  /** cut the back-face of the polygons. */\n  Back\n}\n","/**\n * Shader Property type.\n */\nexport enum ShaderPropertyType {\n  /** Float type. */\n  Float,\n  /** Int type. */\n  Int,\n  /** Vector2 type. */\n  Vector2,\n  /** Vector3 type. */\n  Vector3,\n  /** Vector4 type. */\n  Vector4,\n  /** Matrix type. */\n  Matrix,\n  /** Color type. */\n  Color,\n  /** Texture type. */\n  Texture,\n  /** Float array type. */\n  FloatArray,\n  /** Int array type. */\n  IntArray,\n  /** Texture array type. */\n  TextureArray\n}\n","/**\n * Stencil operation mode.\n * @remarks sets the front and/or back-facing stencil test actions.\n */\nexport enum StencilOperation {\n  /** Keeps the current value. */\n  Keep,\n  /** Sets the stencil buffer value to 0. */\n  Zero,\n  /** Sets the stencil buffer value to the reference value. */\n  Replace,\n  /** Increments the current stencil buffer value. Clamps to the maximum representable unsigned value. */\n  IncrementSaturate,\n  /** Decrements the current stencil buffer value. Clamps to 0. */\n  DecrementSaturate,\n  /** Inverts the current stencil buffer value bitwise. */\n  Invert,\n  /** Increments the current stencil buffer value. Wraps stencil buffer value to zero when incrementing the maximum representable unsigned value. */\n  IncrementWrap,\n  /** Decrements the current stencil buffer value. Wraps stencil buffer value to the maximum representable unsigned value when decrementing a stencil buffer value of 0. */\n  DecrementWrap\n}\n","/**\n * Shader macro。\n */\nexport class ShaderMacro {\n  /** @internal */\n  static _macroNameIdMap: Record<string, number> = Object.create(null);\n\n  private static _macroNameCounter: number = 0;\n\n  /** Name. */\n  readonly name: string;\n  /** Value. */\n  readonly value: string;\n\n  /** @internal */\n  _nameId: number;\n  /** @internal */\n  _maskIndex: number;\n  /** @internal */\n  _maskValue: number;\n\n  /**\n   * @internal\n   */\n  constructor(name: string, value: string, maskIndex: number, maskValue: number) {\n    this.name = name;\n    this._maskIndex = maskIndex;\n    this._maskValue = maskValue;\n    this.value = value;\n\n    const macroNameIDMap = ShaderMacro._macroNameIdMap;\n    let nameID = macroNameIDMap[name];\n    if (macroNameIDMap[name] === undefined) {\n      macroNameIDMap[name] = nameID = ShaderMacro._macroNameCounter++;\n    }\n    this._nameId = nameID;\n  }\n}\n","import { ShaderMacro } from \"./ShaderMacro\";\n\n/**\n * Shader macro collection.\n * @internal\n */\nexport class ShaderMacroCollection {\n  /**\n   * Union of two macro collection.\n   * @param left - input macro collection\n   * @param right - input macro collection\n   * @param out - union output macro collection\n   */\n  static unionCollection(left: ShaderMacroCollection, right: ShaderMacroCollection, out: ShaderMacroCollection): void {\n    const outMask = out._mask;\n    let minSize: number, maxSize: number;\n    let minMask: number[], maxMask: number[];\n    if (left._length < right._length) {\n      minSize = left._length;\n      maxSize = right._length;\n      minMask = left._mask;\n      maxMask = right._mask;\n    } else {\n      minSize = right._length;\n      maxSize = left._length;\n      minMask = right._mask;\n      maxMask = left._mask;\n    }\n\n    let i = 0;\n    outMask.length < maxSize && (outMask.length = maxSize);\n    for (; i < minSize; i++) {\n      outMask[i] = minMask[i] | maxMask[i];\n    }\n    for (; i < maxSize; i++) {\n      outMask[i] = maxMask[i];\n    }\n    out._length = maxSize;\n  }\n\n  /** @internal */\n  _mask: number[] = [];\n  /** @internal */\n  _length: number = 0;\n\n  /**\n   * Enable one macro in this macro collection.\n   * @param macro - ShaderMacro\n   */\n  enable(macro: ShaderMacro): void {\n    const index = macro._maskIndex;\n    const size = index + 1;\n    const mask = this._mask;\n    let maskStart = this._length; // must from this._length because this._length maybe less than mask.length and have dirty data should clear.\n    if (maskStart < size) {\n      mask.length < size && (mask.length = size); // mask.length maybe small than size,maybe not.\n      for (; maskStart < index; maskStart++) {\n        mask[maskStart] = 0;\n      }\n      mask[index] = macro._maskValue;\n      this._length = size;\n    } else {\n      mask[index] |= macro._maskValue;\n    }\n  }\n\n  /**\n   * Disable one macro in this macro collection.\n   * @param macro - ShaderMacro\n   */\n  disable(macro: ShaderMacro): void {\n    const index = macro._maskIndex;\n    const mask = this._mask;\n    const endIndex = this._length - 1;\n    if (index > endIndex) {\n      return;\n    }\n    const newValue = mask[index] & ~macro._maskValue;\n    if (index == endIndex && newValue === 0) {\n      this._length--;\n    } else {\n      mask[index] = newValue;\n    }\n  }\n\n  /**\n   * Union of this and other macro collection.\n   * @param macroCollection - macro collection\n   */\n  unionCollection(macroCollection: ShaderMacroCollection): void {\n    const addMask = macroCollection._mask;\n    const addSize = macroCollection._length;\n    const mask = this._mask;\n    const maskSize = this._length;\n    if (maskSize < addSize) {\n      mask.length < addSize && (mask.length = addSize);\n      let i = 0;\n      for (; i < maskSize; i++) {\n        mask[i] |= addMask[i];\n      }\n      for (; i < addSize; i++) {\n        mask[i] = addMask[i];\n      }\n      this._length = addSize;\n    } else {\n      for (let i = 0; i < addSize; i++) {\n        mask[i] |= addMask[i];\n      }\n    }\n  }\n\n  /**\n   * Complementarity of this and other macro collection.\n   * @param macroCollection - macro collection\n   */\n  complementaryCollection(macroCollection: ShaderMacroCollection): void {\n    const removeMask = macroCollection._mask;\n    const mask = this._mask;\n    let endIndex = this._length - 1;\n    let i = Math.min(macroCollection._length - 1, endIndex);\n    for (; i >= 0; i--) {\n      const newValue = mask[i] & ~removeMask[i];\n      if (i == endIndex && newValue === 0) {\n        endIndex--;\n        this._length--;\n      } else {\n        mask[i] = newValue;\n      }\n    }\n  }\n\n  /**\n   * Intersection of this and other macro collection.\n   * @param macroCollection - macro collection\n   */\n  intersectionCollection(macroCollection: ShaderMacroCollection): void {\n    const unionMask = macroCollection._mask;\n    const mask = this._mask;\n    for (let i = this._length - 1; i >= 0; i--) {\n      const value = mask[i] & unionMask[i];\n      if (value == 0 && i == this._length - 1) {\n        this._length--;\n      } else {\n        mask[i] = value;\n      }\n    }\n  }\n\n  /**\n   * Whether macro is enabled in this macro collection.\n   * @param macro - ShaderMacro\n   */\n  isEnable(macro: ShaderMacro): boolean {\n    const index = macro._maskIndex;\n    if (index >= this._length) {\n      return false;\n    }\n    return (this._mask[index] & macro._maskValue) !== 0;\n  }\n\n  /**\n   * Clear this macro collection.\n   */\n  clear(): void {\n    this._length = 0;\n  }\n}\n","export function _extends() {\n    _extends = Object.assign || function assign(target) {\n        for (var i = 1; i < arguments.length; i++) {\n            var source = arguments[i];\n            for (var key in source) if (Object.prototype.hasOwnProperty.call(source, key)) target[key] = source[key];\n        }\n\n        return target;\n    };\n\n    return _extends.apply(this, arguments);\n}\nexport { _extends as _ };\n","import pbr_frag_define from \"./pbr_frag_define.glsl\";\n\n/** direct + IBL */\nimport pbr_helper from \"./pbr_helper.glsl\";\nimport brdf from \"./brdf.glsl\";\nimport direct_irradiance_frag_define from \"./direct_irradiance_frag_define.glsl\";\nimport ibl_frag_define from \"./ibl_frag_define.glsl\";\n\nimport pbr_frag from \"./pbr_frag.glsl\";\n\nexport default {\n  pbr_frag_define,\n\n  pbr_helper,\n  brdf,\n  direct_irradiance_frag_define,\n  ibl_frag_define,\n\n  pbr_frag\n};\n","import ShadowCoord from \"./ShadowCoord.glsl\";\nimport ShadowFragmentDeclaration from \"./ShadowFragmentDeclaration.glsl\";\nimport shadow_sample_tent from \"./shadow_sample_tent.glsl\";\nimport ShadowVertexDeclaration from \"./ShadowVertexDeclaration.glsl\";\nimport ShadowVertex from \"./ShadowVertex.glsl\";\n\nexport default {\n  ShadowCoord,\n  ShadowFragmentDeclaration,\n  shadow_sample_tent,\n  ShadowVertexDeclaration,\n  ShadowVertex\n};\n","import camera_declare from \"./camera_declare.glsl\";\nimport common from \"./common.glsl\";\nimport common_vert from \"./common_vert.glsl\";\nimport transform_declare from \"./transform_declare.glsl\";\n\nimport color_share from \"./color_share.glsl\";\nimport FogFragmentDeclaration from \"./FogFragmentDeclaration.glsl\";\nimport FogVertexDeclaration from \"./FogVertexDeclaration.glsl\";\nimport normal_share from \"./normal_share.glsl\";\nimport uv_share from \"./uv_share.glsl\";\nimport worldpos_share from \"./worldpos_share.glsl\";\n\nimport begin_normal_vert from \"./begin_normal_vert.glsl\";\nimport begin_position_vert from \"./begin_position_vert.glsl\";\n\nimport blendShape_input from \"./blendShape_input.glsl\";\nimport blendShape_vert from \"./blendShape_vert.glsl\";\nimport color_vert from \"./color_vert.glsl\";\nimport FogVertex from \"./FogVertex.glsl\";\nimport normal_vert from \"./normal_vert.glsl\";\nimport position_vert from \"./position_vert.glsl\";\nimport skinning_vert from \"./skinning_vert.glsl\";\nimport uv_vert from \"./uv_vert.glsl\";\nimport worldpos_vert from \"./worldpos_vert.glsl\";\n\nimport FogFragment from \"./FogFragment.glsl\";\nimport light_frag_define from \"./light_frag_define.glsl\";\nimport mobile_material_frag from \"./mobile_material_frag.glsl\";\n\nimport begin_mobile_frag from \"./begin_mobile_frag.glsl\";\nimport begin_viewdir_frag from \"./begin_viewdir_frag.glsl\";\n\nimport mobile_blinnphong_frag from \"./mobile_blinnphong_frag.glsl\";\n\nimport noise_cellular from \"./noise_cellular.glsl\";\nimport noise_cellular_2D from \"./noise_cellular_2D.glsl\";\nimport noise_cellular_2x2 from \"./noise_cellular_2x2.glsl\";\nimport noise_cellular_2x2x2 from \"./noise_cellular_2x2x2.glsl\";\nimport noise_cellular_3D from \"./noise_cellular_3D.glsl\";\nimport noise_common from \"./noise_common.glsl\";\nimport noise_perlin from \"./noise_perlin.glsl\";\nimport noise_perlin_2D from \"./noise_perlin_2D.glsl\";\nimport noise_perlin_3D from \"./noise_perlin_3D.glsl\";\nimport noise_perlin_4D from \"./noise_perlin_4D.glsl\";\nimport noise_psrd_2D from \"./noise_psrd_2D.glsl\";\nimport noise_simplex from \"./noise_simplex.glsl\";\nimport noise_simplex_2D from \"./noise_simplex_2D.glsl\";\nimport noise_simplex_3D from \"./noise_simplex_3D.glsl\";\nimport noise_simplex_3D_grad from \"./noise_simplex_3D_grad.glsl\";\nimport noise_simplex_4D from \"./noise_simplex_4D.glsl\";\n\nimport PBRShaderLib from \"./pbr\";\nimport ShadowLib from \"./shadow\";\n\nimport normal_get from \"./normal_get.glsl\";\n\nexport const ShaderLib = {\n  common,\n  common_vert,\n  transform_declare,\n  camera_declare,\n\n  color_share,\n  normal_share,\n  uv_share,\n  worldpos_share,\n  FogVertexDeclaration,\n  FogFragmentDeclaration,\n\n  begin_normal_vert,\n  begin_position_vert,\n\n  position_vert,\n  color_vert,\n  normal_vert,\n  skinning_vert,\n  blendShape_input,\n  blendShape_vert,\n  uv_vert,\n  worldpos_vert,\n  FogVertex,\n\n  light_frag_define,\n  mobile_material_frag,\n  FogFragment,\n\n  begin_mobile_frag,\n  begin_viewdir_frag,\n\n  mobile_blinnphong_frag,\n\n  noise_common,\n  noise_cellular_2D,\n  noise_cellular_2x2,\n  noise_cellular_2x2x2,\n  noise_cellular_3D,\n  noise_cellular,\n  noise_perlin_2D,\n  noise_perlin_3D,\n  noise_perlin_4D,\n  noise_perlin,\n  noise_psrd_2D,\n  noise_simplex_2D,\n  noise_simplex_3D_grad,\n  noise_simplex_3D,\n  noise_simplex_4D,\n  noise_simplex,\n\n  ...ShadowLib,\n  ...PBRShaderLib,\n  normal_get\n};\n","import { ShaderLib } from \"./ShaderLib\";\nimport { Logger } from \"../base/Logger\";\n\nclass ShaderFactory {\n  static parseCustomMacros(macros: string[]) {\n    return macros.map((m) => `#define ${m}\\n`).join(\"\");\n  }\n\n  static parseIncludes(src: string) {\n    const regex = /^[ \\t]*#include +<([\\w\\d.]+)>/gm;\n\n    function replace(match, slice) {\n      var replace = ShaderLib[slice];\n\n      if (replace === undefined) {\n        Logger.error(`Shader slice \"${match.trim()}\" not founded.`);\n        return \"\";\n      }\n\n      return ShaderFactory.parseIncludes(replace);\n    }\n\n    return src.replace(regex, replace);\n  }\n\n  /**\n   * GLSL extension.\n   * @param extensions - such as [\"GL_EXT_shader_texture_lod\"]\n   * */\n  static parseExtension(extensions: string[]): string {\n    return extensions.map((e) => `#extension ${e} : enable\\n`).join(\"\");\n  }\n\n  /**\n   * Convert lower GLSL version to GLSL 300 es.\n   * @param shader - code\n   * @param isFrag - Whether it is a fragment shader.\n   * */\n  static convertTo300(shader: string, isFrag?: boolean) {\n    /** replace attribute and in */\n    shader = shader.replace(/\\battribute\\b/g, \"in\");\n    shader = shader.replace(/\\bvarying\\b/g, isFrag ? \"in\" : \"out\");\n\n    /** replace api */\n    shader = shader.replace(/\\btexture(2D|Cube)\\b/g, \"texture\");\n    shader = shader.replace(/\\btexture(2D|Cube)LodEXT\\b/g, \"textureLod\");\n    if (isFrag) {\n      const isMRT = /\\bgl_FragData\\[.+?\\]/g.test(shader);\n      if (isMRT) {\n        shader = shader.replace(/\\bgl_FragColor\\b/g, \"gl_FragData[0]\");\n        const result = shader.match(/\\bgl_FragData\\[.+?\\]/g);\n        shader = this._replaceMRTShader(shader, result);\n      } else {\n        shader = shader.replace(/void\\s+?main\\s*\\(/g, `out vec4 glFragColor;\\nvoid main(`);\n        shader = shader.replace(/\\bgl_FragColor\\b/g, \"glFragColor\");\n      }\n    }\n\n    return shader;\n  }\n\n  private static _replaceMRTShader(shader: string, result: string[]): string {\n    let declaration = \"\";\n    const mrtIndexSet = new Set();\n\n    for (let i = 0; i < result.length; i++) {\n      const res = result[i].match(/\\bgl_FragData\\[(.+?)\\]/);\n      mrtIndexSet.add(res[1]);\n    }\n\n    mrtIndexSet.forEach((index) => {\n      declaration += `layout(location=${index}) out vec4 fragOutColor${index};\\n`;\n    });\n    declaration += `void main(`;\n\n    shader = shader.replace(/\\bgl_FragData\\[(.+?)\\]/g, \"fragOutColor$1\");\n\n    shader = shader.replace(/void\\s+?main\\s*\\(/g, declaration);\n    return shader;\n  }\n}\n\nexport { ShaderFactory };\n","/**\n * Shader data grouping.\n */\nexport enum ShaderDataGroup {\n  /** Scene group. */\n  Scene,\n  /** Camera group. */\n  Camera,\n  /** Renderer group. */\n  Renderer,\n  /** material group. */\n  Material\n}\n","import { Color, Matrix, Vector2, Vector3, Vector4 } from \"@galacean/engine-math\";\nimport { Engine } from \"../Engine\";\nimport { ColorSpace } from \"../enums/ColorSpace\";\nimport { IHardwareRenderer } from \"../renderingHardwareInterface/IHardwareRenderer\";\nimport { Texture } from \"../texture/Texture\";\nimport { ShaderPropertyValueType } from \"./ShaderData\";\n\n/**\n * Shader uniform。\n * @internal\n */\nexport class ShaderUniform {\n  name: string;\n  propertyId: number;\n  location: WebGLUniformLocation;\n  applyFunc: (shaderUniform: ShaderUniform, value: ShaderPropertyValueType) => void;\n  cacheValue: number | Vector2 | Vector3 | Vector4;\n  textureIndex: GLenum | GLenum[];\n  textureDefault: Texture | Texture[];\n  textureUseComporeMode: boolean = false;\n\n  private _rhi: IHardwareRenderer;\n  private _gl: WebGLRenderingContext;\n  private _colorSpace: ColorSpace;\n\n  constructor(engine: Engine) {\n    const rhi = engine._hardwareRenderer;\n    this._rhi = rhi;\n    this._gl = rhi.gl;\n    this._colorSpace = engine.settings.colorSpace;\n  }\n\n  upload1f(shaderUniform: ShaderUniform, value: number): void {\n    if (this.cacheValue !== value) {\n      this._gl.uniform1f(shaderUniform.location, value);\n      this.cacheValue = value;\n    }\n  }\n\n  upload1fv(shaderUniform: ShaderUniform, value: Float32Array): void {\n    this._gl.uniform1fv(shaderUniform.location, value);\n  }\n\n  upload2f(shaderUniform: ShaderUniform, value: Vector2 | Vector3 | Vector4 | Color): void {\n    const cacheValue = <Vector2>this.cacheValue;\n    if ((<Color>value).r !== undefined) {\n      if (cacheValue.x !== (<Color>value).r || cacheValue.y !== (<Color>value).g) {\n        if (this._colorSpace === ColorSpace.Linear) {\n          this._gl.uniform2f(\n            shaderUniform.location,\n            Color.gammaToLinearSpace((<Color>value).r),\n            Color.gammaToLinearSpace((<Color>value).g)\n          );\n        } else {\n          this._gl.uniform2f(shaderUniform.location, (<Color>value).r, (<Color>value).g);\n        }\n        cacheValue.x = (<Color>value).r;\n        cacheValue.y = (<Color>value).g;\n      }\n    } else {\n      if (cacheValue.x !== (<Vector2>value).x || cacheValue.y !== (<Vector2>value).y) {\n        this._gl.uniform2f(shaderUniform.location, (<Vector2>value).x, (<Vector2>value).y);\n        cacheValue.x = (<Vector2>value).x;\n        cacheValue.y = (<Vector2>value).y;\n      }\n    }\n  }\n\n  upload2fv(shaderUniform: ShaderUniform, value: Float32Array): void {\n    this._gl.uniform2fv(shaderUniform.location, value);\n  }\n\n  upload3f(shaderUniform: ShaderUniform, value: Vector3 | Vector4 | Color): void {\n    const cacheValue = <Vector3>this.cacheValue;\n    if ((<Color>value).r !== undefined) {\n      if (cacheValue.x !== (<Color>value).r || cacheValue.y !== (<Color>value).g || cacheValue.z !== (<Color>value).b) {\n        if (this._colorSpace === ColorSpace.Linear) {\n          this._gl.uniform3f(\n            shaderUniform.location,\n            Color.gammaToLinearSpace((<Color>value).r),\n            Color.gammaToLinearSpace((<Color>value).g),\n            Color.gammaToLinearSpace((<Color>value).b)\n          );\n        } else {\n          this._gl.uniform3f(shaderUniform.location, (<Color>value).r, (<Color>value).g, (<Color>value).b);\n        }\n        cacheValue.x = (<Color>value).r;\n        cacheValue.y = (<Color>value).g;\n        cacheValue.z = (<Color>value).b;\n      }\n    } else {\n      if (\n        cacheValue.x !== (<Vector3>value).x ||\n        cacheValue.y !== (<Vector3>value).y ||\n        cacheValue.z !== (<Vector3>value).z\n      ) {\n        this._gl.uniform3f(shaderUniform.location, (<Vector3>value).x, (<Vector3>value).y, (<Vector3>value).z);\n        cacheValue.x = (<Vector3>value).x;\n        cacheValue.y = (<Vector3>value).y;\n        cacheValue.z = (<Vector3>value).z;\n      }\n    }\n  }\n\n  upload3fv(shaderUniform: ShaderUniform, value: Float32Array): void {\n    this._gl.uniform3fv(shaderUniform.location, value);\n  }\n\n  upload4f(shaderUniform: ShaderUniform, value: Vector4 | Color): void {\n    const cacheValue = <Vector4>this.cacheValue;\n    if ((<Color>value).r !== undefined) {\n      if (\n        cacheValue.x !== (<Color>value).r ||\n        cacheValue.y !== (<Color>value).g ||\n        cacheValue.z !== (<Color>value).b ||\n        cacheValue.w !== (<Color>value).a\n      ) {\n        if (this._colorSpace === ColorSpace.Linear) {\n          this._gl.uniform4f(\n            shaderUniform.location,\n            Color.gammaToLinearSpace((<Color>value).r),\n            Color.gammaToLinearSpace((<Color>value).g),\n            Color.gammaToLinearSpace((<Color>value).b),\n            (<Color>value).a\n          );\n        } else {\n          this._gl.uniform4f(\n            shaderUniform.location,\n            (<Color>value).r,\n            (<Color>value).g,\n            (<Color>value).b,\n            (<Color>value).a\n          );\n        }\n        cacheValue.x = (<Color>value).r;\n        cacheValue.y = (<Color>value).g;\n        cacheValue.z = (<Color>value).b;\n        cacheValue.w = (<Color>value).a;\n      }\n    } else {\n      if (\n        cacheValue.x !== (<Vector4>value).x ||\n        cacheValue.y !== (<Vector4>value).y ||\n        cacheValue.z !== (<Vector4>value).z ||\n        cacheValue.w !== (<Vector4>value).w\n      ) {\n        this._gl.uniform4f(\n          shaderUniform.location,\n          (<Vector4>value).x,\n          (<Vector4>value).y,\n          (<Vector4>value).z,\n          (<Vector4>value).w\n        );\n        cacheValue.x = (<Vector4>value).x;\n        cacheValue.y = (<Vector4>value).y;\n        cacheValue.z = (<Vector4>value).z;\n        cacheValue.w = (<Vector4>value).w;\n      }\n    }\n  }\n\n  upload4fv(shaderUniform: ShaderUniform, value: Float32Array): void {\n    this._gl.uniform4fv(shaderUniform.location, value);\n  }\n\n  upload1i(shaderUniform: ShaderUniform, value: number): void {\n    if (this.cacheValue !== value) {\n      this._gl.uniform1i(shaderUniform.location, value);\n      this.cacheValue = value;\n    }\n  }\n\n  upload1iv(shaderUniform: ShaderUniform, value: Int32Array): void {\n    this._gl.uniform1iv(shaderUniform.location, value);\n  }\n\n  upload2i(shaderUniform: ShaderUniform, value: Vector2 | Vector3 | Vector4 | Color): void {\n    const cacheValue = <Vector2>this.cacheValue;\n    if ((<Color>value).r !== undefined) {\n      if (cacheValue.x !== (<Color>value).r || cacheValue.y !== (<Color>value).g) {\n        this._gl.uniform2i(shaderUniform.location, (<Color>value).r, (<Color>value).g);\n        cacheValue.x = (<Color>value).r;\n        cacheValue.y = (<Color>value).g;\n      }\n    } else {\n      if (cacheValue.x !== (<Vector2>value).x || cacheValue.y !== (<Vector2>value).y) {\n        this._gl.uniform2i(shaderUniform.location, (<Vector2>value).x, (<Vector2>value).y);\n        cacheValue.x = (<Vector2>value).x;\n        cacheValue.y = (<Vector2>value).y;\n      }\n    }\n  }\n\n  upload2iv(shaderUniform: ShaderUniform, value: Int32Array): void {\n    this._gl.uniform2iv(shaderUniform.location, value);\n  }\n\n  upload3i(shaderUniform: ShaderUniform, value: Vector3 | Vector4 | Color): void {\n    const cacheValue = <Vector3>this.cacheValue;\n    if ((<Color>value).r !== undefined) {\n      if (cacheValue.x !== (<Color>value).r || cacheValue.y !== (<Color>value).g || cacheValue.z !== (<Color>value).b) {\n        this._gl.uniform3i(shaderUniform.location, (<Color>value).r, (<Color>value).g, (<Color>value).b);\n        cacheValue.x = (<Color>value).r;\n        cacheValue.y = (<Color>value).g;\n        cacheValue.z = (<Color>value).b;\n      }\n    } else {\n      if (\n        cacheValue.x !== (<Vector3>value).x ||\n        cacheValue.y !== (<Vector3>value).y ||\n        cacheValue.z !== (<Vector3>value).z\n      ) {\n        this._gl.uniform3i(shaderUniform.location, (<Vector3>value).x, (<Vector3>value).y, (<Vector3>value).z);\n        cacheValue.x = (<Vector3>value).x;\n        cacheValue.y = (<Vector3>value).y;\n        cacheValue.z = (<Vector3>value).z;\n      }\n    }\n  }\n  upload3iv(shaderUniform: ShaderUniform, value: Int32Array): void {\n    this._gl.uniform3iv(shaderUniform.location, value);\n  }\n  upload4i(shaderUniform: ShaderUniform, value: Vector4 | Color): void {\n    const cacheValue = <Vector4>this.cacheValue;\n    if ((<Color>value).r !== undefined) {\n      if (\n        cacheValue.x !== (<Color>value).r ||\n        cacheValue.y !== (<Color>value).g ||\n        cacheValue.z !== (<Color>value).b ||\n        cacheValue.w !== (<Color>value).a\n      ) {\n        this._gl.uniform4i(\n          shaderUniform.location,\n          (<Color>value).r,\n          (<Color>value).g,\n          (<Color>value).b,\n          (<Color>value).a\n        );\n        cacheValue.x = (<Color>value).r;\n        cacheValue.y = (<Color>value).g;\n        cacheValue.z = (<Color>value).b;\n        cacheValue.w = (<Color>value).a;\n      }\n    } else {\n      if (\n        cacheValue.x !== (<Vector4>value).x ||\n        cacheValue.y !== (<Vector4>value).y ||\n        cacheValue.z !== (<Vector4>value).z ||\n        cacheValue.w !== (<Vector4>value).w\n      ) {\n        this._gl.uniform4i(\n          shaderUniform.location,\n          (<Vector4>value).x,\n          (<Vector4>value).y,\n          (<Vector4>value).z,\n          (<Vector4>value).w\n        );\n        cacheValue.x = (<Vector4>value).x;\n        cacheValue.y = (<Vector4>value).y;\n        cacheValue.z = (<Vector4>value).z;\n        cacheValue.w = (<Vector4>value).w;\n      }\n    }\n  }\n\n  upload4iv(shaderUniform: ShaderUniform, value: Int32Array): void {\n    this._gl.uniform4iv(shaderUniform.location, value);\n  }\n\n  uploadMat4(shaderUniform: ShaderUniform, value: Matrix): void {\n    this._gl.uniformMatrix4fv(shaderUniform.location, false, value.elements);\n  }\n\n  uploadMat4v(shaderUniform: ShaderUniform, value: Float32Array): void {\n    this._gl.uniformMatrix4fv(shaderUniform.location, false, value);\n  }\n\n  uploadTexture(shaderUniform: ShaderUniform, value: Texture): void {\n    const rhi = this._rhi;\n    rhi.activeTexture(shaderUniform.textureIndex as GLenum);\n    rhi.bindTexture(value._platformTexture);\n\n    value._setUseDepthCompareMode(shaderUniform.textureUseComporeMode);\n  }\n\n  uploadTextureArray(shaderUniform: ShaderUniform, value: Texture[]): void {\n    const rhi = this._rhi;\n    const textureIndices = shaderUniform.textureIndex as GLenum[];\n    for (let i = 0; i < value.length; i++) {\n      const texture = value[i];\n      rhi.activeTexture(textureIndices[i]);\n      rhi.bindTexture(texture._platformTexture);\n      texture._setUseDepthCompareMode(shaderUniform.textureUseComporeMode);\n    }\n  }\n}\n","import { ShaderUniform } from \"./ShaderUniform\";\n\n/**\n * Shader uniform block.\n * @internal\n */\nexport class ShaderUniformBlock {\n  readonly constUniforms: ShaderUniform[] = [];\n  readonly textureUniforms: ShaderUniform[] = [];\n}\n","import { Vector2, Vector3, Vector4 } from \"@galacean/engine-math\";\nimport { Logger } from \"../base/Logger\";\nimport { Camera } from \"../Camera\";\nimport { Engine } from \"../Engine\";\nimport { Material } from \"../material/Material\";\nimport { Renderer } from \"../Renderer\";\nimport { IHardwareRenderer } from \"../renderingHardwareInterface/IHardwareRenderer\";\nimport { Scene } from \"../Scene\";\nimport { Texture } from \"../texture\";\nimport { ShaderDataGroup } from \"./enums/ShaderDataGroup\";\nimport { Shader } from \"./Shader\";\nimport { ShaderData } from \"./ShaderData\";\nimport { ShaderUniform } from \"./ShaderUniform\";\nimport { ShaderUniformBlock } from \"./ShaderUniformBlock\";\n\n/**\n * Shader program, corresponding to the GPU shader program.\n * @internal\n */\nexport class ShaderProgram {\n  private static _counter: number = 0;\n\n  private static _addLineNum(str: string) {\n    const lines = str.split(\"\\n\");\n    const limitLength = (lines.length + 1).toString().length + 6;\n    let prefix;\n    return lines\n      .map((line, index) => {\n        prefix = `0:${index + 1}`;\n        if (prefix.length >= limitLength) return prefix.substring(0, limitLength) + line;\n\n        for (let i = 0; i < limitLength - prefix.length; i++) prefix += \" \";\n\n        return prefix + line;\n      })\n      .join(\"\\n\");\n  }\n\n  id: number;\n\n  readonly sceneUniformBlock: ShaderUniformBlock = new ShaderUniformBlock();\n  readonly cameraUniformBlock: ShaderUniformBlock = new ShaderUniformBlock();\n  readonly rendererUniformBlock: ShaderUniformBlock = new ShaderUniformBlock();\n  readonly materialUniformBlock: ShaderUniformBlock = new ShaderUniformBlock();\n  readonly otherUniformBlock: ShaderUniformBlock = new ShaderUniformBlock();\n\n  /** @internal */\n  _uploadRenderCount: number = -1;\n  /** @internal */\n  _uploadScene: Scene;\n  /** @internal */\n  _uploadCamera: Camera;\n  /** @internal */\n  _uploadRenderer: Renderer;\n  /** @internal */\n  _uploadMaterial: Material;\n\n  attributeLocation: Record<string, GLint> = Object.create(null);\n\n  // @todo: move to RHI.\n  private _isValid: boolean;\n  private _engine: Engine;\n  private _gl: WebGLRenderingContext;\n  private _vertexShader: WebGLShader;\n  private _fragmentShader: WebGLShader;\n  private _glProgram: WebGLProgram;\n  private _activeTextureUint: number = 0;\n\n  /**\n   * Whether this shader program is valid.\n   */\n  get isValid(): boolean {\n    return this._isValid;\n  }\n\n  constructor(engine: Engine, vertexSource: string, fragmentSource: string) {\n    this._engine = engine;\n    this._gl = engine._hardwareRenderer.gl;\n    this._glProgram = this._createProgram(vertexSource, fragmentSource);\n\n    if (this._glProgram) {\n      this._isValid = true;\n      this._recordLocation();\n    } else {\n      this._isValid = false;\n    }\n\n    this.id = ShaderProgram._counter++;\n  }\n\n  /**\n   * Upload all shader data in shader uniform block.\n   * @param uniformBlock - shader Uniform block\n   * @param shaderData - shader data\n   */\n  uploadAll(uniformBlock: ShaderUniformBlock, shaderData: ShaderData): void {\n    this.uploadUniforms(uniformBlock, shaderData);\n    this.uploadTextures(uniformBlock, shaderData);\n  }\n\n  /**\n   * Upload constant shader data in shader uniform block.\n   * @param uniformBlock - shader Uniform block\n   * @param shaderData - shader data\n   */\n  uploadUniforms(uniformBlock: ShaderUniformBlock, shaderData: ShaderData): void {\n    const propertyValueMap = shaderData._propertyValueMap;\n    const constUniforms = uniformBlock.constUniforms;\n\n    for (let i = 0, n = constUniforms.length; i < n; i++) {\n      const uniform = constUniforms[i];\n      const data = propertyValueMap[uniform.propertyId];\n      data != null && uniform.applyFunc(uniform, data);\n    }\n  }\n\n  /**\n   * Upload texture shader data in shader uniform block.\n   * @param uniformBlock - shader Uniform block\n   * @param shaderData - shader data\n   */\n  uploadTextures(uniformBlock: ShaderUniformBlock, shaderData: ShaderData): void {\n    const propertyValueMap = shaderData._propertyValueMap;\n    const textureUniforms = uniformBlock.textureUniforms;\n    // textureUniforms property maybe null if ShaderUniformBlock not contain any texture.\n    if (textureUniforms) {\n      for (let i = 0, n = textureUniforms.length; i < n; i++) {\n        const uniform = textureUniforms[i];\n        const texture = <Texture>propertyValueMap[uniform.propertyId];\n        if (texture && !texture.destroyed) {\n          uniform.applyFunc(uniform, texture);\n        } else {\n          uniform.applyFunc(uniform, uniform.textureDefault);\n        }\n      }\n    }\n  }\n\n  /**\n   * Upload ungroup texture shader data in shader uniform block.\n   */\n  uploadUnGroupTextures(): void {\n    const textureUniforms = this.otherUniformBlock.textureUniforms;\n    // textureUniforms property maybe null if ShaderUniformBlock not contain any texture.\n    if (textureUniforms) {\n      for (let i = 0, n = textureUniforms.length; i < n; i++) {\n        const uniform = textureUniforms[i];\n        uniform.applyFunc(uniform, uniform.textureDefault);\n      }\n    }\n  }\n\n  /**\n   * Grouping other data.\n   */\n  groupingOtherUniformBlock(): void {\n    const { constUniforms, textureUniforms } = this.otherUniformBlock;\n    constUniforms.length > 0 && this._groupingSubOtherUniforms(constUniforms, false);\n    textureUniforms.length > 0 && this._groupingSubOtherUniforms(textureUniforms, true);\n  }\n\n  /**\n   * Bind this shader program.\n   * @returns Whether the shader program is switched.\n   */\n  bind(): boolean {\n    const rhi: IHardwareRenderer = this._engine._hardwareRenderer;\n    if (rhi._currentBind !== this) {\n      this._gl.useProgram(this._glProgram);\n      rhi._currentBind = this;\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Destroy this shader program.\n   */\n  destroy(): void {\n    const gl = this._gl;\n    this._vertexShader && gl.deleteShader(this._vertexShader);\n    this._fragmentShader && gl.deleteShader(this._fragmentShader);\n    this._glProgram && gl.deleteProgram(this._glProgram);\n  }\n\n  private _groupingSubOtherUniforms(uniforms: ShaderUniform[], isTexture: boolean): void {\n    for (let i = uniforms.length - 1; i >= 0; i--) {\n      const uniform = uniforms[i];\n      const group = Shader._getShaderPropertyGroup(uniform.name);\n      if (group !== undefined) {\n        uniforms.splice(uniforms.indexOf(uniform), 1);\n        this._groupingUniform(uniform, group, isTexture);\n      }\n    }\n  }\n\n  private _groupingUniform(uniform: ShaderUniform, group: ShaderDataGroup, isTexture: boolean): void {\n    switch (group) {\n      case ShaderDataGroup.Scene:\n        if (isTexture) {\n          this.sceneUniformBlock.textureUniforms.push(uniform);\n        } else {\n          this.sceneUniformBlock.constUniforms.push(uniform);\n        }\n        break;\n      case ShaderDataGroup.Camera:\n        if (isTexture) {\n          this.cameraUniformBlock.textureUniforms.push(uniform);\n        } else {\n          this.cameraUniformBlock.constUniforms.push(uniform);\n        }\n        break;\n      case ShaderDataGroup.Renderer:\n        if (isTexture) {\n          this.rendererUniformBlock.textureUniforms.push(uniform);\n        } else {\n          this.rendererUniformBlock.constUniforms.push(uniform);\n        }\n        break;\n      case ShaderDataGroup.Material:\n        if (isTexture) {\n          this.materialUniformBlock.textureUniforms.push(uniform);\n        } else {\n          this.materialUniformBlock.constUniforms.push(uniform);\n        }\n        break;\n      default:\n        if (isTexture) {\n          this.otherUniformBlock.textureUniforms.push(uniform);\n        } else {\n          this.otherUniformBlock.constUniforms.push(uniform);\n        }\n    }\n  }\n\n  /**\n   * init and link program with shader.\n   */\n  private _createProgram(vertexSource: string, fragmentSource: string): WebGLProgram | null {\n    const gl = this._gl;\n\n    // create and compile shader\n    const vertexShader = this._createShader(gl.VERTEX_SHADER, vertexSource);\n    if (!vertexShader) {\n      return null;\n    }\n\n    const fragmentShader = this._createShader(gl.FRAGMENT_SHADER, fragmentSource);\n    if (!fragmentShader) {\n      return null;\n    }\n\n    // link program and shader\n    const program = gl.createProgram();\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    gl.validateProgram(program);\n\n    if (gl.isContextLost()) {\n      Logger.error(\"Context lost while linking program.\");\n      gl.deleteShader(vertexShader);\n      gl.deleteShader(fragmentShader);\n      return null;\n    }\n\n    if (Logger.isEnabled && !gl.getProgramParameter(program, gl.LINK_STATUS)) {\n      Logger.error(\"Could not link WebGL program. \\n\" + gl.getProgramInfoLog(program));\n      gl.deleteProgram(program);\n      return null;\n    }\n\n    this._vertexShader = vertexShader;\n    this._fragmentShader = fragmentShader;\n    return program;\n  }\n\n  private _createShader(shaderType: number, shaderSource: string): WebGLShader | null {\n    const gl = this._gl;\n    const shader = gl.createShader(shaderType);\n\n    if (!shader) {\n      console.warn(\"Context lost while create shader.\");\n      return null;\n    }\n\n    gl.shaderSource(shader, shaderSource);\n    gl.compileShader(shader);\n\n    if (gl.isContextLost()) {\n      console.warn(\"Context lost while compiling shader.\");\n      gl.deleteShader(shader);\n      return null;\n    }\n\n    if (Logger.isEnabled && !gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n      console.warn(\n        `Could not compile WebGL shader.\\n${gl.getShaderInfoLog(shader)}`,\n        ShaderProgram._addLineNum(shaderSource)\n      );\n      gl.deleteShader(shader);\n      return null;\n    }\n\n    return shader;\n  }\n\n  /**\n   * record the location of uniform/attribute.\n   */\n  private _recordLocation(): void {\n    const gl = this._gl;\n    const program = this._glProgram;\n    const uniformInfos = this._getUniformInfos();\n    const attributeInfos = this._getAttributeInfos();\n\n    uniformInfos.forEach(({ name, size, type }) => {\n      const shaderUniform = new ShaderUniform(this._engine);\n      let isArray = false;\n      let isTexture = false;\n\n      if (name.indexOf(\"[0]\") > 0) {\n        name = name.substr(0, name.length - 3);\n        isArray = true;\n      }\n\n      const location = gl.getUniformLocation(program, name);\n      shaderUniform.name = name;\n      shaderUniform.propertyId = Shader.getPropertyByName(name)._uniqueId;\n      shaderUniform.location = location;\n\n      switch (type) {\n        case gl.FLOAT:\n          if (isArray) {\n            shaderUniform.applyFunc = shaderUniform.upload1fv;\n          } else {\n            shaderUniform.applyFunc = shaderUniform.upload1f;\n            shaderUniform.cacheValue = 0;\n          }\n          break;\n        case gl.FLOAT_VEC2:\n          if (isArray) {\n            shaderUniform.applyFunc = shaderUniform.upload2fv;\n          } else {\n            shaderUniform.applyFunc = shaderUniform.upload2f;\n            shaderUniform.cacheValue = new Vector2(0, 0);\n          }\n          break;\n        case gl.FLOAT_VEC3:\n          if (isArray) {\n            shaderUniform.applyFunc = shaderUniform.upload3fv;\n          } else {\n            shaderUniform.applyFunc = shaderUniform.upload3f;\n            shaderUniform.cacheValue = new Vector3(0, 0, 0);\n          }\n          break;\n        case gl.FLOAT_VEC4:\n          if (isArray) {\n            shaderUniform.applyFunc = shaderUniform.upload4fv;\n          } else {\n            shaderUniform.applyFunc = shaderUniform.upload4f;\n            shaderUniform.cacheValue = new Vector4(0, 0, 0, 0);\n          }\n          break;\n        case gl.BOOL:\n        case gl.INT:\n          if (isArray) {\n            shaderUniform.applyFunc = shaderUniform.upload1iv;\n          } else {\n            shaderUniform.applyFunc = shaderUniform.upload1i;\n            shaderUniform.cacheValue = 0;\n          }\n          break;\n        case gl.BOOL_VEC2:\n        case gl.INT_VEC2:\n          if (isArray) {\n            shaderUniform.applyFunc = shaderUniform.upload2iv;\n          } else {\n            shaderUniform.applyFunc = shaderUniform.upload2i;\n            shaderUniform.cacheValue = new Vector2(0, 0);\n          }\n          break;\n        case gl.BOOL_VEC3:\n        case gl.INT_VEC3:\n          if (isArray) {\n          } else {\n          }\n          shaderUniform.applyFunc = isArray ? shaderUniform.upload3iv : shaderUniform.upload3i;\n          shaderUniform.cacheValue = new Vector3(0, 0, 0);\n          break;\n        case gl.BOOL_VEC4:\n        case gl.INT_VEC4:\n          if (isArray) {\n            shaderUniform.applyFunc = shaderUniform.upload4iv;\n          } else {\n            shaderUniform.applyFunc = shaderUniform.upload4i;\n            shaderUniform.cacheValue = new Vector4(0, 0, 0);\n          }\n          break;\n        case gl.FLOAT_MAT4:\n          shaderUniform.applyFunc = isArray ? shaderUniform.uploadMat4v : shaderUniform.uploadMat4;\n          break;\n        case gl.SAMPLER_2D:\n        case gl.SAMPLER_CUBE:\n        case (<WebGL2RenderingContext>gl).SAMPLER_2D_ARRAY:\n        case (<WebGL2RenderingContext>gl).SAMPLER_2D_SHADOW:\n          let defaultTexture: Texture;\n          switch (type) {\n            case gl.SAMPLER_2D:\n              defaultTexture = this._engine._magentaTexture2D;\n              break;\n            case gl.SAMPLER_CUBE:\n              defaultTexture = this._engine._magentaTextureCube;\n              break;\n            case (<WebGL2RenderingContext>gl).SAMPLER_2D_ARRAY:\n              defaultTexture = this._engine._magentaTexture2DArray;\n              break;\n            case (<WebGL2RenderingContext>gl).SAMPLER_2D_SHADOW:\n              defaultTexture = this._engine._depthTexture2D;\n              shaderUniform.textureUseComporeMode = true;\n              break;\n          }\n\n          isTexture = true;\n          if (isArray) {\n            const defaultTextures = new Array<Texture>(size);\n            const textureIndices = new Int32Array(size);\n            const glTextureIndices = new Array<number>(size);\n\n            for (let i = 0; i < size; i++) {\n              defaultTextures[i] = defaultTexture;\n              textureIndices[i] = this._activeTextureUint;\n              glTextureIndices[i] = gl.TEXTURE0 + this._activeTextureUint++;\n            }\n            shaderUniform.textureDefault = defaultTextures;\n            shaderUniform.textureIndex = glTextureIndices;\n            shaderUniform.applyFunc = shaderUniform.uploadTextureArray;\n            this.bind();\n            gl.uniform1iv(location, textureIndices);\n          } else {\n            const glTextureIndex = gl.TEXTURE0 + this._activeTextureUint;\n            shaderUniform.textureDefault = defaultTexture;\n            shaderUniform.textureIndex = glTextureIndex;\n            shaderUniform.applyFunc = shaderUniform.uploadTexture;\n            this.bind();\n            gl.uniform1i(location, this._activeTextureUint++);\n          }\n          break;\n        default:\n          throw new Error(\"Unsupported uniform type\");\n      }\n\n      const group = Shader._getShaderPropertyGroup(name);\n      this._groupingUniform(shaderUniform, group, isTexture);\n    });\n\n    attributeInfos.forEach(({ name }) => {\n      this.attributeLocation[name] = gl.getAttribLocation(program, name);\n    });\n  }\n\n  private _getUniformInfos(): WebGLActiveInfo[] {\n    const gl = this._gl;\n    const program = this._glProgram;\n    const uniformCount = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n\n    const uniformInfos = new Array<WebGLActiveInfo>(uniformCount);\n    for (let i = 0; i < uniformCount; ++i) {\n      const info = gl.getActiveUniform(program, i);\n      uniformInfos[i] = info;\n    }\n\n    return uniformInfos;\n  }\n\n  private _getAttributeInfos(): WebGLActiveInfo[] {\n    const gl = this._gl;\n    const program = this._glProgram;\n    const attributeInfos = new Array<WebGLActiveInfo>();\n\n    const attributeCount = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n    for (let i = 0; i < attributeCount; ++i) {\n      const info = gl.getActiveAttrib(program, i);\n      attributeInfos[i] = info;\n    }\n\n    return attributeInfos;\n  }\n}\n","import { GLCapabilityType } from \"../base/Constant\";\nimport { Engine } from \"../Engine\";\nimport { ShaderFactory } from \"../shaderlib/ShaderFactory\";\nimport { Shader } from \"./Shader\";\nimport { ShaderMacroCollection } from \"./ShaderMacroCollection\";\nimport { ShaderProgram } from \"./ShaderProgram\";\n\n/**\n * Shader pass containing vertex and fragment source.\n */\nexport class ShaderPass {\n  private static _shaderPassCounter: number = 0;\n\n  /** @internal */\n  _shaderPassId: number = 0;\n\n  private _vertexSource: string;\n  private _fragmentSource: string;\n\n  constructor(vertexSource: string, fragmentSource: string) {\n    this._shaderPassId = ShaderPass._shaderPassCounter++;\n\n    this._vertexSource = vertexSource;\n    this._fragmentSource = fragmentSource;\n  }\n\n  /**\n   * @internal\n   */\n  _getShaderProgram(engine: Engine, macroCollection: ShaderMacroCollection): ShaderProgram {\n    const shaderProgramPool = engine._getShaderProgramPool(this);\n    let shaderProgram = shaderProgramPool.get(macroCollection);\n    if (shaderProgram) {\n      return shaderProgram;\n    }\n\n    const isWebGL2: boolean = engine._hardwareRenderer.isWebGL2;\n    const macroNameList = [];\n    Shader._getNamesByMacros(macroCollection, macroNameList);\n    const macroNameStr = ShaderFactory.parseCustomMacros(macroNameList);\n    const versionStr = isWebGL2 ? \"#version 300 es\" : \"#version 100\";\n    const graphicAPI = isWebGL2 ? \"#define GRAPHICS_API_WEBGL2\" : \"#define GRAPHICS_API_WEBGL1\";\n    let precisionStr = `\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      precision highp int;\n    #else\n      precision mediump float;\n      precision mediump int;\n    #endif\n    `;\n\n    if (engine._hardwareRenderer.canIUse(GLCapabilityType.shaderTextureLod)) {\n      precisionStr += \"#define HAS_TEX_LOD\\n\";\n    }\n    if (engine._hardwareRenderer.canIUse(GLCapabilityType.standardDerivatives)) {\n      precisionStr += \"#define HAS_DERIVATIVES\\n\";\n    }\n\n    let vertexSource = ShaderFactory.parseIncludes(\n      ` ${versionStr}\n        ${graphicAPI}\n        ${macroNameStr}\n      ` + this._vertexSource\n    );\n\n    let fragmentSource = ShaderFactory.parseIncludes(\n      ` ${versionStr}\n        ${graphicAPI}\n        ${isWebGL2 ? \"\" : ShaderFactory.parseExtension(Shader._shaderExtension)}\n        ${precisionStr}\n        ${macroNameStr}\n      ` + this._fragmentSource\n    );\n\n    if (isWebGL2) {\n      vertexSource = ShaderFactory.convertTo300(vertexSource);\n      fragmentSource = ShaderFactory.convertTo300(fragmentSource, true);\n    }\n\n    shaderProgram = new ShaderProgram(engine, vertexSource, fragmentSource);\n\n    shaderProgramPool.cache(shaderProgram);\n    return shaderProgram;\n  }\n}\n","import { ShaderDataGroup } from \"./enums/ShaderDataGroup\";\nimport { ShaderPropertyType } from \"./enums/ShaderPropertyType\";\n\n/**\n * Shader property.\n */\nexport class ShaderProperty {\n  private static _propertyNameCounter: number = 0;\n\n  /** @internal */\n  _uniqueId: number;\n  /** @internal */\n  _group: ShaderDataGroup;\n  /** @internal */\n  _type: ShaderPropertyType;\n\n  /** Shader property name. */\n  readonly name: string;\n\n  /**\n   * Shader property type.\n   */\n  get type(): ShaderPropertyType {\n    return this._type;\n  }\n\n  /**\n   * @internal\n   */\n  constructor(name: string) {\n    this.name = name;\n    this._uniqueId = ShaderProperty._propertyNameCounter++;\n  }\n}\n","import { Engine } from \"../Engine\";\nimport { ShaderDataGroup } from \"./enums/ShaderDataGroup\";\nimport { ShaderMacro } from \"./ShaderMacro\";\nimport { ShaderMacroCollection } from \"./ShaderMacroCollection\";\nimport { ShaderPass } from \"./ShaderPass\";\nimport { ShaderProperty } from \"./ShaderProperty\";\n\n/**\n * Shader for rendering.\n */\nexport class Shader {\n  /** @internal */\n  static readonly _compileMacros: ShaderMacroCollection = new ShaderMacroCollection();\n  /** @internal */\n  static readonly _shaderExtension: string[] = [\n    \"GL_EXT_shader_texture_lod\",\n    \"GL_OES_standard_derivatives\",\n    \"GL_EXT_draw_buffers\"\n  ];\n  /** @internal */\n  static _propertyIdMap: Record<number, ShaderProperty> = Object.create(null);\n\n  private static _shaderMap: Record<string, Shader> = Object.create(null);\n  private static _propertyNameMap: Record<string, ShaderProperty> = Object.create(null);\n  private static _macroMaskMap: string[][] = [];\n  private static _macroCounter: number = 0;\n  private static _macroMap: Record<string, ShaderMacro> = Object.create(null);\n\n  /**\n   * Create a shader.\n   * @param name - Name of the shader\n   * @param vertexSource - Vertex source code\n   * @param fragmentSource - Fragment source code\n   * @returns Shader\n   */\n  static create(name: string, vertexSource: string, fragmentSource: string): Shader;\n\n  /**\n   * Create a shader.\n   * @param name - Name of the shader\n   * @param shaderPasses - Shader passes\n   * @returns Shader\n   */\n  static create(name: string, shaderPasses: ShaderPass[]): Shader;\n\n  static create(name: string, vertexSourceOrShaderPasses: string | ShaderPass[], fragmentSource?: string): Shader {\n    const shaderMap = Shader._shaderMap;\n    if (shaderMap[name]) {\n      throw `Shader named \"${name}\" already exists.`;\n    }\n    return (shaderMap[name] = new Shader(name, vertexSourceOrShaderPasses, fragmentSource));\n  }\n\n  /**\n   * Find a shader by name.\n   * @param name - Name of the shader\n   */\n  static find(name: string): Shader {\n    return Shader._shaderMap[name];\n  }\n\n  /**\n   * Get shader macro by name.\n   * @param name - Name of the shader macro\n   * @returns Shader macro\n   */\n  static getMacroByName(name: string): ShaderMacro;\n\n  /**\n   * Get shader macro by name.\n   * @param name - Name of the shader macro\n   * @param value - Value of the shader macro\n   * @returns Shader macro\n   */\n  static getMacroByName(name: string, value: string): ShaderMacro;\n\n  static getMacroByName(name: string, value?: string): ShaderMacro {\n    const key = value ? name + ` ` + value : name;\n    let macro = Shader._macroMap[key];\n    if (!macro) {\n      const maskMap = Shader._macroMaskMap;\n      const counter = Shader._macroCounter;\n      const index = Math.floor(counter / 32);\n      const bit = counter % 32;\n\n      macro = new ShaderMacro(name, value, index, 1 << bit);\n      Shader._macroMap[key] = macro;\n      if (index == maskMap.length) {\n        maskMap.length++;\n        maskMap[index] = new Array<string>(32);\n      }\n      maskMap[index][bit] = key;\n      Shader._macroCounter++;\n    }\n    return macro;\n  }\n\n  /**\n   * Get shader property by name.\n   * @param name - Name of the shader property\n   * @returns Shader property\n   */\n  static getPropertyByName(name: string): ShaderProperty {\n    const propertyNameMap = Shader._propertyNameMap;\n    if (propertyNameMap[name] != null) {\n      return propertyNameMap[name];\n    } else {\n      const property = new ShaderProperty(name);\n      propertyNameMap[name] = property;\n      Shader._propertyIdMap[property._uniqueId] = property;\n      return property;\n    }\n  }\n\n  /**\n   * @internal\n   */\n  static _getShaderPropertyGroup(propertyName: string): ShaderDataGroup | null {\n    const shaderProperty = Shader._propertyNameMap[propertyName];\n    return shaderProperty?._group;\n  }\n\n  /**\n   * @internal\n   */\n  static _getNamesByMacros(macros: ShaderMacroCollection, out: string[]): void {\n    const maskMap = Shader._macroMaskMap;\n    const mask = macros._mask;\n    out.length = 0;\n    for (let i = 0, n = macros._length; i < n; i++) {\n      const subMaskMap = maskMap[i];\n      const subMask = mask[i];\n      const m = subMask < 0 ? 32 : Math.floor(Math.log2(subMask)) + 1; // if is negative must contain 1 << 31.\n      for (let j = 0; j < m; j++) {\n        if (subMask & (1 << j)) {\n          out.push(subMaskMap[j]);\n        }\n      }\n    }\n  }\n\n  /** The name of shader. */\n  readonly name: string;\n\n  /**\n   *  Shader passes.\n   */\n  get passes(): ReadonlyArray<ShaderPass> {\n    return this._passes;\n  }\n\n  private _passes: ShaderPass[] = [];\n\n  private constructor(name: string, vertexSourceOrShaderPasses: string | ShaderPass[], fragmentSource?: string) {\n    this.name = name;\n\n    if (typeof vertexSourceOrShaderPasses === \"string\") {\n      this._passes.push(new ShaderPass(vertexSourceOrShaderPasses, fragmentSource));\n    } else {\n      const passCount = vertexSourceOrShaderPasses.length;\n      if (passCount < 1) {\n        throw \"Shader pass count must large than 0.\";\n      }\n      for (let i = 0; i < passCount; i++) {\n        this._passes.push(vertexSourceOrShaderPasses[i]);\n      }\n    }\n  }\n\n  /**\n   * Compile shader variant by macro name list.\n   *\n   * @remarks\n   * Usually a shader contains some macros,any combination of macros is called shader variant.\n   *\n   * @param engine - Engine to which the shader variant belongs\n   * @param macros - Macro name list\n   * @returns Is the compiled shader variant valid\n   */\n  compileVariant(engine: Engine, macros: string[]): boolean {\n    const compileMacros = Shader._compileMacros;\n    compileMacros.clear();\n    for (let i = 0, n = macros.length; i < n; i++) {\n      compileMacros.enable(Shader.getMacroByName(macros[i]));\n    }\n\n    let isValid = true;\n    const passes = this._passes;\n    for (let i = 0, n = passes.length; i < n; i++) {\n      isValid &&= passes[i]._getShaderProgram(engine, compileMacros).isValid;\n    }\n    return isValid;\n  }\n}\n","import { IClone } from \"@galacean/engine-design\";\nimport { Color, Matrix, Vector2, Vector3, Vector4 } from \"@galacean/engine-math\";\nimport { IRefObject } from \"../asset/IRefObject\";\nimport { CloneManager } from \"../clone/CloneManager\";\nimport { Texture } from \"../texture/Texture\";\nimport { ShaderDataGroup } from \"./enums/ShaderDataGroup\";\nimport { ShaderPropertyType } from \"./enums/ShaderPropertyType\";\nimport { Shader } from \"./Shader\";\nimport { ShaderMacro } from \"./ShaderMacro\";\nimport { ShaderMacroCollection } from \"./ShaderMacroCollection\";\nimport { ShaderProperty } from \"./ShaderProperty\";\n\n/**\n * Shader data collection,Correspondence includes shader properties data and macros data.\n */\nexport class ShaderData implements IRefObject, IClone {\n  /** @internal */\n  _group: ShaderDataGroup;\n  /** @internal */\n  _propertyValueMap: Record<number, ShaderPropertyValueType> = Object.create(null);\n  /** @internal */\n  _macroCollection: ShaderMacroCollection = new ShaderMacroCollection();\n\n  private _macroMap: Record<number, ShaderMacro> = Object.create(null);\n  private _refCount: number = 0;\n\n  /**\n   * @internal\n   */\n  constructor(group: ShaderDataGroup) {\n    this._group = group;\n  }\n\n  /**\n   * Get float by shader property name.\n   * @param propertyName - Shader property name\n   * @returns Float\n   */\n  getFloat(propertyName: string): number;\n\n  /**\n   * Get float by shader property.\n   * @param property - Shader property, use `Shader.getPropertyByName` to get\n   * @returns Float\n   */\n  getFloat(property: ShaderProperty): number;\n\n  getFloat(property: string | ShaderProperty): number {\n    return this.getPropertyValue(property);\n  }\n\n  /**\n   * Set float by shader property name.\n   * @remarks Corresponding float shader property type.\n   * @param propertyName - Shader property name\n   * @param value - Float\n   */\n  setFloat(propertyName: string, value: number): void;\n\n  /**\n   * Set float by shader property.\n   * @remarks Corresponding float shader property type.\n   * @param property - Shader property, use `Shader.getPropertyByName` to get\n   * @param value - Float\n   */\n  setFloat(property: ShaderProperty, value: number): void;\n\n  setFloat(property: string | ShaderProperty, value: number): void {\n    this._setPropertyValue(property, ShaderPropertyType.Float, value);\n  }\n\n  /**\n   * Get int by shader property name.\n   * @param propertyName - Shader property name\n   * @returns Int\n   */\n  getInt(propertyName: string): number;\n\n  /**\n   * Get int by shader property.\n   * @param property - Shader property, use `Shader.getPropertyByName` to get\n   * @returns Int\n   */\n  getInt(property: ShaderProperty): number;\n\n  getInt(property: string | ShaderProperty): number {\n    return this.getPropertyValue(property);\n  }\n\n  /**\n   * Set int by shader property name.\n   * @remarks Correspondence includes int and bool shader property type.\n   * @param propertyName - Shader property name\n   * @param value - Int\n   */\n  setInt(propertyName: string, value: number): void;\n\n  /**\n   * Set int by shader property.\n   * @remarks Correspondence includes int and bool shader property type.\n   * @param property - Shader property, use `Shader.getPropertyByName` to get\n   * @param value - Int\n   */\n  setInt(property: ShaderProperty, value: number): void;\n\n  setInt(property: string | ShaderProperty, value: number): void {\n    this._setPropertyValue(property, ShaderPropertyType.Int, value);\n  }\n\n  /**\n   * Get float array by shader property name.\n   * @param propertyName - Shader property name\n   * @returns Float array\n   */\n  getFloatArray(propertyName: string): Float32Array;\n\n  /**\n   * Get float array by shader property.\n   * @param property - Shader property, use `Shader.getPropertyByName` to get\n   * @returns Float array\n   */\n  getFloatArray(property: ShaderProperty): Float32Array;\n\n  getFloatArray(property: string | ShaderProperty): Float32Array {\n    return this.getPropertyValue(property);\n  }\n\n  /**\n   * Set float array by shader property name.\n   * @remarks Correspondence includes float array、vec2 array、vec3 array、vec4 array and matrix array shader property type.\n   * @param propertyName - Shader property name\n   * @param value - Float array\n   */\n  setFloatArray(propertyName: string, value: Float32Array): void;\n\n  /**\n   * Set float array by shader property.\n   * @remarks Correspondence includes float array、vec2 array、vec3 array、vec4 array and matrix array shader property type.\n   * @param property - Shader property, use `Shader.getPropertyByName` to get\n   * @param value - Float array\n   */\n  setFloatArray(property: ShaderProperty, value: Float32Array): void;\n\n  setFloatArray(property: string | ShaderProperty, value: Float32Array): void {\n    this._setPropertyValue(property, ShaderPropertyType.FloatArray, value);\n  }\n\n  /**\n   * Get int array by shader property name.\n   * @param propertyName - Shader property name\n   * @returns Int Array\n   */\n  getIntArray(propertyName: string): Int32Array;\n\n  /**\n   * Get int array by shader property.\n   * @param property - Shader property, use `Shader.getPropertyByName` to get\n   * @returns Int Array\n   */\n  getIntArray(property: ShaderProperty): Int32Array;\n\n  getIntArray(property: string | ShaderProperty): Int32Array {\n    return this.getPropertyValue(property);\n  }\n\n  /**\n   * Set int array by shader property name.\n   * @remarks Correspondence includes bool array、int array、bvec2 array、bvec3 array、bvec4 array、ivec2 array、ivec3 array and ivec4 array shader property type.\n   * @param propertyName - Shader property name\n   * @param value - Int Array\n   */\n  setIntArray(propertyName: string, value: Int32Array): void;\n\n  /**\n   * Set int array by shader property.\n   * @remarks Correspondence includes bool array、int array、bvec2 array、bvec3 array、bvec4 array、ivec2 array、ivec3 array and ivec4 array shader property type.\n   * @param property - Shader property, use `Shader.getPropertyByName` to get\n   * @param value - Int Array\n   */\n  setIntArray(property: ShaderProperty, value: Int32Array): void;\n\n  setIntArray(property: string | ShaderProperty, value: Int32Array): void {\n    this._setPropertyValue(property, ShaderPropertyType.IntArray, value);\n  }\n\n  /**\n   * Get two-dimensional from shader property name.\n   * @param propertyName - Shader property name\n   * @returns Two-dimensional vector\n   */\n  getVector2(propertyName: string): Vector2;\n\n  /**\n   * Get two-dimensional from shader property.\n   * @param property - Shader property, use `Shader.getPropertyByName` to get\n   * @returns Two-dimensional vector\n   */\n  getVector2(property: ShaderProperty): Vector2;\n\n  getVector2(property: string | ShaderProperty): Vector2 {\n    return this.getPropertyValue(property);\n  }\n\n  /**\n   * Set two-dimensional vector from shader property name.\n   * @remarks Correspondence includes vec2、ivec2 and bvec2 shader property type.\n   * @param property - Shader property name\n   * @param value - Two-dimensional vector\n   */\n  setVector2(property: string, value: Vector2): void;\n\n  /**\n   * Set two-dimensional vector from shader property.\n   * @remarks Correspondence includes vec2、ivec2 and bvec2 shader property type.\n   * @param property - Shader property, use `Shader.getPropertyByName` to get\n   * @param value - Two-dimensional vector\n   */\n  setVector2(property: ShaderProperty, value: Vector2): void;\n\n  setVector2(property: string | ShaderProperty, value: Vector2): void {\n    this._setPropertyValue(property, ShaderPropertyType.Vector2, value);\n  }\n\n  /**\n   * Get vector3 by shader property name.\n   * @param propertyName - Shader property name\n   * @returns Three-dimensional vector\n   */\n  getVector3(propertyName: string): Vector3;\n\n  /**\n   * Get vector3 by shader property.\n   * @param property - Shader property, use `Shader.getPropertyByName` to get\n   * @returns Three-dimensional vector\n   */\n  getVector3(property: ShaderProperty): Vector3;\n\n  getVector3(property: string | ShaderProperty): Vector3 {\n    return this.getPropertyValue(property);\n  }\n\n  /**\n   * Set three dimensional vector by shader property name.\n   * @remarks Correspondence includes vec3、ivec3 and bvec3 shader property type.\n   * @param property - Shader property name\n   * @param value - Three-dimensional vector\n   */\n  setVector3(property: string, value: Vector3): void;\n\n  /**\n   * Set three dimensional vector by shader property.\n   * @remarks Correspondence includes vec3、ivec3 and bvec3 shader property type.\n   * @param property - Shader property, use `Shader.getPropertyByName` to get\n   * @param value - Three-dimensional vector\n   */\n  setVector3(property: ShaderProperty, value: Vector3): void;\n\n  setVector3(property: string | ShaderProperty, value: Vector3): void {\n    this._setPropertyValue(property, ShaderPropertyType.Vector3, value);\n  }\n\n  /**\n   * Get vector4 by shader property name.\n   * @param propertyName - Shader property name\n   * @returns Four-dimensional vector\n   */\n  getVector4(propertyName: string): Vector4;\n\n  /**\n   * Get vector4 by shader property.\n   * @param property - Shader property, use `Shader.getPropertyByName` to get\n   * @returns Four-dimensional vector\n   */\n  getVector4(property: ShaderProperty): Vector4;\n\n  getVector4(property: string | ShaderProperty): Vector4 {\n    return this.getPropertyValue(property);\n  }\n\n  /**\n   * Set four-dimensional vector by shader property name.\n   * @remarks Correspondence includes vec4、ivec4 and bvec4 shader property type.\n   * @param property - Shader property name\n   * @param value - Four-dimensional vector\n   */\n  setVector4(property: string, value: Vector4): void;\n\n  /**\n   * Set four-dimensional vector by shader property.\n   * @remarks Correspondence includes vec4、ivec4 and bvec4 shader property type.\n   * @param property - Shader property, use `Shader.getPropertyByName` to get\n   * @param value - Four-dimensional vector\n   */\n  setVector4(property: ShaderProperty, value: Vector4): void;\n\n  setVector4(property: string | ShaderProperty, value: Vector4): void {\n    this._setPropertyValue(property, ShaderPropertyType.Vector4, value);\n  }\n\n  /**\n   * Get matrix by shader property name.\n   * @param propertyName - Shader property name\n   * @returns Matrix\n   */\n  getMatrix(propertyName: string): Matrix;\n\n  /**\n   * Get matrix by shader property.\n   * @param property - Shader property, use `Shader.getPropertyByName` to get\n   * @returns Matrix\n   */\n  getMatrix(property: ShaderProperty): Matrix;\n\n  getMatrix(property: string | ShaderProperty): Matrix {\n    return this.getPropertyValue(property);\n  }\n\n  /**\n   * Set matrix by shader property name.\n   * @remarks Correspondence includes matrix shader property type.\n   * @param propertyName - Shader property name\n   * @param value - Matrix\n   */\n  setMatrix(propertyName: string, value: Matrix);\n\n  /**\n   * Set matrix by shader property.\n   * @remarks Correspondence includes matrix shader property type.\n   * @param property - Shader property, use `Shader.getPropertyByName` to get\n   * @param value - Matrix\n   */\n  setMatrix(property: ShaderProperty, value: Matrix);\n\n  setMatrix(property: string | ShaderProperty, value: Matrix): void {\n    this._setPropertyValue(property, ShaderPropertyType.Matrix, value);\n  }\n\n  /**\n   * Get color by shader property name.\n   * @param propertyName - Shader property name\n   * @returns Color\n   */\n  getColor(propertyName: string): Color;\n\n  /**\n   * Get color by shader property.\n   * @param property - Shader property, use `Shader.getPropertyByName` to get\n   * @returns Color\n   */\n  getColor(property: ShaderProperty): Color;\n\n  getColor(property: string | ShaderProperty): Color {\n    return this.getPropertyValue(property);\n  }\n\n  /**\n   * Set color by shader property name.\n   * @remarks Correspondence includes vec4 shader property type.\n   * @param propertyName - Shader property name\n   * @param value - Color\n   */\n  setColor(propertyName: string, value: Color): void;\n\n  /**\n   * Set color by shader property.\n   * @remarks Correspondence includes vec4 shader property type.\n   * @param property - Shader property, use `Shader.getPropertyByName` to get\n   * @param value - Color\n   */\n  setColor(property: ShaderProperty, value: Color): void;\n\n  setColor(property: string | ShaderProperty, value: Color): void {\n    this._setPropertyValue(property, ShaderPropertyType.Color, value);\n  }\n\n  /**\n   * Get texture by shader property name.\n   * @param propertyName - Shader property name\n   * @returns Texture\n   */\n  getTexture(propertyName: string): Texture;\n\n  /**\n   * Get texture by shader property.\n   * @param property - Shader property, use `Shader.getPropertyByName` to get\n   * @returns Texture\n   */\n  getTexture(property: ShaderProperty): Texture;\n\n  getTexture(property: string | ShaderProperty): Texture {\n    return this.getPropertyValue(property);\n  }\n\n  /**\n   * Set texture by shader property name.\n   * @param propertyName - Shader property name\n   * @param value - Texture\n   */\n  setTexture(propertyName: string, value: Texture): void;\n\n  /**\n   * Set texture by shader property.\n   * @param property - Shader property, use `Shader.getPropertyByName` to get\n   * @param value - Texture\n   */\n  setTexture(property: ShaderProperty, value: Texture): void;\n\n  setTexture(property: string | ShaderProperty, value: Texture): void {\n    if (this._getRefCount() > 0) {\n      const lastValue = this.getPropertyValue<Texture>(property);\n      lastValue && lastValue._addRefCount(-1);\n      value && value._addRefCount(1);\n    }\n    this._setPropertyValue(property, ShaderPropertyType.Texture, value);\n  }\n\n  /**\n   * Get texture array by shader property name.\n   * @param propertyName - Shader property name\n   * @returns Texture array\n   */\n  getTextureArray(propertyName: string): Texture[];\n\n  /**\n   * Get texture array by shader property.\n   * @param property - Shader property, use `Shader.getPropertyByName` to get\n   * @returns Texture array\n   */\n  getTextureArray(property: ShaderProperty): Texture[];\n\n  getTextureArray(property: string | ShaderProperty): Texture[] {\n    return this.getPropertyValue(property);\n  }\n\n  /**\n   * Set texture array by shader property name.\n   * @param propertyName - Shader property name\n   * @param value - Texture array\n   */\n  setTextureArray(propertyName: string, value: Texture[]): void;\n\n  /**\n   * Set texture array by shader property.\n   * @param property - Shader property, use `Shader.getPropertyByName` to get\n   * @param value - Texture array\n   */\n  setTextureArray(property: ShaderProperty, value: Texture[]): void;\n\n  setTextureArray(property: string | ShaderProperty, value: Texture[]): void {\n    if (this._getRefCount() > 0) {\n      const lastValue = this.getPropertyValue<Texture[]>(property);\n      if (lastValue) {\n        for (let i = 0, n = lastValue.length; i < n; i++) {\n          lastValue[i]._addRefCount(-1);\n        }\n      }\n      if (value) {\n        for (let i = 0, n = value.length; i < n; i++) {\n          value[i]._addRefCount(1);\n        }\n      }\n    }\n    this._setPropertyValue(property, ShaderPropertyType.TextureArray, value);\n  }\n\n  /**\n   * Get shader property value set on this shaderData.\n   * @param property - Shader property\n   * @returns Property value\n   */\n  getPropertyValue<T extends ShaderPropertyValueType>(property: string | ShaderProperty): T {\n    if (typeof property === \"string\") {\n      property = Shader.getPropertyByName(property);\n    }\n    return this._propertyValueMap[property._uniqueId] as T;\n  }\n\n  /**\n   * Enable macro with name.\n   * @param macroName - Macro name\n   */\n  enableMacro(macroName: string): void;\n\n  /**\n   * Enable macro with name and value.\n   * @remarks Name and value will combine, it's equal the macro of \"name value\".\n   * @param name - Macro name\n   * @param value - Macro value\n   */\n  enableMacro(name: string, value: string): void;\n\n  /**\n   * Enable macro with shaderMacro.\n   * @param macro - Shader macro\n   */\n  enableMacro(macro: ShaderMacro): void;\n\n  enableMacro(macro: string | ShaderMacro, value?: string): void {\n    if (typeof macro === \"string\") {\n      macro = Shader.getMacroByName(macro, value);\n    }\n    const nameID = macro._nameId;\n    const lastMacro = this._macroMap[nameID];\n    if (lastMacro !== macro) {\n      const macroCollection = this._macroCollection;\n      lastMacro && macroCollection.disable(lastMacro);\n      macroCollection.enable(macro);\n      this._macroMap[nameID] = macro;\n    }\n  }\n\n  /**\n   * Disable macro.\n   * @param macroName - Macro name\n   */\n  disableMacro(macroName: string): void;\n\n  /**\n   * Disable macro.\n   * @param macro - Shader macro\n   */\n  disableMacro(macro: ShaderMacro): void;\n\n  disableMacro(macro: string | ShaderMacro): void {\n    let nameID: number;\n    if (typeof macro === \"string\") {\n      nameID = ShaderMacro._macroNameIdMap[macro];\n      if (nameID === undefined) {\n        return;\n      }\n    } else {\n      nameID = macro._nameId;\n    }\n\n    const currentMacro = this._macroMap[nameID];\n    if (currentMacro) {\n      this._macroCollection.disable(currentMacro);\n      delete this._macroMap[nameID];\n    }\n  }\n\n  /**\n   * Get shader macro array that are currently enabled for ShaderData.\n   */\n  getMacros(): ShaderMacro[];\n  /**\n   * Get shader macro array that are currently enabled for ShaderData.\n   * @param out - Shader macro array\n   */\n  getMacros(out: ShaderMacro[]): void;\n\n  getMacros(out?: ShaderMacro[]): ShaderMacro[] | void {\n    if (out) {\n      const macroMap = this._macroMap;\n      out.length = 0;\n      for (var key in macroMap) {\n        out.push(macroMap[key]);\n      }\n    } else {\n      return Object.values(this._macroMap);\n    }\n  }\n\n  /**\n   * Get all shader properties that have been set on this shaderData\n   * @returns  All shader properties\n   */\n  getProperties(): ShaderProperty[];\n\n  /**\n   * Get all shader properties that have been set on this shaderData\n   * @param out - All shader properties\n   */\n  getProperties(out: ShaderProperty[]): void;\n\n  getProperties(out?: ShaderProperty[]): void | ShaderProperty[] {\n    let properties: ShaderProperty[];\n    if (out) {\n      out.length = 0;\n      properties = out;\n    } else {\n      properties = [];\n    }\n\n    const propertyValueMap = this._propertyValueMap;\n    const propertyIdMap = Shader._propertyIdMap;\n    for (let key in propertyValueMap) {\n      properties.push(propertyIdMap[key]);\n    }\n\n    if (!out) {\n      return properties;\n    }\n  }\n\n  clone(): ShaderData {\n    const shaderData = new ShaderData(this._group);\n    this.cloneTo(shaderData);\n    return shaderData;\n  }\n\n  cloneTo(target: ShaderData): void {\n    CloneManager.deepCloneObject(this._macroCollection, target._macroCollection);\n    Object.assign(target._macroMap, this._macroMap);\n\n    const propertyValueMap = this._propertyValueMap;\n    const targetPropertyValueMap = target._propertyValueMap;\n    const keys = Object.keys(propertyValueMap);\n    for (let i = 0, n = keys.length; i < n; i++) {\n      const k = keys[i];\n      const property = <ShaderPropertyValueType>propertyValueMap[k];\n      if (property != null) {\n        if (typeof property === \"number\") {\n          targetPropertyValueMap[k] = property;\n        } else if (property instanceof Texture) {\n          targetPropertyValueMap[k] = property;\n        } else if (property instanceof Array || property instanceof Float32Array || property instanceof Int32Array) {\n          targetPropertyValueMap[k] = property.slice();\n        } else {\n          const targetProperty = targetPropertyValueMap[k];\n          if (targetProperty) {\n            targetProperty.copyFrom(property);\n          } else {\n            targetPropertyValueMap[k] = property.clone();\n          }\n        }\n      } else {\n        targetPropertyValueMap[k] = property;\n      }\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _setPropertyValue<T extends ShaderPropertyValueType>(\n    property: string | ShaderProperty,\n    type: ShaderPropertyType,\n    value: T\n  ): void {\n    if (typeof property === \"string\") {\n      property = Shader.getPropertyByName(property);\n    }\n\n    if (property._group !== this._group) {\n      if (property._group === undefined) {\n        property._group = this._group;\n      } else {\n        throw `Shader property ${property.name} has been used as ${ShaderDataGroup[property._group]} group.`;\n      }\n    }\n\n    if (property._type !== type) {\n      if (property._type === undefined) {\n        property._type = type;\n      } else {\n        throw `Shader property ${property.name} has been used as ${ShaderPropertyType[property._type]} type.`;\n      }\n    }\n\n    this._propertyValueMap[property._uniqueId] = value;\n  }\n\n  /**\n   * @internal\n   */\n  _getRefCount(): number {\n    return this._refCount;\n  }\n\n  /**\n   * @internal\n   */\n  _addRefCount(value: number): void {\n    this._refCount += value;\n    const properties = this._propertyValueMap;\n    for (const k in properties) {\n      const property = properties[k];\n      // @todo: Separate array to speed performance.\n      if (property && property instanceof Texture) {\n        property._addRefCount(value);\n      }\n    }\n  }\n}\n\nexport type ShaderPropertyValueType =\n  | number\n  | Vector2\n  | Vector3\n  | Vector4\n  | Color\n  | Matrix\n  | Texture\n  | Texture[]\n  | Int32Array\n  | Float32Array;\n","import { Color, Matrix } from \"@galacean/engine-math\";\nimport { ignoreClone } from \"../clone/CloneManager\";\nimport { Component } from \"../Component\";\nimport { Layer } from \"../Layer\";\nimport { ShadowType } from \"../shadow\";\n\n/**\n * Light base class.\n */\nexport abstract class Light extends Component {\n  /**\n   * Each type of light source is at most 10, beyond which it will not take effect.\n   * */\n  protected static _maxLight: number = 10;\n\n  /** Light Intensity */\n  intensity: number = 1;\n\n  /**\n   * Culling mask - which layers the light affect.\n   * @remarks Support bit manipulation, corresponding to `Layer`.\n   */\n  cullingMask: Layer = Layer.Everything;\n\n  /** How this light casts shadows. */\n  shadowType: ShadowType = ShadowType.None;\n  /** Shadow bias.*/\n  shadowBias: number = 1;\n  /** Shadow mapping normal-based bias. */\n  shadowNormalBias: number = 1;\n  /** Near plane value to use for shadow frustums. */\n  shadowNearPlane: number = 0.1;\n  /** Shadow intensity, the larger the value, the clearer and darker the shadow. */\n  shadowStrength: number = 1.0;\n\n  /** @internal */\n  @ignoreClone\n  _lightIndex: number = -1;\n\n  private _color: Color = new Color(1, 1, 1, 1);\n  private _viewMat: Matrix;\n  private _inverseViewMat: Matrix;\n  private _lightColor: Color = new Color();\n\n  /**\n   * Light Color.\n   */\n  get color(): Color {\n    return this._color;\n  }\n\n  set color(value: Color) {\n    if (this._color !== value) {\n      this._color.copyFrom(value);\n    }\n  }\n\n  /**\n   * View matrix.\n   */\n  get viewMatrix(): Matrix {\n    if (!this._viewMat) this._viewMat = new Matrix();\n    Matrix.invert(this.entity.transform.worldMatrix, this._viewMat);\n    return this._viewMat;\n  }\n\n  /**\n   * Inverse view matrix.\n   */\n  get inverseViewMatrix(): Matrix {\n    if (!this._inverseViewMat) this._inverseViewMat = new Matrix();\n    Matrix.invert(this.viewMatrix, this._inverseViewMat);\n    return this._inverseViewMat;\n  }\n\n  /**\n   * @internal\n   */\n  abstract get _shadowProjectionMatrix(): Matrix;\n\n  protected _getLightColor(): Color {\n    this._lightColor.r = this.color.r * this.intensity;\n    this._lightColor.g = this.color.g * this.intensity;\n    this._lightColor.b = this.color.b * this.intensity;\n    this._lightColor.a = this.color.a * this.intensity;\n    return this._lightColor;\n  }\n}\n","import { Matrix, Vector3 } from \"@galacean/engine-math\";\nimport { Shader, ShaderData } from \"../shader\";\nimport { ShaderProperty } from \"../shader/ShaderProperty\";\nimport { Light } from \"./Light\";\n\n/**\n * Directional light.\n */\nexport class DirectLight extends Light {\n  private static _cullingMaskProperty: ShaderProperty = Shader.getPropertyByName(\"u_directLightCullingMask\");\n  private static _colorProperty: ShaderProperty = Shader.getPropertyByName(\"u_directLightColor\");\n  private static _directionProperty: ShaderProperty = Shader.getPropertyByName(\"u_directLightDirection\");\n\n  private static _combinedData = {\n    cullingMask: new Int32Array(Light._maxLight * 2),\n    color: new Float32Array(Light._maxLight * 3),\n    direction: new Float32Array(Light._maxLight * 3)\n  };\n\n  /**\n   * @internal\n   */\n  static _updateShaderData(shaderData: ShaderData): void {\n    const data = DirectLight._combinedData;\n\n    shaderData.setIntArray(DirectLight._cullingMaskProperty, data.cullingMask);\n    shaderData.setFloatArray(DirectLight._colorProperty, data.color);\n    shaderData.setFloatArray(DirectLight._directionProperty, data.direction);\n  }\n\n  private _forward: Vector3 = new Vector3();\n\n  private _reverseDirection: Vector3 = new Vector3();\n\n  /**\n   * Get direction.\n   */\n  get direction(): Vector3 {\n    this.entity.transform.getWorldForward(this._forward);\n    return this._forward;\n  }\n\n  /**\n   * Get the opposite direction of the directional light direction.\n   */\n  get reverseDirection(): Vector3 {\n    Vector3.scale(this.direction, -1, this._reverseDirection);\n    return this._reverseDirection;\n  }\n\n  /**\n   * @internal\n   * @override\n   */\n  get _shadowProjectionMatrix(): Matrix {\n    throw \"Unknown!\";\n  }\n\n  /**\n   * @internal\n   */\n  _appendData(lightIndex: number): void {\n    const cullingMaskStart = lightIndex * 2;\n    const colorStart = lightIndex * 3;\n    const directionStart = lightIndex * 3;\n    const lightColor = this._getLightColor();\n    const direction = this.direction;\n\n    const data = DirectLight._combinedData;\n\n    const cullingMask = this.cullingMask;\n    data.cullingMask[cullingMaskStart] = cullingMask & 65535;\n    data.cullingMask[cullingMaskStart + 1] = (cullingMask >>> 16) & 65535;\n\n    data.color[colorStart] = lightColor.r;\n    data.color[colorStart + 1] = lightColor.g;\n    data.color[colorStart + 2] = lightColor.b;\n    data.direction[directionStart] = direction.x;\n    data.direction[directionStart + 1] = direction.y;\n    data.direction[directionStart + 2] = direction.z;\n  }\n\n  /**\n   * Mount to the current Scene.\n   * @internal\n   * @override\n   */\n  _onEnable(): void {\n    this.engine._lightManager._attachDirectLight(this);\n  }\n\n  /**\n   * Unmount from the current Scene.\n   * @internal\n   * @override\n   */\n  _onDisable(): void {\n    this.engine._lightManager._detachDirectLight(this);\n  }\n}\n","import { Matrix, Vector3 } from \"@galacean/engine-math\";\nimport { Shader, ShaderData } from \"../shader\";\nimport { ShaderProperty } from \"../shader/ShaderProperty\";\nimport { Light } from \"./Light\";\n\n/**\n * Point light.\n */\nexport class PointLight extends Light {\n  private static _cullingMaskProperty: ShaderProperty = Shader.getPropertyByName(\"u_pointLightCullingMask\");\n  private static _colorProperty: ShaderProperty = Shader.getPropertyByName(\"u_pointLightColor\");\n  private static _positionProperty: ShaderProperty = Shader.getPropertyByName(\"u_pointLightPosition\");\n  private static _distanceProperty: ShaderProperty = Shader.getPropertyByName(\"u_pointLightDistance\");\n\n  private static _combinedData = {\n    cullingMask: new Int32Array(Light._maxLight * 2),\n    color: new Float32Array(Light._maxLight * 3),\n    position: new Float32Array(Light._maxLight * 3),\n    distance: new Float32Array(Light._maxLight)\n  };\n\n  /**\n   * @internal\n   */\n  static _updateShaderData(shaderData: ShaderData): void {\n    const data = PointLight._combinedData;\n\n    shaderData.setIntArray(PointLight._cullingMaskProperty, data.cullingMask);\n    shaderData.setFloatArray(PointLight._colorProperty, data.color);\n    shaderData.setFloatArray(PointLight._positionProperty, data.position);\n    shaderData.setFloatArray(PointLight._distanceProperty, data.distance);\n  }\n\n  /** Defines a distance cutoff at which the light's intensity must be considered zero. */\n  distance: number = 100;\n\n  /**\n   * Get light position.\n   */\n  get position(): Vector3 {\n    return this.entity.transform.worldPosition;\n  }\n\n  /**\n   * @internal\n   * @override\n   */\n  get _shadowProjectionMatrix(): Matrix {\n    throw \"Unknown!\";\n  }\n\n  /**\n   * @internal\n   */\n  _appendData(lightIndex: number): void {\n    const cullingMaskStart = lightIndex * 2;\n    const colorStart = lightIndex * 3;\n    const positionStart = lightIndex * 3;\n    const distanceStart = lightIndex;\n\n    const lightColor = this._getLightColor();\n    const lightPosition = this.position;\n\n    const data = PointLight._combinedData;\n\n    const cullingMask = this.cullingMask;\n    data.cullingMask[cullingMaskStart] = cullingMask & 65535;\n    data.cullingMask[cullingMaskStart + 1] = (cullingMask >>> 16) & 65535;\n\n    data.color[colorStart] = lightColor.r;\n    data.color[colorStart + 1] = lightColor.g;\n    data.color[colorStart + 2] = lightColor.b;\n    data.position[positionStart] = lightPosition.x;\n    data.position[positionStart + 1] = lightPosition.y;\n    data.position[positionStart + 2] = lightPosition.z;\n    data.distance[distanceStart] = this.distance;\n  }\n\n  /**\n   * Mount to the current Scene.\n   * @internal\n   * @override\n   */\n  _onEnable(): void {\n    this.engine._lightManager._attachPointLight(this);\n  }\n\n  /**\n   * Unmount from the current Scene.\n   * @internal\n   * @override\n   */\n  _onDisable(): void {\n    this.engine._lightManager._detachPointLight(this);\n  }\n}\n","import { Matrix, Vector3 } from \"@galacean/engine-math\";\nimport { Shader, ShaderData } from \"../shader\";\nimport { ShaderProperty } from \"../shader/ShaderProperty\";\nimport { Light } from \"./Light\";\n\n/**\n * Spot light.\n */\nexport class SpotLight extends Light {\n  private static _cullingMaskProperty: ShaderProperty = Shader.getPropertyByName(\"u_spotLightCullingMask\");\n  private static _colorProperty: ShaderProperty = Shader.getPropertyByName(\"u_spotLightColor\");\n  private static _positionProperty: ShaderProperty = Shader.getPropertyByName(\"u_spotLightPosition\");\n  private static _directionProperty: ShaderProperty = Shader.getPropertyByName(\"u_spotLightDirection\");\n  private static _distanceProperty: ShaderProperty = Shader.getPropertyByName(\"u_spotLightDistance\");\n  private static _angleCosProperty: ShaderProperty = Shader.getPropertyByName(\"u_spotLightAngleCos\");\n  private static _penumbraCosProperty: ShaderProperty = Shader.getPropertyByName(\"u_spotLightPenumbraCos\");\n\n  private static _combinedData = {\n    cullingMask: new Int32Array(Light._maxLight * 2),\n    color: new Float32Array(Light._maxLight * 3),\n    position: new Float32Array(Light._maxLight * 3),\n    direction: new Float32Array(Light._maxLight * 3),\n    distance: new Float32Array(Light._maxLight),\n    angleCos: new Float32Array(Light._maxLight),\n    penumbraCos: new Float32Array(Light._maxLight)\n  };\n\n  /**\n   * @internal\n   */\n  static _updateShaderData(shaderData: ShaderData): void {\n    const data = SpotLight._combinedData;\n\n    shaderData.setIntArray(SpotLight._cullingMaskProperty, data.cullingMask);\n    shaderData.setFloatArray(SpotLight._colorProperty, data.color);\n    shaderData.setFloatArray(SpotLight._positionProperty, data.position);\n    shaderData.setFloatArray(SpotLight._directionProperty, data.direction);\n    shaderData.setFloatArray(SpotLight._distanceProperty, data.distance);\n    shaderData.setFloatArray(SpotLight._angleCosProperty, data.angleCos);\n    shaderData.setFloatArray(SpotLight._penumbraCosProperty, data.penumbraCos);\n  }\n\n  /** Defines a distance cutoff at which the light's intensity must be considered zero. */\n  distance: number = 100;\n  /** Angle, in radians, from centre of spotlight where falloff begins. */\n  angle: number = Math.PI / 6;\n  /** Angle, in radians, from falloff begins to ends. */\n  penumbra: number = Math.PI / 12;\n\n  private _forward: Vector3 = new Vector3();\n  private _inverseDirection: Vector3 = new Vector3();\n  private _projectMatrix: Matrix = new Matrix();\n\n  /**\n   * Get light position.\n   */\n  get position(): Vector3 {\n    return this.entity.transform.worldPosition;\n  }\n\n  /**\n   * Get light direction.\n   */\n  get direction(): Vector3 {\n    this.entity.transform.getWorldForward(this._forward);\n    return this._forward;\n  }\n\n  /**\n   * Get the opposite direction of the spotlight.\n   */\n  get reverseDirection(): Vector3 {\n    Vector3.scale(this.direction, -1, this._inverseDirection);\n    return this._inverseDirection;\n  }\n\n  /**\n   * @internal\n   * @override\n   */\n  get _shadowProjectionMatrix(): Matrix {\n    const matrix = this._projectMatrix;\n    const fov = Math.min(Math.PI / 2, this.angle * 2 * Math.sqrt(2));\n    Matrix.perspective(fov, 1, this.shadowNearPlane, this.distance + this.shadowNearPlane, matrix);\n    return matrix;\n  }\n\n  /**\n   * @internal\n   */\n  _appendData(lightIndex: number): void {\n    const cullingMaskStart = lightIndex * 2;\n    const colorStart = lightIndex * 3;\n    const positionStart = lightIndex * 3;\n    const directionStart = lightIndex * 3;\n    const distanceStart = lightIndex;\n    const penumbraCosStart = lightIndex;\n    const angleCosStart = lightIndex;\n\n    const color = this._getLightColor();\n    const position = this.position;\n    const direction = this.direction;\n\n    const data = SpotLight._combinedData;\n\n    const cullingMask = this.cullingMask;\n    data.cullingMask[cullingMaskStart] = cullingMask & 65535;\n    data.cullingMask[cullingMaskStart + 1] = (cullingMask >>> 16) & 65535;\n\n    data.color[colorStart] = color.r;\n    data.color[colorStart + 1] = color.g;\n    data.color[colorStart + 2] = color.b;\n    data.position[positionStart] = position.x;\n    data.position[positionStart + 1] = position.y;\n    data.position[positionStart + 2] = position.z;\n    data.direction[directionStart] = direction.x;\n    data.direction[directionStart + 1] = direction.y;\n    data.direction[directionStart + 2] = direction.z;\n    data.distance[distanceStart] = this.distance;\n    data.angleCos[angleCosStart] = Math.cos(this.angle);\n    data.penumbraCos[penumbraCosStart] = Math.cos(this.angle + this.penumbra);\n  }\n\n  /**\n   * Mount to the current Scene.\n   * @internal\n   * @override\n   */\n  _onEnable(): void {\n    this.engine._lightManager._attachSpotLight(this);\n  }\n\n  /**\n   * Unmount from the current Scene.\n   * @internal\n   * @override\n   */\n  _onDisable(): void {\n    this.engine._lightManager._detachSpotLight(this);\n  }\n}\n","import { DisorderedArray } from \"../DisorderedArray\";\nimport { ShaderData } from \"../shader\";\nimport { ShadowType } from \"../shadow\";\nimport { DirectLight } from \"./DirectLight\";\nimport { PointLight } from \"./PointLight\";\nimport { SpotLight } from \"./SpotLight\";\n\n/**\n * Light manager.\n */\nexport class LightManager {\n  /** @internal */\n  _spotLights: DisorderedArray<SpotLight> = new DisorderedArray();\n  /** @internal */\n  _pointLights: DisorderedArray<PointLight> = new DisorderedArray();\n  /** @internal */\n  _directLights: DisorderedArray<DirectLight> = new DisorderedArray();\n\n  /**\n   * @internal\n   */\n  _attachSpotLight(light: SpotLight): void {\n    light._lightIndex = this._spotLights.length;\n    this._spotLights.add(light);\n  }\n\n  /**\n   * @internal\n   */\n  _detachSpotLight(light: SpotLight): void {\n    const replaced = this._spotLights.deleteByIndex(light._lightIndex);\n    replaced && (replaced._lightIndex = light._lightIndex);\n    light._lightIndex = -1;\n  }\n\n  /**\n   * @internal\n   */\n  _attachPointLight(light: PointLight): void {\n    light._lightIndex = this._pointLights.length;\n    this._pointLights.add(light);\n  }\n\n  /**\n   * @internal\n   */\n  _detachPointLight(light: PointLight): void {\n    const replaced = this._pointLights.deleteByIndex(light._lightIndex);\n    replaced && (replaced._lightIndex = light._lightIndex);\n    light._lightIndex = -1;\n  }\n\n  /**\n   * @internal\n   */\n  _attachDirectLight(light: DirectLight): void {\n    light._lightIndex = this._directLights.length;\n    this._directLights.add(light);\n  }\n\n  /**\n   * @internal\n   */\n  _detachDirectLight(light: DirectLight): void {\n    const replaced = this._directLights.deleteByIndex(light._lightIndex);\n    replaced && (replaced._lightIndex = light._lightIndex);\n    light._lightIndex = -1;\n  }\n\n  /**\n   * @internal\n   */\n  _getSunLightIndex(): number {\n    const directLights = this._directLights;\n\n    let sunLightIndex = -1;\n    let maxIntensity = Number.NEGATIVE_INFINITY;\n    let hasShadowLight = false;\n    for (let i = 0, n = directLights.length; i < n; i++) {\n      const directLight = directLights.get(i);\n      if (directLight.shadowType !== ShadowType.None && !hasShadowLight) {\n        maxIntensity = Number.NEGATIVE_INFINITY;\n        hasShadowLight = true;\n      }\n      const intensity = directLight.intensity * directLight.color.getBrightness();\n      if (hasShadowLight) {\n        if (directLight.shadowType !== ShadowType.None && maxIntensity < intensity) {\n          maxIntensity = intensity;\n          sunLightIndex = i;\n        }\n      } else {\n        if (maxIntensity < intensity) {\n          maxIntensity = intensity;\n          sunLightIndex = i;\n        }\n      }\n    }\n    return sunLightIndex;\n  }\n\n  /**\n   * @internal\n   */\n  _updateShaderData(shaderData: ShaderData): void {\n    const spotLight = this._spotLights;\n    const pointLight = this._pointLights;\n    const directLight = this._directLights;\n    const spotLightCount = spotLight.length;\n    const pointLightCount = pointLight.length;\n    const directLightCount = directLight.length;\n\n    for (let i = 0, len = spotLightCount; i < len; i++) {\n      const light = spotLight.get(i);\n      light._appendData(i);\n    }\n\n    for (let i = 0, len = pointLightCount; i < len; i++) {\n      const light = pointLight.get(i);\n      light._appendData(i);\n    }\n\n    for (let i = 0, len = directLightCount; i < len; i++) {\n      const light = directLight.get(i);\n      light._appendData(i);\n    }\n\n    if (directLightCount) {\n      DirectLight._updateShaderData(shaderData);\n      shaderData.enableMacro(\"O3_DIRECT_LIGHT_COUNT\", directLightCount.toString());\n    } else {\n      shaderData.disableMacro(\"O3_DIRECT_LIGHT_COUNT\");\n    }\n\n    if (pointLightCount) {\n      PointLight._updateShaderData(shaderData);\n      shaderData.enableMacro(\"O3_POINT_LIGHT_COUNT\", pointLightCount.toString());\n    } else {\n      shaderData.disableMacro(\"O3_POINT_LIGHT_COUNT\");\n    }\n\n    if (spotLightCount) {\n      SpotLight._updateShaderData(shaderData);\n      shaderData.enableMacro(\"O3_SPOT_LIGHT_COUNT\", spotLightCount.toString());\n    } else {\n      shaderData.disableMacro(\"O3_SPOT_LIGHT_COUNT\");\n    }\n  }\n}\n","import { BlendOperation } from \"../enums/BlendOperation\";\nimport { BlendFactor } from \"../enums/BlendFactor\";\nimport { ColorWriteMask } from \"../enums/ColorWriteMask\";\n\n/**\n * The blend state of the render target.\n */\nexport class RenderTargetBlendState {\n  /** Whether to enable blend. */\n  enabled: boolean = false;\n  /** color (RGB) blend operation. */\n  colorBlendOperation: BlendOperation = BlendOperation.Add;\n  /** alpha (A) blend operation. */\n  alphaBlendOperation: BlendOperation = BlendOperation.Add;\n  /** color blend factor (RGB) for source. */\n  sourceColorBlendFactor: BlendFactor = BlendFactor.One;\n  /** alpha blend factor (A) for source. */\n  sourceAlphaBlendFactor: BlendFactor = BlendFactor.One;\n  /** color blend factor (RGB) for destination. */\n  destinationColorBlendFactor: BlendFactor = BlendFactor.Zero;\n  /** alpha blend factor (A) for destination. */\n  destinationAlphaBlendFactor: BlendFactor = BlendFactor.Zero;\n  /** color mask. */\n  colorWriteMask: ColorWriteMask = ColorWriteMask.All;\n}\n","import { Color } from \"@galacean/engine-math\";\nimport { GLCapabilityType } from \"../../base/Constant\";\nimport { IHardwareRenderer } from \"../../renderingHardwareInterface/IHardwareRenderer\";\nimport { BlendFactor } from \"../enums/BlendFactor\";\nimport { BlendOperation } from \"../enums/BlendOperation\";\nimport { ColorWriteMask } from \"../enums/ColorWriteMask\";\nimport { RenderState } from \"./RenderState\";\nimport { RenderTargetBlendState } from \"./RenderTargetBlendState\";\n\n/**\n * Blend state.\n */\nexport class BlendState {\n  private static _getGLBlendFactor(rhi: IHardwareRenderer, blendFactor: BlendFactor): number {\n    const gl = rhi.gl;\n\n    switch (blendFactor) {\n      case BlendFactor.Zero:\n        return gl.ZERO;\n      case BlendFactor.One:\n        return gl.ONE;\n      case BlendFactor.SourceColor:\n        return gl.SRC_COLOR;\n      case BlendFactor.OneMinusSourceColor:\n        return gl.ONE_MINUS_SRC_COLOR;\n      case BlendFactor.DestinationColor:\n        return gl.DST_COLOR;\n      case BlendFactor.OneMinusDestinationColor:\n        return gl.ONE_MINUS_DST_COLOR;\n      case BlendFactor.SourceAlpha:\n        return gl.SRC_ALPHA;\n      case BlendFactor.OneMinusSourceAlpha:\n        return gl.ONE_MINUS_SRC_ALPHA;\n      case BlendFactor.DestinationAlpha:\n        return gl.DST_ALPHA;\n      case BlendFactor.OneMinusDestinationAlpha:\n        return gl.ONE_MINUS_DST_ALPHA;\n      case BlendFactor.SourceAlphaSaturate:\n        return gl.SRC_ALPHA_SATURATE;\n      case BlendFactor.BlendColor:\n        return gl.CONSTANT_COLOR;\n      case BlendFactor.OneMinusBlendColor:\n        return gl.ONE_MINUS_CONSTANT_COLOR;\n    }\n  }\n\n  private static _getGLBlendOperation(rhi: IHardwareRenderer, blendOperation: BlendOperation): number {\n    const gl = rhi.gl;\n\n    switch (blendOperation) {\n      case BlendOperation.Add:\n        return gl.FUNC_ADD;\n      case BlendOperation.Subtract:\n        return gl.FUNC_SUBTRACT;\n      case BlendOperation.ReverseSubtract:\n        return gl.FUNC_REVERSE_SUBTRACT;\n      case BlendOperation.Min:\n        if (!rhi.canIUse(GLCapabilityType.blendMinMax)) {\n          throw new Error(\"BlendOperation.Min is not supported in this context\");\n        }\n        return gl.MIN; // in webgl1.0 is an extension\n      case BlendOperation.Max:\n        if (!rhi.canIUse(GLCapabilityType.blendMinMax)) {\n          throw new Error(\"BlendOperation.Max is not supported in this context\");\n        }\n        return gl.MAX; // in webgl1.0 is an extension\n    }\n  }\n\n  /** The blend state of the render target. */\n  readonly targetBlendState: RenderTargetBlendState = new RenderTargetBlendState();\n  /** Constant blend color. */\n  readonly blendColor: Color = new Color(0, 0, 0, 0);\n  /** Whether to use (Alpha-to-Coverage) technology. */\n  alphaToCoverage: boolean = false;\n\n  /**\n   * @internal\n   * Apply the current blend state by comparing with the last blend state.\n   */\n  _apply(hardwareRenderer: IHardwareRenderer, lastRenderState: RenderState): void {\n    this._platformApply(hardwareRenderer, lastRenderState.blendState);\n  }\n\n  private _platformApply(rhi: IHardwareRenderer, lastState: BlendState): void {\n    const gl = <WebGLRenderingContext>rhi.gl;\n    const lastTargetBlendState = lastState.targetBlendState;\n\n    const {\n      enabled,\n      colorBlendOperation,\n      alphaBlendOperation,\n      sourceColorBlendFactor,\n      destinationColorBlendFactor,\n      sourceAlphaBlendFactor,\n      destinationAlphaBlendFactor,\n      colorWriteMask\n    } = this.targetBlendState;\n\n    if (enabled !== lastTargetBlendState.enabled) {\n      if (enabled) {\n        gl.enable(gl.BLEND);\n      } else {\n        gl.disable(gl.BLEND);\n      }\n      lastTargetBlendState.enabled = enabled;\n    }\n\n    if (enabled) {\n      // apply blend factor.\n      if (\n        sourceColorBlendFactor !== lastTargetBlendState.sourceColorBlendFactor ||\n        destinationColorBlendFactor !== lastTargetBlendState.destinationColorBlendFactor ||\n        sourceAlphaBlendFactor !== lastTargetBlendState.sourceAlphaBlendFactor ||\n        destinationAlphaBlendFactor !== lastTargetBlendState.destinationAlphaBlendFactor\n      ) {\n        gl.blendFuncSeparate(\n          BlendState._getGLBlendFactor(rhi, sourceColorBlendFactor),\n          BlendState._getGLBlendFactor(rhi, destinationColorBlendFactor),\n          BlendState._getGLBlendFactor(rhi, sourceAlphaBlendFactor),\n          BlendState._getGLBlendFactor(rhi, destinationAlphaBlendFactor)\n        );\n        lastTargetBlendState.sourceColorBlendFactor = sourceColorBlendFactor;\n        lastTargetBlendState.destinationColorBlendFactor = destinationColorBlendFactor;\n        lastTargetBlendState.sourceAlphaBlendFactor = sourceAlphaBlendFactor;\n        lastTargetBlendState.destinationAlphaBlendFactor = destinationAlphaBlendFactor;\n      }\n\n      // apply blend operation.\n      if (\n        colorBlendOperation !== lastTargetBlendState.colorBlendOperation ||\n        alphaBlendOperation !== lastTargetBlendState.alphaBlendOperation\n      ) {\n        gl.blendEquationSeparate(\n          BlendState._getGLBlendOperation(rhi, colorBlendOperation),\n          BlendState._getGLBlendOperation(rhi, alphaBlendOperation)\n        );\n        lastTargetBlendState.colorBlendOperation = colorBlendOperation;\n        lastTargetBlendState.alphaBlendOperation = alphaBlendOperation;\n      }\n\n      // apply blend color.\n      const blendColor = this.blendColor;\n      if (!Color.equals(lastState.blendColor, blendColor)) {\n        gl.blendColor(blendColor.r, blendColor.g, blendColor.b, blendColor.a);\n        lastState.blendColor.copyFrom(blendColor);\n      }\n    }\n\n    // apply color mask.\n    if (colorWriteMask !== lastTargetBlendState.colorWriteMask) {\n      gl.colorMask(\n        (colorWriteMask & ColorWriteMask.Red) !== 0,\n        (colorWriteMask & ColorWriteMask.Green) !== 0,\n        (colorWriteMask & ColorWriteMask.Blue) !== 0,\n        (colorWriteMask & ColorWriteMask.Alpha) !== 0\n      );\n      lastTargetBlendState.colorWriteMask = colorWriteMask;\n    }\n\n    // apply alpha to coverage.\n    const alphaToCoverage = this.alphaToCoverage;\n    if (alphaToCoverage !== lastState.alphaToCoverage) {\n      if (alphaToCoverage) {\n        gl.enable(gl.SAMPLE_ALPHA_TO_COVERAGE);\n      } else {\n        gl.disable(gl.SAMPLE_ALPHA_TO_COVERAGE);\n      }\n      lastState.alphaToCoverage = alphaToCoverage;\n    }\n  }\n}\n","import { IHardwareRenderer } from \"../../renderingHardwareInterface/IHardwareRenderer\";\nimport { CompareFunction } from \"../enums/CompareFunction\";\nimport { RenderState } from \"./RenderState\";\n\n/**\n * Depth state.\n */\nexport class DepthState {\n  private static _getGLCompareFunction(rhi: IHardwareRenderer, compareFunction: CompareFunction): number {\n    const gl = rhi.gl;\n\n    switch (compareFunction) {\n      case CompareFunction.Never:\n        return gl.NEVER;\n      case CompareFunction.Less:\n        return gl.LESS;\n      case CompareFunction.Equal:\n        return gl.EQUAL;\n      case CompareFunction.LessEqual:\n        return gl.LEQUAL;\n      case CompareFunction.Greater:\n        return gl.GREATER;\n      case CompareFunction.NotEqual:\n        return gl.NOTEQUAL;\n      case CompareFunction.GreaterEqual:\n        return gl.GEQUAL;\n      case CompareFunction.Always:\n        return gl.ALWAYS;\n    }\n  }\n\n  /** Whether to enable the depth test. */\n  enabled: boolean = true;\n  /** Whether the depth value can be written.*/\n  writeEnabled: boolean = true;\n  /** Depth comparison function. */\n  compareFunction: CompareFunction = CompareFunction.Less;\n\n  /**\n   * @internal\n   * Apply the current depth state by comparing with the last depth state.\n   */\n  _apply(hardwareRenderer: IHardwareRenderer, lastRenderState: RenderState): void {\n    this._platformApply(hardwareRenderer, lastRenderState.depthState);\n  }\n\n  private _platformApply(rhi: IHardwareRenderer, lastState: DepthState): void {\n    const gl = <WebGLRenderingContext>rhi.gl;\n    const { enabled, compareFunction, writeEnabled } = this;\n\n    if (enabled != lastState.enabled) {\n      if (enabled) {\n        gl.enable(gl.DEPTH_TEST);\n      } else {\n        gl.disable(gl.DEPTH_TEST);\n      }\n      lastState.enabled = enabled;\n    }\n\n    if (enabled) {\n      // apply compare func.\n      if (compareFunction != lastState.compareFunction) {\n        gl.depthFunc(DepthState._getGLCompareFunction(rhi, compareFunction));\n        lastState.compareFunction = compareFunction;\n      }\n\n      // apply write enabled.\n      if (writeEnabled != lastState.writeEnabled) {\n        gl.depthMask(writeEnabled);\n        lastState.writeEnabled = writeEnabled;\n      }\n    }\n  }\n}\n","import { IHardwareRenderer } from \"../../renderingHardwareInterface/IHardwareRenderer\";\nimport { CullMode } from \"../enums/CullMode\";\nimport { RenderState } from \"./RenderState\";\n\n/**\n * Raster state.\n */\nexport class RasterState {\n  /** Specifies whether or not front- and/or back-facing polygons can be culled. */\n  cullMode: CullMode = CullMode.Back;\n  /** The multiplier by which an implementation-specific value is multiplied with to create a constant depth offset. */\n  depthBias: number = 0;\n  /** The scale factor for the variable depth offset for each polygon. */\n  slopeScaledDepthBias: number = 0;\n\n  /** @internal */\n  _cullFaceEnable: boolean = true;\n  /** @internal */\n  _frontFaceInvert: boolean = false;\n\n  /**\n   * @internal\n   */\n  _apply(hardwareRenderer: IHardwareRenderer, lastRenderState: RenderState, frontFaceInvert: boolean): void {\n    this._platformApply(hardwareRenderer, lastRenderState.rasterState, frontFaceInvert);\n  }\n\n  private _platformApply(rhi: IHardwareRenderer, lastState: RasterState, frontFaceInvert: boolean): void {\n    const gl = <WebGLRenderingContext>rhi.gl;\n    const { cullMode, depthBias, slopeScaledDepthBias } = this;\n\n    const cullFaceEnable = cullMode !== CullMode.Off;\n    if (cullFaceEnable !== lastState._cullFaceEnable) {\n      if (cullFaceEnable) {\n        gl.enable(gl.CULL_FACE);\n      } else {\n        gl.disable(gl.CULL_FACE);\n      }\n      lastState._cullFaceEnable = cullFaceEnable;\n    }\n\n    // apply front face.\n    if (cullFaceEnable) {\n      if (cullMode !== lastState.cullMode) {\n        if (cullMode == CullMode.Back) {\n          gl.cullFace(gl.BACK);\n        } else {\n          gl.cullFace(gl.FRONT);\n        }\n        lastState.cullMode = cullMode;\n      }\n    }\n\n    if (frontFaceInvert !== lastState._frontFaceInvert) {\n      if (frontFaceInvert) {\n        gl.frontFace(gl.CW);\n      } else {\n        gl.frontFace(gl.CCW);\n      }\n      lastState._frontFaceInvert = frontFaceInvert;\n    }\n\n    // apply polygonOffset.\n    if (!rhi._enableGlobalDepthBias) {\n      if (depthBias !== lastState.depthBias || slopeScaledDepthBias !== lastState.slopeScaledDepthBias) {\n        if (depthBias !== 0 || slopeScaledDepthBias !== 0) {\n          gl.enable(gl.POLYGON_OFFSET_FILL);\n          gl.polygonOffset(slopeScaledDepthBias, depthBias);\n        } else {\n          gl.disable(gl.POLYGON_OFFSET_FILL);\n        }\n        lastState.depthBias = depthBias;\n        lastState.slopeScaledDepthBias = slopeScaledDepthBias;\n      }\n    }\n  }\n}\n","import { IHardwareRenderer } from \"../../renderingHardwareInterface/IHardwareRenderer\";\nimport { CompareFunction } from \"../enums/CompareFunction\";\nimport { StencilOperation } from \"../enums/StencilOperation\";\nimport { RenderState } from \"./RenderState\";\n\n/**\n * Stencil state.\n */\nexport class StencilState {\n  private static _getGLCompareFunction(rhi: IHardwareRenderer, compareFunction: CompareFunction): number {\n    const gl = rhi.gl;\n\n    switch (compareFunction) {\n      case CompareFunction.Never:\n        return gl.NEVER;\n      case CompareFunction.Less:\n        return gl.LESS;\n      case CompareFunction.Equal:\n        return gl.EQUAL;\n      case CompareFunction.LessEqual:\n        return gl.LEQUAL;\n      case CompareFunction.Greater:\n        return gl.GREATER;\n      case CompareFunction.NotEqual:\n        return gl.NOTEQUAL;\n      case CompareFunction.GreaterEqual:\n        return gl.GEQUAL;\n      case CompareFunction.Always:\n        return gl.ALWAYS;\n    }\n  }\n\n  private static _getGLStencilOperation(rhi: IHardwareRenderer, compareFunction: StencilOperation): number {\n    const gl = rhi.gl;\n\n    switch (compareFunction) {\n      case StencilOperation.Keep:\n        return gl.KEEP;\n      case StencilOperation.Zero:\n        return gl.ZERO;\n      case StencilOperation.Replace:\n        return gl.REPLACE;\n      case StencilOperation.IncrementSaturate:\n        return gl.INCR;\n      case StencilOperation.DecrementSaturate:\n        return gl.DECR;\n      case StencilOperation.Invert:\n        return gl.INVERT;\n      case StencilOperation.IncrementWrap:\n        return gl.INCR_WRAP;\n      case StencilOperation.DecrementWrap:\n        return gl.DECR_WRAP;\n    }\n  }\n\n  /** Whether to enable stencil test. */\n  enabled: boolean = false;\n  /** Write the reference value of the stencil buffer. */\n  referenceValue: number = 0;\n  /** Specifying a bit-wise mask that is used to AND the reference value and the stored stencil value when the test is done. */\n  mask: number = 0xff;\n  /** Specifying a bit mask to enable or disable writing of individual bits in the stencil planes. */\n  writeMask: number = 0xff;\n  /** The comparison function of the reference value of the front face of the geometry and the current buffer storage value. */\n  compareFunctionFront: CompareFunction = CompareFunction.Always;\n  /** The comparison function of the reference value of the back of the geometry and the current buffer storage value. */\n  compareFunctionBack: CompareFunction = CompareFunction.Always;\n  /** specifying the function to use for front face when both the stencil test and the depth test pass. */\n  passOperationFront: StencilOperation = StencilOperation.Keep;\n  /** specifying the function to use for back face when both the stencil test and the depth test pass. */\n  passOperationBack: StencilOperation = StencilOperation.Keep;\n  /** specifying the function to use for front face when the stencil test fails. */\n  failOperationFront: StencilOperation = StencilOperation.Keep;\n  /** specifying the function to use for back face when the stencil test fails. */\n  failOperationBack: StencilOperation = StencilOperation.Keep;\n  /** specifying the function to use for front face when the stencil test passes, but the depth test fails. */\n  zFailOperationFront: StencilOperation = StencilOperation.Keep;\n  /** specifying the function to use for back face when the stencil test passes, but the depth test fails. */\n  zFailOperationBack: StencilOperation = StencilOperation.Keep;\n\n  /**\n   * @internal\n   */\n  _apply(hardwareRenderer: IHardwareRenderer, lastRenderState: RenderState): void {\n    this._platformApply(hardwareRenderer, lastRenderState.stencilState);\n  }\n\n  private _platformApply(rhi: IHardwareRenderer, lastState: StencilState): void {\n    const gl = <WebGLRenderingContext>rhi.gl;\n    const {\n      enabled,\n      referenceValue,\n      mask,\n      compareFunctionFront,\n      compareFunctionBack,\n      failOperationFront,\n      zFailOperationFront,\n      passOperationFront,\n      failOperationBack,\n      zFailOperationBack,\n      passOperationBack,\n      writeMask\n    } = this;\n\n    if (enabled != lastState.enabled) {\n      if (enabled) {\n        gl.enable(gl.STENCIL_TEST);\n      } else {\n        gl.disable(gl.STENCIL_TEST);\n      }\n      lastState.enabled = enabled;\n    }\n\n    if (enabled) {\n      // apply stencil func.\n      const referenceOrMaskChange = referenceValue !== lastState.referenceValue || mask !== lastState.mask;\n      if (referenceOrMaskChange || compareFunctionFront !== lastState.compareFunctionFront) {\n        gl.stencilFuncSeparate(\n          gl.FRONT,\n          StencilState._getGLCompareFunction(rhi, compareFunctionFront),\n          referenceValue,\n          mask\n        );\n        lastState.compareFunctionFront = compareFunctionFront;\n      }\n\n      if (referenceOrMaskChange || compareFunctionBack !== lastState.compareFunctionBack) {\n        gl.stencilFuncSeparate(gl.BACK, StencilState._getGLCompareFunction(rhi, compareFunctionBack), referenceValue, mask);\n        lastState.compareFunctionBack = this.compareFunctionBack;\n      }\n      if (referenceOrMaskChange) {\n        lastState.referenceValue = this.referenceValue;\n        lastState.mask = this.mask;\n      }\n\n      // apply stencil operation.\n      if (\n        failOperationFront !== lastState.failOperationFront ||\n        zFailOperationFront !== lastState.zFailOperationFront ||\n        passOperationFront !== lastState.passOperationFront\n      ) {\n        gl.stencilOpSeparate(\n          gl.FRONT,\n          StencilState._getGLStencilOperation(rhi, failOperationFront),\n          StencilState._getGLStencilOperation(rhi, zFailOperationFront),\n          StencilState._getGLStencilOperation(rhi, passOperationFront)\n        );\n        lastState.failOperationFront = failOperationFront;\n        lastState.zFailOperationFront = zFailOperationFront;\n        lastState.passOperationFront = passOperationFront;\n      }\n\n      if (\n        failOperationBack !== lastState.failOperationBack ||\n        zFailOperationBack !== lastState.zFailOperationBack ||\n        passOperationBack !== lastState.passOperationBack\n      ) {\n        gl.stencilOpSeparate(\n          gl.BACK,\n          StencilState._getGLStencilOperation(rhi, failOperationBack),\n          StencilState._getGLStencilOperation(rhi, zFailOperationBack),\n          StencilState._getGLStencilOperation(rhi, passOperationBack)\n        );\n        lastState.failOperationBack = failOperationBack;\n        lastState.zFailOperationBack = zFailOperationBack;\n        lastState.passOperationBack = passOperationBack;\n      }\n\n      // apply write mask.\n      if (writeMask !== lastState.writeMask) {\n        gl.stencilMask(writeMask);\n        lastState.writeMask = writeMask;\n      }\n    }\n  }\n}\n","import { Engine } from \"../../Engine\";\nimport { RenderQueueType } from \"../enums/RenderQueueType\";\nimport { BlendState } from \"./BlendState\";\nimport { DepthState } from \"./DepthState\";\nimport { RasterState } from \"./RasterState\";\nimport { StencilState } from \"./StencilState\";\n\n/**\n * Render state.\n */\nexport class RenderState {\n  /** Blend state. */\n  readonly blendState: BlendState = new BlendState();\n  /** Depth state. */\n  readonly depthState: DepthState = new DepthState();\n  /** Stencil state. */\n  readonly stencilState: StencilState = new StencilState();\n  /** Raster state. */\n  readonly rasterState: RasterState = new RasterState();\n\n  /** Render queue type. */\n  renderQueueType: RenderQueueType = RenderQueueType.Opaque;\n\n  /**\n   * @internal\n   */\n  _apply(engine: Engine, frontFaceInvert: boolean): void {\n    const hardwareRenderer = engine._hardwareRenderer;\n    const lastRenderState = engine._lastRenderState;\n    this.blendState._apply(hardwareRenderer, lastRenderState);\n    this.depthState._apply(hardwareRenderer, lastRenderState);\n    this.stencilState._apply(hardwareRenderer, lastRenderState);\n    this.rasterState._apply(hardwareRenderer, lastRenderState, frontFaceInvert);\n  }\n}\n","import { IClone } from \"@galacean/engine-design\";\nimport { RefObject } from \"../asset/RefObject\";\nimport { CloneManager } from \"../clone/CloneManager\";\nimport { Engine } from \"../Engine\";\nimport { MeshRenderElement } from \"../RenderPipeline/MeshRenderElement\";\nimport { SpriteElement } from \"../RenderPipeline/SpriteElement\";\nimport { ShaderDataGroup } from \"../shader/enums/ShaderDataGroup\";\nimport { Shader } from \"../shader/Shader\";\nimport { ShaderData } from \"../shader/ShaderData\";\nimport { RenderState } from \"../shader/state/RenderState\";\n\n/**\n * Material.\n */\nexport class Material extends RefObject implements IClone {\n  /** Name. */\n  name: string;\n  /** Shader data. */\n  readonly shaderData: ShaderData = new ShaderData(ShaderDataGroup.Material);\n\n  /** @internal */\n  _shader: Shader;\n  /** @internal */\n  _renderStates: RenderState[] = []; // todo: later will as a part of shaderData when shader effect frame is OK, that is more powerful and flexible.\n\n  /**\n   * Shader used by the material.\n   */\n  get shader(): Shader {\n    return this._shader;\n  }\n\n  set shader(value: Shader) {\n    this._shader = value;\n\n    const renderStates = this._renderStates;\n    const lastStatesCount = renderStates.length;\n    const passCount = value.passes.length;\n\n    if (lastStatesCount < passCount) {\n      for (let i = lastStatesCount; i < passCount; i++) {\n        renderStates.push(new RenderState());\n      }\n    } else {\n      renderStates.length = passCount;\n    }\n  }\n\n  /**\n   * First Render state.\n   */\n  get renderState(): RenderState {\n    return this._renderStates[0];\n  }\n\n  /**\n   * Render states.\n   */\n  get renderStates(): Readonly<RenderState[]> {\n    return this._renderStates;\n  }\n\n  /**\n   * Create a material instance.\n   * @param engine - Engine to which the material belongs\n   * @param shader - Shader used by the material\n   */\n  constructor(engine: Engine, shader: Shader) {\n    super(engine);\n    this.shader = shader;\n  }\n\n  /**\n   * Clone and return the instance.\n   */\n  clone(): Material {\n    const dest = new Material(this._engine, this.shader);\n    this.cloneTo(dest);\n    return dest;\n  }\n\n  /**\n   * Clone to the target material.\n   * @param target - target material\n   */\n  cloneTo(target: Material): void {\n    target.shader = this.shader;\n    this.shaderData.cloneTo(target.shaderData);\n    CloneManager.deepCloneObject(this.renderStates, target.renderStates);\n  }\n\n  /**\n   * @override\n   */\n  _addRefCount(value: number): void {\n    super._addRefCount(value);\n    this.shaderData._addRefCount(value);\n  }\n\n  /**\n   * @internal\n   * @todo:temporary solution\n   */\n  _preRender(renderElement: MeshRenderElement | SpriteElement) {}\n\n  /**\n   * @override\n   */\n  protected _onDestroy(): void {}\n}\n","/**\n * Class pool utils.\n */\nexport class ClassPool<T> {\n  private _elementPoolIndex: number = 0;\n  private _elementPool: T[] = [];\n  private _type: new () => T;\n\n  constructor(type: new () => T) {\n    this._type = type;\n  }\n\n  /**\n   * Get element from pool.\n   */\n  getFromPool(): T {\n    const { _elementPoolIndex: index, _elementPool: pool } = this;\n    this._elementPoolIndex++;\n    if (pool.length === index) {\n      const element = new this._type();\n      pool.push(element);\n      return element;\n    } else {\n      return pool[index];\n    }\n  }\n\n  /**\n   * Reset pool.\n   */\n  resetPool(): void {\n    this._elementPoolIndex = 0;\n  }\n}\n","import { Material } from \"../material/Material\";\nimport { Renderer } from \"../Renderer\";\nimport { ShaderPass } from \"../shader\";\nimport { RenderState } from \"../shader/state/RenderState\";\n\nexport class RenderElement {\n  component: Renderer;\n  material: Material;\n  multiRenderData: boolean;\n  renderState: RenderState;\n  shaderPass: ShaderPass;\n}\n","import { Mesh } from \"../graphic/Mesh\";\nimport { SubMesh } from \"../graphic/SubMesh\";\nimport { Material } from \"../material/Material\";\nimport { Renderer } from \"../Renderer\";\nimport { ShaderPass } from \"../shader/ShaderPass\";\nimport { RenderState } from \"../shader/state/RenderState\";\nimport { RenderElement } from \"./RenderElement\";\n\n/**\n * Render element.\n */\nexport class MeshRenderElement extends RenderElement {\n  /** Mesh. */\n  mesh: Mesh;\n  /** Sub mesh. */\n  subMesh: SubMesh;\n\n  setValue(\n    component: Renderer,\n    mesh: Mesh,\n    subMesh: SubMesh,\n    material: Material,\n    renderState: RenderState,\n    shaderPass: ShaderPass\n  ): void {\n    this.component = component;\n    this.mesh = mesh;\n    this.subMesh = subMesh;\n    this.material = material;\n    this.renderState = renderState;\n    this.shaderPass = shaderPass;\n  }\n}\n","import { Camera } from \"../Camera\";\nimport { Shader } from \"../shader\";\nimport { VirtualCamera } from \"../VirtualCamera\";\n\n/**\n * @internal\n * Rendering context.\n */\nexport class RenderContext {\n  /** @internal */\n  static _vpMatrixProperty = Shader.getPropertyByName(\"u_VPMat\");\n\n  private static _viewMatrixProperty = Shader.getPropertyByName(\"u_viewMat\");\n  private static _projectionMatrixProperty = Shader.getPropertyByName(\"u_projMat\");\n\n  camera: Camera;\n  virtualCamera: VirtualCamera;\n\n  applyVirtualCamera(virtualCamera: VirtualCamera): void {\n    this.virtualCamera = virtualCamera;\n    const shaderData = this.camera.shaderData;\n    shaderData.setMatrix(RenderContext._viewMatrixProperty, virtualCamera.viewMatrix);\n    shaderData.setMatrix(RenderContext._projectionMatrixProperty, virtualCamera.projectionMatrix);\n    shaderData.setMatrix(RenderContext._vpMatrixProperty, virtualCamera.viewProjectionMatrix);\n  }\n}\n","import { RenderData2D } from \"../2d/data/RenderData2D\";\nimport { Material } from \"../material/Material\";\nimport { Renderer } from \"../Renderer\";\nimport { ShaderPass } from \"../shader\";\nimport { RenderState } from \"../shader/state/RenderState\";\nimport { Texture2D } from \"../texture\";\nimport { RenderElement } from \"./RenderElement\";\n\nexport class SpriteElement extends RenderElement {\n  renderData: RenderData2D;\n  texture: Texture2D;\n\n  constructor() {\n    super();\n    this.multiRenderData = false;\n  }\n\n  setValue(\n    component: Renderer,\n    renderDate: RenderData2D,\n    material: Material,\n    texture: Texture2D,\n    renderState: RenderState,\n    shaderPass: ShaderPass\n  ): void {\n    this.component = component;\n    this.renderData = renderDate;\n    this.material = material;\n    this.texture = texture;\n    this.renderState = renderState;\n    this.shaderPass = shaderPass;\n  }\n}\n","import { RenderData2D } from \"../2d/data/RenderData2D\";\nimport { Material } from \"../material/Material\";\nimport { Renderer } from \"../Renderer\";\nimport { RenderElement } from \"./RenderElement\";\n\nexport class SpriteMaskElement extends RenderElement {\n  renderData: RenderData2D;\n  isAdd: boolean = true;\n\n  constructor() {\n    super();\n    this.multiRenderData = false;\n  }\n\n  setValue(component: Renderer, renderData: RenderData2D, material: Material): void {\n    this.component = component;\n    this.renderData = renderData;\n    this.material = material;\n  }\n}\n","/**\n * Sprite mask interaction.\n */\nexport enum SpriteMaskInteraction {\n  /** The sprite will not interact with the masking system. */\n  None,\n  /** The sprite will be visible only in areas where a mask is present. */\n  VisibleInsideMask,\n  /** The sprite will be visible only in areas where no mask is present. */\n  VisibleOutsideMask\n}\n","import { BoundingBox, Matrix, Vector3, Vector4 } from \"@galacean/engine-math\";\nimport { Component } from \"./Component\";\nimport { dependentComponents } from \"./ComponentsDependencies\";\nimport { Entity } from \"./Entity\";\nimport { RenderContext } from \"./RenderPipeline/RenderContext\";\nimport { Transform, TransformModifyFlags } from \"./Transform\";\nimport { assignmentClone, deepClone, ignoreClone, shallowClone } from \"./clone/CloneManager\";\nimport { Material } from \"./material/Material\";\nimport { Shader } from \"./shader\";\nimport { ShaderData } from \"./shader/ShaderData\";\nimport { ShaderMacroCollection } from \"./shader/ShaderMacroCollection\";\nimport { ShaderDataGroup } from \"./shader/enums/ShaderDataGroup\";\n\n/**\n * Basis for all renderers.\n * @decorator `@dependentComponents(Transform)`\n */\n@dependentComponents(Transform)\nexport class Renderer extends Component {\n  private static _tempVector0 = new Vector3();\n\n  private static _receiveShadowMacro = Shader.getMacroByName(\"OASIS_RECEIVE_SHADOWS\");\n  private static _localMatrixProperty = Shader.getPropertyByName(\"u_localMat\");\n  private static _worldMatrixProperty = Shader.getPropertyByName(\"u_modelMat\");\n  private static _mvMatrixProperty = Shader.getPropertyByName(\"u_MVMat\");\n  private static _mvpMatrixProperty = Shader.getPropertyByName(\"u_MVPMat\");\n  private static _mvInvMatrixProperty = Shader.getPropertyByName(\"u_MVInvMat\");\n  private static _normalMatrixProperty = Shader.getPropertyByName(\"u_normalMat\");\n  private static _rendererLayerProperty = Shader.getPropertyByName(\"oasis_RendererLayer\");\n\n  /** ShaderData related to renderer. */\n  @deepClone\n  readonly shaderData: ShaderData = new ShaderData(ShaderDataGroup.Renderer);\n\n  /** @internal */\n  @ignoreClone\n  _distanceForSort: number;\n  /** @internal */\n  @ignoreClone\n  _onUpdateIndex: number = -1;\n  /** @internal */\n  @ignoreClone\n  _rendererIndex: number = -1;\n  /** @internal */\n  @ignoreClone\n  _globalShaderMacro: ShaderMacroCollection = new ShaderMacroCollection();\n  /** @internal */\n  @deepClone\n  _bounds: BoundingBox = new BoundingBox();\n  @ignoreClone\n  _renderFrameCount: number;\n\n  @ignoreClone\n  protected _overrideUpdate: boolean = false;\n  @shallowClone\n  protected _materials: Material[] = [];\n  @ignoreClone\n  protected _dirtyUpdateFlag: number = 0;\n\n  @ignoreClone\n  private _mvMatrix: Matrix = new Matrix();\n  @ignoreClone\n  private _mvpMatrix: Matrix = new Matrix();\n  @ignoreClone\n  private _mvInvMatrix: Matrix = new Matrix();\n  @ignoreClone\n  private _normalMatrix: Matrix = new Matrix();\n  @ignoreClone\n  private _materialsInstanced: boolean[] = [];\n  @ignoreClone\n  private _priority: number = 0;\n  @assignmentClone\n  private _receiveShadows: boolean = true;\n\n  @ignoreClone\n  protected _rendererLayer: Vector4 = new Vector4();\n\n  /**\n   * Whether it is culled in the current frame and does not participate in rendering.\n   */\n  get isCulled(): boolean {\n    return !(this._renderFrameCount === undefined || this._renderFrameCount === this._engine.time.frameCount - 1);\n  }\n\n  /**\n   * Whether receive shadow.\n   */\n  get receiveShadows(): boolean {\n    return this._receiveShadows;\n  }\n\n  set receiveShadows(value: boolean) {\n    if (this._receiveShadows !== value) {\n      if (value) {\n        this.shaderData.enableMacro(Renderer._receiveShadowMacro);\n      } else {\n        this.shaderData.disableMacro(Renderer._receiveShadowMacro);\n      }\n      this._receiveShadows = value;\n    }\n  }\n\n  /** Whether cast shadow. */\n  castShadows: boolean = true;\n\n  /**\n   * Material count.\n   */\n  get materialCount(): number {\n    return this._materials.length;\n  }\n\n  set materialCount(value: number) {\n    const materials = this._materials;\n    const materialsInstanced = this._materialsInstanced;\n\n    materials.length !== value && (materials.length = value);\n    materialsInstanced.length > value && (materialsInstanced.length = value);\n  }\n\n  /**\n   * The bounding volume of the renderer.\n   */\n  get bounds(): BoundingBox {\n    if (this._dirtyUpdateFlag & RendererUpdateFlags.WorldVolume) {\n      this._updateBounds(this._bounds);\n      this._dirtyUpdateFlag &= ~RendererUpdateFlags.WorldVolume;\n    }\n    return this._bounds;\n  }\n\n  /**\n   * The render priority of the renderer, lower values are rendered first and higher values are rendered last.\n   */\n  get priority(): number {\n    return this._priority;\n  }\n\n  set priority(value: number) {\n    this._priority = value;\n  }\n\n  /**\n   * @internal\n   */\n  constructor(entity: Entity) {\n    super(entity);\n    const prototype = Renderer.prototype;\n    const shaderData = this.shaderData;\n    this._overrideUpdate = this.update !== prototype.update;\n\n    shaderData._addRefCount(1);\n\n    this._onTransformChanged = this._onTransformChanged.bind(this);\n    this._registerEntityTransformListener();\n\n    shaderData.enableMacro(Renderer._receiveShadowMacro);\n    shaderData.setVector4(Renderer._rendererLayerProperty, this._rendererLayer);\n  }\n\n  /**\n   * Get the first instance material.\n   * @returns The first instance material\n   */\n  getInstanceMaterial(): Material | null;\n\n  /**\n   * Get the first instance material by index.\n   * @remarks Calling this function for the first time after the material is set will create an instance material to ensure that it is unique to the renderer.\n   * @param index - Material index\n   * @returns Instance material\n   */\n  getInstanceMaterial(index: number): Material | null;\n\n  getInstanceMaterial(index: number = 0): Material | null {\n    const materials = this._materials;\n    if (materials.length > index) {\n      const material = materials[index];\n      if (material) {\n        if (this._materialsInstanced[index]) {\n          return material;\n        } else {\n          return this._createInstanceMaterial(material, index);\n        }\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Get the first material.\n   * @returns The first material\n   */\n  getMaterial(): Material | null;\n\n  /**\n   * Get the first material by index.\n   * @param index - Material index\n   * @returns Material\n   */\n  getMaterial(index: number): Material | null;\n\n  getMaterial(index: number = 0): Material | null {\n    return this._materials[index] || null;\n  }\n\n  /**\n   * Set the first material.\n   * @param material - The first material\n   */\n  setMaterial(material: Material): void;\n\n  /**\n   * Set material by index.\n   * @param index - Material index\n   * @param material - The material\n   */\n  setMaterial(index: number, material: Material): void;\n\n  setMaterial(indexOrMaterial: number | Material, material: Material = null): void {\n    if (typeof indexOrMaterial === \"number\") {\n      this._setMaterial(indexOrMaterial, material);\n    } else {\n      this._setMaterial(0, indexOrMaterial);\n    }\n  }\n\n  /**\n   * Get all instance materials.\n   * @remarks Calling this function for the first time after the material is set will create an instance material to ensure that it is unique to the renderer.\n   * @returns All instance materials\n   */\n  getInstanceMaterials(): Readonly<Material[]> {\n    const materials = this._materials;\n    const materialsInstance = this._materialsInstanced;\n    for (let i = 0, n = materials.length; i < n; i++) {\n      if (!materialsInstance[i]) {\n        this._createInstanceMaterial(this._materials[i], i);\n      }\n    }\n    return materials;\n  }\n\n  /**\n   * Get all materials.\n   * @returns All materials\n   */\n  getMaterials(): Readonly<Material[]> {\n    return this._materials;\n  }\n\n  /**\n   * Set all materials.\n   * @param materials - All materials\n   */\n  setMaterials(materials: Material[]): void {\n    const count = materials.length;\n    const internalMaterials = this._materials;\n    const materialsInstanced = this._materialsInstanced;\n\n    for (let i = count, n = internalMaterials.length; i < n; i++) {\n      const internalMaterial = internalMaterials[i];\n      internalMaterial && internalMaterial._addRefCount(-1);\n    }\n\n    internalMaterials.length !== count && (internalMaterials.length = count);\n    materialsInstanced.length !== 0 && (materialsInstanced.length = 0);\n\n    for (let i = 0; i < count; i++) {\n      const internalMaterial = internalMaterials[i];\n      const material = materials[i];\n      if (internalMaterial !== material) {\n        internalMaterials[i] = material;\n        internalMaterial && internalMaterial._addRefCount(-1);\n        material && material._addRefCount(1);\n      }\n    }\n  }\n\n  update(deltaTime: number): void {}\n\n  /**\n   * @override\n   * @internal\n   */\n  _onEnable(): void {\n    const componentsManager = this.engine._componentsManager;\n    if (this._overrideUpdate) {\n      componentsManager.addOnUpdateRenderers(this);\n    }\n    componentsManager.addRenderer(this);\n  }\n\n  /**\n   * @override\n   * @internal\n   */\n  _onDisable(): void {\n    const componentsManager = this.engine._componentsManager;\n    if (this._overrideUpdate) {\n      componentsManager.removeOnUpdateRenderers(this);\n    }\n    componentsManager.removeRenderer(this);\n  }\n\n  /**\n   * @internal\n   */\n  _prepareRender(context: RenderContext): void {\n    const virtualCamera = context.virtualCamera;\n    const cameraPosition = virtualCamera.position;\n    const boundsCenter = this.bounds.getCenter(Renderer._tempVector0);\n\n    if (virtualCamera.isOrthographic) {\n      Vector3.subtract(boundsCenter, cameraPosition, boundsCenter);\n      this._distanceForSort = Vector3.dot(boundsCenter, virtualCamera.forward);\n    } else {\n      this._distanceForSort = Vector3.distanceSquared(boundsCenter, cameraPosition);\n    }\n\n    this._updateShaderData(context);\n    this._render(context);\n\n    // union camera global macro and renderer macro.\n    ShaderMacroCollection.unionCollection(\n      context.camera._globalShaderMacro,\n      this.shaderData._macroCollection,\n      this._globalShaderMacro\n    );\n  }\n\n  /**\n   * @internal\n   */\n  _onDestroy(): void {\n    this.entity.transform._updateFlagManager.removeListener(this._onTransformChanged);\n\n    this.shaderData._addRefCount(-1);\n\n    const materials = this._materials;\n    for (let i = 0, n = materials.length; i < n; i++) {\n      materials[i]?._addRefCount(-1);\n    }\n  }\n\n  protected _updateShaderData(context: RenderContext): void {\n    const entity = this.entity;\n    const worldMatrix = entity.transform.worldMatrix;\n    this._updateTransformShaderData(context, worldMatrix);\n\n    const layer = entity.layer;\n    this._rendererLayer.set(layer & 65535, (layer >>> 16) & 65535, 0, 0);\n  }\n\n  protected _updateTransformShaderData(context: RenderContext, worldMatrix: Matrix): void {\n    const shaderData = this.shaderData;\n    const virtualCamera = context.virtualCamera;\n\n    const mvMatrix = this._mvMatrix;\n    const mvpMatrix = this._mvpMatrix;\n    const mvInvMatrix = this._mvInvMatrix;\n    const normalMatrix = this._normalMatrix;\n\n    Matrix.multiply(virtualCamera.viewMatrix, worldMatrix, mvMatrix);\n    Matrix.multiply(virtualCamera.viewProjectionMatrix, worldMatrix, mvpMatrix);\n    Matrix.invert(mvMatrix, mvInvMatrix);\n    Matrix.invert(worldMatrix, normalMatrix);\n    normalMatrix.transpose();\n\n    shaderData.setMatrix(Renderer._localMatrixProperty, this.entity.transform.localMatrix);\n    shaderData.setMatrix(Renderer._worldMatrixProperty, worldMatrix);\n    shaderData.setMatrix(Renderer._mvMatrixProperty, mvMatrix);\n    shaderData.setMatrix(Renderer._mvpMatrixProperty, mvpMatrix);\n    shaderData.setMatrix(Renderer._mvInvMatrixProperty, mvInvMatrix);\n    shaderData.setMatrix(Renderer._normalMatrixProperty, normalMatrix);\n  }\n\n  protected _registerEntityTransformListener(): void {\n    this.entity.transform._updateFlagManager.addListener(this._onTransformChanged);\n  }\n\n  protected _updateBounds(worldBounds: BoundingBox): void {}\n\n  protected _render(context: RenderContext): void {\n    throw \"not implement\";\n  }\n\n  private _createInstanceMaterial(material: Material, index: number): Material {\n    const insMaterial: Material = material.clone();\n    insMaterial.name = insMaterial.name + \"(Instance)\";\n    material._addRefCount(-1);\n    insMaterial._addRefCount(1);\n    this._materialsInstanced[index] = true;\n    this._materials[index] = insMaterial;\n    return insMaterial;\n  }\n\n  private _setMaterial(index: number, material: Material): void {\n    const materials = this._materials;\n    if (index >= materials.length) {\n      materials.length = index + 1;\n    }\n\n    const internalMaterial = materials[index];\n    if (internalMaterial !== material) {\n      const materialsInstance = this._materialsInstanced;\n      index < materialsInstance.length && (materialsInstance[index] = false);\n\n      internalMaterial && internalMaterial._addRefCount(-1);\n      material && material._addRefCount(1);\n      materials[index] = material;\n    }\n  }\n\n  @ignoreClone\n  protected _onTransformChanged(type: TransformModifyFlags): void {\n    this._dirtyUpdateFlag |= RendererUpdateFlags.WorldVolume;\n  }\n}\n\n/**\n * @internal\n */\nexport enum RendererUpdateFlags {\n  /** Include world position and world bounds. */\n  WorldVolume = 0x1\n}\n","/**\n *  Static interface implement decorator.\n *  https://stackoverflow.com/questions/13955157/how-to-define-static-property-in-typescript-interface\n */\nexport function StaticInterfaceImplement<T>() {\n  return <U extends T>(constructor: U) => {\n    constructor;\n  };\n}\n\n","import { BoundingBox, Matrix, Vector2, Vector3 } from \"@galacean/engine-math\";\nimport { StaticInterfaceImplement } from \"../../base/StaticInterfaceImplement\";\nimport { SpriteMask } from \"../sprite\";\nimport { SpriteRenderer } from \"../sprite/SpriteRenderer\";\nimport { IAssembler } from \"./IAssembler\";\n\n/**\n * @internal\n */\n@StaticInterfaceImplement<IAssembler>()\nexport class SimpleSpriteAssembler {\n  static _rectangleTriangles: number[] = [0, 1, 2, 2, 1, 3];\n  static _worldMatrix: Matrix = new Matrix();\n\n  static resetData(renderer: SpriteRenderer | SpriteMask): void {\n    const { _renderData: renderData } = renderer;\n    const vertexCount = (renderData.vertexCount = 4);\n    const { positions, uvs } = renderData;\n    if (positions.length < vertexCount) {\n      for (let i = positions.length; i < vertexCount; i++) {\n        positions.push(new Vector3());\n        uvs.push(new Vector2());\n      }\n    }\n    renderData.triangles = SimpleSpriteAssembler._rectangleTriangles;\n  }\n\n  static updatePositions(renderer: SpriteRenderer | SpriteMask): void {\n    const { width, height, sprite } = renderer;\n    const { x: pivotX, y: pivotY } = sprite.pivot;\n    // Renderer's worldMatrix;\n    const { _worldMatrix: worldMatrix } = SimpleSpriteAssembler;\n    const { elements: wE } = worldMatrix;\n    // Parent's worldMatrix.\n    const { elements: pWE } = renderer.entity.transform.worldMatrix;\n    const sx = renderer.flipX ? -width : width;\n    const sy = renderer.flipY ? -height : height;\n    (wE[0] = pWE[0] * sx), (wE[1] = pWE[1] * sx), (wE[2] = pWE[2] * sx);\n    (wE[4] = pWE[4] * sy), (wE[5] = pWE[5] * sy), (wE[6] = pWE[6] * sy);\n    (wE[8] = pWE[8]), (wE[9] = pWE[9]), (wE[10] = pWE[10]);\n    wE[12] = pWE[12] - pivotX * wE[0] - pivotY * wE[4];\n    wE[13] = pWE[13] - pivotX * wE[1] - pivotY * wE[5];\n    wE[14] = pWE[14] - pivotX * wE[2] - pivotY * wE[6];\n\n    // ---------------\n    //  2 - 3\n    //  |   |\n    //  0 - 1\n    // ---------------\n    // Update positions.\n    const spritePositions = sprite._getPositions();\n    const { positions } = renderer._renderData;\n    for (let i = 0; i < 4; i++) {\n      const { x, y } = spritePositions[i];\n      positions[i].set(wE[0] * x + wE[4] * y + wE[12], wE[1] * x + wE[5] * y + wE[13], wE[2] * x + wE[6] * y + wE[14]);\n    }\n\n    BoundingBox.transform(sprite._getBounds(), worldMatrix, renderer._bounds);\n  }\n\n  static updateUVs(renderer: SpriteRenderer | SpriteMask): void {\n    const spriteUVs = renderer.sprite._getUVs();\n    const renderUVs = renderer._renderData.uvs;\n    const { x: left, y: bottom } = spriteUVs[0];\n    const { x: right, y: top } = spriteUVs[3];\n    renderUVs[0].set(left, bottom);\n    renderUVs[1].set(right, bottom);\n    renderUVs[2].set(left, top);\n    renderUVs[3].set(right, top);\n  }\n}\n","import { Color, Vector2, Vector3 } from \"@galacean/engine-math\";\n\n/**\n * @internal\n */\nexport class RenderData2D {\n  constructor(\n    public vertexCount: number,\n    public positions: Vector3[],\n    public uvs: Vector2[],\n    public triangles: number[] = null,\n    public color: Color = null\n  ) {}\n}\n","/**\n * Sprite mask layer.\n */\nexport enum SpriteMaskLayer {\n  /** Mask layer 0. */\n  Layer0 = 0x1,\n  /** Mask layer 1. */\n  Layer1 = 0x2,\n  /** Mask layer 2. */\n  Layer2 = 0x4,\n  /** Mask layer 3. */\n  Layer3 = 0x8,\n  /** Mask layer 4. */\n  Layer4 = 0x10,\n  /** Mask layer 5. */\n  Layer5 = 0x20,\n  /** Mask layer 6. */\n  Layer6 = 0x40,\n  /** Mask layer 7. */\n  Layer7 = 0x80,\n  /** Mask layer 8. */\n  Layer8 = 0x100,\n  /** Mask layer 9. */\n  Layer9 = 0x200,\n  /** Mask layer 10. */\n  Layer10 = 0x400,\n  /** Mask layer 11. */\n  Layer11 = 0x800,\n  /** Mask layer 12. */\n  Layer12 = 0x1000,\n  /** Mask layer 13. */\n  Layer13 = 0x2000,\n  /** Mask layer 14. */\n  Layer14 = 0x4000,\n  /** Mask layer 15. */\n  Layer15 = 0x8000,\n  /** Mask layer 16. */\n  Layer16 = 0x10000,\n  /** Mask layer 17. */\n  Layer17 = 0x20000,\n  /** Mask layer 18. */\n  Layer18 = 0x40000,\n  /** Mask layer 19. */\n  Layer19 = 0x80000,\n  /** Mask layer 20. */\n  Layer20 = 0x100000,\n  /** Mask layer 21. */\n  Layer21 = 0x200000,\n  /** Mask layer 22. */\n  Layer22 = 0x400000,\n  /** Mask layer 23. */\n  Layer23 = 0x800000,\n  /** Mask layer 24. */\n  Layer24 = 0x1000000,\n  /** Mask layer 25. */\n  Layer25 = 0x2000000,\n  /** Mask layer 26. */\n  Layer26 = 0x4000000,\n  /** Mask layer 27. */\n  Layer27 = 0x8000000,\n  /** Mask layer 28. */\n  Layer28 = 0x10000000,\n  /** Mask layer 29. */\n  Layer29 = 0x20000000,\n  /** Mask layer 30. */\n  Layer30 = 0x40000000,\n  /** Mask layer 31. */\n  Layer31 = 0x80000000,\n  /** All mask layers. */\n  Everything = 0xffffffff\n}\n","/**\n * Sprite Property Dirty Flag.\n */\nexport enum SpriteModifyFlags {\n  texture = 0x1,\n  size = 0x2,\n  atlasRotate = 0x4,\n  atlasRegion = 0x8,\n  atlasRegionOffset = 0x10,\n  region = 0x20,\n  pivot = 0x40,\n  border = 0x80\n}\n","import { BoundingBox } from \"@galacean/engine-math\";\nimport { assignmentClone, ignoreClone } from \"../../clone/CloneManager\";\nimport { ICustomClone } from \"../../clone/ComponentCloner\";\nimport { Entity } from \"../../Entity\";\nimport { Renderer, RendererUpdateFlags } from \"../../Renderer\";\nimport { RenderContext } from \"../../RenderPipeline/RenderContext\";\nimport { SpriteMaskElement } from \"../../RenderPipeline/SpriteMaskElement\";\nimport { Shader } from \"../../shader/Shader\";\nimport { ShaderProperty } from \"../../shader/ShaderProperty\";\nimport { SimpleSpriteAssembler } from \"../assembler/SimpleSpriteAssembler\";\nimport { RenderData2D } from \"../data/RenderData2D\";\nimport { SpriteMaskLayer } from \"../enums/SpriteMaskLayer\";\nimport { SpriteModifyFlags } from \"../enums/SpriteModifyFlags\";\nimport { Sprite } from \"./Sprite\";\n\n/**\n * A component for masking Sprites.\n */\nexport class SpriteMask extends Renderer implements ICustomClone {\n  /** @internal */\n  static _textureProperty: ShaderProperty = Shader.getPropertyByName(\"u_maskTexture\");\n  /** @internal */\n  static _alphaCutoffProperty: ShaderProperty = Shader.getPropertyByName(\"u_maskAlphaCutoff\");\n\n  /** The mask layers the sprite mask influence to. */\n  @assignmentClone\n  influenceLayers: number = SpriteMaskLayer.Everything;\n  /** @internal */\n  _maskElement: SpriteMaskElement;\n\n  /** @internal */\n  _renderData: RenderData2D;\n\n  @ignoreClone\n  private _sprite: Sprite = null;\n\n  @ignoreClone\n  private _automaticWidth: number = 0;\n  @ignoreClone\n  private _automaticHeight: number = 0;\n  @assignmentClone\n  private _customWidth: number = undefined;\n  @assignmentClone\n  private _customHeight: number = undefined;\n  @assignmentClone\n  private _flipX: boolean = false;\n  @assignmentClone\n  private _flipY: boolean = false;\n\n  @assignmentClone\n  private _alphaCutoff: number = 0.5;\n\n  /**\n   * Render width (in world coordinates).\n   *\n   * @remarks\n   * If width is set, return the set value,\n   * otherwise return `SpriteMask.sprite.width`.\n   */\n  get width(): number {\n    if (this._customWidth !== undefined) {\n      return this._customWidth;\n    } else {\n      this._dirtyUpdateFlag & SpriteMaskUpdateFlags.AutomaticSize && this._calDefaultSize();\n      return this._automaticWidth;\n    }\n  }\n\n  set width(value: number) {\n    if (this._customWidth !== value) {\n      this._customWidth = value;\n      this._dirtyUpdateFlag |= RendererUpdateFlags.WorldVolume;\n    }\n  }\n\n  /**\n   * Render height (in world coordinates).\n   *\n   * @remarks\n   * If height is set, return the set value,\n   * otherwise return `SpriteMask.sprite.height`.\n   */\n  get height(): number {\n    if (this._customHeight !== undefined) {\n      return this._customHeight;\n    } else {\n      this._dirtyUpdateFlag & SpriteMaskUpdateFlags.AutomaticSize && this._calDefaultSize();\n      return this._automaticHeight;\n    }\n  }\n\n  set height(value: number) {\n    if (this._customHeight !== value) {\n      this._customHeight = value;\n      this._dirtyUpdateFlag |= RendererUpdateFlags.WorldVolume;\n    }\n  }\n\n  /**\n   * Flips the sprite on the X axis.\n   */\n  get flipX(): boolean {\n    return this._flipX;\n  }\n\n  set flipX(value: boolean) {\n    if (this._flipX !== value) {\n      this._flipX = value;\n      this._dirtyUpdateFlag |= RendererUpdateFlags.WorldVolume;\n    }\n  }\n\n  /**\n   * Flips the sprite on the Y axis.\n   */\n  get flipY(): boolean {\n    return this._flipY;\n  }\n\n  set flipY(value: boolean) {\n    if (this._flipY !== value) {\n      this._flipY = value;\n      this._dirtyUpdateFlag |= RendererUpdateFlags.WorldVolume;\n    }\n  }\n\n  /**\n   * The Sprite to render.\n   */\n  get sprite(): Sprite {\n    return this._sprite;\n  }\n\n  set sprite(value: Sprite | null) {\n    const lastSprite = this._sprite;\n    if (lastSprite !== value) {\n      lastSprite && lastSprite._updateFlagManager.removeListener(this._onSpriteChange);\n      this._dirtyUpdateFlag |= SpriteMaskUpdateFlags.All;\n      if (value) {\n        value._updateFlagManager.addListener(this._onSpriteChange);\n        this.shaderData.setTexture(SpriteMask._textureProperty, value.texture);\n      } else {\n        this.shaderData.setTexture(SpriteMask._textureProperty, null);\n      }\n      this._sprite = value;\n    }\n  }\n\n  /**\n   * The minimum alpha value used by the mask to select the area of influence defined over the mask's sprite. Value between 0 and 1.\n   */\n  get alphaCutoff(): number {\n    return this._alphaCutoff;\n  }\n\n  set alphaCutoff(value: number) {\n    if (this._alphaCutoff !== value) {\n      this._alphaCutoff = value;\n      this.shaderData.setFloat(SpriteMask._alphaCutoffProperty, value);\n    }\n  }\n\n  /**\n   * @internal\n   */\n  constructor(entity: Entity) {\n    super(entity);\n    this._renderData = new RenderData2D(4, [], []);\n    SimpleSpriteAssembler.resetData(this);\n    this.setMaterial(this._engine._spriteMaskDefaultMaterial);\n    this.shaderData.setFloat(SpriteMask._alphaCutoffProperty, this._alphaCutoff);\n    this._onSpriteChange = this._onSpriteChange.bind(this);\n  }\n\n  /**\n   * @override\n   * @inheritdoc\n   */\n  _onDestroy(): void {\n    this._sprite?._updateFlagManager.removeListener(this._onSpriteChange);\n    this._sprite = null;\n    this._renderData = null;\n    super._onDestroy();\n  }\n\n  /**\n   * @internal\n   */\n  _cloneTo(target: SpriteMask): void {\n    target.sprite = this._sprite;\n  }\n\n  /**\n   * @override\n   */\n  protected _updateBounds(worldBounds: BoundingBox): void {\n    if (this.sprite) {\n      SimpleSpriteAssembler.updatePositions(this);\n    } else {\n      worldBounds.min.set(0, 0, 0);\n      worldBounds.max.set(0, 0, 0);\n    }\n  }\n\n  /**\n   * @override\n   * @inheritdoc\n   */\n  protected _render(context: RenderContext): void {\n    if (!this.sprite?.texture || !this.width || !this.height) {\n      return;\n    }\n\n    // Update position\n    if (this._dirtyUpdateFlag & RendererUpdateFlags.WorldVolume) {\n      SimpleSpriteAssembler.updatePositions(this);\n      this._dirtyUpdateFlag &= ~RendererUpdateFlags.WorldVolume;\n    }\n\n    // Update uv\n    if (this._dirtyUpdateFlag & SpriteMaskUpdateFlags.UV) {\n      SimpleSpriteAssembler.updateUVs(this);\n      this._dirtyUpdateFlag &= ~SpriteMaskUpdateFlags.UV;\n    }\n\n    const spriteMaskElementPool = this._engine._spriteMaskElementPool;\n    const maskElement = spriteMaskElementPool.getFromPool();\n    maskElement.setValue(this, this._renderData, this.getMaterial());\n    context.camera._renderPipeline._allSpriteMasks.add(this);\n    this._maskElement = maskElement;\n  }\n\n  private _calDefaultSize(): void {\n    const sprite = this._sprite;\n    if (sprite) {\n      this._automaticWidth = sprite.width;\n      this._automaticHeight = sprite.height;\n    } else {\n      this._automaticWidth = this._automaticHeight = 0;\n    }\n    this._dirtyUpdateFlag &= ~SpriteMaskUpdateFlags.AutomaticSize;\n  }\n\n  @ignoreClone\n  private _onSpriteChange(type: SpriteModifyFlags): void {\n    switch (type) {\n      case SpriteModifyFlags.texture:\n        this.shaderData.setTexture(SpriteMask._textureProperty, this.sprite.texture);\n        break;\n      case SpriteModifyFlags.size:\n        this._dirtyUpdateFlag |= SpriteMaskUpdateFlags.AutomaticSize;\n        if (this._customWidth === undefined || this._customHeight === undefined) {\n          this._dirtyUpdateFlag |= RendererUpdateFlags.WorldVolume;\n        }\n        break;\n      case SpriteModifyFlags.region:\n      case SpriteModifyFlags.atlasRegionOffset:\n        this._dirtyUpdateFlag |= SpriteMaskUpdateFlags.RenderData;\n        break;\n      case SpriteModifyFlags.atlasRegion:\n        this._dirtyUpdateFlag |= SpriteMaskUpdateFlags.UV;\n        break;\n      case SpriteModifyFlags.pivot:\n        this._dirtyUpdateFlag |= RendererUpdateFlags.WorldVolume;\n        break;\n      default:\n        break;\n    }\n  }\n}\n\n/**\n * @remarks Extends `RendererUpdateFlag`.\n */\nenum SpriteMaskUpdateFlags {\n  /** UV. */\n  UV = 0x2,\n  /** WorldVolume and UV . */\n  RenderData = 0x3,\n  /** Automatic Size. */\n  AutomaticSize = 0x4,\n  /** All. */\n  All = 0x7\n}\n","/**\n * Vertex element format.\n */\nexport enum VertexElementFormat {\n  /** 32-bit float */\n  Float,\n  /** Two-dimensional 32-bit float */\n  Vector2,\n  /** Three-dimensional 32-bit float */\n  Vector3,\n  /** Four-dimensional 32-bit float */\n  Vector4,\n  /** Four-dimensional 8-bit integer,range is [-128,127] */\n  Byte4,\n  /** Four-dimensional 8-bit Unsigned integer, range is [0,255] */\n  UByte4,\n  /** Four-dimensional 8-bit Normalized integer, range is [-1,1] */\n  NormalizedByte4,\n  /** Four-dimensional 8-bit Normalized unsigned integer, range is [0,1] */\n  NormalizedUByte4,\n  /** Two-dimensional 16-bit integer, range is[-32768, 32767] */\n  Short2,\n  /** Two-dimensional 16-bit Unsigned integer, range is [0, 65535] */\n  UShort2,\n  /** Two-dimensional 16-bit Unsigned integer, range is [-1, 1] */\n  NormalizedShort2,\n  /** Two-dimensional 16-bit Normalized unsigned integer, range is [0, 1] */\n  NormalizedUShort2,\n  /** Four-dimensional 16-bit integer, range is [-32768, 32767] */\n  Short4,\n  /** Four-dimensional 16-bit Unsigned integer, range is [0, 65535] */\n  UShort4,\n  /** Four-dimensional 16-bit Normalized integer, range is[-1, 1] */\n  NormalizedShort4,\n  /** Four-dimensional 16-bit Normalized unsigned integer, range is [0, 1] */\n  NormalizedUShort4\n}\n","/**\n * Buffer usage.\n */\nexport enum BufferUsage {\n  /** The buffer content are intended to be specified once, and used many times */\n  Static,\n  /** The buffer contents are intended to be respecified repeatedly, and used many times */\n  Dynamic,\n  /** The buffer contents are intended to be specified once, and used at most a few times */\n  Stream\n}\n","/**\n * Index format.\n */\nexport enum IndexFormat {\n  /** 8 bit */\n  UInt8,\n  /** 16 bit */\n  UInt16,\n  /** 32 bit */\n  UInt32\n}\n","import { DataType } from \"../base/Constant\";\nimport { BufferUsage } from \"./enums/BufferUsage\";\nimport { IndexFormat } from \"./enums/IndexFormat\";\nimport { VertexElementFormat } from \"./enums/VertexElementFormat\";\n\nexport interface ElementInfo {\n  size: number;\n  type: DataType;\n  normalized: boolean;\n}\n\nexport class BufferUtil {\n  /**\n   * @internal\n   */\n  static _getGLBufferUsage(gl: WebGLRenderingContext, bufferUsage: BufferUsage): number {\n    switch (bufferUsage) {\n      case BufferUsage.Static:\n        return gl.STATIC_DRAW;\n      case BufferUsage.Dynamic:\n        return gl.DYNAMIC_DRAW;\n      case BufferUsage.Stream:\n        return gl.STREAM_DRAW;\n    }\n  }\n\n  static _getGLIndexType(indexFormat: IndexFormat): DataType {\n    switch (indexFormat) {\n      case IndexFormat.UInt8:\n        return DataType.UNSIGNED_BYTE;\n      case IndexFormat.UInt16:\n        return DataType.UNSIGNED_SHORT;\n      case IndexFormat.UInt32:\n        return DataType.UNSIGNED_INT;\n    }\n  }\n\n  static _getGLIndexByteCount(indexFormat: IndexFormat): number {\n    switch (indexFormat) {\n      case IndexFormat.UInt8:\n        return 1;\n      case IndexFormat.UInt16:\n        return 2;\n      case IndexFormat.UInt32:\n        return 4;\n    }\n  }\n\n  /**\n   * @internal\n   */\n  static _getElementInfo(format: VertexElementFormat): ElementInfo {\n    let size: number;\n    let type: DataType;\n    let normalized: boolean = false;\n\n    switch (format) {\n      case VertexElementFormat.Float:\n        size = 1;\n        type = DataType.FLOAT;\n        break;\n      case VertexElementFormat.Vector2:\n        size = 2;\n        type = DataType.FLOAT;\n        break;\n      case VertexElementFormat.Vector3:\n        size = 3;\n        type = DataType.FLOAT;\n        break;\n      case VertexElementFormat.Vector4:\n        size = 4;\n        type = DataType.FLOAT;\n        break;\n      case VertexElementFormat.Byte4:\n        size = 4;\n        type = DataType.BYTE;\n        break;\n      case VertexElementFormat.UByte4:\n        size = 4;\n        type = DataType.UNSIGNED_BYTE;\n        break;\n      case VertexElementFormat.NormalizedByte4:\n        size = 4;\n        type = DataType.BYTE;\n        normalized = true;\n        break;\n      case VertexElementFormat.NormalizedUByte4:\n        size = 4;\n        type = DataType.UNSIGNED_BYTE;\n        normalized = true;\n        break;\n      case VertexElementFormat.Short2:\n        size = 2;\n        type = DataType.SHORT;\n        break;\n      case VertexElementFormat.UShort2:\n        size = 2;\n        type = DataType.UNSIGNED_SHORT;\n        break;\n      case VertexElementFormat.NormalizedShort2:\n        size = 2;\n        type = DataType.SHORT;\n        normalized = true;\n        break;\n      case VertexElementFormat.NormalizedUShort2:\n        size = 2;\n        type = DataType.UNSIGNED_SHORT;\n        normalized = true;\n        break;\n      case VertexElementFormat.Short4:\n        size = 4;\n        type = DataType.SHORT;\n        break;\n      case VertexElementFormat.UShort4:\n        size = 4;\n        type = DataType.UNSIGNED_SHORT;\n        break;\n      case VertexElementFormat.NormalizedShort4:\n        size = 4;\n        type = DataType.SHORT;\n        normalized = true;\n        break;\n      case VertexElementFormat.NormalizedUShort4:\n        size = 4;\n        type = DataType.UNSIGNED_SHORT;\n        normalized = true;\n        break;\n      default:\n        break;\n    }\n    return { size, type, normalized };\n  }\n}\n","import { BufferUtil, ElementInfo } from \"./BufferUtil\";\nimport { VertexElementFormat } from \"./enums/VertexElementFormat\";\n\n/**\n * Vertex element.\n */\nexport class VertexElement {\n  _glElementInfo: ElementInfo;\n\n  private _semantic: string;\n  private _offset: number;\n  private _format: VertexElementFormat;\n  private _bindingIndex: number;\n  private _instanceStepRate: number;\n\n  /**\n   * Vertex semantic.\n   */\n  get semantic(): string {\n    return this._semantic;\n  }\n\n  /**\n   * Vertex data byte offset.\n   */\n  get offset(): number {\n    return this._offset;\n  }\n\n  set offset(value: number) {\n    this._offset = value;\n  }\n\n  /**\n   * Vertex data format.\n   */\n  get format(): VertexElementFormat {\n    return this._format;\n  }\n\n  /**\n   * Vertex buffer binding index.\n   */\n  get bindingIndex(): number {\n    return this._bindingIndex;\n  }\n\n  set bindingIndex(value: number) {\n    this._bindingIndex = value;\n  }\n\n  /**\n   * Instance cadence, the number of instances drawn for each vertex in the buffer, non-instance elements must be 0.\n   */\n  get instanceStepRate(): number {\n    return this._instanceStepRate;\n  }\n\n  /**\n   * Create vertex element.\n   * @param semantic - Input vertex semantic\n   * @param offset - Vertex data byte offset\n   * @param format - Vertex data format\n   * @param bindingIndex - Vertex buffer binding index\n   * @param instanceStepRate - Instance cadence, the number of instances drawn for each vertex in the buffer, non-instance elements must be 0.\n   */\n  constructor(\n    semantic: string,\n    offset: number,\n    format: VertexElementFormat,\n    bindingIndex: number,\n    instanceStepRate: number = 0\n  ) {\n    this._semantic = semantic;\n    this._offset = offset;\n    this._format = format;\n    this._bindingIndex = bindingIndex;\n    this._glElementInfo = BufferUtil._getElementInfo(this.format);\n    this._instanceStepRate = Math.floor(instanceStepRate);\n  }\n}\n","/**\n * Buffer binding flag.\n */\nexport enum BufferBindFlag {\n  /** Vertex buffer binding flag */\n  VertexBuffer,\n  /** Index buffer binding flag */\n  IndexBuffer\n}\n","/**\n * Define update strategy when call bufferData/bufferSubData func.\n */\nexport enum SetDataOptions {\n  /** Can overwrite part of used buffer data and ensure correct rendering */\n  None,\n  /** Discard old buffer and create a new buffer, and won't affect the previous rendering */\n  Discard\n  ///** Need to ensure that the buffer data will not be overwritten, and won't interrupting rendering if setData immediately */\n  //NoOverwrite\n}\n","import { RefObject } from \"../asset/RefObject\";\nimport { Engine } from \"../Engine\";\nimport { IHardwareRenderer } from \"../renderingHardwareInterface/IHardwareRenderer\";\nimport { BufferUtil } from \"./BufferUtil\";\nimport { BufferBindFlag } from \"./enums/BufferBindFlag\";\nimport { BufferUsage } from \"./enums/BufferUsage\";\nimport { SetDataOptions } from \"./enums/SetDataOptions\";\n\n/**\n * Buffer.\n */\nexport class Buffer extends RefObject {\n  _glBindTarget: number;\n  _glBufferUsage: number;\n  _nativeBuffer: WebGLBuffer;\n\n  private _hardwareRenderer: IHardwareRenderer;\n  private _type: BufferBindFlag;\n  private _byteLength: number;\n  private _bufferUsage: BufferUsage;\n\n  /**\n   * Buffer binding flag.\n   */\n  get type(): BufferBindFlag {\n    return this._type;\n  }\n\n  /**\n   * Byte length.\n   */\n  get byteLength(): number {\n    return this._byteLength;\n  }\n\n  /**\n   * Buffer usage.\n   */\n  get bufferUsage(): BufferUsage {\n    return this._bufferUsage;\n  }\n\n  /**\n   * Create Buffer.\n   * @param engine - Engine\n   * @param type - Buffer binding flag\n   * @param byteLength - Byte length\n   * @param bufferUsage - Buffer usage\n   */\n  constructor(engine: Engine, type: BufferBindFlag, byteLength: number, bufferUsage?: BufferUsage);\n\n  /**\n   * Create Buffer.\n   * @param engine - Engine\n   * @param type - Buffer binding flag\n   * @param data - Byte\n   * @param bufferUsage - Buffer usage\n   */\n  constructor(engine: Engine, type: BufferBindFlag, data: ArrayBuffer | ArrayBufferView, bufferUsage?: BufferUsage);\n\n  constructor(\n    engine: Engine,\n    type: BufferBindFlag,\n    byteLengthOrData: number | ArrayBuffer | ArrayBufferView,\n    bufferUsage: BufferUsage = BufferUsage.Static\n  ) {\n    super(engine);\n    this._engine = engine;\n    this._type = type;\n    this._bufferUsage = bufferUsage;\n\n    const hardwareRenderer = engine._hardwareRenderer;\n    const gl: WebGLRenderingContext & WebGL2RenderingContext = hardwareRenderer.gl;\n    const glBufferUsage = BufferUtil._getGLBufferUsage(gl, bufferUsage);\n    const glBindTarget = type === BufferBindFlag.VertexBuffer ? gl.ARRAY_BUFFER : gl.ELEMENT_ARRAY_BUFFER;\n\n    this._nativeBuffer = gl.createBuffer();\n    this._hardwareRenderer = hardwareRenderer;\n    this._glBufferUsage = glBufferUsage;\n    this._glBindTarget = glBindTarget;\n\n    this.bind();\n    if (typeof byteLengthOrData === \"number\") {\n      this._byteLength = byteLengthOrData;\n      gl.bufferData(glBindTarget, byteLengthOrData, glBufferUsage);\n    } else {\n      this._byteLength = byteLengthOrData.byteLength;\n      gl.bufferData(glBindTarget, byteLengthOrData, glBufferUsage);\n    }\n    gl.bindBuffer(glBindTarget, null);\n  }\n\n  /**\n   * Bind buffer.\n   */\n  bind(): void {\n    const gl: WebGLRenderingContext & WebGL2RenderingContext = this._hardwareRenderer.gl;\n    gl.bindBuffer(this._glBindTarget, this._nativeBuffer);\n  }\n\n  /**\n   * Set buffer data.\n   * @param data - Input buffer data\n   */\n  setData(data: ArrayBuffer | ArrayBufferView): void;\n\n  /**\n   * Set buffer data.\n   * @param data - Input buffer data\n   * @param bufferByteOffset - buffer byte offset\n   */\n  setData(data: ArrayBuffer | ArrayBufferView, bufferByteOffset: number): void;\n\n  /**\n   * Set buffer data.\n   * @param data - Input buffer data\n   * @param bufferByteOffset - Buffer byte offset\n   * @param dataOffset - Buffer byte offset\n   * @param dataLength - Data length\n   */\n  setData(data: ArrayBuffer | ArrayBufferView, bufferByteOffset: number, dataOffset: number, dataLength?: number): void;\n\n  /**\n   * Set buffer data.\n   * @param data - Input buffer data\n   * @param bufferByteOffset - Buffer byte offset\n   * @param dataOffset - Buffer byte offset\n   * @param dataLength - Data length\n   * @param options - Update strategy: None/Discard/NoOverwrite\n   */\n  setData(\n    data: ArrayBuffer | ArrayBufferView,\n    bufferByteOffset: number,\n    dataOffset: number,\n    dataLength: number,\n    options: SetDataOptions\n  ): void;\n\n  setData(\n    data: ArrayBuffer | ArrayBufferView,\n    bufferByteOffset: number = 0,\n    dataOffset: number = 0,\n    dataLength?: number,\n    options: SetDataOptions = SetDataOptions.None\n  ): void {\n    const gl: WebGLRenderingContext & WebGL2RenderingContext = this._hardwareRenderer.gl;\n    const isWebGL2: boolean = this._hardwareRenderer.isWebGL2;\n    const glBindTarget: number = this._glBindTarget;\n    this.bind();\n\n    if (options === SetDataOptions.Discard) {\n      gl.bufferData(glBindTarget, this._byteLength, this._glBufferUsage);\n    }\n\n    // TypeArray is BYTES_PER_ELEMENT, unTypeArray is 1\n    const byteSize = (<Uint8Array>data).BYTES_PER_ELEMENT || 1;\n    const dataByteLength = dataLength ? byteSize * dataLength : data.byteLength;\n\n    if (dataOffset !== 0 || dataByteLength < data.byteLength) {\n      const isArrayBufferView = (<ArrayBufferView>data).byteOffset !== undefined;\n      if (isWebGL2 && isArrayBufferView) {\n        gl.bufferSubData(glBindTarget, bufferByteOffset, <ArrayBufferView>data, dataOffset, dataByteLength / byteSize);\n      } else {\n        const subData = new Uint8Array(\n          isArrayBufferView ? (<ArrayBufferView>data).buffer : <ArrayBuffer>data,\n          dataOffset * byteSize,\n          dataByteLength\n        );\n        gl.bufferSubData(glBindTarget, bufferByteOffset, subData);\n      }\n    } else {\n      gl.bufferSubData(glBindTarget, bufferByteOffset, data);\n    }\n    gl.bindBuffer(glBindTarget, null);\n  }\n\n  /**\n   * Get buffer data.\n   * @param data - Output buffer data\n   */\n  getData(data: ArrayBufferView): void;\n\n  /**\n   * Get buffer data.\n   * @param data - Output buffer data\n   * @param bufferByteOffset - Buffer byte offset\n   */\n  getData(data: ArrayBufferView, bufferByteOffset: number): void;\n\n  /**\n   * Get buffer data.\n   * @param data - Output buffer data\n   * @param bufferByteOffset - Buffer byte offset\n   * @param dataOffset - Output data offset\n   * @param dataLength - Output data length\n   */\n  getData(data: ArrayBufferView, bufferByteOffset: number, dataOffset: number, dataLength: number): void;\n\n  getData(data: ArrayBufferView, bufferByteOffset: number = 0, dataOffset: number = 0, dataLength?: number): void {\n    const isWebGL2: boolean = this._hardwareRenderer.isWebGL2;\n\n    if (isWebGL2) {\n      const gl: WebGLRenderingContext & WebGL2RenderingContext = this._hardwareRenderer.gl;\n      this.bind();\n      gl.getBufferSubData(this._glBindTarget, bufferByteOffset, data, dataOffset, dataLength);\n    } else {\n      throw \"Buffer is write-only on WebGL1.0 platforms.\";\n    }\n  }\n\n  /**\n   * @override\n   * Destroy.\n   */\n  _onDestroy() {\n    const gl: WebGLRenderingContext & WebGL2RenderingContext = this._hardwareRenderer.gl;\n    gl.deleteBuffer(this._nativeBuffer);\n    this._nativeBuffer = null;\n    this._hardwareRenderer = null;\n  }\n\n  /**\n   * @deprecated\n   */\n  resize(dataLength: number) {\n    this.bind();\n    const gl: WebGLRenderingContext & WebGL2RenderingContext = this._hardwareRenderer.gl;\n    gl.bufferData(this._glBindTarget, dataLength, this._glBufferUsage);\n    this._byteLength = dataLength;\n  }\n}\n","/**\n * Mesh topology.\n */\nexport enum MeshTopology {\n  /** Draws a single dot */\n  Points = 0,\n  /** Draws a line between a pair of vertices */\n  Lines = 1,\n  /** Draws a straight line to the next vertex, and connects the last vertex back to the first */\n  LineLoop = 2,\n  /** Draws a straight line to the next vertex. */\n  LineStrip = 3,\n  /** Draws a triangle for a group of three vertices */\n  Triangles = 4,\n  /** Draws a triangle strip */\n  TriangleStrip = 5,\n  /** Draws a triangle fan */\n  TriangleFan = 6\n}\n","import { IndexFormat } from \"./enums/IndexFormat\";\nimport { Buffer } from \"./Buffer\";\n\n/**\n * Index buffer binding.\n */\nexport class IndexBufferBinding {\n  /** @internal */\n  _buffer: Buffer;\n  /** @internal */\n  _format: IndexFormat;\n\n  /**\n   * Index buffer.\n   */\n  get buffer(): Buffer {\n    return this._buffer;\n  }\n\n  /**\n   * Index buffer format.\n   */\n  get format(): IndexFormat {\n    return this._format;\n  }\n\n  /**\n   * Create index buffer binding.\n   * @param buffer - Index buffer\n   * @param format - Index buffer format\n   */\n  constructor(buffer: Buffer, format: IndexFormat) {\n    this._buffer = buffer;\n    this._format = format;\n  }\n}\n","import { MeshTopology } from \"./enums/MeshTopology\";\n\n/**\n * Sub-mesh, mainly contains drawing information.\n */\nexport class SubMesh {\n  /** Start drawing offset. */\n  start: number;\n  /** Drawing count. */\n  count: number;\n  /** Drawing topology. */\n  topology: MeshTopology;\n\n  /**\n   * Create a sub-mesh.\n   * @param start - Start drawing offset\n   * @param count - Drawing count\n   * @param topology - Drawing topology\n   */\n  constructor(start: number = 0, count: number = 0, topology: MeshTopology = MeshTopology.Triangles) {\n    this.start = start;\n    this.count = count;\n    this.topology = topology;\n  }\n}\n","import { IPlatformPrimitive } from \"@galacean/engine-design/types/renderingHardwareInterface/IPlatformPrimitive\";\nimport { BoundingBox } from \"@galacean/engine-math\";\nimport { RefObject } from \"../asset/RefObject\";\nimport { Engine } from \"../Engine\";\nimport { BufferUtil } from \"../graphic/BufferUtil\";\nimport { MeshTopology } from \"../graphic/enums/MeshTopology\";\nimport { IndexBufferBinding } from \"../graphic/IndexBufferBinding\";\nimport { SubMesh } from \"../graphic/SubMesh\";\nimport { VertexBufferBinding } from \"../graphic/VertexBufferBinding\";\nimport { VertexElement } from \"../graphic/VertexElement\";\nimport { ShaderProgram } from \"../shader/ShaderProgram\";\nimport { UpdateFlagManager } from \"../UpdateFlagManager\";\n\n/**\n * Mesh.\n */\nexport abstract class Mesh extends RefObject {\n  /** Name. */\n  name: string;\n\n  /** @internal */\n  _vertexElementMap: Record<string, VertexElement> = {};\n  /** @internal */\n  _glIndexType: number;\n  /** @internal */\n  _glIndexByteCount: number;\n  /** @internal */\n  _bufferStructChanged: boolean;\n  /** @internal */\n  _platformPrimitive: IPlatformPrimitive;\n\n  /** @internal */\n  _instanceCount: number = 0;\n  /** @internal */\n  _vertexBufferBindings: VertexBufferBinding[] = [];\n  /** @internal */\n  _indexBufferBinding: IndexBufferBinding = null;\n  /** @internal */\n  _vertexElements: VertexElement[] = [];\n  /** @internal */\n  _enableVAO: boolean = true;\n  /** @internal */\n  _updateFlagManager: UpdateFlagManager = new UpdateFlagManager();\n\n  private _bounds: BoundingBox = new BoundingBox();\n  private _subMeshes: SubMesh[] = [];\n\n  /**\n   * The bounding volume of the mesh.\n   */\n  get bounds(): BoundingBox {\n    return this._bounds;\n  }\n\n  set bounds(value: BoundingBox) {\n    if (this._bounds !== value) {\n      this._bounds.copyFrom(value);\n    }\n  }\n\n  /**\n   * First sub-mesh. Rendered using the first material.\n   */\n  get subMesh(): SubMesh | null {\n    return this._subMeshes[0] || null;\n  }\n\n  /**\n   * A collection of sub-mesh, each sub-mesh can be rendered with an independent material.\n   */\n  get subMeshes(): Readonly<SubMesh[]> {\n    return this._subMeshes;\n  }\n\n  /**\n   * Create mesh.\n   * @param engine - Engine\n   * @param name - Mesh name\n   */\n  constructor(engine: Engine, name?: string) {\n    super(engine);\n    this.name = name;\n    this._platformPrimitive = this._engine._hardwareRenderer.createPlatformPrimitive(this);\n    this._onBoundsChanged = this._onBoundsChanged.bind(this);\n\n    const bounds = this._bounds;\n    // @ts-ignore\n    bounds.min._onValueChanged = this._onBoundsChanged;\n    // @ts-ignore\n    bounds.max._onValueChanged = this._onBoundsChanged;\n  }\n\n  /**\n   * Add sub-mesh, each sub-mesh can correspond to an independent material.\n   * @param subMesh - Start drawing offset, if the index buffer is set, it means the offset in the index buffer, if not set, it means the offset in the vertex buffer\n   * @returns Sub-mesh\n   */\n  addSubMesh(subMesh: SubMesh): SubMesh;\n\n  /**\n   * Add sub-mesh, each sub-mesh can correspond to an independent material.\n   * @param start - Start drawing offset, if the index buffer is set, it means the offset in the index buffer, if not set, it means the offset in the vertex buffer\n   * @param count - Drawing count, if the index buffer is set, it means the count in the index buffer, if not set, it means the count in the vertex buffer\n   * @param topology - Drawing topology, default is MeshTopology.Triangles\n   * @returns Sub-mesh\n   */\n  addSubMesh(start: number, count: number, topology?: MeshTopology): SubMesh;\n\n  addSubMesh(\n    startOrSubMesh: number | SubMesh,\n    count?: number,\n    topology: MeshTopology = MeshTopology.Triangles\n  ): SubMesh {\n    if (typeof startOrSubMesh === \"number\") {\n      startOrSubMesh = new SubMesh(startOrSubMesh, count, topology);\n    }\n    this._subMeshes.push(startOrSubMesh);\n    return startOrSubMesh;\n  }\n\n  /**\n   * Remove sub-mesh.\n   * @param subMesh - Sub-mesh needs to be removed\n   */\n  removeSubMesh(subMesh: SubMesh): void {\n    const subMeshes = this._subMeshes;\n    const index = subMeshes.indexOf(subMesh);\n    if (index !== -1) {\n      subMeshes.splice(index, 1);\n    }\n  }\n\n  /**\n   * Clear all sub-mesh.\n   */\n  clearSubMesh(): void {\n    this._subMeshes.length = 0;\n  }\n\n  /**\n   * @internal\n   */\n  _clearVertexElements(): void {\n    this._vertexElements.length = 0;\n    const vertexElementMap = this._vertexElementMap;\n    for (const k in vertexElementMap) {\n      delete vertexElementMap[k];\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _addVertexElement(element: VertexElement): void {\n    const { semantic } = element;\n    this._vertexElementMap[semantic] = element;\n    this._vertexElements.push(element);\n    this._updateFlagManager.dispatch(MeshModifyFlags.VertexElements);\n    this._bufferStructChanged = true;\n  }\n\n  /**\n   * @internal\n   */\n  _insertVertexElement(i: number, element: VertexElement): void {\n    const { semantic } = element;\n    this._vertexElementMap[semantic] = element;\n    this._vertexElements.splice(i, 0, element);\n    this._updateFlagManager.dispatch(MeshModifyFlags.VertexElements);\n    this._bufferStructChanged = true;\n  }\n\n  /**\n   * @internal\n   */\n  _setVertexBufferBinding(index: number, binding: VertexBufferBinding): void {\n    if (this._getRefCount() > 0) {\n      const lastBinding = this._vertexBufferBindings[index];\n      lastBinding && lastBinding._buffer._addRefCount(-1);\n      binding._buffer._addRefCount(1);\n    }\n    this._vertexBufferBindings[index] = binding;\n    this._bufferStructChanged = true;\n  }\n\n  /**\n   * @internal\n   */\n  _draw(shaderProgram: ShaderProgram, subMesh: SubMesh): void {\n    this._platformPrimitive.draw(shaderProgram, subMesh);\n    this._bufferStructChanged = false;\n  }\n\n  /**\n   * @override\n   */\n  _addRefCount(value: number): void {\n    super._addRefCount(value);\n    const vertexBufferBindings = this._vertexBufferBindings;\n    for (let i = 0, n = vertexBufferBindings.length; i < n; i++) {\n      vertexBufferBindings[i]._buffer._addRefCount(value);\n    }\n  }\n\n  /**\n   * @override\n   * Destroy.\n   */\n  _onDestroy(): void {\n    this._vertexBufferBindings = null;\n    this._indexBufferBinding = null;\n    this._vertexElements = null;\n    this._vertexElementMap = null;\n    this._platformPrimitive.destroy();\n  }\n\n  protected _setVertexElements(elements: VertexElement[]): void {\n    this._clearVertexElements();\n    for (let i = 0, n = elements.length; i < n; i++) {\n      this._addVertexElement(elements[i]);\n    }\n  }\n\n  protected _setIndexBufferBinding(binding: IndexBufferBinding | null): void {\n    const lastBinding = this._indexBufferBinding;\n    if (binding) {\n      this._indexBufferBinding = binding;\n      this._glIndexType = BufferUtil._getGLIndexType(binding.format);\n      this._glIndexByteCount = BufferUtil._getGLIndexByteCount(binding.format);\n      (!lastBinding || lastBinding._buffer !== binding._buffer) && (this._bufferStructChanged = true);\n    } else {\n      this._indexBufferBinding = null;\n      this._glIndexType = undefined;\n      lastBinding && (this._bufferStructChanged = true);\n    }\n  }\n\n  private _onBoundsChanged(): void {\n    this._updateFlagManager.dispatch(MeshModifyFlags.Bounds);\n  }\n}\n\n/**\n * @internal\n */\nexport enum MeshModifyFlags {\n  Bounds = 0x1,\n  VertexElements = 0x2\n}\n","import { Buffer } from \"./Buffer\";\n\n/**\n * Vertex buffer binding.\n */\nexport class VertexBufferBinding {\n  /** @internal */\n  _buffer: Buffer;\n  /** @internal */\n  _stride: number;\n\n  /**\n   * Vertex buffer.\n   */\n  get buffer(): Buffer {\n    return this._buffer;\n  }\n\n  /**\n   * Vertex buffer stride.\n   */\n  get stride(): number {\n    return this._stride;\n  }\n\n  /**\n   * Create vertex buffer.\n   * @param buffer - Vertex buffer\n   * @param stride - Vertex buffer stride\n   */\n  constructor(buffer: Buffer, stride: number) {\n    this._buffer = buffer;\n    this._stride = stride;\n  }\n}\n","import { Vector2, Vector3 } from \"@galacean/engine-math\";\nimport { BoolUpdateFlag } from \"../BoolUpdateFlag\";\nimport { Engine } from \"../Engine\";\nimport { Buffer } from \"../graphic/Buffer\";\nimport { VertexBufferBinding } from \"../graphic/VertexBufferBinding\";\nimport { VertexElement } from \"../graphic/VertexElement\";\nimport { BufferBindFlag } from \"../graphic/enums/BufferBindFlag\";\nimport { BufferUsage } from \"../graphic/enums/BufferUsage\";\nimport { VertexElementFormat } from \"../graphic/enums/VertexElementFormat\";\nimport { Shader } from \"../shader/Shader\";\nimport { ShaderData } from \"../shader/ShaderData\";\nimport { Texture2DArray, TextureFilterMode, TextureFormat } from \"../texture\";\nimport { BlendShape } from \"./BlendShape\";\nimport { ModelMesh } from \"./ModelMesh\";\nimport { SkinnedMeshRenderer } from \"./SkinnedMeshRenderer\";\n\n/**\n * @internal\n */\nexport class BlendShapeManager {\n  private static _blendShapeMacro = Shader.getMacroByName(\"OASIS_BLENDSHAPE\");\n  private static _blendShapeTextureMacro = Shader.getMacroByName(\"OASIS_BLENDSHAPE_TEXTURE\");\n  private static _blendShapeNormalMacro = Shader.getMacroByName(\"OASIS_BLENDSHAPE_NORMAL\");\n  private static _blendShapeTangentMacro = Shader.getMacroByName(\"OASIS_BLENDSHAPE_TANGENT\");\n\n  private static _blendShapeWeightsProperty = Shader.getPropertyByName(\"u_blendShapeWeights\");\n  private static _blendShapeTextureProperty = Shader.getPropertyByName(\"u_blendShapeTexture\");\n  private static _blendShapeTextureInfoProperty = Shader.getPropertyByName(\"u_blendShapeTextureInfo\");\n\n  /** @internal */\n  _blendShapeCount: number = 0;\n  /** @internal */\n  _blendShapes: BlendShape[] = [];\n  /** @internal */\n  _blendShapeNames: string[];\n  /** @internal */\n  _subDataDirtyFlags: BoolUpdateFlag[] = [];\n  /** @internal */\n  _vertexTexture: Texture2DArray;\n  /** @internal */\n  _vertexBuffers: Buffer[] = [];\n  /** @internal */\n  _vertices: Float32Array;\n  /** @internal */\n  _uniformOccupiesCount: number = 0;\n\n  private _useBlendNormal: boolean = false;\n  private _useBlendTangent: boolean = false;\n  private _vertexElementCount: number = 0;\n  private _bufferBindingOffset: number;\n  private _vertexElementOffset: number;\n\n  private _storeInVertexBufferInfo: Vector2[] = [];\n  private _maxCountSingleVertexBuffer: number = 0;\n  private readonly _engine: Engine;\n  private readonly _modelMesh: ModelMesh;\n  private readonly _lastCreateHostInfo: Vector3 = new Vector3(0, 0, 0);\n  private readonly _canUseTextureStoreData: boolean = true;\n  private readonly _dataTextureInfo: Vector3 = new Vector3();\n\n  constructor(engine: Engine, modelMesh: ModelMesh) {\n    this._engine = engine;\n    this._modelMesh = modelMesh;\n    this._canUseTextureStoreData = this._engine._hardwareRenderer.capability.canUseFloatTextureBlendShape;\n    this._updateLayoutChange = this._updateLayoutChange.bind(this);\n  }\n\n  /**\n   * @internal\n   */\n  _addBlendShape(blendShape: BlendShape): void {\n    this._blendShapes.push(blendShape);\n    this._blendShapeCount++;\n\n    blendShape._layoutChangeManager.addListener(this._updateLayoutChange);\n    this._updateLayoutChange(0, blendShape);\n\n    this._subDataDirtyFlags.push(blendShape._createSubDataDirtyFlag());\n  }\n\n  /**\n   * @internal\n   */\n  _clearBlendShapes(): void {\n    const blendShapes = this._blendShapes;\n    for (let i = 0, n = blendShapes.length; i < n; i++) {\n      blendShapes[i]._layoutChangeManager.removeListener(this._updateLayoutChange);\n    }\n    this._useBlendNormal = false;\n    this._useBlendTangent = false;\n    this._vertexElementCount = 0;\n    this._blendShapes.length = 0;\n    this._blendShapeCount = 0;\n\n    const subDataDirtyFlags = this._subDataDirtyFlags;\n    for (let i = 0, n = subDataDirtyFlags.length; i < n; i++) {\n      subDataDirtyFlags[i].destroy();\n    }\n    subDataDirtyFlags.length = 0;\n  }\n\n  /**\n   * @internal\n   */\n  _updateShaderData(shaderData: ShaderData, skinnedMeshRenderer: SkinnedMeshRenderer): void {\n    let blendShapeCount = this._blendShapeCount;\n    if (blendShapeCount > 0) {\n      shaderData.enableMacro(BlendShapeManager._blendShapeMacro);\n      if (this._useTextureMode()) {\n        shaderData.enableMacro(BlendShapeManager._blendShapeTextureMacro);\n        shaderData.setTexture(BlendShapeManager._blendShapeTextureProperty, this._vertexTexture);\n        shaderData.setVector3(BlendShapeManager._blendShapeTextureInfoProperty, this._dataTextureInfo);\n        shaderData.setFloatArray(BlendShapeManager._blendShapeWeightsProperty, skinnedMeshRenderer.blendShapeWeights);\n        shaderData.enableMacro(\"OASIS_BLENDSHAPE_COUNT\", blendShapeCount.toString());\n        this._uniformOccupiesCount = blendShapeCount + 1;\n      } else {\n        const maxBlendCount = this._getVertexBufferModeSupportCount();\n        if (blendShapeCount > maxBlendCount) {\n          let condensedBlendShapeWeights = skinnedMeshRenderer._condensedBlendShapeWeights;\n          if (!condensedBlendShapeWeights) {\n            condensedBlendShapeWeights = new Float32Array(maxBlendCount);\n            skinnedMeshRenderer._condensedBlendShapeWeights = condensedBlendShapeWeights;\n          }\n          this._filterCondensedBlendShapeWeights(skinnedMeshRenderer.blendShapeWeights, condensedBlendShapeWeights);\n          shaderData.setFloatArray(BlendShapeManager._blendShapeWeightsProperty, condensedBlendShapeWeights);\n          this._modelMesh._enableVAO = false;\n          blendShapeCount = maxBlendCount;\n        } else {\n          shaderData.setFloatArray(BlendShapeManager._blendShapeWeightsProperty, skinnedMeshRenderer.blendShapeWeights);\n          this._modelMesh._enableVAO = true;\n        }\n        shaderData.disableMacro(BlendShapeManager._blendShapeTextureMacro);\n        shaderData.disableMacro(\"OASIS_BLENDSHAPE_COUNT\");\n        this._uniformOccupiesCount = blendShapeCount;\n      }\n\n      if (this._useBlendNormal) {\n        shaderData.enableMacro(BlendShapeManager._blendShapeNormalMacro);\n      } else {\n        shaderData.disableMacro(BlendShapeManager._blendShapeNormalMacro);\n      }\n      if (this._useBlendTangent) {\n        shaderData.enableMacro(BlendShapeManager._blendShapeTangentMacro);\n      } else {\n        shaderData.disableMacro(BlendShapeManager._blendShapeTangentMacro);\n      }\n    } else {\n      shaderData.disableMacro(BlendShapeManager._blendShapeMacro);\n      shaderData.disableMacro(\"OASIS_BLENDSHAPE_COUNT\");\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _useTextureMode(): boolean {\n    if (!this._canUseTextureStoreData) {\n      return false;\n    }\n    return this._blendShapeCount > this._getVertexBufferModeSupportCount();\n  }\n\n  /**\n   * @internal\n   */\n  _layoutOrCountChange(): boolean {\n    const last = this._lastCreateHostInfo;\n    return last.x !== this._blendShapeCount || !!last.y !== this._useBlendNormal || !!last.z !== this._useBlendTangent;\n  }\n\n  /**\n   * @internal\n   */\n  _vertexElementsNeedUpdate(): boolean {\n    const maxSupportCount = this._getVertexBufferModeSupportCount();\n    const info = this._lastCreateHostInfo;\n    return (\n      Math.min(info.x, maxSupportCount) !== Math.min(this._blendShapeCount, maxSupportCount) ||\n      !!info.y !== this._useBlendNormal ||\n      !!info.z !== this._useBlendTangent\n    );\n  }\n\n  /**\n   * @internal\n   */\n  _needUpdateData(): boolean {\n    const subDataDirtyFlags = this._subDataDirtyFlags;\n    for (let i = 0, n = subDataDirtyFlags.length; i < n; i++) {\n      if (subDataDirtyFlags[i].flag) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * @internal\n   */\n  _setAttributeModeOffsetInfo(vertexElementOffset: number, bufferBindingOffset: number): void {\n    this._vertexElementOffset = vertexElementOffset;\n    this._bufferBindingOffset = bufferBindingOffset;\n  }\n\n  /**\n   * @internal\n   */\n  _addVertexElements(modelMesh: ModelMesh): void {\n    const bindingOffset = this._bufferBindingOffset;\n\n    let offset = 0;\n    for (let i = 0, n = Math.min(this._blendShapeCount, this._getVertexBufferModeSupportCount()); i < n; i++) {\n      modelMesh._addVertexElement(\n        new VertexElement(`POSITION_BS${i}`, offset, VertexElementFormat.Vector3, bindingOffset)\n      );\n      offset += 12;\n      if (this._useBlendNormal) {\n        modelMesh._addVertexElement(\n          new VertexElement(`NORMAL_BS${i}`, offset, VertexElementFormat.Vector3, bindingOffset)\n        );\n        offset += 12;\n      }\n      if (this._useBlendTangent) {\n        modelMesh._addVertexElement(\n          new VertexElement(`TANGENT_BS${i}`, offset, VertexElementFormat.Vector3, bindingOffset)\n        );\n        offset += 12;\n      }\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _update(vertexCountChange: boolean, noLongerAccessible: boolean): void {\n    const { vertexCount } = this._modelMesh;\n    const useTexture = this._useTextureMode();\n    const createHost = this._layoutOrCountChange() || vertexCountChange;\n\n    if (createHost) {\n      if (useTexture) {\n        this._createTextureArray(vertexCount);\n      } else {\n        this._createVertexBuffers(vertexCount, noLongerAccessible);\n      }\n      this._lastCreateHostInfo.set(this._blendShapeCount, +this._useBlendNormal, +this._useBlendTangent);\n    }\n    if (this._needUpdateData()) {\n      if (useTexture) {\n        this._updateTextureArray(vertexCount, createHost);\n      } else {\n        this._updateVertexBuffers(vertexCount, createHost);\n      }\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _releaseMemoryCache(): void {\n    const { _blendShapes: blendShapes } = this;\n    const { length: blendShapeCount } = blendShapes;\n\n    const blendShapeNamesMap = new Array<string>(blendShapeCount);\n    for (let i = 0; i < blendShapeCount; i++) {\n      blendShapeNamesMap[i] = blendShapes[i].name;\n    }\n    this._blendShapeNames = blendShapeNamesMap;\n\n    for (let i = 0, n = blendShapes.length; i < n; i++) {\n      blendShapes[i]._layoutChangeManager.removeListener(this._updateLayoutChange);\n    }\n\n    const dataChangedFlags = this._subDataDirtyFlags;\n    for (let i = 0, n = dataChangedFlags.length; i < n; i++) {\n      dataChangedFlags[i].destroy();\n    }\n\n    this._subDataDirtyFlags = null;\n    this._blendShapes = null;\n    this._vertices = null;\n  }\n\n  private _createVertexBuffers(vertexCount: number, noLongerAccessible: boolean): void {\n    const {\n      _engine: engine,\n      _modelMesh: modelMesh,\n      _blendShapeCount: blendShapeCount,\n      _vertexBuffers: vertexBuffers\n    } = this;\n    const vertexFloatCount = this._vertexElementCount * 3;\n    const vertexByteCount = vertexFloatCount * 4;\n    const maxCountSingleBuffer = Math.floor(255 / vertexByteCount); // 255: Attribute MaxStride\n    const bufferCount = Math.ceil(blendShapeCount / maxCountSingleBuffer);\n    const floatCount = vertexFloatCount * vertexCount * Math.min(maxCountSingleBuffer, blendShapeCount);\n\n    vertexBuffers.length = bufferCount;\n    this._vertices = new Float32Array(floatCount);\n    this._maxCountSingleVertexBuffer = maxCountSingleBuffer;\n    this._storeInVertexBufferInfo.length = blendShapeCount;\n\n    const bufferBindingOffset = this._bufferBindingOffset;\n    for (let i = 0; i < bufferCount; i++) {\n      const lastIndex = bufferCount - 1;\n      const containCount = i === lastIndex ? blendShapeCount - lastIndex * maxCountSingleBuffer : maxCountSingleBuffer;\n      const stride = containCount * vertexByteCount;\n      const byteLength = stride * vertexCount;\n\n      const usage = noLongerAccessible ? BufferUsage.Static : BufferUsage.Dynamic;\n      const blendShapeBuffer = new Buffer(engine, BufferBindFlag.VertexBuffer, byteLength, usage);\n      modelMesh._setVertexBufferBinding(bufferBindingOffset + i, new VertexBufferBinding(blendShapeBuffer, stride));\n      vertexBuffers[i] = blendShapeBuffer;\n    }\n  }\n\n  private _createTextureArray(vertexCount: number): void {\n    const maxTextureSize = this._engine._hardwareRenderer.capability.maxTextureSize;\n    const vertexPixelStride = this._vertexElementCount;\n\n    let textureWidth = vertexPixelStride * vertexCount;\n    let textureHeight = 1;\n    if (textureWidth > maxTextureSize) {\n      textureHeight = Math.ceil(textureWidth / maxTextureSize);\n      textureWidth = maxTextureSize;\n    }\n\n    let blendShapeDataTexture = this._vertexTexture;\n    const blendShapeCount = this._blendShapes.length;\n\n    blendShapeDataTexture && blendShapeDataTexture.destroy();\n\n    blendShapeDataTexture = new Texture2DArray(\n      this._engine,\n      textureWidth,\n      textureHeight,\n      blendShapeCount,\n      TextureFormat.R32G32B32A32,\n      false\n    );\n    blendShapeDataTexture.filterMode = TextureFilterMode.Point;\n\n    this._vertices = new Float32Array(blendShapeCount * textureWidth * textureHeight * 4);\n    this._vertexTexture = blendShapeDataTexture;\n    this._dataTextureInfo.set(vertexPixelStride, textureWidth, textureHeight);\n  }\n\n  /**\n   * @internal\n   */\n  _updateVertexBuffers(vertexCount: number, force: boolean): void {\n    const { _blendShapes: blendShapes, _maxCountSingleVertexBuffer: maxCountSingleBuffer } = this;\n    const { _vertices: vertices, _vertexBuffers: vertexBuffers, _storeInVertexBufferInfo: storeInfos } = this;\n\n    const subDataDirtyFlags = this._subDataDirtyFlags;\n    const blendShapeFloatStride = this._vertexElementCount * 3;\n    const blendShapeByteStride = blendShapeFloatStride * 4;\n    const bufferOffset = this._bufferBindingOffset;\n\n    // @todo: should fix bug when dataChangedFlag is true\n    for (let i = 0, n = blendShapes.length; i < n; i++) {\n      const dataChangedFlag = subDataDirtyFlags[i];\n      if (force || dataChangedFlag.flag) {\n        const { frames } = blendShapes[i];\n        const frameCount = frames.length;\n        const endFrame = frames[frameCount - 1];\n        if (frameCount > 0 && endFrame.deltaPositions.length !== vertexCount) {\n          throw \"BlendShape frame deltaPositions length must same with mesh vertexCount.\";\n        }\n\n        const bufferIndex = Math.floor(i / maxCountSingleBuffer);\n        const indexInBuffer = i % maxCountSingleBuffer;\n        const buffer = vertexBuffers[bufferIndex];\n        const bufferFloatStride = buffer.byteLength / (vertexCount * 4);\n\n        let offset = indexInBuffer * blendShapeFloatStride;\n\n        let storeInfo = storeInfos[i];\n        storeInfo || (storeInfos[i] = storeInfo = new Vector2());\n        storeInfo.set(bufferOffset + bufferIndex, indexInBuffer * blendShapeByteStride); // BufferOffset is mesh vertexBuffer offset\n\n        const { deltaPositions } = endFrame;\n        for (let j = 0; j < vertexCount; j++) {\n          const start = offset + bufferFloatStride * j;\n          const deltaPosition = deltaPositions[j];\n          if (deltaPosition) {\n            vertices[start] = deltaPosition.x;\n            vertices[start + 1] = deltaPosition.y;\n            vertices[start + 2] = deltaPosition.z;\n          }\n        }\n        offset += 3;\n\n        if (this._useBlendNormal) {\n          const { deltaNormals } = endFrame;\n          if (deltaNormals) {\n            for (let j = 0; j < vertexCount; j++) {\n              const start = offset + bufferFloatStride * j;\n              const deltaNormal = deltaNormals[j];\n              if (deltaNormal) {\n                vertices[start] = deltaNormal.x;\n                vertices[start + 1] = deltaNormal.y;\n                vertices[start + 2] = deltaNormal.z;\n              }\n            }\n          }\n          offset += 3;\n        }\n\n        if (this._useBlendTangent) {\n          const { deltaTangents } = endFrame;\n          if (deltaTangents) {\n            for (let j = 0; j < vertexCount; j++) {\n              const start = offset + bufferFloatStride * j;\n              const deltaTangent = deltaTangents[j];\n              if (deltaTangent) {\n                vertices[start] = deltaTangent.x;\n                vertices[start + 1] = deltaTangent.y;\n                vertices[start + 2] = deltaTangent.z;\n              }\n            }\n          }\n          offset += 3;\n        }\n\n        if (indexInBuffer === maxCountSingleBuffer - 1 || i === n - 1) {\n          // @todo: can optimize in setData\n          buffer.setData(vertices, 0, 0, buffer.byteLength / 4);\n        }\n\n        dataChangedFlag.flag = false;\n      }\n    }\n  }\n\n  private _updateTextureArray(vertexCount: number, force: boolean): void {\n    const {\n      _blendShapes: blendShapes,\n      _vertexTexture: vertexTexture,\n      _vertices: vertices,\n      _subDataDirtyFlags: subDataDirtyFlags\n    } = this;\n\n    for (let i = 0, n = blendShapes.length; i < n; i++) {\n      const subDirtyFlag = subDataDirtyFlags[i];\n      const subBlendShapeDataStride = vertexTexture.width * vertexTexture.height * 4;\n      if (force || subDirtyFlag.flag) {\n        const { frames } = blendShapes[i];\n        const frameCount = frames.length;\n        const endFrame = frames[frameCount - 1];\n        if (frameCount > 0 && endFrame.deltaPositions.length !== vertexCount) {\n          throw \"BlendShape frame deltaPositions length must same with mesh vertexCount.\";\n        }\n\n        const { deltaPositions, deltaNormals, deltaTangents } = endFrame;\n        let offset = i * subBlendShapeDataStride;\n        for (let j = 0; j < vertexCount; j++) {\n          const position = deltaPositions[j];\n          vertices[offset] = position.x;\n          vertices[offset + 1] = position.y;\n          vertices[offset + 2] = position.z;\n          offset += 4;\n\n          if (deltaNormals) {\n            const normal = deltaNormals[j];\n            vertices[offset] = normal.x;\n            vertices[offset + 1] = normal.y;\n            vertices[offset + 2] = normal.z;\n            offset += 4;\n          }\n\n          if (deltaTangents) {\n            const tangent = deltaTangents[j];\n            vertices[offset] = tangent.x;\n            vertices[offset + 1] = tangent.y;\n            vertices[offset + 2] = tangent.z;\n            offset += 4;\n          }\n        }\n        subDirtyFlag.flag = false;\n      }\n    }\n    vertexTexture.setPixelBuffer(0, vertices);\n  }\n\n  private _updateLayoutChange(type: number, blendShape: BlendShape): void {\n    const notFirst = this._blendShapeCount > 1;\n    let vertexElementCount = 1;\n    let useBlendNormal = blendShape._useBlendShapeNormal;\n    let useBlendTangent = blendShape._useBlendShapeTangent;\n    if (notFirst) {\n      useBlendNormal &&= this._useBlendNormal;\n      useBlendTangent &&= this._useBlendTangent;\n    }\n\n    useBlendNormal && vertexElementCount++;\n    useBlendTangent && vertexElementCount++;\n\n    this._useBlendNormal = useBlendNormal;\n    this._useBlendTangent = useBlendTangent;\n    this._vertexElementCount = vertexElementCount;\n  }\n\n  private _attributeModeUpdateVertexElement(\n    vertexElements: VertexElement[],\n    vertexBufferStoreInfo: Vector2[],\n    index: number,\n    condensedIndex: number\n  ): void {\n    let elementOffset = this._vertexElementOffset + this._vertexElementCount * condensedIndex;\n\n    let { x: bufferIndex, y: offset } = vertexBufferStoreInfo[index];\n    const vertexElement = vertexElements[elementOffset];\n    vertexElement.bindingIndex = bufferIndex;\n    vertexElement.offset = offset;\n    if (this._useBlendNormal) {\n      const vertexElement = vertexElements[++elementOffset];\n      offset += 12;\n      vertexElement.bindingIndex = bufferIndex;\n      vertexElement.offset = offset;\n    }\n    if (this._useBlendTangent) {\n      const vertexElement = vertexElements[++elementOffset];\n      offset += 12;\n      vertexElement.bindingIndex = bufferIndex;\n      vertexElement.offset = offset;\n    }\n  }\n\n  private _getVertexBufferModeSupportCount(): number {\n    if (this._useBlendNormal && this._useBlendTangent) {\n      return 2;\n    } else {\n      return this._useBlendNormal || this._useBlendTangent ? 4 : 8;\n    }\n  }\n\n  private _filterCondensedBlendShapeWeights(\n    blendShapeWeights: Float32Array,\n    condensedBlendShapeWeights: Float32Array\n  ): void {\n    const condensedWeightsCount = condensedBlendShapeWeights.length;\n    const vertexElements = this._modelMesh._vertexElements;\n    const vertexBufferStoreInfo = this._storeInVertexBufferInfo;\n    let thresholdWeight = Number.POSITIVE_INFINITY;\n    let thresholdIndex: number;\n    for (let i = 0, n = Math.min(blendShapeWeights.length, this._blendShapeCount); i < n; i++) {\n      const weight = blendShapeWeights[i];\n      if (i < condensedWeightsCount) {\n        this._attributeModeUpdateVertexElement(vertexElements, vertexBufferStoreInfo, i, i);\n        condensedBlendShapeWeights[i] = weight;\n        if (weight < thresholdWeight) {\n          thresholdWeight = weight;\n          thresholdIndex = i;\n        }\n      } else if (weight > thresholdWeight) {\n        this._attributeModeUpdateVertexElement(vertexElements, vertexBufferStoreInfo, i, thresholdIndex);\n        condensedBlendShapeWeights[thresholdIndex] = weight;\n\n        thresholdWeight = Number.POSITIVE_INFINITY;\n        for (let j = 0; j < condensedWeightsCount; j++) {\n          const condensedWeight = condensedBlendShapeWeights[j];\n          if (condensedWeight < thresholdWeight) {\n            thresholdWeight = condensedWeight;\n            thresholdIndex = j;\n          }\n        }\n      }\n    }\n  }\n}\n","/**\n * Vertex attribute types of a vertex in a ModelMesh.\n */\nexport enum VertexAttribute {\n  /** Vertex position. */\n  Position = \"POSITION\",\n  /** Vertex normal. */\n  Normal = \"NORMAL\",\n  /** Vertex color. */\n  Color = \"COLOR_0\",\n  /** Vertex tangent. */\n  Tangent = \"TANGENT\",\n  /** Vertex bone weight. */\n  BoneWeight = \"WEIGHTS_0\",\n  /** Vertex bone index. */\n  BoneIndex = \"JOINTS_0\",\n  /** Vertex UV. */\n  UV = \"TEXCOORD_0\",\n  /** Vertex UV1. */\n  UV1 = \"TEXCOORD_1\",\n  /** Vertex UV2. */\n  UV2 = \"TEXCOORD_2\",\n  /** Vertex UV3. */\n  UV3 = \"TEXCOORD_3\",\n  /** Vertex UV4. */\n  UV4 = \"TEXCOORD_4\",\n  /** Vertex UV5. */\n  UV5 = \"TEXCOORD_5\",\n  /** Vertex UV6. */\n  UV6 = \"TEXCOORD_6\",\n  /** Vertex UV7. */\n  UV7 = \"TEXCOORD_7\"\n}\n","import { Color, Vector2, Vector3, Vector4 } from \"@galacean/engine-math\";\nimport { Engine } from \"../Engine\";\nimport { Buffer } from \"../graphic/Buffer\";\nimport { BufferBindFlag } from \"../graphic/enums/BufferBindFlag\";\nimport { BufferUsage } from \"../graphic/enums/BufferUsage\";\nimport { IndexFormat } from \"../graphic/enums/IndexFormat\";\nimport { VertexElementFormat } from \"../graphic/enums/VertexElementFormat\";\nimport { IndexBufferBinding } from \"../graphic/IndexBufferBinding\";\nimport { Mesh } from \"../graphic/Mesh\";\nimport { VertexBufferBinding } from \"../graphic/VertexBufferBinding\";\nimport { VertexElement } from \"../graphic/VertexElement\";\nimport { BlendShape } from \"./BlendShape\";\nimport { BlendShapeManager } from \"./BlendShapeManager\";\nimport { VertexAttribute } from \"./enums/VertexAttribute\";\n\n/**\n * Mesh containing common vertex elements of the model.\n */\nexport class ModelMesh extends Mesh {\n  private static _tempVec0 = new Vector3();\n  private static _tempVec1 = new Vector3();\n  private static _tempVec2 = new Vector3();\n  private static _tempVec3 = new Vector3();\n  private static _tempVec4 = new Vector3();\n\n  /** @internal */\n  _blendShapeManager: BlendShapeManager;\n\n  private _vertexCount: number = 0;\n  private _accessible: boolean = true;\n  private _verticesFloat32: Float32Array | null = null;\n  private _verticesUint8: Uint8Array | null = null;\n  private _indices: Uint8Array | Uint16Array | Uint32Array | null = null;\n  private _indicesFormat: IndexFormat = null;\n  private _indicesChangeFlag: boolean = false;\n\n  private _positions: Vector3[] | null = null;\n  private _normals: Vector3[] | null = null;\n  private _colors: Color[] | null = null;\n  private _tangents: Vector4[] | null = null;\n  private _uv: Vector2[] | null = null;\n  private _uv1: Vector2[] | null = null;\n  private _uv2: Vector2[] | null = null;\n  private _uv3: Vector2[] | null = null;\n  private _uv4: Vector2[] | null = null;\n  private _uv5: Vector2[] | null = null;\n  private _uv6: Vector2[] | null = null;\n  private _uv7: Vector2[] | null = null;\n  private _boneWeights: Vector4[] | null = null;\n  private _boneIndices: Vector4[] | null = null;\n\n  private _bufferStrides: number[] = [];\n  private _vertexBufferUpdateFlag: number = 0;\n  private _vertexDataUpdateFlag: number = 0;\n  private _vertexElementsUpdate: boolean = false;\n  private _customVertexElements: VertexElement[] = [];\n  private _vertexCountChanged: boolean = false;\n\n  /**\n   * Whether to access data of the mesh.\n   */\n  get accessible(): boolean {\n    return this._accessible;\n  }\n\n  /**\n   * Vertex count of current mesh.\n   */\n  get vertexCount(): number {\n    if (this._vertexDataUpdateFlag & VertexChangedFlags.Position) {\n      let vertexCount = 0;\n      const positionElement = this._vertexElementMap[VertexAttribute.Position];\n      if (positionElement) {\n        const positionBufferBinding = this._vertexBufferBindings[positionElement.bindingIndex];\n        if (positionBufferBinding) {\n          vertexCount = positionBufferBinding.buffer.byteLength / positionBufferBinding.stride;\n        }\n      }\n\n      this._vertexCount = vertexCount;\n      this._vertexDataUpdateFlag &= ~VertexChangedFlags.Position;\n    }\n    return this._vertexCount;\n  }\n\n  /**\n   * Vertex element collection.\n   */\n  get vertexElements(): Readonly<VertexElement[]> {\n    this._updateVertexElements();\n    return this._vertexElements;\n  }\n\n  /**\n   * Vertex buffer binding collection.\n   */\n  get vertexBufferBindings(): Readonly<VertexBufferBinding[]> {\n    return this._vertexBufferBindings;\n  }\n\n  /**\n   * BlendShapes of this ModelMesh.\n   */\n  get blendShapes(): Readonly<BlendShape[]> {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    return this._blendShapeManager._blendShapes;\n  }\n\n  /**\n   * BlendShape count of this ModelMesh.\n   */\n  get blendShapeCount(): number {\n    return this._blendShapeManager._blendShapeCount;\n  }\n\n  /**\n   * Create a model mesh.\n   * @param engine - Engine to which the mesh belongs\n   * @param name - Mesh name\n   */\n  constructor(engine: Engine, name?: string) {\n    super(engine);\n    this.name = name;\n    this._blendShapeManager = new BlendShapeManager(engine, this);\n  }\n\n  /**\n   * Set positions for the mesh.\n   * @param positions - The positions for the mesh.\n   */\n  setPositions(positions: Vector3[] | null): void {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    if (!this._positions && !positions) {\n      return;\n    }\n\n    const newVertexCount = positions?.length || 0;\n    this._vertexCountChanged = this._vertexCount != newVertexCount;\n    this._vertexCount = newVertexCount;\n\n    this._vertexElementsUpdate = !!this._positions !== !!positions;\n    this._vertexBufferUpdateFlag |= VertexChangedFlags.Position;\n    this._vertexDataUpdateFlag &= ~VertexChangedFlags.Position;\n    this._positions = positions;\n  }\n\n  /**\n   * Get positions for the mesh.\n   * @remarks Please call the setPositions() method after modification to ensure that the modification takes effect.\n   */\n  getPositions(): Vector3[] | null {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n\n    return this._positions;\n  }\n\n  /**\n   * Set per-vertex normals for the mesh.\n   * @param normals - The normals for the mesh.\n   */\n  setNormals(normals: Vector3[] | null): void {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    if (normals) {\n      if (normals.length !== this._vertexCount) {\n        throw \"The array provided needs to be the same size as vertex count.\";\n      }\n    } else if (!this._normals) {\n      return;\n    }\n\n    this._vertexElementsUpdate = !!this._normals !== !!normals;\n    this._vertexBufferUpdateFlag |= VertexChangedFlags.Normal;\n    this._vertexDataUpdateFlag &= ~VertexChangedFlags.Normal;\n    this._normals = normals;\n  }\n\n  /**\n   * Get normals for the mesh.\n   * @remarks Please call the setNormals() method after modification to ensure that the modification takes effect.\n   */\n  getNormals(): Vector3[] | null {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    return this._normals;\n  }\n\n  /**\n   * Set per-vertex colors for the mesh.\n   * @param colors - The colors for the mesh.\n   */\n  setColors(colors: Color[] | null): void {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    if (colors) {\n      if (colors.length !== this._vertexCount) {\n        throw \"The array provided needs to be the same size as vertex count.\";\n      }\n    } else if (!this._colors) {\n      return;\n    }\n\n    this._vertexElementsUpdate = !!this._colors !== !!colors;\n    this._vertexBufferUpdateFlag |= VertexChangedFlags.Color;\n    this._vertexDataUpdateFlag &= ~VertexChangedFlags.Color;\n    this._colors = colors;\n  }\n\n  /**\n   * Get colors for the mesh.\n   * @remarks Please call the setColors() method after modification to ensure that the modification takes effect.\n   */\n  getColors(): Color[] | null {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    return this._colors;\n  }\n\n  /**\n   * Set per-vertex bone weights for the mesh.\n   * @param boneWeights - The bone weights for the mesh.\n   */\n  setBoneWeights(boneWeights: Vector4[] | null): void {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n\n    if (boneWeights) {\n      if (boneWeights.length !== this._vertexCount) {\n        throw \"The array provided needs to be the same size as vertex count.\";\n      }\n    } else if (!this._boneWeights) {\n      return;\n    }\n\n    this._vertexElementsUpdate = !!this._boneWeights !== !!boneWeights;\n    this._vertexBufferUpdateFlag |= VertexChangedFlags.BoneWeight;\n    this._vertexDataUpdateFlag &= ~VertexChangedFlags.BoneWeight;\n    this._boneWeights = boneWeights;\n  }\n\n  /**\n   * Get weights for the mesh.\n   * @remarks Please call the setWeights() method after modification to ensure that the modification takes effect.\n   */\n  getBoneWeights(): Vector4[] | null {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    return this._boneWeights;\n  }\n\n  /**\n   * Set per-vertex bone indices for the mesh.\n   * @param boneIndices - The bone indices for the mesh.\n   */\n  setBoneIndices(boneIndices: Vector4[] | null): void {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n\n    if (boneIndices) {\n      if (boneIndices?.length !== this._vertexCount) {\n        throw \"The array provided needs to be the same size as vertex count.\";\n      }\n    } else if (!this._boneIndices) {\n      return;\n    }\n\n    this._vertexElementsUpdate = !!this._boneIndices !== !!boneIndices;\n    this._vertexBufferUpdateFlag |= VertexChangedFlags.BoneIndex;\n    this._vertexDataUpdateFlag &= ~VertexChangedFlags.BoneIndex;\n    this._boneIndices = boneIndices;\n  }\n\n  /**\n   * Get joints for the mesh.\n   * @remarks Please call the setBoneIndices() method after modification to ensure that the modification takes effect.\n   */\n  getBoneIndices(): Vector4[] | null {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    return this._boneIndices;\n  }\n\n  /**\n   * Set per-vertex tangents for the mesh.\n   * @param tangents - The tangents for the mesh.\n   */\n  setTangents(tangents: Vector4[] | null): void {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n\n    if (tangents) {\n      if (tangents.length !== this._vertexCount) {\n        throw \"The array provided needs to be the same size as vertex count.\";\n      }\n    } else if (!this._tangents) {\n      return;\n    }\n\n    this._vertexElementsUpdate = !!this._tangents !== !!tangents;\n    this._vertexBufferUpdateFlag |= VertexChangedFlags.Tangent;\n    this._vertexDataUpdateFlag &= ~VertexChangedFlags.Tangent;\n    this._tangents = tangents;\n  }\n\n  /**\n   * Get tangents for the mesh.\n   * @remarks Please call the setTangents() method after modification to ensure that the modification takes effect.\n   */\n  getTangents(): Vector4[] | null {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    return this._tangents;\n  }\n\n  /**\n   * Set per-vertex uv for the mesh.\n   * @param uv - The uv for the mesh.\n   */\n  setUVs(uv: Vector2[] | null): void;\n  /**\n   * Set per-vertex uv for the mesh by channelIndex.\n   * @param uv - The uv for the mesh.\n   * @param channelIndex - The index of uv channels, in [0 ~ 7] range.\n   */\n  setUVs(uv: Vector2[] | null, channelIndex: number): void;\n  setUVs(uv: Vector2[] | null, channelIndex?: number): void {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n\n    if (uv && uv.length !== this._vertexCount) {\n      throw \"The array provided needs to be the same size as vertex count.\";\n    }\n\n    channelIndex = channelIndex ?? 0;\n    switch (channelIndex) {\n      case 0:\n        if (!this._uv && !uv) {\n          return;\n        }\n\n        this._vertexElementsUpdate = !!this._uv !== !!uv;\n        this._vertexBufferUpdateFlag |= VertexChangedFlags.UV;\n        this._vertexDataUpdateFlag &= ~VertexChangedFlags.UV;\n        this._uv = uv;\n        break;\n      case 1:\n        if (!this._uv1 && !uv) {\n          return;\n        }\n\n        this._vertexElementsUpdate = !!this._uv1 !== !!uv;\n        this._vertexBufferUpdateFlag |= VertexChangedFlags.UV1;\n        this._vertexDataUpdateFlag &= ~VertexChangedFlags.UV1;\n        this._uv1 = uv;\n        break;\n      case 2:\n        if (!this._uv2 && !uv) {\n          return;\n        }\n\n        this._vertexElementsUpdate = !!this._uv2 !== !!uv;\n        this._vertexBufferUpdateFlag |= VertexChangedFlags.UV2;\n        this._vertexDataUpdateFlag &= ~VertexChangedFlags.UV2;\n        this._uv2 = uv;\n        break;\n      case 3:\n        if (!this._uv3 && !uv) {\n          return;\n        }\n\n        this._vertexElementsUpdate = !!this._uv3 !== !!uv;\n        this._vertexBufferUpdateFlag |= VertexChangedFlags.UV3;\n        this._vertexDataUpdateFlag &= ~VertexChangedFlags.UV3;\n        this._uv3 = uv;\n        break;\n      case 4:\n        if (!this._uv4 && !uv) {\n          return;\n        }\n\n        this._vertexElementsUpdate = !!this._uv4 !== !!uv;\n        this._vertexBufferUpdateFlag |= VertexChangedFlags.UV4;\n        this._vertexDataUpdateFlag &= ~VertexChangedFlags.UV4;\n        this._uv4 = uv;\n        break;\n      case 5:\n        if (!this._uv5 && !uv) {\n          return;\n        }\n\n        this._vertexElementsUpdate = !!this._uv5 !== !!uv;\n        this._vertexBufferUpdateFlag |= VertexChangedFlags.UV5;\n        this._vertexDataUpdateFlag &= ~VertexChangedFlags.UV5;\n        this._uv5 = uv;\n        break;\n      case 6:\n        if (!this._uv6 && !uv) {\n          return;\n        }\n\n        this._vertexElementsUpdate = !!this._uv6 !== !!uv;\n        this._vertexBufferUpdateFlag |= VertexChangedFlags.UV6;\n        this._vertexDataUpdateFlag &= ~VertexChangedFlags.UV6;\n        this._uv6 = uv;\n        break;\n      case 7:\n        if (!this._uv7 && !uv) {\n          return;\n        }\n\n        this._vertexElementsUpdate = !!this._uv7 !== !!uv;\n        this._vertexBufferUpdateFlag |= VertexChangedFlags.UV7;\n        this._vertexDataUpdateFlag &= ~VertexChangedFlags.UV7;\n        this._uv7 = uv;\n        break;\n      default:\n        throw \"The index of channel needs to be in range [0 - 7].\";\n    }\n  }\n\n  /**\n   * Get uv for the mesh.\n   * @remarks Please call the setUV() method after modification to ensure that the modification takes effect.\n   */\n  getUVs(): Vector2[] | null;\n  /**\n   * Get uv for the mesh by channelIndex.\n   * @param channelIndex - The index of uv channels, in [0 ~ 7] range.\n   * @remarks Please call the setUV() method after modification to ensure that the modification takes effect.\n   */\n  getUVs(channelIndex: number): Vector2[] | null;\n  getUVs(channelIndex?: number): Vector2[] | null {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    channelIndex = channelIndex ?? 0;\n    switch (channelIndex) {\n      case 0:\n        return this._uv;\n      case 1:\n        return this._uv1;\n      case 2:\n        return this._uv2;\n      case 3:\n        return this._uv3;\n      case 4:\n        return this._uv4;\n      case 5:\n        return this._uv5;\n      case 6:\n        return this._uv6;\n      case 7:\n        return this._uv7;\n    }\n    throw \"The index of channel needs to be in range [0 - 7].\";\n  }\n\n  /**\n   * Set indices for the mesh.\n   * @param indices - The indices for the mesh.\n   */\n  setIndices(indices: Uint8Array | Uint16Array | Uint32Array): void {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n\n    if (this._indices !== indices) {\n      this._indices = indices;\n      if (indices instanceof Uint8Array) {\n        this._indicesFormat = IndexFormat.UInt8;\n      } else if (indices instanceof Uint16Array) {\n        this._indicesFormat = IndexFormat.UInt16;\n      } else if (indices instanceof Uint32Array) {\n        this._indicesFormat = IndexFormat.UInt32;\n      }\n    }\n\n    this._indicesChangeFlag = true;\n  }\n\n  /**\n   * Get indices for the mesh.\n   */\n  getIndices(): Uint8Array | Uint16Array | Uint32Array {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    return this._indices;\n  }\n\n  /**\n   * @beta\n   * @todo Update buffer should support custom vertex elements.\n   * Set vertex elements.\n   * @param elements - Vertex element collection\n   */\n  setVertexElements(elements: VertexElement[]): void {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n\n    const customVertexElements = this._customVertexElements;\n    customVertexElements.length = 0;\n\n    const customVertexElementMap: Record<string, VertexElement> = {};\n    for (let i = 0, n = elements.length; i < n; i++) {\n      const element = elements[i];\n      customVertexElements.push(element);\n      customVertexElementMap[element.semantic] = element;\n    }\n\n    if (customVertexElementMap[VertexAttribute.Position]) {\n      const positions = this.getPositions();\n      positions && (this._vertexBufferUpdateFlag |= VertexChangedFlags.Position);\n    } else {\n      this.setPositions(null);\n    }\n\n    if (customVertexElementMap[VertexAttribute.Normal]) {\n      const normals = this.getNormals();\n      normals && (this._vertexBufferUpdateFlag |= VertexChangedFlags.Normal);\n    } else {\n      this.setNormals(null);\n    }\n\n    if (customVertexElementMap[VertexAttribute.Color]) {\n      const colors = this.getColors();\n      colors && (this._vertexBufferUpdateFlag |= VertexChangedFlags.Color);\n    } else {\n      this.setColors(null);\n    }\n\n    if (customVertexElementMap[VertexAttribute.BoneWeight]) {\n      const boneWeights = this.getBoneWeights();\n      boneWeights && (this._vertexBufferUpdateFlag |= VertexChangedFlags.BoneWeight);\n    } else {\n      this.setBoneWeights(null);\n    }\n\n    if (customVertexElementMap[VertexAttribute.BoneIndex]) {\n      const boneIndices = this.getBoneIndices();\n      boneIndices && (this._vertexBufferUpdateFlag |= VertexChangedFlags.BoneIndex);\n    } else {\n      this.setBoneIndices(null);\n    }\n\n    if (customVertexElementMap[VertexAttribute.Tangent]) {\n      const tangents = this.getTangents();\n      tangents && (this._vertexBufferUpdateFlag |= VertexChangedFlags.Tangent);\n    } else {\n      this.setTangents(null);\n    }\n\n    if (customVertexElementMap[VertexAttribute.UV]) {\n      const uvs = this.getUVs(0);\n      uvs && (this._vertexBufferUpdateFlag |= VertexChangedFlags.UV);\n    } else {\n      this.setUVs(null, 0);\n    }\n\n    if (customVertexElementMap[VertexAttribute.UV1]) {\n      const uv1s = this.getUVs(1);\n      uv1s && (this._vertexBufferUpdateFlag |= VertexChangedFlags.UV1);\n    } else {\n      this.setUVs(null, 1);\n    }\n\n    if (customVertexElementMap[VertexAttribute.UV2]) {\n      const uv2s = this.getUVs(2);\n      uv2s && (this._vertexBufferUpdateFlag |= VertexChangedFlags.UV2);\n    } else {\n      this.setUVs(null, 2);\n    }\n\n    if (customVertexElementMap[VertexAttribute.UV3]) {\n      const uv3s = this.getUVs(3);\n      uv3s && (this._vertexBufferUpdateFlag |= VertexChangedFlags.UV3);\n    } else {\n      this.setUVs(null, 3);\n    }\n\n    if (customVertexElementMap[VertexAttribute.UV4]) {\n      const uv4s = this.getUVs(4);\n      uv4s && (this._vertexBufferUpdateFlag |= VertexChangedFlags.UV4);\n    } else {\n      this.setUVs(null, 4);\n    }\n\n    if (customVertexElementMap[VertexAttribute.UV5]) {\n      const uv5s = this.getUVs(5);\n      uv5s && (this._vertexBufferUpdateFlag |= VertexChangedFlags.UV5);\n    } else {\n      this.setUVs(null, 5);\n    }\n\n    if (customVertexElementMap[VertexAttribute.UV6]) {\n      const uv6s = this.getUVs(6);\n      uv6s && (this._vertexBufferUpdateFlag |= VertexChangedFlags.UV6);\n    } else {\n      this.setUVs(null, 6);\n    }\n\n    if (customVertexElementMap[VertexAttribute.UV7]) {\n      const uv7s = this.getUVs(7);\n      uv7s && (this._vertexBufferUpdateFlag |= VertexChangedFlags.UV7);\n    } else {\n      this.setUVs(null, 7);\n    }\n\n    this._vertexElementsUpdate = true;\n  }\n\n  /**\n   * @beta\n   * Set vertex buffer binding.\n   * @param vertexBufferBindings - Vertex buffer binding\n   * @param index - Vertex buffer index, the default value is 0\n   */\n  setVertexBufferBinding(vertexBufferBindings: VertexBufferBinding, index?: number): void;\n\n  /**\n   * @beta\n   * Set vertex buffer binding.\n   * @param vertexBuffer - Vertex buffer\n   * @param stride - Vertex buffer data stride\n   * @param index - Vertex buffer index, the default value is 0\n   */\n  setVertexBufferBinding(vertexBuffer: Buffer, stride: number, index?: number): void;\n\n  /**\n   * @beta\n   * @todo Use this way to update gpu buffer should can get cpu data(may be should support get data form GPU).\n   * @use `setPosition` and `setVertexBufferBinding` at the same time, thew VertexBufferBinding and Vertex buffer data should right.\n   */\n  setVertexBufferBinding(\n    bufferOrBinding: Buffer | VertexBufferBinding,\n    strideOrFirstIndex: number = 0,\n    index: number = 0\n  ): void {\n    let binding = <VertexBufferBinding>bufferOrBinding;\n    const isBinding = binding.buffer !== undefined;\n    isBinding || (binding = new VertexBufferBinding(<Buffer>bufferOrBinding, strideOrFirstIndex));\n\n    const bindings = this._vertexBufferBindings;\n    bindings.length <= index && (bindings.length = index + 1);\n    this._setVertexBufferBinding(isBinding ? strideOrFirstIndex : index, binding);\n    this._vertexDataUpdateFlag |= VertexChangedFlags.Position;\n  }\n\n  /**\n   * Set vertex buffer binding.\n   * @param vertexBufferBindings - Vertex buffer binding\n   * @param firstIndex - First vertex buffer index, the default value is 0\n   */\n  setVertexBufferBindings(vertexBufferBindings: VertexBufferBinding[], firstIndex: number = 0): void {\n    const bindings = this._vertexBufferBindings;\n    const count = vertexBufferBindings.length;\n    const needLength = firstIndex + count;\n    bindings.length < needLength && (bindings.length = needLength);\n    for (let i = 0; i < count; i++) {\n      this._setVertexBufferBinding(firstIndex + i, vertexBufferBindings[i]);\n    }\n  }\n\n  /**\n   * Add a BlendShape for this ModelMesh.\n   * @param blendShape - The BlendShape\n   */\n  addBlendShape(blendShape: BlendShape): void {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n\n    this._blendShapeManager._addBlendShape(blendShape);\n  }\n\n  /**\n   * Clear all BlendShapes.\n   */\n  clearBlendShapes(): void {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    this._blendShapeManager._clearBlendShapes();\n  }\n\n  /**\n   * Get name of BlendShape by given index.\n   * @param index - The index of BlendShape\n   * @returns The name of BlendShape\n   */\n  getBlendShapeName(index: number): string {\n    if (this._accessible) {\n      const blendShapes = this._blendShapeManager._blendShapes;\n      return blendShapes[index].name;\n    } else {\n      return this._blendShapeManager._blendShapeNames[index];\n    }\n  }\n\n  /**\n   * Upload Mesh Data to GPU.\n   * @param noLongerAccessible - Whether to access data later. If true, you'll never access data anymore (free memory cache)\n   */\n  uploadData(noLongerAccessible: boolean): void {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n\n    // Update vertex elements\n    this._updateVertexElements();\n\n    // Vertex count change\n    const vertexBuffer = this._vertexBufferBindings[0]?._buffer;\n    if (this._vertexCountChanged) {\n      this._vertexBufferUpdateFlag = VertexChangedFlags.All;\n      vertexBuffer?.destroy();\n\n      const elementCount = this._bufferStrides[0] / 4;\n\n      const vertexFloatCount = elementCount * this.vertexCount;\n      const vertices = new Float32Array(vertexFloatCount);\n      this._verticesFloat32 = vertices;\n      this._verticesUint8 = new Uint8Array(vertices.buffer);\n      this._updateVertices(vertices);\n\n      const bufferUsage = noLongerAccessible ? BufferUsage.Static : BufferUsage.Dynamic;\n      const newVertexBuffer = new Buffer(this._engine, BufferBindFlag.VertexBuffer, vertices, bufferUsage);\n\n      this._setVertexBufferBinding(0, new VertexBufferBinding(newVertexBuffer, elementCount * 4));\n      this._vertexCountChanged = false;\n    } else {\n      if (this._vertexBufferUpdateFlag & VertexChangedFlags.All) {\n        const vertices = this._verticesFloat32;\n        this._updateVertices(vertices);\n        vertexBuffer.setData(vertices);\n      }\n    }\n\n    const { _indices: indices } = this;\n    const indexBuffer = this._indexBufferBinding?._buffer;\n    if (indices) {\n      if (!indexBuffer || indices.byteLength != indexBuffer.byteLength) {\n        indexBuffer?.destroy();\n        const newIndexBuffer = new Buffer(this._engine, BufferBindFlag.IndexBuffer, indices);\n        this._setIndexBufferBinding(new IndexBufferBinding(newIndexBuffer, this._indicesFormat));\n        this._indicesChangeFlag = false;\n      } else if (this._indicesChangeFlag) {\n        indexBuffer.setData(indices);\n        if (this._indexBufferBinding._format !== this._indicesFormat) {\n          this._setIndexBufferBinding(new IndexBufferBinding(indexBuffer, this._indicesFormat));\n        }\n        this._indicesChangeFlag = false;\n      }\n    } else if (indexBuffer) {\n      indexBuffer.destroy();\n      this._setIndexBufferBinding(null);\n    }\n\n    const { _blendShapeManager: blendShapeManager } = this;\n    blendShapeManager._blendShapeCount > 0 && blendShapeManager._update(this._vertexCountChanged, noLongerAccessible);\n\n    if (noLongerAccessible) {\n      this._accessible = false;\n      this._releaseCache();\n    }\n  }\n\n  /**\n   * Calculate mesh tangent.\n   * @remark need to set positions(with or not with indices), normals, uv before calculation.\n   * @remark based on http://foundationsofgameenginedev.com/FGED2-sample.pdf\n   */\n  calculateTangents(): void {\n    if (!this._normals || !this._uv) {\n      throw \"Set normal and uv before calculation.\";\n    }\n    const { _indices: indices, _positions: positions, _normals: normals, _uv: uvs, _vertexCount: vertexCount } = this;\n    const { _tempVec0: e1, _tempVec1: e2, _tempVec2: t, _tempVec3: b, _tempVec4: temp } = ModelMesh;\n    const triangleCount = indices ? indices.length / 3 : positions.length / 3;\n    const tangents = new Array<Vector4>(vertexCount);\n    const biTangents = new Array<Vector3>(vertexCount);\n    for (let i = 0; i < vertexCount; i++) {\n      tangents[i] = new Vector4();\n      biTangents[i] = new Vector3();\n    }\n\n    // Calculate tangent and bi-tangent for each triangle and add to all three vertices.\n    for (let k = 0; k < triangleCount; k++) {\n      let i0 = 3 * k;\n      let i1 = 3 * k + 1;\n      let i2 = 3 * k + 2;\n      if (indices) {\n        i0 = indices[i0];\n        i1 = indices[i1];\n        i2 = indices[i2];\n      }\n\n      const p0 = positions[i0];\n      const p1 = positions[i1];\n      const p2 = positions[i2];\n      const w0 = uvs[i0];\n      const w1 = uvs[i1];\n      const w2 = uvs[i2];\n\n      Vector3.subtract(p1, p0, e1);\n      Vector3.subtract(p2, p0, e2);\n      const x1 = w1.x - w0.x;\n      const x2 = w2.x - w0.x;\n      const y1 = w1.y - w0.y;\n      const y2 = w2.y - w0.y;\n      const r = 1.0 / (x1 * y2 - x2 * y1);\n\n      Vector3.scale(e1, y2 * r, t);\n      Vector3.scale(e2, y1 * r, temp);\n      Vector3.subtract(t, temp, t);\n      Vector3.scale(e2, x1 * r, b);\n      Vector3.scale(e1, x2 * r, temp);\n      Vector3.subtract(b, temp, b);\n\n      let tangent = tangents[i0];\n      tangent.set(tangent.x + t.x, tangent.y + t.y, tangent.z + t.z, 1.0);\n\n      tangent = tangents[i1];\n      tangent.set(tangent.x + t.x, tangent.y + t.y, tangent.z + t.z, 1.0);\n\n      tangent = tangents[i2];\n      tangent.set(tangent.x + t.x, tangent.y + t.y, tangent.z + t.z, 1.0);\n\n      biTangents[i0].add(b);\n      biTangents[i1].add(b);\n      biTangents[i2].add(b);\n    }\n\n    // Orthonormalize each tangent and calculate the handedness.\n    for (let i = 0; i < vertexCount; i++) {\n      const n = normals[i];\n      const b = biTangents[i];\n      const tangent = tangents[i];\n      t.set(tangent.x, tangent.y, tangent.z);\n\n      Vector3.cross(t, b, temp);\n      const w = Vector3.dot(temp, n) > 0.0 ? 1 : -1;\n      Vector3.scale(n, Vector3.dot(t, n), temp);\n      Vector3.subtract(t, temp, t);\n      t.normalize();\n      tangent.set(t.x, t.y, t.z, w);\n    }\n    this.setTangents(tangents);\n  }\n\n  /**\n   * @override\n   * @internal\n   */\n  _onDestroy(): void {\n    super._onDestroy();\n    this._accessible && this._releaseCache();\n  }\n\n  private _supplementaryVertexElements(): void {\n    this._clearVertexElements();\n\n    const customVertexElements = this._customVertexElements;\n    for (let i = 0, n = customVertexElements.length; i < n; i++) {\n      this._addVertexElement(customVertexElements[i]);\n    }\n\n    const vertexElementMap = this._vertexElementMap;\n    if (this._positions && !vertexElementMap[VertexAttribute.Position]) {\n      this._insertVertexAttribute(VertexAttribute.Position);\n    } else {\n    }\n\n    if (this._normals && !vertexElementMap[VertexAttribute.Normal]) {\n      this._insertVertexAttribute(VertexAttribute.Normal);\n    }\n\n    if (this._colors && !vertexElementMap[VertexAttribute.Color]) {\n      this._insertVertexAttribute(VertexAttribute.Color);\n    }\n\n    if (this._boneWeights && !vertexElementMap[VertexAttribute.BoneWeight]) {\n      this._insertVertexAttribute(VertexAttribute.BoneWeight);\n    }\n\n    if (this._boneIndices && !vertexElementMap[VertexAttribute.BoneIndex]) {\n      this._insertVertexAttribute(VertexAttribute.BoneIndex);\n    }\n\n    if (this._tangents && !vertexElementMap[VertexAttribute.Tangent]) {\n      this._insertVertexAttribute(VertexAttribute.Tangent);\n    }\n\n    if (this._uv && !vertexElementMap[VertexAttribute.UV]) {\n      this._insertVertexAttribute(VertexAttribute.UV);\n    }\n\n    if (this._uv1 && !vertexElementMap[VertexAttribute.UV1]) {\n      this._insertVertexAttribute(VertexAttribute.UV1);\n    }\n\n    if (this._uv2 && !vertexElementMap[VertexAttribute.UV2]) {\n      this._insertVertexAttribute(VertexAttribute.UV2);\n    }\n\n    if (this._uv3 && !vertexElementMap[VertexAttribute.UV3]) {\n      this._insertVertexAttribute(VertexAttribute.UV3);\n    }\n\n    if (this._uv4 && !vertexElementMap[VertexAttribute.UV4]) {\n      this._insertVertexAttribute(VertexAttribute.UV4);\n    }\n\n    if (this._uv5 && !vertexElementMap[VertexAttribute.UV5]) {\n      this._insertVertexAttribute(VertexAttribute.UV5);\n    }\n\n    if (this._uv6 && !vertexElementMap[VertexAttribute.UV6]) {\n      this._insertVertexAttribute(VertexAttribute.UV6);\n    }\n\n    if (this._uv7 && !vertexElementMap[VertexAttribute.UV7]) {\n      this._insertVertexAttribute(VertexAttribute.UV7);\n    }\n  }\n\n  private _updateVertexElements(): void {\n    const bsManager = this._blendShapeManager;\n    const bsAttributeUpdate = !bsManager._useTextureMode() && bsManager._vertexElementsNeedUpdate();\n\n    if (this._vertexElementsUpdate || bsAttributeUpdate) {\n      this._supplementaryVertexElements();\n\n      if (bsAttributeUpdate && bsManager._blendShapeCount > 0) {\n        // Reserve at least 1 placeholder to save the built-in vertex buffer\n        bsManager._setAttributeModeOffsetInfo(this._vertexElements.length, this._vertexBufferBindings.length || 1);\n        bsManager._addVertexElements(this);\n      }\n      this._vertexElementsUpdate = false;\n    }\n  }\n\n  private _updateVertices(vertices: Float32Array): void {\n    // prettier-ignore\n    const { _bufferStrides,_vertexCount, _positions, _normals, _colors, _vertexBufferUpdateFlag: _vertexChangeFlag, _boneWeights, _boneIndices, _tangents, _uv, _uv1, _uv2, _uv3, _uv4, _uv5, _uv6, _uv7 } = this;\n    const _vertexStrideFloat = _bufferStrides[0] / 4;\n\n    if (_vertexChangeFlag & VertexChangedFlags.Position) {\n      for (let i = 0; i < _vertexCount; i++) {\n        const start = _vertexStrideFloat * i;\n        const position = _positions[i];\n        vertices[start] = position.x;\n        vertices[start + 1] = position.y;\n        vertices[start + 2] = position.z;\n      }\n    }\n\n    let offset = 3;\n\n    if (_normals) {\n      if (_vertexChangeFlag & VertexChangedFlags.Normal) {\n        for (let i = 0; i < _vertexCount; i++) {\n          const start = _vertexStrideFloat * i + offset;\n          const normal = _normals[i];\n          if (normal) {\n            vertices[start] = normal.x;\n            vertices[start + 1] = normal.y;\n            vertices[start + 2] = normal.z;\n          }\n        }\n      }\n      offset += 3;\n    }\n\n    if (_colors) {\n      if (_vertexChangeFlag & VertexChangedFlags.Color) {\n        for (let i = 0; i < _vertexCount; i++) {\n          const start = _vertexStrideFloat * i + offset;\n          const color = _colors[i];\n          if (color) {\n            vertices[start] = color.r;\n            vertices[start + 1] = color.g;\n            vertices[start + 2] = color.b;\n            vertices[start + 3] = color.a;\n          }\n        }\n      }\n      offset += 4;\n    }\n\n    if (_boneWeights) {\n      if (_vertexChangeFlag & VertexChangedFlags.BoneWeight) {\n        for (let i = 0; i < _vertexCount; i++) {\n          const start = _vertexStrideFloat * i + offset;\n          const weight = _boneWeights[i];\n          if (weight) {\n            vertices[start] = weight.x;\n            vertices[start + 1] = weight.y;\n            vertices[start + 2] = weight.z;\n            vertices[start + 3] = weight.w;\n          }\n        }\n      }\n      offset += 4;\n    }\n\n    if (_boneIndices) {\n      if (_vertexChangeFlag & VertexChangedFlags.BoneIndex) {\n        const { _verticesUint8 } = this;\n        for (let i = 0; i < _vertexCount; i++) {\n          const start = _vertexStrideFloat * i + offset;\n          const joint = _boneIndices[i];\n          if (joint) {\n            const internalStart = start * 4;\n            _verticesUint8[internalStart] = joint.x;\n            _verticesUint8[internalStart + 1] = joint.y;\n            _verticesUint8[internalStart + 2] = joint.z;\n            _verticesUint8[internalStart + 3] = joint.w;\n          }\n        }\n      }\n      offset += 1;\n    }\n\n    if (_tangents) {\n      if (_vertexChangeFlag & VertexChangedFlags.Tangent) {\n        for (let i = 0; i < _vertexCount; i++) {\n          const start = _vertexStrideFloat * i + offset;\n          const tangent = _tangents[i];\n          if (tangent) {\n            vertices[start] = tangent.x;\n            vertices[start + 1] = tangent.y;\n            vertices[start + 2] = tangent.z;\n            vertices[start + 3] = tangent.w;\n          }\n        }\n      }\n      offset += 4;\n    }\n    if (_uv) {\n      if (_vertexChangeFlag & VertexChangedFlags.UV) {\n        for (let i = 0; i < _vertexCount; i++) {\n          const start = _vertexStrideFloat * i + offset;\n          const uv = _uv[i];\n          if (uv) {\n            vertices[start] = uv.x;\n            vertices[start + 1] = uv.y;\n          }\n        }\n      }\n      offset += 2;\n    }\n    if (_uv1) {\n      if (_vertexChangeFlag & VertexChangedFlags.UV1) {\n        for (let i = 0; i < _vertexCount; i++) {\n          const start = _vertexStrideFloat * i + offset;\n          const uv = _uv1[i];\n          if (uv) {\n            vertices[start] = uv.x;\n            vertices[start + 1] = uv.y;\n          }\n        }\n      }\n      offset += 2;\n    }\n    if (_uv2) {\n      if (_vertexChangeFlag & VertexChangedFlags.UV2) {\n        for (let i = 0; i < _vertexCount; i++) {\n          const start = _vertexStrideFloat * i + offset;\n          const uv = _uv2[i];\n          if (uv) {\n            vertices[start] = uv.x;\n            vertices[start + 1] = uv.y;\n          }\n        }\n      }\n      offset += 2;\n    }\n    if (_uv3) {\n      if (_vertexChangeFlag & VertexChangedFlags.UV3) {\n        for (let i = 0; i < _vertexCount; i++) {\n          const start = _vertexStrideFloat * i + offset;\n          const uv = _uv3[i];\n          if (uv) {\n            vertices[start] = uv.x;\n            vertices[start + 1] = uv.y;\n          }\n        }\n      }\n      offset += 2;\n    }\n    if (_uv4) {\n      if (_vertexChangeFlag & VertexChangedFlags.UV4) {\n        for (let i = 0; i < _vertexCount; i++) {\n          const start = _vertexStrideFloat * i + offset;\n          const uv = _uv4[i];\n          if (uv) {\n            vertices[start] = uv.x;\n            vertices[start + 1] = uv.y;\n          }\n        }\n      }\n      offset += 2;\n    }\n    if (_uv5) {\n      if (_vertexChangeFlag & VertexChangedFlags.UV5) {\n        for (let i = 0; i < _vertexCount; i++) {\n          const start = _vertexStrideFloat * i + offset;\n          const uv = _uv5[i];\n          if (uv) {\n            vertices[start] = uv.x;\n            vertices[start + 1] = uv.y;\n          }\n        }\n      }\n      offset += 2;\n    }\n    if (_uv6) {\n      if (_vertexChangeFlag & VertexChangedFlags.UV6) {\n        for (let i = 0; i < _vertexCount; i++) {\n          const start = _vertexStrideFloat * i + offset;\n          const uv = _uv6[i];\n          if (uv) {\n            vertices[start] = uv.x;\n            vertices[start + 1] = uv.y;\n          }\n        }\n      }\n      offset += 2;\n    }\n    if (_uv7) {\n      if (_vertexChangeFlag & VertexChangedFlags.UV7) {\n        for (let i = 0; i < _vertexCount; i++) {\n          const start = _vertexStrideFloat * i + offset;\n          const uv = _uv7[i];\n          if (uv) {\n            vertices[start] = uv.x;\n            vertices[start + 1] = uv.y;\n          }\n        }\n      }\n      offset += 2;\n    }\n    this._vertexBufferUpdateFlag = 0;\n  }\n\n  private _insertVertexAttribute(vertexAttribute: VertexAttribute): void {\n    const format = this._getAttributeFormat(vertexAttribute);\n    const needByteLength = this._getAttributeByteLength(vertexAttribute);\n    const vertexElements = this._vertexElements;\n\n    let i = 0;\n    let lastOffset = 0;\n    for (let n = vertexElements.length; i < n; i++) {\n      const vertexElement = vertexElements[i];\n      if (vertexElement.bindingIndex == 0) {\n        if (vertexElement.offset - lastOffset >= needByteLength) {\n          break;\n        }\n        lastOffset = vertexElement.offset + this._getAttributeByteLength(vertexElement.semantic);\n      }\n    }\n    this._insertVertexElement(i, new VertexElement(vertexAttribute, lastOffset, format, 0));\n    this._bufferStrides[0] = lastOffset + needByteLength;\n  }\n\n  private _getAttributeFormat(attribute: VertexAttribute): VertexElementFormat {\n    switch (attribute) {\n      case VertexAttribute.Position:\n        return VertexElementFormat.Vector3;\n      case VertexAttribute.Normal:\n        return VertexElementFormat.Vector3;\n      case VertexAttribute.Color:\n        return VertexElementFormat.Vector4;\n      case VertexAttribute.BoneWeight:\n        return VertexElementFormat.Vector4;\n      case VertexAttribute.BoneIndex:\n        return VertexElementFormat.UByte4;\n      case VertexAttribute.Tangent:\n        return VertexElementFormat.Vector4;\n      case VertexAttribute.UV:\n      case VertexAttribute.UV1:\n      case VertexAttribute.UV2:\n      case VertexAttribute.UV3:\n      case VertexAttribute.UV4:\n      case VertexAttribute.UV5:\n      case VertexAttribute.UV6:\n      case VertexAttribute.UV7:\n        return VertexElementFormat.Vector2;\n    }\n  }\n\n  private _getAttributeByteLength(attribute: string): number {\n    switch (attribute) {\n      case VertexAttribute.Position:\n        return 12;\n      case VertexAttribute.Normal:\n        return 12;\n      case VertexAttribute.Color:\n        return 16;\n      case VertexAttribute.BoneWeight:\n        return 16;\n      case VertexAttribute.BoneIndex:\n        return 4;\n      case VertexAttribute.Tangent:\n        return 16;\n      case VertexAttribute.UV:\n      case VertexAttribute.UV1:\n      case VertexAttribute.UV2:\n      case VertexAttribute.UV3:\n      case VertexAttribute.UV4:\n      case VertexAttribute.UV5:\n      case VertexAttribute.UV6:\n      case VertexAttribute.UV7:\n        return 8;\n    }\n  }\n\n  private _releaseCache(): void {\n    this._verticesUint8 = null;\n    this._indices = null;\n    this._verticesFloat32 = null;\n    this._positions = null;\n    this._tangents = null;\n    this._normals = null;\n    this._colors = null;\n    this._uv = null;\n    this._uv1 = null;\n    this._uv2 = null;\n    this._uv3 = null;\n    this._uv4 = null;\n    this._uv5 = null;\n    this._uv6 = null;\n    this._uv7 = null;\n    this._blendShapeManager._releaseMemoryCache();\n  }\n}\n\nenum VertexChangedFlags {\n  Position = 0x1,\n  Normal = 0x2,\n  Color = 0x4,\n  Tangent = 0x8,\n  BoneWeight = 0x10,\n  BoneIndex = 0x20,\n  UV = 0x40,\n  UV1 = 0x80,\n  UV2 = 0x100,\n  UV3 = 0x200,\n  UV4 = 0x400,\n  UV5 = 0x800,\n  UV6 = 0x1000,\n  UV7 = 0x2000,\n  All = 0xffff\n}\n","import { Matrix } from \"@galacean/engine-math\";\nimport { EngineObject } from \"../base/EngineObject\";\nimport { Entity } from \"../Entity\";\n\n/**\n * Mesh skin data, equal glTF skins define\n */\nexport class Skin extends EngineObject {\n  public inverseBindMatrices: Matrix[];\n  public joints: string[];\n  public skeleton: string;\n  /**\n   * Constructor of skin\n   * @param name - name\n   */\n  constructor(public name: string) {\n    super(null);\n    this.inverseBindMatrices = []; // inverse bind matrix array\n    this.joints = []; // joints name array, element type: string\n    this.skeleton = \"none\"; // root bone name\n  }\n}\n","import { BoundingBox } from \"@galacean/engine-math\";\nimport { Entity } from \"../Entity\";\nimport { RenderContext } from \"../RenderPipeline/RenderContext\";\nimport { Renderer, RendererUpdateFlags } from \"../Renderer\";\nimport { Logger } from \"../base/Logger\";\nimport { ignoreClone } from \"../clone/CloneManager\";\nimport { ICustomClone } from \"../clone/ComponentCloner\";\nimport { Mesh, MeshModifyFlags } from \"../graphic/Mesh\";\nimport { Shader } from \"../shader/Shader\";\n\n/**\n * MeshRenderer Component.\n */\nexport class MeshRenderer extends Renderer implements ICustomClone {\n  private static _uvMacro = Shader.getMacroByName(\"O3_HAS_UV\");\n  private static _uv1Macro = Shader.getMacroByName(\"O3_HAS_UV1\");\n  private static _normalMacro = Shader.getMacroByName(\"O3_HAS_NORMAL\");\n  private static _tangentMacro = Shader.getMacroByName(\"O3_HAS_TANGENT\");\n  private static _vertexColorMacro = Shader.getMacroByName(\"O3_HAS_VERTEXCOLOR\");\n\n  private _enableVertexColor: boolean = false;\n\n  /** @internal */\n  @ignoreClone\n  _mesh: Mesh;\n\n  /**\n   * Mesh assigned to the renderer.\n   */\n  get mesh(): Mesh {\n    return this._mesh;\n  }\n\n  set mesh(value: Mesh) {\n    if (this._mesh !== value) {\n      this._setMesh(value);\n    }\n  }\n\n  /**\n   * Whether enable vertex color.\n   */\n  get enableVertexColor(): boolean {\n    return this._enableVertexColor;\n  }\n\n  set enableVertexColor(value: boolean) {\n    if (value !== this._enableVertexColor) {\n      this._dirtyUpdateFlag |= MeshRendererUpdateFlags.VertexElementMacro;\n      this._enableVertexColor = value;\n    }\n  }\n\n  /**\n   * @internal\n   */\n  constructor(entity: Entity) {\n    super(entity);\n    this._onMeshChanged = this._onMeshChanged.bind(this);\n  }\n\n  /**\n   * @internal\n   * @override\n   */\n  _onDestroy(): void {\n    super._onDestroy();\n    const mesh = this._mesh;\n    if (mesh && !mesh.destroyed) {\n      mesh._addRefCount(-1);\n      this._mesh = null;\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _cloneTo(target: MeshRenderer): void {\n    target.mesh = this._mesh;\n  }\n\n  /**\n   * @override\n   */\n  protected _updateBounds(worldBounds: BoundingBox): void {\n    const mesh = this._mesh;\n    if (mesh) {\n      const localBounds = mesh.bounds;\n      const worldMatrix = this._entity.transform.worldMatrix;\n      BoundingBox.transform(localBounds, worldMatrix, worldBounds);\n    } else {\n      worldBounds.min.set(0, 0, 0);\n      worldBounds.max.set(0, 0, 0);\n    }\n  }\n\n  /**\n   * @override\n   */\n  protected _render(context: RenderContext): void {\n    const mesh = this._mesh;\n    if (mesh) {\n      if (this._dirtyUpdateFlag & MeshRendererUpdateFlags.VertexElementMacro) {\n        const shaderData = this.shaderData;\n        const vertexElements = mesh._vertexElements;\n\n        shaderData.disableMacro(MeshRenderer._uvMacro);\n        shaderData.disableMacro(MeshRenderer._uv1Macro);\n        shaderData.disableMacro(MeshRenderer._normalMacro);\n        shaderData.disableMacro(MeshRenderer._tangentMacro);\n        shaderData.disableMacro(MeshRenderer._vertexColorMacro);\n\n        for (let i = 0, n = vertexElements.length; i < n; i++) {\n          switch (vertexElements[i].semantic) {\n            case \"TEXCOORD_0\":\n              shaderData.enableMacro(MeshRenderer._uvMacro);\n              break;\n            case \"TEXCOORD_1\":\n              shaderData.enableMacro(MeshRenderer._uv1Macro);\n              break;\n            case \"NORMAL\":\n              shaderData.enableMacro(MeshRenderer._normalMacro);\n              break;\n            case \"TANGENT\":\n              shaderData.enableMacro(MeshRenderer._tangentMacro);\n              break;\n            case \"COLOR_0\":\n              this.enableVertexColor && shaderData.enableMacro(MeshRenderer._vertexColorMacro);\n              break;\n          }\n        }\n        this._dirtyUpdateFlag &= ~MeshRendererUpdateFlags.VertexElementMacro;\n      }\n\n      const subMeshes = mesh.subMeshes;\n      const renderPipeline = context.camera._renderPipeline;\n      const renderElementPool = this._engine._renderElementPool;\n      for (let i = 0, n = subMeshes.length; i < n; i++) {\n        const material = this._materials[i];\n        if (material) {\n          const renderStates = material.renderStates;\n          const shaderPasses = material.shader.passes;\n          for (let j = 0, m = shaderPasses.length; j < m; j++) {\n            const element = renderElementPool.getFromPool();\n            element.setValue(this, mesh, subMeshes[i], material, renderStates[j], shaderPasses[j]);\n            renderPipeline.pushPrimitive(element);\n          }\n        }\n      }\n    } else {\n      Logger.error(\"mesh is null.\");\n    }\n  }\n\n  private _setMesh(mesh: Mesh): void {\n    const lastMesh = this._mesh;\n    if (lastMesh) {\n      lastMesh._addRefCount(-1);\n      lastMesh._updateFlagManager.removeListener(this._onMeshChanged);\n    }\n    if (mesh) {\n      mesh._addRefCount(1);\n      mesh._updateFlagManager.addListener(this._onMeshChanged);\n      this._dirtyUpdateFlag |= MeshRendererUpdateFlags.All;\n    }\n    this._mesh = mesh;\n  }\n\n  @ignoreClone\n  private _onMeshChanged(type: MeshModifyFlags): void {\n    type & MeshModifyFlags.Bounds && (this._dirtyUpdateFlag |= RendererUpdateFlags.WorldVolume);\n    type & MeshModifyFlags.VertexElements && (this._dirtyUpdateFlag |= MeshRendererUpdateFlags.VertexElementMacro);\n  }\n}\n\n/**\n * @remarks Extends `RendererUpdateFlag`.\n */\nenum MeshRendererUpdateFlags {\n  /** VertexElementMacro. */\n  VertexElementMacro = 0x2,\n  /** All. */\n  All = 0x3\n}\n","import { Matrix } from \"@galacean/engine-math\";\n\nexport class Utils {\n  /**\n   * @internal\n   */\n  static _floatMatrixMultiply(left: Matrix, re: Float32Array, rOffset: number, oe: Float32Array, offset: number): void {\n    const le = left.elements;\n\n    // prettier-ignore\n    const l11 = le[0], l12 = le[1], l13 = le[2], l14 = le[3],\n    l21 = le[4], l22 = le[5], l23 = le[6], l24 = le[7],\n    l31 = le[8], l32 = le[9], l33 = le[10], l34 = le[11],\n    l41 = le[12], l42 = le[13], l43 = le[14], l44 = le[15];\n\n    // prettier-ignore\n    const r11 = re[rOffset], r12 = re[rOffset + 1], r13 = re[rOffset + 2], r14 = re[rOffset + 3],\n    r21 = re[rOffset + 4], r22 = re[rOffset + 5], r23 = re[rOffset + 6], r24 = re[rOffset + 7],\n    r31 = re[rOffset + 8], r32 = re[rOffset + 9], r33 = re[rOffset + 10], r34 = re[rOffset + 11],\n    r41 = re[rOffset + 12], r42 = re[rOffset + 13], r43 = re[rOffset + 14], r44 = re[rOffset + 15];\n\n    oe[offset] = l11 * r11 + l21 * r12 + l31 * r13 + l41 * r14;\n    oe[offset + 1] = l12 * r11 + l22 * r12 + l32 * r13 + l42 * r14;\n    oe[offset + 2] = l13 * r11 + l23 * r12 + l33 * r13 + l43 * r14;\n    oe[offset + 3] = l14 * r11 + l24 * r12 + l34 * r13 + l44 * r14;\n\n    oe[offset + 4] = l11 * r21 + l21 * r22 + l31 * r23 + l41 * r24;\n    oe[offset + 5] = l12 * r21 + l22 * r22 + l32 * r23 + l42 * r24;\n    oe[offset + 6] = l13 * r21 + l23 * r22 + l33 * r23 + l43 * r24;\n    oe[offset + 7] = l14 * r21 + l24 * r22 + l34 * r23 + l44 * r24;\n\n    oe[offset + 8] = l11 * r31 + l21 * r32 + l31 * r33 + l41 * r34;\n    oe[offset + 9] = l12 * r31 + l22 * r32 + l32 * r33 + l42 * r34;\n    oe[offset + 10] = l13 * r31 + l23 * r32 + l33 * r33 + l43 * r34;\n    oe[offset + 11] = l14 * r31 + l24 * r32 + l34 * r33 + l44 * r34;\n\n    oe[offset + 12] = l11 * r41 + l21 * r42 + l31 * r43 + l41 * r44;\n    oe[offset + 13] = l12 * r41 + l22 * r42 + l32 * r43 + l42 * r44;\n    oe[offset + 14] = l13 * r41 + l23 * r42 + l33 * r43 + l43 * r44;\n    oe[offset + 15] = l14 * r41 + l24 * r42 + l34 * r43 + l44 * r44;\n  }\n\n  /**\n   * @internal\n   * Simplify lodash get: https://github.com/lodash/lodash/blob/master/get.js.\n   * @param target - The object to query.\n   * @param path - The path of the property to get.\n   * @returns Returns the resolved value.\n   */\n  static _reflectGet(target: Object, path: string) {\n    const pathArr = this._stringToPath(path);\n\n    let object = target;\n    let index = 0;\n    const length = pathArr.length;\n\n    while (object != null && index < length) {\n      object = object[pathArr[index++]];\n    }\n    return index && index == length ? object : undefined;\n  }\n\n  private static _stringToPath(string): string[] {\n    const result = [];\n    if (string.charCodeAt(0) === charCodeOfDot) {\n      result.push(\"\");\n    }\n    string.replace(rePropName, (match, expression, quote, subString) => {\n      let key = match;\n      if (quote) {\n        key = subString.replace(reEscapeChar, \"$1\");\n      } else if (expression) {\n        key = expression.trim();\n      }\n      result.push(key);\n    });\n    return result;\n  }\n}\n\nconst charCodeOfDot = \".\".charCodeAt(0);\nconst reEscapeChar = /\\\\(\\\\)?/g;\nconst rePropName = RegExp(\n  // Match anything that isn't a dot or bracket.\n  \"[^.[\\\\]]+\" +\n    \"|\" +\n    // Or match property names within brackets.\n    \"\\\\[(?:\" +\n    // Match a non-string expression.\n    \"([^\\\"'][^[]*)\" +\n    \"|\" +\n    // Or match strings (supports escaping characters).\n    \"([\\\"'])((?:(?!\\\\2)[^\\\\\\\\]|\\\\\\\\.)*?)\\\\2\" +\n    \")\\\\]\" +\n    \"|\" +\n    // Or match \"\" as the space between consecutive dots or empty brackets.\n    \"(?=(?:\\\\.|\\\\[\\\\])(?:\\\\.|\\\\[\\\\]|$))\",\n  \"g\"\n);\n","import { BoundingBox, Matrix, Vector2 } from \"@galacean/engine-math\";\nimport { Entity } from \"../Entity\";\nimport { RenderContext } from \"../RenderPipeline/RenderContext\";\nimport { RendererUpdateFlags } from \"../Renderer\";\nimport { Utils } from \"../Utils\";\nimport { Logger } from \"../base/Logger\";\nimport { ignoreClone } from \"../clone/CloneManager\";\nimport { Shader } from \"../shader\";\nimport { Texture2D } from \"../texture/Texture2D\";\nimport { TextureFilterMode } from \"../texture/enums/TextureFilterMode\";\nimport { TextureFormat } from \"../texture/enums/TextureFormat\";\nimport { MeshRenderer } from \"./MeshRenderer\";\nimport { ModelMesh } from \"./ModelMesh\";\nimport { Skin } from \"./Skin\";\n\n/**\n * SkinnedMeshRenderer.\n */\nexport class SkinnedMeshRenderer extends MeshRenderer {\n  private static _tempMatrix = new Matrix();\n  private static _jointCountProperty = Shader.getPropertyByName(\"u_jointCount\");\n  private static _jointSamplerProperty = Shader.getPropertyByName(\"u_jointSampler\");\n  private static _jointMatrixProperty = Shader.getPropertyByName(\"u_jointMatrix\");\n\n  @ignoreClone\n  private _supportSkinning: boolean = false;\n  @ignoreClone\n  private _hasInitSkin: boolean = false;\n  @ignoreClone\n  private _jointDataCreateCache: Vector2 = new Vector2(-1, -1);\n  private _skin: Skin;\n  @ignoreClone\n  private _blendShapeWeights: Float32Array;\n  @ignoreClone\n  private _maxVertexUniformVectors: number;\n  @ignoreClone\n  private _rootBone: Entity;\n  @ignoreClone\n  private _localBounds: BoundingBox = new BoundingBox();\n  @ignoreClone\n  private _jointMatrices: Float32Array;\n  @ignoreClone\n  private _jointTexture: Texture2D;\n  @ignoreClone\n  private _jointEntities: Entity[];\n\n  /** @internal */\n  @ignoreClone\n  _condensedBlendShapeWeights: Float32Array;\n\n  /**\n   * The weights of the BlendShapes.\n   * @remarks Array index is BlendShape index.\n   */\n  get blendShapeWeights(): Float32Array {\n    this._checkBlendShapeWeightLength();\n    return this._blendShapeWeights;\n  }\n\n  set blendShapeWeights(value: Float32Array) {\n    this._checkBlendShapeWeightLength();\n    const blendShapeWeights = this._blendShapeWeights;\n    if (value.length <= blendShapeWeights.length) {\n      blendShapeWeights.set(value);\n    } else {\n      for (let i = 0, n = blendShapeWeights.length; i < n; i++) {\n        blendShapeWeights[i] = value[i];\n      }\n    }\n  }\n\n  /**\n   * Skin Object.\n   */\n  get skin(): Skin {\n    return this._skin;\n  }\n\n  set skin(value: Skin) {\n    if (this._skin !== value) {\n      this._skin = value;\n      this._hasInitSkin = false;\n    }\n  }\n\n  /**\n   * Local bounds.\n   */\n  get localBounds(): BoundingBox {\n    return this._localBounds;\n  }\n\n  set localBounds(value: BoundingBox) {\n    if (this._localBounds !== value) {\n      this._localBounds.copyFrom(value);\n    }\n  }\n\n  /**\n   * Root bone.\n   */\n  get rootBone(): Entity {\n    return this._rootBone;\n  }\n\n  set rootBone(value: Entity) {\n    this._skin.skeleton = value.name;\n    this._hasInitSkin = false;\n    this._dirtyUpdateFlag |= RendererUpdateFlags.WorldVolume;\n  }\n\n  /**\n   * @internal\n   */\n  constructor(entity: Entity) {\n    super(entity);\n    this._skin = null;\n\n    const rhi = this.entity.engine._hardwareRenderer;\n    let maxVertexUniformVectors = rhi.renderStates.getParameter(rhi.gl.MAX_VERTEX_UNIFORM_VECTORS);\n\n    // Limit size to 256 to avoid some problem:\n    // For renderer is \"Apple GPU\", when uniform is large than 256 the skeleton matrix array access in shader very slow in Safari or WKWebview. This may be a apple bug, Chrome and Firefox is OK!\n    // For renderer is \"ANGLE (AMD, AMD Radeon(TM) Graphics Direct3011 vs_5_0 ps_5_0, D3011)\", compile shader si very slow because of max uniform is 4096.\n    maxVertexUniformVectors = Math.min(maxVertexUniformVectors, rhi._options._maxAllowSkinUniformVectorCount);\n\n    this._maxVertexUniformVectors = maxVertexUniformVectors;\n\n    this._onLocalBoundsChanged = this._onLocalBoundsChanged.bind(this);\n\n    const localBounds = this._localBounds;\n    // @ts-ignore\n    localBounds.min._onValueChanged = this._onLocalBoundsChanged;\n    // @ts-ignore\n    localBounds.max._onValueChanged = this._onLocalBoundsChanged;\n  }\n\n  /**\n   * @internal\n   */\n  update(): void {\n    if (!this._hasInitSkin) {\n      this._initSkin();\n      this._hasInitSkin = true;\n    }\n\n    if (this._supportSkinning) {\n      const ibms = this._skin.inverseBindMatrices;\n      const worldToLocal = this._rootBone.getInvModelMatrix();\n      const { _jointEntities: joints, _jointMatrices: jointMatrices } = this;\n\n      for (let i = joints.length - 1; i >= 0; i--) {\n        const joint = joints[i];\n        const offset = i * 16;\n        if (joint) {\n          Utils._floatMatrixMultiply(joint.transform.worldMatrix, ibms[i].elements, 0, jointMatrices, offset);\n        } else {\n          jointMatrices.set(ibms[i].elements, offset);\n        }\n        Utils._floatMatrixMultiply(worldToLocal, jointMatrices, offset, jointMatrices, offset);\n      }\n    }\n  }\n\n  /**\n   * @override\n   */\n  protected _updateShaderData(context: RenderContext): void {\n    const entity = this.entity;\n\n    const shaderData = this.shaderData;\n\n    const mesh = <ModelMesh>this.mesh;\n    const blendShapeManager = mesh._blendShapeManager;\n    blendShapeManager._updateShaderData(shaderData, this);\n\n    const skin = this._skin;\n    if (skin) {\n      const bsUniformOccupiesCount = blendShapeManager._uniformOccupiesCount;\n      const jointCount = skin.joints.length;\n      const jointDataCreateCache = this._jointDataCreateCache;\n      const jointCountChange = jointCount !== jointDataCreateCache.x;\n\n      if (jointCountChange || bsUniformOccupiesCount !== jointDataCreateCache.y) {\n        // directly use max joint count to avoid shader recompile\n        // @TODO: different shader type should use different count, not always 44\n        const remainUniformJointCount = Math.ceil((this._maxVertexUniformVectors - (44 + bsUniformOccupiesCount)) / 4);\n\n        if (jointCount > remainUniformJointCount) {\n          const engine = this.engine;\n          if (engine._hardwareRenderer.canIUseMoreJoints) {\n            if (jointCountChange) {\n              this._jointTexture?.destroy();\n              this._jointTexture = new Texture2D(engine, 4, jointCount, TextureFormat.R32G32B32A32, false);\n              this._jointTexture.filterMode = TextureFilterMode.Point;\n            }\n            shaderData.disableMacro(\"O3_JOINTS_NUM\");\n            shaderData.enableMacro(\"O3_USE_JOINT_TEXTURE\");\n            shaderData.setTexture(SkinnedMeshRenderer._jointSamplerProperty, this._jointTexture);\n            this._supportSkinning = true;\n          } else {\n            this._supportSkinning = false;\n            this._jointTexture?.destroy();\n            shaderData.disableMacro(\"O3_HAS_SKIN\");\n            Logger.warn(\n              `component's joints count(${jointCount}) greater than device's MAX_VERTEX_UNIFORM_VECTORS number ${this._maxVertexUniformVectors}, and don't support jointTexture in this device. suggest joint count less than ${remainUniformJointCount}.`,\n              this\n            );\n          }\n        } else {\n          this._supportSkinning = true;\n          this._jointTexture?.destroy();\n          shaderData.disableMacro(\"O3_USE_JOINT_TEXTURE\");\n          shaderData.enableMacro(\"O3_JOINTS_NUM\", remainUniformJointCount.toString());\n          shaderData.setFloatArray(SkinnedMeshRenderer._jointMatrixProperty, this._jointMatrices);\n        }\n        jointDataCreateCache.set(jointCount, bsUniformOccupiesCount);\n      }\n\n      if (this._jointTexture) {\n        this._jointTexture.setPixelBuffer(this._jointMatrices);\n      }\n    }\n\n    const worldMatrix =\n      this._supportSkinning && this._rootBone ? this._rootBone.transform.worldMatrix : entity.transform.worldMatrix;\n    this._updateTransformShaderData(context, worldMatrix);\n\n    const layer = entity.layer;\n    this._rendererLayer.set(layer & 65535, (layer >>> 16) & 65535, 0, 0);\n  }\n\n  /**\n   * @internal\n   */\n  _cloneTo(target: SkinnedMeshRenderer): void {\n    super._cloneTo(target);\n    this._blendShapeWeights && (target._blendShapeWeights = this._blendShapeWeights.slice());\n  }\n\n  /**\n   * @override\n   */\n  protected _registerEntityTransformListener(): void {\n    // Cancel register listener to entity transform.\n  }\n\n  /**\n   * @override\n   */\n  protected _updateBounds(worldBounds: BoundingBox): void {\n    if (this._rootBone) {\n      const localBounds = this._localBounds;\n      const worldMatrix = this._rootBone.transform.worldMatrix;\n      BoundingBox.transform(localBounds, worldMatrix, worldBounds);\n    } else {\n      super._updateBounds(worldBounds);\n    }\n  }\n\n  private _initSkin(): void {\n    const rhi = this.entity.engine._hardwareRenderer;\n    if (!rhi) return;\n\n    const { _skin: skin, shaderData } = this;\n    if (!skin) {\n      shaderData.disableMacro(\"O3_HAS_SKIN\");\n      return;\n    }\n\n    const joints = skin.joints;\n    const jointCount = joints.length;\n    const jointEntities = new Array<Entity>(jointCount);\n    for (let i = jointCount - 1; i >= 0; i--) {\n      jointEntities[i] = this._findByEntityName(this.entity, joints[i]);\n    }\n    this._jointEntities = jointEntities;\n    this._jointMatrices = new Float32Array(jointCount * 16);\n\n    const lastRootBone = this._rootBone;\n    const rootBone = this._findByEntityName(this.entity, skin.skeleton);\n\n    lastRootBone && lastRootBone.transform._updateFlagManager.removeListener(this._onTransformChanged);\n    rootBone.transform._updateFlagManager.addListener(this._onTransformChanged);\n\n    const rootIndex = joints.indexOf(skin.skeleton);\n    if (rootIndex !== -1) {\n      BoundingBox.transform(this._mesh.bounds, skin.inverseBindMatrices[rootIndex], this._localBounds);\n    } else {\n      // Root bone is not in joints list, we can only compute approximate inverse bind matrix\n      // Average all root bone's children inverse bind matrix\n      const approximateBindMatrix = new Matrix(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n      let subRootBoneCount = this._computeApproximateBindMatrix(\n        jointEntities,\n        skin.inverseBindMatrices,\n        rootBone,\n        approximateBindMatrix\n      );\n\n      if (subRootBoneCount !== 0) {\n        Matrix.multiplyScalar(approximateBindMatrix, 1.0 / subRootBoneCount, approximateBindMatrix);\n        BoundingBox.transform(this._mesh.bounds, approximateBindMatrix, this._localBounds);\n      } else {\n        this._localBounds.copyFrom(this._mesh.bounds);\n      }\n    }\n\n    this._rootBone = rootBone;\n    if (jointCount) {\n      shaderData.enableMacro(\"O3_HAS_SKIN\");\n      shaderData.setInt(SkinnedMeshRenderer._jointCountProperty, jointCount);\n    } else {\n      shaderData.disableMacro(\"O3_HAS_SKIN\");\n    }\n  }\n\n  private _computeApproximateBindMatrix(\n    jointEntities: Entity[],\n    inverseBindMatrices: Matrix[],\n    rootEntity: Entity,\n    approximateBindMatrix: Matrix\n  ): number {\n    let subRootBoneCount = 0;\n    const children = rootEntity.children;\n    for (let i = 0, n = children.length; i < n; i++) {\n      const rootChild = children[i];\n      const index = jointEntities.indexOf(rootChild);\n      if (index !== -1) {\n        Matrix.add(approximateBindMatrix, inverseBindMatrices[index], approximateBindMatrix);\n        subRootBoneCount++;\n      } else {\n        subRootBoneCount += this._computeApproximateBindMatrix(\n          jointEntities,\n          inverseBindMatrices,\n          rootChild,\n          approximateBindMatrix\n        );\n      }\n    }\n\n    return subRootBoneCount;\n  }\n\n  private _findByEntityName(rootEntity: Entity, name: string): Entity {\n    if (!rootEntity) {\n      return null;\n    }\n\n    const result = rootEntity.findByName(name);\n    if (result) {\n      return result;\n    }\n\n    return this._findByEntityName(rootEntity.parent, name);\n  }\n\n  private _checkBlendShapeWeightLength(): void {\n    const mesh = <ModelMesh>this._mesh;\n    const newBlendShapeCount = mesh ? mesh.blendShapeCount : 0;\n    const lastBlendShapeWeights = this._blendShapeWeights;\n    if (lastBlendShapeWeights) {\n      const lastBlendShapeWeightsCount = lastBlendShapeWeights.length;\n      if (lastBlendShapeWeightsCount !== newBlendShapeCount) {\n        const newBlendShapeWeights = new Float32Array(newBlendShapeCount);\n        if (newBlendShapeCount > lastBlendShapeWeightsCount) {\n          newBlendShapeWeights.set(lastBlendShapeWeights);\n        } else {\n          for (let i = 0; i < newBlendShapeCount; i++) {\n            newBlendShapeWeights[i] = lastBlendShapeWeights[i];\n          }\n        }\n        this._blendShapeWeights = newBlendShapeWeights;\n      }\n    } else {\n      this._blendShapeWeights = new Float32Array(newBlendShapeCount);\n    }\n  }\n\n  @ignoreClone\n  private _onLocalBoundsChanged(): void {\n    this._dirtyUpdateFlag |= RendererUpdateFlags.WorldVolume;\n  }\n}\n","import { Vector2, Vector3 } from \"@galacean/engine-math\";\nimport { GLCapabilityType } from \"../base/Constant\";\nimport { Engine } from \"../Engine\";\nimport { ModelMesh } from \"./ModelMesh\";\n\n/**\n * Used to generate common primitive meshes.\n */\nexport class PrimitiveMesh {\n  /**\n   * Create a sphere mesh.\n   * @param engine - Engine\n   * @param radius - Sphere radius\n   * @param segments - Number of segments\n   * @param noLongerAccessible - No longer access the vertices of the mesh after creation\n   * @returns Sphere model mesh\n   */\n  static createSphere(\n    engine: Engine,\n    radius: number = 0.5,\n    segments: number = 18,\n    noLongerAccessible: boolean = true\n  ): ModelMesh {\n    const mesh = new ModelMesh(engine);\n    segments = Math.max(2, Math.floor(segments));\n\n    const count = segments + 1;\n    const vertexCount = count * count;\n    const rectangleCount = segments * segments;\n    const indices = PrimitiveMesh._generateIndices(engine, vertexCount, rectangleCount * 6);\n    const thetaRange = Math.PI;\n    const alphaRange = thetaRange * 2;\n    const countReciprocal = 1.0 / count;\n    const segmentsReciprocal = 1.0 / segments;\n\n    const positions: Vector3[] = new Array(vertexCount);\n    const normals: Vector3[] = new Array(vertexCount);\n    const uvs: Vector2[] = new Array(vertexCount);\n\n    for (let i = 0; i < vertexCount; ++i) {\n      const x = i % count;\n      const y = (i * countReciprocal) | 0;\n      const u = x * segmentsReciprocal;\n      const v = y * segmentsReciprocal;\n      const alphaDelta = u * alphaRange;\n      const thetaDelta = v * thetaRange;\n      const sinTheta = Math.sin(thetaDelta);\n\n      let posX = -radius * Math.cos(alphaDelta) * sinTheta;\n      let posY = radius * Math.cos(thetaDelta);\n      let posZ = radius * Math.sin(alphaDelta) * sinTheta;\n\n      // Position\n      positions[i] = new Vector3(posX, posY, posZ);\n      // Normal\n      normals[i] = new Vector3(posX, posY, posZ);\n      // Texcoord\n      uvs[i] = new Vector2(u, v);\n    }\n\n    let offset = 0;\n    for (let i = 0; i < rectangleCount; ++i) {\n      const x = i % segments;\n      const y = (i * segmentsReciprocal) | 0;\n\n      const a = y * count + x;\n      const b = a + 1;\n      const c = a + count;\n      const d = c + 1;\n\n      indices[offset++] = b;\n      indices[offset++] = a;\n      indices[offset++] = d;\n      indices[offset++] = a;\n      indices[offset++] = c;\n      indices[offset++] = d;\n    }\n\n    const { bounds } = mesh;\n    bounds.min.set(-radius, -radius, -radius);\n    bounds.max.set(radius, radius, radius);\n\n    PrimitiveMesh._initialize(mesh, positions, normals, uvs, indices, noLongerAccessible);\n    return mesh;\n  }\n\n  /**\n   * Create a cuboid mesh.\n   * @param engine - Engine\n   * @param width - Cuboid width\n   * @param height - Cuboid height\n   * @param depth - Cuboid depth\n   * @param noLongerAccessible - No longer access the vertices of the mesh after creation\n   * @returns Cuboid model mesh\n   */\n  static createCuboid(\n    engine: Engine,\n    width: number = 1,\n    height: number = 1,\n    depth: number = 1,\n    noLongerAccessible: boolean = true\n  ): ModelMesh {\n    const mesh = new ModelMesh(engine);\n\n    const halfWidth: number = width / 2;\n    const halfHeight: number = height / 2;\n    const halfDepth: number = depth / 2;\n\n    const positions: Vector3[] = new Array(24);\n    const normals: Vector3[] = new Array(24);\n    const uvs: Vector2[] = new Array(24);\n\n    // Up\n    positions[0] = new Vector3(-halfWidth, halfHeight, -halfDepth);\n    positions[1] = new Vector3(halfWidth, halfHeight, -halfDepth);\n    positions[2] = new Vector3(halfWidth, halfHeight, halfDepth);\n    positions[3] = new Vector3(-halfWidth, halfHeight, halfDepth);\n    normals[0] = new Vector3(0, 1, 0);\n    normals[1] = new Vector3(0, 1, 0);\n    normals[2] = new Vector3(0, 1, 0);\n    normals[3] = new Vector3(0, 1, 0);\n    uvs[0] = new Vector2(0, 0);\n    uvs[1] = new Vector2(1, 0);\n    uvs[2] = new Vector2(1, 1);\n    uvs[3] = new Vector2(0, 1);\n    // Down\n    positions[4] = new Vector3(-halfWidth, -halfHeight, -halfDepth);\n    positions[5] = new Vector3(halfWidth, -halfHeight, -halfDepth);\n    positions[6] = new Vector3(halfWidth, -halfHeight, halfDepth);\n    positions[7] = new Vector3(-halfWidth, -halfHeight, halfDepth);\n    normals[4] = new Vector3(0, -1, 0);\n    normals[5] = new Vector3(0, -1, 0);\n    normals[6] = new Vector3(0, -1, 0);\n    normals[7] = new Vector3(0, -1, 0);\n    uvs[4] = new Vector2(0, 1);\n    uvs[5] = new Vector2(1, 1);\n    uvs[6] = new Vector2(1, 0);\n    uvs[7] = new Vector2(0, 0);\n    // Left\n    positions[8] = new Vector3(-halfWidth, halfHeight, -halfDepth);\n    positions[9] = new Vector3(-halfWidth, halfHeight, halfDepth);\n    positions[10] = new Vector3(-halfWidth, -halfHeight, halfDepth);\n    positions[11] = new Vector3(-halfWidth, -halfHeight, -halfDepth);\n    normals[8] = new Vector3(-1, 0, 0);\n    normals[9] = new Vector3(-1, 0, 0);\n    normals[10] = new Vector3(-1, 0, 0);\n    normals[11] = new Vector3(-1, 0, 0);\n    uvs[8] = new Vector2(0, 0);\n    uvs[9] = new Vector2(1, 0);\n    uvs[10] = new Vector2(1, 1);\n    uvs[11] = new Vector2(0, 1);\n    // Right\n    positions[12] = new Vector3(halfWidth, halfHeight, -halfDepth);\n    positions[13] = new Vector3(halfWidth, halfHeight, halfDepth);\n    positions[14] = new Vector3(halfWidth, -halfHeight, halfDepth);\n    positions[15] = new Vector3(halfWidth, -halfHeight, -halfDepth);\n    normals[12] = new Vector3(1, 0, 0);\n    normals[13] = new Vector3(1, 0, 0);\n    normals[14] = new Vector3(1, 0, 0);\n    normals[15] = new Vector3(1, 0, 0);\n    uvs[12] = new Vector2(1, 0);\n    uvs[13] = new Vector2(0, 0);\n    uvs[14] = new Vector2(0, 1);\n    uvs[15] = new Vector2(1, 1);\n    // Front\n    positions[16] = new Vector3(-halfWidth, halfHeight, halfDepth);\n    positions[17] = new Vector3(halfWidth, halfHeight, halfDepth);\n    positions[18] = new Vector3(halfWidth, -halfHeight, halfDepth);\n    positions[19] = new Vector3(-halfWidth, -halfHeight, halfDepth);\n    normals[16] = new Vector3(0, 0, 1);\n    normals[17] = new Vector3(0, 0, 1);\n    normals[18] = new Vector3(0, 0, 1);\n    normals[19] = new Vector3(0, 0, 1);\n    uvs[16] = new Vector2(0, 0);\n    uvs[17] = new Vector2(1, 0);\n    uvs[18] = new Vector2(1, 1);\n    uvs[19] = new Vector2(0, 1);\n    // Back\n    positions[20] = new Vector3(-halfWidth, halfHeight, -halfDepth);\n    positions[21] = new Vector3(halfWidth, halfHeight, -halfDepth);\n    positions[22] = new Vector3(halfWidth, -halfHeight, -halfDepth);\n    positions[23] = new Vector3(-halfWidth, -halfHeight, -halfDepth);\n    normals[20] = new Vector3(0, 0, -1);\n    normals[21] = new Vector3(0, 0, -1);\n    normals[22] = new Vector3(0, 0, -1);\n    normals[23] = new Vector3(0, 0, -1);\n    uvs[20] = new Vector2(1, 0);\n    uvs[21] = new Vector2(0, 0);\n    uvs[22] = new Vector2(0, 1);\n    uvs[23] = new Vector2(1, 1);\n\n    const indices = new Uint16Array(36);\n\n    // prettier-ignore\n    // Up\n    indices[0] = 0, indices[1] = 2, indices[2] = 1, indices[3] = 2, indices[4] = 0, indices[5] = 3,\n    // Down\n    indices[6] = 4, indices[7] = 6, indices[8] = 7, indices[9] = 6, indices[10] = 4, indices[11] = 5,\n    // Left\n    indices[12] = 8, indices[13] = 10, indices[14] = 9, indices[15] = 10, indices[16] = 8, indices[17] = 11,\n    // Right\n    indices[18] = 12, indices[19] = 14, indices[20] = 15, indices[21] = 14, indices[22] = 12, indices[23] = 13,\n    // Front\n    indices[24] = 16, indices[25] = 18, indices[26] = 17, indices[27] = 18, indices[28] = 16, indices[29] = 19,\n    // Back\n    indices[30] = 20, indices[31] = 22, indices[32] = 23, indices[33] = 22, indices[34] = 20, indices[35] = 21;\n\n    const { bounds } = mesh;\n    bounds.min.set(-halfWidth, -halfHeight, -halfDepth);\n    bounds.max.set(halfWidth, halfHeight, halfDepth);\n\n    PrimitiveMesh._initialize(mesh, positions, normals, uvs, indices, noLongerAccessible);\n    return mesh;\n  }\n\n  /**\n   * Create a plane mesh.\n   * @param engine - Engine\n   * @param width - Plane width\n   * @param height - Plane height\n   * @param horizontalSegments - Plane horizontal segments\n   * @param verticalSegments - Plane vertical segments\n   * @param noLongerAccessible - No longer access the vertices of the mesh after creation\n   * @returns Plane model mesh\n   */\n  static createPlane(\n    engine: Engine,\n    width: number = 1,\n    height: number = 1,\n    horizontalSegments: number = 1,\n    verticalSegments: number = 1,\n    noLongerAccessible: boolean = true\n  ): ModelMesh {\n    const mesh = new ModelMesh(engine);\n    horizontalSegments = Math.max(1, Math.floor(horizontalSegments));\n    verticalSegments = Math.max(1, Math.floor(verticalSegments));\n\n    const horizontalCount = horizontalSegments + 1;\n    const verticalCount = verticalSegments + 1;\n    const halfWidth = width / 2;\n    const halfHeight = height / 2;\n    const gridWidth = width / horizontalSegments;\n    const gridHeight = height / verticalSegments;\n    const vertexCount = horizontalCount * verticalCount;\n    const rectangleCount = verticalSegments * horizontalSegments;\n    const indices = PrimitiveMesh._generateIndices(engine, vertexCount, rectangleCount * 6);\n    const horizontalCountReciprocal = 1.0 / horizontalCount;\n    const horizontalSegmentsReciprocal = 1.0 / horizontalSegments;\n    const verticalSegmentsReciprocal = 1.0 / verticalSegments;\n\n    const positions: Vector3[] = new Array(vertexCount);\n    const normals: Vector3[] = new Array(vertexCount);\n    const uvs: Vector2[] = new Array(vertexCount);\n\n    for (let i = 0; i < vertexCount; ++i) {\n      const x = i % horizontalCount;\n      const z = (i * horizontalCountReciprocal) | 0;\n\n      // Position\n      positions[i] = new Vector3(x * gridWidth - halfWidth, 0, z * gridHeight - halfHeight);\n      // Normal\n      normals[i] = new Vector3(0, 1, 0);\n      // Texcoord\n      uvs[i] = new Vector2(x * horizontalSegmentsReciprocal, z * verticalSegmentsReciprocal);\n    }\n\n    let offset = 0;\n    for (let i = 0; i < rectangleCount; ++i) {\n      const x = i % horizontalSegments;\n      const y = (i * horizontalSegmentsReciprocal) | 0;\n\n      const a = y * horizontalCount + x;\n      const b = a + 1;\n      const c = a + horizontalCount;\n      const d = c + 1;\n\n      indices[offset++] = a;\n      indices[offset++] = c;\n      indices[offset++] = b;\n      indices[offset++] = c;\n      indices[offset++] = d;\n      indices[offset++] = b;\n    }\n\n    const { bounds } = mesh;\n    bounds.min.set(-halfWidth, 0, -halfHeight);\n    bounds.max.set(halfWidth, 0, halfHeight);\n\n    PrimitiveMesh._initialize(mesh, positions, normals, uvs, indices, noLongerAccessible);\n    return mesh;\n  }\n\n  /**\n   * Create a cylinder mesh.\n   * @param engine - Engine\n   * @param radiusTop - The radius of top cap\n   * @param radiusBottom - The radius of bottom cap\n   * @param height - The height of torso\n   * @param radialSegments - Cylinder radial segments\n   * @param heightSegments - Cylinder height segments\n   * @param noLongerAccessible - No longer access the vertices of the mesh after creation\n   * @returns Cylinder model mesh\n   */\n  static createCylinder(\n    engine: Engine,\n    radiusTop: number = 0.5,\n    radiusBottom: number = 0.5,\n    height: number = 2,\n    radialSegments: number = 20,\n    heightSegments: number = 1,\n    noLongerAccessible: boolean = true\n  ): ModelMesh {\n    const mesh = new ModelMesh(engine);\n    radialSegments = Math.floor(radialSegments);\n    heightSegments = Math.floor(heightSegments);\n\n    const radialCount = radialSegments + 1;\n    const verticalCount = heightSegments + 1;\n    const halfHeight = height * 0.5;\n    const unitHeight = height / heightSegments;\n    const torsoVertexCount = radialCount * verticalCount;\n    const torsoRectangleCount = radialSegments * heightSegments;\n    const capTriangleCount = radialSegments * 2;\n    const totalVertexCount = torsoVertexCount + 2 + capTriangleCount;\n    const indices = PrimitiveMesh._generateIndices(\n      engine,\n      totalVertexCount,\n      torsoRectangleCount * 6 + capTriangleCount * 3\n    );\n    const radialCountReciprocal = 1.0 / radialCount;\n    const radialSegmentsReciprocal = 1.0 / radialSegments;\n    const heightSegmentsReciprocal = 1.0 / heightSegments;\n\n    const positions: Vector3[] = new Array(totalVertexCount);\n    const normals: Vector3[] = new Array(totalVertexCount);\n    const uvs: Vector2[] = new Array(totalVertexCount);\n\n    let indicesOffset = 0;\n\n    // Create torso\n    const thetaStart = Math.PI;\n    const thetaRange = Math.PI * 2;\n    const radiusDiff = radiusBottom - radiusTop;\n    const slope = radiusDiff / height;\n    const radiusSlope = radiusDiff / heightSegments;\n\n    for (let i = 0; i < torsoVertexCount; ++i) {\n      const x = i % radialCount;\n      const y = (i * radialCountReciprocal) | 0;\n      const u = x * radialSegmentsReciprocal;\n      const v = y * heightSegmentsReciprocal;\n      const theta = thetaStart + u * thetaRange;\n      const sinTheta = Math.sin(theta);\n      const cosTheta = Math.cos(theta);\n      const radius = radiusBottom - y * radiusSlope;\n\n      let posX = radius * sinTheta;\n      let posY = y * unitHeight - halfHeight;\n      let posZ = radius * cosTheta;\n\n      // Position\n      positions[i] = new Vector3(posX, posY, posZ);\n      // Normal\n      normals[i] = new Vector3(sinTheta, slope, cosTheta);\n      // Texcoord\n      uvs[i] = new Vector2(u, 1 - v);\n    }\n\n    for (let i = 0; i < torsoRectangleCount; ++i) {\n      const x = i % radialSegments;\n      const y = (i * radialSegmentsReciprocal) | 0;\n\n      const a = y * radialCount + x;\n      const b = a + 1;\n      const c = a + radialCount;\n      const d = c + 1;\n\n      indices[indicesOffset++] = b;\n      indices[indicesOffset++] = c;\n      indices[indicesOffset++] = a;\n      indices[indicesOffset++] = b;\n      indices[indicesOffset++] = d;\n      indices[indicesOffset++] = c;\n    }\n\n    // Bottom position\n    positions[torsoVertexCount] = new Vector3(0, -halfHeight, 0);\n    // Bottom normal\n    normals[torsoVertexCount] = new Vector3(0, -1, 0);\n    // Bottom texcoord\n    uvs[torsoVertexCount] = new Vector2(0.5, 0.5);\n\n    // Top position\n    positions[torsoVertexCount + 1] = new Vector3(0, halfHeight, 0);\n    // Top normal\n    normals[torsoVertexCount + 1] = new Vector3(0, 1, 0);\n    // Top texcoord\n    uvs[torsoVertexCount + 1] = new Vector2(0.5, 0.5);\n\n    // Add cap vertices\n    let offset = torsoVertexCount + 2;\n\n    const diameterTopReciprocal = 1.0 / (radiusTop * 2);\n    const diameterBottomReciprocal = 1.0 / (radiusBottom * 2);\n    const positionStride = radialCount * heightSegments;\n    for (let i = 0; i < radialSegments; ++i) {\n      const curPosBottom = positions[i];\n      let curPosX = curPosBottom.x;\n      let curPosZ = curPosBottom.z;\n\n      // Bottom position\n      positions[offset] = new Vector3(curPosX, -halfHeight, curPosZ);\n      // Bottom normal\n      normals[offset] = new Vector3(0, -1, 0);\n      // Bottom texcoord\n      uvs[offset++] = new Vector2(curPosX * diameterBottomReciprocal + 0.5, 0.5 - curPosZ * diameterBottomReciprocal);\n\n      const curPosTop = positions[i + positionStride];\n      curPosX = curPosTop.x;\n      curPosZ = curPosTop.z;\n\n      // Top position\n      positions[offset] = new Vector3(curPosX, halfHeight, curPosZ);\n      // Top normal\n      normals[offset] = new Vector3(0, 1, 0);\n      // Top texcoord\n      uvs[offset++] = new Vector2(curPosX * diameterTopReciprocal + 0.5, curPosZ * diameterTopReciprocal + 0.5);\n    }\n\n    // Add cap indices\n    const topCapIndex = torsoVertexCount + 1;\n    const bottomIndiceIndex = torsoVertexCount + 2;\n    const topIndiceIndex = bottomIndiceIndex + 1;\n    for (let i = 0; i < radialSegments; ++i) {\n      const firstStride = i * 2;\n      const secondStride = i === radialSegments - 1 ? 0 : firstStride + 2;\n\n      // Bottom\n      indices[indicesOffset++] = torsoVertexCount;\n      indices[indicesOffset++] = bottomIndiceIndex + secondStride;\n      indices[indicesOffset++] = bottomIndiceIndex + firstStride;\n\n      // Top\n      indices[indicesOffset++] = topCapIndex;\n      indices[indicesOffset++] = topIndiceIndex + firstStride;\n      indices[indicesOffset++] = topIndiceIndex + secondStride;\n    }\n\n    const { bounds } = mesh;\n    const radiusMax = Math.max(radiusTop, radiusBottom);\n    bounds.min.set(-radiusMax, -halfHeight, -radiusMax);\n    bounds.max.set(radiusMax, halfHeight, radiusMax);\n\n    PrimitiveMesh._initialize(mesh, positions, normals, uvs, indices, noLongerAccessible);\n    return mesh;\n  }\n\n  /**\n   * Create a torus mesh.\n   * @param engine - Engine\n   * @param radius - Torus radius\n   * @param tubeRadius - Torus tube\n   * @param radialSegments - Torus radial segments\n   * @param tubularSegments - Torus tubular segments\n   * @param arc - Central angle\n   * @param noLongerAccessible - No longer access the vertices of the mesh after creation\n   * @returns Torus model mesh\n   */\n  static createTorus(\n    engine: Engine,\n    radius: number = 0.5,\n    tubeRadius: number = 0.1,\n    radialSegments: number = 30,\n    tubularSegments: number = 30,\n    arc: number = 360,\n    noLongerAccessible: boolean = true\n  ): ModelMesh {\n    const mesh = new ModelMesh(engine);\n    radialSegments = Math.floor(radialSegments);\n    tubularSegments = Math.floor(tubularSegments);\n\n    const vertexCount = (radialSegments + 1) * (tubularSegments + 1);\n    const rectangleCount = radialSegments * tubularSegments;\n    const indices = PrimitiveMesh._generateIndices(engine, vertexCount, rectangleCount * 6);\n\n    const positions: Vector3[] = new Array(vertexCount);\n    const normals: Vector3[] = new Array(vertexCount);\n    const uvs: Vector2[] = new Array(vertexCount);\n\n    arc = (arc / 180) * Math.PI;\n\n    let offset = 0;\n\n    for (let i = 0; i <= radialSegments; i++) {\n      for (let j = 0; j <= tubularSegments; j++) {\n        const u = (j / tubularSegments) * arc;\n        const v = (i / radialSegments) * Math.PI * 2;\n        const cosV = Math.cos(v);\n        const sinV = Math.sin(v);\n        const cosU = Math.cos(u);\n        const sinU = Math.sin(u);\n\n        const position = new Vector3(\n          (radius + tubeRadius * cosV) * cosU,\n          (radius + tubeRadius * cosV) * sinU,\n          tubeRadius * sinV\n        );\n        positions[offset] = position;\n\n        const centerX = radius * cosU;\n        const centerY = radius * sinU;\n        normals[offset] = new Vector3(position.x - centerX, position.y - centerY, position.z).normalize();\n\n        uvs[offset++] = new Vector2(j / tubularSegments, i / radialSegments);\n      }\n    }\n\n    offset = 0;\n    for (let i = 1; i <= radialSegments; i++) {\n      for (let j = 1; j <= tubularSegments; j++) {\n        const a = (tubularSegments + 1) * i + j - 1;\n        const b = (tubularSegments + 1) * (i - 1) + j - 1;\n        const c = (tubularSegments + 1) * (i - 1) + j;\n        const d = (tubularSegments + 1) * i + j;\n\n        indices[offset++] = a;\n        indices[offset++] = b;\n        indices[offset++] = d;\n\n        indices[offset++] = b;\n        indices[offset++] = c;\n        indices[offset++] = d;\n      }\n    }\n\n    const { bounds } = mesh;\n    const outerRadius = radius + tubeRadius;\n    bounds.min.set(-outerRadius, -outerRadius, -tubeRadius);\n    bounds.max.set(outerRadius, outerRadius, tubeRadius);\n\n    PrimitiveMesh._initialize(mesh, positions, normals, uvs, indices, noLongerAccessible);\n    return mesh;\n  }\n\n  /**\n   * Create a cone mesh.\n   * @param engine - Engine\n   * @param radius - The radius of cap\n   * @param height - The height of torso\n   * @param radialSegments - Cylinder radial segments\n   * @param heightSegments - Cylinder height segments\n   * @param noLongerAccessible - No longer access the vertices of the mesh after creation\n   * @returns Cone model mesh\n   */\n  static createCone(\n    engine: Engine,\n    radius: number = 0.5,\n    height: number = 2,\n    radialSegments: number = 20,\n    heightSegments: number = 1,\n    noLongerAccessible: boolean = true\n  ): ModelMesh {\n    const mesh = new ModelMesh(engine);\n    radialSegments = Math.floor(radialSegments);\n    heightSegments = Math.floor(heightSegments);\n\n    const radialCount = radialSegments + 1;\n    const verticalCount = heightSegments + 1;\n    const halfHeight = height * 0.5;\n    const unitHeight = height / heightSegments;\n    const torsoVertexCount = radialCount * verticalCount;\n    const torsoRectangleCount = radialSegments * heightSegments;\n    const totalVertexCount = torsoVertexCount + 1 + radialSegments;\n    const indices = PrimitiveMesh._generateIndices(\n      engine,\n      totalVertexCount,\n      torsoRectangleCount * 6 + radialSegments * 3\n    );\n    const radialCountReciprocal = 1.0 / radialCount;\n    const radialSegmentsReciprocal = 1.0 / radialSegments;\n    const heightSegmentsReciprocal = 1.0 / heightSegments;\n\n    const positions: Vector3[] = new Array(totalVertexCount);\n    const normals: Vector3[] = new Array(totalVertexCount);\n    const uvs: Vector2[] = new Array(totalVertexCount);\n\n    let indicesOffset = 0;\n\n    // Create torso\n    const thetaStart = Math.PI;\n    const thetaRange = Math.PI * 2;\n    const slope = radius / height;\n\n    for (let i = 0; i < torsoVertexCount; ++i) {\n      const x = i % radialCount;\n      const y = (i * radialCountReciprocal) | 0;\n      const u = x * radialSegmentsReciprocal;\n      const v = y * heightSegmentsReciprocal;\n      const theta = thetaStart + u * thetaRange;\n      const sinTheta = Math.sin(theta);\n      const cosTheta = Math.cos(theta);\n      const curRadius = radius - y * radius;\n\n      let posX = curRadius * sinTheta;\n      let posY = y * unitHeight - halfHeight;\n      let posZ = curRadius * cosTheta;\n\n      // Position\n      positions[i] = new Vector3(posX, posY, posZ);\n      // Normal\n      normals[i] = new Vector3(sinTheta, slope, cosTheta);\n      // Texcoord\n      uvs[i] = new Vector2(u, 1 - v);\n    }\n\n    for (let i = 0; i < torsoRectangleCount; ++i) {\n      const x = i % radialSegments;\n      const y = (i * radialSegmentsReciprocal) | 0;\n\n      const a = y * radialCount + x;\n      const b = a + 1;\n      const c = a + radialCount;\n      const d = c + 1;\n\n      indices[indicesOffset++] = b;\n      indices[indicesOffset++] = c;\n      indices[indicesOffset++] = a;\n      indices[indicesOffset++] = b;\n      indices[indicesOffset++] = d;\n      indices[indicesOffset++] = c;\n    }\n\n    // Bottom position\n    positions[torsoVertexCount] = new Vector3(0, -halfHeight, 0);\n    // Bottom normal\n    normals[torsoVertexCount] = new Vector3(0, -1, 0);\n    // Bottom texcoord\n    uvs[torsoVertexCount] = new Vector2(0.5, 0.5);\n\n    // Add bottom cap vertices\n    let offset = torsoVertexCount + 1;\n    const diameterBottomReciprocal = 1.0 / (radius * 2);\n    for (let i = 0; i < radialSegments; ++i) {\n      const curPos = positions[i];\n      let curPosX = curPos.x;\n      let curPosZ = curPos.z;\n\n      // Bottom position\n      positions[offset] = new Vector3(curPosX, -halfHeight, curPosZ);\n      // Bottom normal\n      normals[offset] = new Vector3(0, -1, 0);\n      // Bottom texcoord\n      uvs[offset++] = new Vector2(curPosX * diameterBottomReciprocal + 0.5, 0.5 - curPosZ * diameterBottomReciprocal);\n    }\n\n    const bottomIndiceIndex = torsoVertexCount + 1;\n    for (let i = 0; i < radialSegments; ++i) {\n      const firstStride = i;\n      const secondStride = i === radialSegments - 1 ? 0 : firstStride + 1;\n\n      // Bottom\n      indices[indicesOffset++] = torsoVertexCount;\n      indices[indicesOffset++] = bottomIndiceIndex + secondStride;\n      indices[indicesOffset++] = bottomIndiceIndex + firstStride;\n    }\n\n    const { bounds } = mesh;\n    bounds.min.set(-radius, -halfHeight, -radius);\n    bounds.max.set(radius, halfHeight, radius);\n\n    PrimitiveMesh._initialize(mesh, positions, normals, uvs, indices, noLongerAccessible);\n    return mesh;\n  }\n\n  /**\n   * Create a capsule mesh.\n   * @param engine - Engine\n   * @param radius - The radius of the two hemispherical ends\n   * @param height - The height of the cylindrical part, measured between the centers of the hemispherical ends\n   * @param radialSegments - Hemispherical end radial segments\n   * @param heightSegments - Cylindrical part height segments\n   * @param noLongerAccessible - No longer access the vertices of the mesh after creation\n   * @returns Capsule model mesh\n   */\n  static createCapsule(\n    engine: Engine,\n    radius: number = 0.5,\n    height: number = 2,\n    radialSegments: number = 6,\n    heightSegments: number = 1,\n    noLongerAccessible: boolean = true\n  ): ModelMesh {\n    const mesh = new ModelMesh(engine);\n\n    radialSegments = Math.max(2, Math.floor(radialSegments));\n    heightSegments = Math.floor(heightSegments);\n\n    const radialCount = radialSegments + 1;\n    const verticalCount = heightSegments + 1;\n    const halfHeight = height * 0.5;\n    const unitHeight = height / heightSegments;\n    const torsoVertexCount = radialCount * verticalCount;\n    const torsoRectangleCount = radialSegments * heightSegments;\n\n    const capVertexCount = radialCount * radialCount;\n    const capRectangleCount = radialSegments * radialSegments;\n\n    const totalVertexCount = torsoVertexCount + 2 * capVertexCount;\n    const indices = PrimitiveMesh._generateIndices(\n      engine,\n      totalVertexCount,\n      (torsoRectangleCount + 2 * capRectangleCount) * 6\n    );\n\n    const radialCountReciprocal = 1.0 / radialCount;\n    const radialSegmentsReciprocal = 1.0 / radialSegments;\n    const heightSegmentsReciprocal = 1.0 / heightSegments;\n\n    const thetaStart = Math.PI;\n    const thetaRange = Math.PI * 2;\n\n    const positions = new Array<Vector3>(totalVertexCount);\n    const normals = new Array<Vector3>(totalVertexCount);\n    const uvs = new Array<Vector2>(totalVertexCount);\n\n    let indicesOffset = 0;\n\n    // create torso\n    for (let i = 0; i < torsoVertexCount; ++i) {\n      const x = i % radialCount;\n      const y = (i * radialCountReciprocal) | 0;\n      const u = x * radialSegmentsReciprocal;\n      const v = y * heightSegmentsReciprocal;\n      const theta = thetaStart + u * thetaRange;\n      const sinTheta = Math.sin(theta);\n      const cosTheta = Math.cos(theta);\n\n      positions[i] = new Vector3(radius * sinTheta, y * unitHeight - halfHeight, radius * cosTheta);\n      normals[i] = new Vector3(sinTheta, 0, cosTheta);\n      uvs[i] = new Vector2(u, 1 - v);\n    }\n\n    for (let i = 0; i < torsoRectangleCount; ++i) {\n      const x = i % radialSegments;\n      const y = (i * radialSegmentsReciprocal) | 0;\n\n      const a = y * radialCount + x;\n      const b = a + 1;\n      const c = a + radialCount;\n      const d = c + 1;\n\n      indices[indicesOffset++] = b;\n      indices[indicesOffset++] = c;\n      indices[indicesOffset++] = a;\n      indices[indicesOffset++] = b;\n      indices[indicesOffset++] = d;\n      indices[indicesOffset++] = c;\n    }\n\n    PrimitiveMesh._createCapsuleCap(\n      radius,\n      height,\n      radialSegments,\n      thetaRange,\n      torsoVertexCount,\n      1,\n      positions,\n      normals,\n      uvs,\n      indices,\n      indicesOffset\n    );\n\n    PrimitiveMesh._createCapsuleCap(\n      radius,\n      height,\n      radialSegments,\n      -thetaRange,\n      torsoVertexCount + capVertexCount,\n      -1,\n      positions,\n      normals,\n      uvs,\n      indices,\n      indicesOffset + 6 * capRectangleCount\n    );\n\n    const { bounds } = mesh;\n    bounds.min.set(-radius, -radius - halfHeight, -radius);\n    bounds.max.set(radius, radius + halfHeight, radius);\n\n    PrimitiveMesh._initialize(mesh, positions, normals, uvs, indices, noLongerAccessible);\n    return mesh;\n  }\n\n  private static _initialize(\n    mesh: ModelMesh,\n    positions: Vector3[],\n    normals: Vector3[],\n    uvs: Vector2[],\n    indices: Uint16Array | Uint32Array,\n    noLongerAccessible: boolean\n  ) {\n    mesh.setPositions(positions);\n    mesh.setNormals(normals);\n    mesh.setUVs(uvs);\n    mesh.setIndices(indices);\n    mesh.calculateTangents();\n\n    mesh.uploadData(noLongerAccessible);\n    mesh.addSubMesh(0, indices.length);\n  }\n\n  private static _generateIndices(engine: Engine, vertexCount: number, indexCount: number): Uint16Array | Uint32Array {\n    let indices: Uint16Array | Uint32Array = null;\n    if (vertexCount > 65535) {\n      if (engine._hardwareRenderer.canIUse(GLCapabilityType.elementIndexUint)) {\n        indices = new Uint32Array(indexCount);\n      } else {\n        throw Error(\"The vertex count is over limit.\");\n      }\n    } else {\n      indices = new Uint16Array(indexCount);\n    }\n    return indices;\n  }\n\n  private static _createCapsuleCap(\n    radius: number,\n    height: number,\n    radialSegments: number,\n    capAlphaRange: number,\n    offset: number,\n    posIndex: number,\n    positions: Vector3[],\n    normals: Vector3[],\n    uvs: Vector2[],\n    indices: Uint16Array | Uint32Array,\n    indicesOffset: number\n  ) {\n    const radialCount = radialSegments + 1;\n    const halfHeight = height * 0.5 * posIndex;\n    const capVertexCount = radialCount * radialCount;\n    const capRectangleCount = radialSegments * radialSegments;\n    const radialCountReciprocal = 1.0 / radialCount;\n    const radialSegmentsReciprocal = 1.0 / radialSegments;\n\n    for (let i = 0; i < capVertexCount; ++i) {\n      const x = i % radialCount;\n      const y = (i * radialCountReciprocal) | 0;\n      const u = x * radialSegmentsReciprocal;\n      const v = y * radialSegmentsReciprocal;\n      const alphaDelta = u * capAlphaRange;\n      const thetaDelta = (v * Math.PI) / 2;\n      const sinTheta = Math.sin(thetaDelta);\n\n      const posX = -radius * Math.cos(alphaDelta) * sinTheta;\n      const posY = radius * Math.cos(thetaDelta) * posIndex + halfHeight;\n      const posZ = radius * Math.sin(alphaDelta) * sinTheta;\n\n      const index = i + offset;\n      positions[index] = new Vector3(posX, posY, posZ);\n      normals[index] = new Vector3(posX, posY - halfHeight, posZ);\n      uvs[index] = new Vector2(u, v);\n    }\n\n    for (let i = 0; i < capRectangleCount; ++i) {\n      const x = i % radialSegments;\n      const y = (i * radialSegmentsReciprocal) | 0;\n\n      const a = y * radialCount + x + offset;\n      const b = a + 1;\n      const c = a + radialCount;\n      const d = c + 1;\n\n      indices[indicesOffset++] = b;\n      indices[indicesOffset++] = a;\n      indices[indicesOffset++] = d;\n      indices[indicesOffset++] = a;\n      indices[indicesOffset++] = c;\n      indices[indicesOffset++] = d;\n    }\n  }\n}\n","import { IndexBufferBinding, IndexFormat, Mesh, Buffer, VertexBufferBinding, VertexElement } from \"../graphic\";\n\n/**\n * BufferMesh.\n */\nexport class BufferMesh extends Mesh {\n  /**\n   * Instanced count, disable instanced drawing when set zero.\n   */\n  get instanceCount(): number {\n    return this._instanceCount;\n  }\n\n  set instanceCount(value: number) {\n    this._instanceCount = value;\n  }\n\n  /**\n   * Vertex buffer binding collection.\n   */\n  get vertexBufferBindings(): Readonly<VertexBufferBinding[]> {\n    return this._vertexBufferBindings;\n  }\n\n  /**\n   * Index buffer binding.\n   */\n  get indexBufferBinding(): IndexBufferBinding {\n    return this._indexBufferBinding;\n  }\n\n  /**\n   * Vertex element collection.\n   */\n  get vertexElements(): Readonly<VertexElement[]> {\n    return this._vertexElements;\n  }\n\n  /**\n   * Set vertex elements.\n   * @param elements - Vertex element collection\n   */\n  setVertexElements(elements: VertexElement[]): void {\n    this._setVertexElements(elements);\n  }\n\n  /**\n   * Set vertex buffer binding.\n   * @param vertexBufferBindings - Vertex buffer binding\n   * @param index - Vertex buffer index, the default value is 0\n   */\n  setVertexBufferBinding(vertexBufferBindings: VertexBufferBinding, index?: number): void;\n\n  /**\n   * Set vertex buffer binding.\n   * @param vertexBuffer - Vertex buffer\n   * @param stride - Vertex buffer data stride\n   * @param index - Vertex buffer index, the default value is 0\n   */\n  setVertexBufferBinding(vertexBuffer: Buffer, stride: number, index?: number): void;\n\n  setVertexBufferBinding(\n    bufferOrBinding: Buffer | VertexBufferBinding,\n    strideOrFirstIndex: number = 0,\n    index: number = 0\n  ): void {\n    let binding = <VertexBufferBinding>bufferOrBinding;\n    const isBinding = binding.buffer !== undefined;\n    isBinding || (binding = new VertexBufferBinding(<Buffer>bufferOrBinding, strideOrFirstIndex));\n\n    const bindings = this._vertexBufferBindings;\n    bindings.length <= index && (bindings.length = index + 1);\n    this._setVertexBufferBinding(isBinding ? strideOrFirstIndex : index, binding);\n  }\n\n  /**\n   * Set vertex buffer binding.\n   * @param vertexBufferBindings - Vertex buffer binding\n   * @param firstIndex - First vertex buffer index, the default value is 0\n   */\n  setVertexBufferBindings(vertexBufferBindings: VertexBufferBinding[], firstIndex: number = 0): void {\n    const bindings = this._vertexBufferBindings;\n    const count = vertexBufferBindings.length;\n    const needLength = firstIndex + count;\n    bindings.length < needLength && (bindings.length = needLength);\n    for (let i = 0; i < count; i++) {\n      this._setVertexBufferBinding(firstIndex + i, vertexBufferBindings[i]);\n    }\n  }\n\n  /**\n   * Set index buffer binding.\n   * @param buffer - Index buffer\n   * @param format - Index buffer format\n   */\n  setIndexBufferBinding(buffer: Buffer, format: IndexFormat): void;\n\n  /**\n   * Set index buffer binding.\n   * @param bufferBinding - Index buffer binding\n   * @remarks When bufferBinding is null, it will clear IndexBufferBinding\n   */\n  setIndexBufferBinding(bufferBinding: IndexBufferBinding | null): void;\n\n  setIndexBufferBinding(bufferOrBinding: Buffer | IndexBufferBinding | null, format?: IndexFormat): void {\n    let binding = <IndexBufferBinding>bufferOrBinding;\n    if (binding) {\n      const isBinding = binding.buffer !== undefined;\n      isBinding || (binding = new IndexBufferBinding(<Buffer>bufferOrBinding, format));\n    }\n    this._setIndexBufferBinding(binding);\n  }\n}\n","import { Vector3 } from \"@galacean/engine-math\";\n\n/**\n * BlendShapeFrame.\n */\nexport class BlendShapeFrame {\n  /** Weight of BlendShapeFrame. */\n  readonly weight: number;\n  /** Delta positions for the frame being added. */\n  readonly deltaPositions: Readonly<Readonly<Vector3>[]>;\n  /** Delta normals for the frame being added. */\n  readonly deltaNormals: Readonly<Readonly<Vector3[]> | null>;\n  /** Delta tangents for the frame being added. */\n  readonly deltaTangents: Readonly<Readonly<Vector3[]> | null>;\n\n  /**\n   * Create a BlendShapeFrame.\n   * @param weight - Weight of BlendShapeFrame\n   * @param deltaPositions - Delta positions for the frame being added\n   * @param deltaNormals - Delta normals for the frame being added\n   * @param deltaTangents - Delta tangents for the frame being added\n   */\n  constructor(\n    weight: number,\n    deltaPositions: Vector3[],\n    deltaNormals: Vector3[] = null,\n    deltaTangents: Vector3[] = null\n  ) {\n    if (deltaNormals && deltaNormals.length !== deltaPositions.length) {\n      throw \"deltaNormals length must same with deltaPositions length.\";\n    }\n\n    if (deltaTangents && deltaTangents.length !== deltaPositions.length) {\n      throw \"deltaTangents length must same with deltaPositions length.\";\n    }\n\n    this.weight = weight;\n    this.deltaPositions = deltaPositions;\n    this.deltaNormals = deltaNormals;\n    this.deltaTangents = deltaTangents;\n  }\n}\n","import { Vector3 } from \"@galacean/engine-math\";\nimport { BoolUpdateFlag } from \"../BoolUpdateFlag\";\nimport { UpdateFlag } from \"../UpdateFlag\";\nimport { UpdateFlagManager } from \"../UpdateFlagManager\";\nimport { BlendShapeFrame } from \"./BlendShapeFrame\";\n\n/**\n * BlendShape.\n */\nexport class BlendShape {\n  /** Name of BlendShape. */\n  name: string;\n\n  /** @internal */\n  _useBlendShapeNormal: boolean = true;\n  /** @internal */\n  _useBlendShapeTangent: boolean = true;\n  /** @internal */\n  _layoutChangeManager: UpdateFlagManager = new UpdateFlagManager();\n\n  private _dataChangeManager: UpdateFlagManager = new UpdateFlagManager();\n  private _frames: BlendShapeFrame[] = [];\n\n  /**\n   * Frames of BlendShape.\n   */\n  get frames(): Readonly<BlendShapeFrame[]> {\n    return this._frames;\n  }\n\n  /**\n   * Create a BlendShape.\n   * @param name - BlendShape name.\n   */\n  constructor(name: string) {\n    this.name = name;\n  }\n\n  /**\n   * Add a BlendShapeFrame by weight, deltaPositions, deltaNormals and deltaTangents.\n   * @param weight - Weight of BlendShapeFrame\n   * @param deltaPositions - Delta positions for the frame being added\n   * @param deltaNormals - Delta normals for the frame being added\n   * @param deltaTangents - Delta tangents for the frame being added\n   */\n  addFrame(\n    weight: number,\n    deltaPositions: Vector3[],\n    deltaNormals?: Vector3[],\n    deltaTangents?: Vector3[]\n  ): BlendShapeFrame;\n\n  /**\n   * Add a BlendShapeFrame.\n   * @param frame - The BlendShapeFrame.\n   */\n  addFrame(frame: BlendShapeFrame): void;\n\n  addFrame(\n    frameOrWeight: BlendShapeFrame | number,\n    deltaPositions?: Vector3[],\n    deltaNormals?: Vector3[],\n    deltaTangents?: Vector3[]\n  ): void | BlendShapeFrame {\n    if (typeof frameOrWeight === \"number\") {\n      const frame = new BlendShapeFrame(frameOrWeight, deltaPositions, deltaNormals, deltaTangents);\n      this._addFrame(frame);\n      return frame;\n    } else {\n      this._addFrame(frameOrWeight);\n    }\n  }\n\n  /**\n   * Clear all frames.\n   */\n  clearFrames(): void {\n    this._frames.length = 0;\n    this._updateUseNormalAndTangent(true, true);\n    this._dataChangeManager.dispatch();\n  }\n\n  /**\n   * @internal\n   */\n  _addDataDirtyFlag(flag: UpdateFlag): void {\n    this._dataChangeManager.addFlag(flag);\n  }\n\n  /**\n   * @internal\n   */\n  _createSubDataDirtyFlag(): BoolUpdateFlag {\n    return this._dataChangeManager.createFlag(BoolUpdateFlag);\n  }\n\n  private _addFrame(frame: BlendShapeFrame): void {\n    const frames = this._frames;\n    const frameCount = frames.length;\n    if (frameCount > 0 && frame.deltaPositions.length !== frames[frameCount - 1].deltaPositions.length) {\n      throw \"Frame's deltaPositions length must same with before frame deltaPositions length.\";\n    }\n    this._frames.push(frame);\n\n    this._updateUseNormalAndTangent(!!frame.deltaNormals, !!frame.deltaTangents);\n    this._dataChangeManager.dispatch();\n  }\n\n  private _updateUseNormalAndTangent(useNormal: boolean, useTangent: boolean): void {\n    const useBlendShapeNormal = this._useBlendShapeNormal && useNormal;\n    const useBlendShapeTangent = this._useBlendShapeTangent && useTangent;\n    if (this._useBlendShapeNormal !== useBlendShapeNormal || this._useBlendShapeTangent !== useBlendShapeTangent) {\n      this._useBlendShapeNormal = useBlendShapeNormal;\n      this._useBlendShapeTangent = useBlendShapeTangent;\n      this._layoutChangeManager.dispatch(0, this);\n    }\n  }\n}\n","import { Camera } from \"../Camera\";\nimport { Engine } from \"../Engine\";\nimport { Buffer, BufferBindFlag, BufferUsage, IndexFormat, MeshTopology, SubMesh, VertexElement } from \"../graphic\";\nimport { Material } from \"../material\";\nimport { BufferMesh } from \"../mesh\";\nimport { ClassPool } from \"./ClassPool\";\nimport { SpriteElement } from \"./SpriteElement\";\nimport { SpriteMaskElement } from \"./SpriteMaskElement\";\nimport { TextRenderElement } from \"./TextRenderElement\";\n\ntype Element = SpriteElement | SpriteMaskElement;\n\nexport abstract class Basic2DBatcher {\n  /** The maximum number of vertex. */\n  static MAX_VERTEX_COUNT: number = 4096;\n  static _canUploadSameBuffer: boolean = true;\n\n  /** @internal */\n  _engine: Engine;\n  /** @internal */\n  _subMeshPool: ClassPool<SubMesh> = new ClassPool(SubMesh);\n  /** @internal */\n  _batchedQueue: Element[] = [];\n  /** @internal */\n  _meshes: BufferMesh[] = [];\n  /** @internal */\n  _meshCount: number = 1;\n  /** @internal */\n  _vertexBuffers: Buffer[] = [];\n  /** @internal */\n  _indiceBuffers: Buffer[] = [];\n  /** @internal */\n  _vertices: Float32Array;\n  /** @internal */\n  _indices: Uint16Array;\n  /** @internal */\n  _flushId: number = 0;\n  /** @internal */\n  _vertexCount: number = 0;\n  /** @internal */\n  _elementCount: number = 0;\n\n  constructor(engine: Engine) {\n    this._engine = engine;\n\n    const { MAX_VERTEX_COUNT } = Basic2DBatcher;\n    this._vertices = new Float32Array(MAX_VERTEX_COUNT * 9);\n    this._indices = new Uint16Array(MAX_VERTEX_COUNT * 3);\n\n    const { _meshes, _meshCount } = this;\n    for (let i = 0; i < _meshCount; i++) {\n      _meshes[i] = this._createMesh(engine, i);\n    }\n  }\n\n  drawElement(\n    element: SpriteMaskElement | SpriteElement | TextRenderElement,\n    camera: Camera,\n    replaceMaterial: Material\n  ): void {\n    if (element.multiRenderData) {\n      const elements = (<TextRenderElement>element).charElements;\n      for (let i = 0, n = elements.length; i < n; ++i) {\n        this._drawSubElement(elements[i], camera, replaceMaterial);\n      }\n    } else {\n      this._drawSubElement(<SpriteMaskElement | SpriteElement>element, camera, replaceMaterial);\n    }\n  }\n\n  private _drawSubElement(element: SpriteMaskElement | SpriteElement, camera: Camera, replaceMaterial: Material) {\n    const len = element.renderData.vertexCount;\n    if (this._vertexCount + len > Basic2DBatcher.MAX_VERTEX_COUNT) {\n      this.flush(camera, replaceMaterial);\n    }\n\n    this._vertexCount += len;\n    this._batchedQueue[this._elementCount++] = element;\n  }\n\n  flush(camera: Camera, replaceMaterial: Material): void {\n    const batchedQueue = this._batchedQueue;\n\n    if (batchedQueue.length === 0) {\n      return;\n    }\n    this._updateData(this._engine);\n    this.drawBatches(camera, replaceMaterial);\n\n    if (!Basic2DBatcher._canUploadSameBuffer) {\n      this._flushId++;\n    }\n\n    batchedQueue.length = 0;\n    this._subMeshPool.resetPool();\n    this._vertexCount = 0;\n    this._elementCount = 0;\n  }\n\n  clear(): void {\n    this._flushId = 0;\n    this._vertexCount = 0;\n    this._elementCount = 0;\n    this._batchedQueue.length = 0;\n  }\n\n  destroy(): void {\n    this._batchedQueue = null;\n\n    const { _meshes: meshes, _vertexBuffers: vertexBuffers, _indiceBuffers: indiceBuffers } = this;\n\n    for (let i = 0, n = meshes.length; i < n; ++i) {\n      meshes[i].destroy();\n    }\n    this._meshes = null;\n\n    for (let i = 0, n = vertexBuffers.length; i < n; ++i) {\n      vertexBuffers[i].destroy();\n    }\n    this._vertexBuffers = null;\n\n    for (let i = 0, n = indiceBuffers.length; i < n; ++i) {\n      indiceBuffers[i].destroy();\n    }\n    this._indiceBuffers = null;\n  }\n\n  private _createMesh(engine: Engine, index: number): BufferMesh {\n    const { MAX_VERTEX_COUNT } = Basic2DBatcher;\n    const mesh = new BufferMesh(engine, `BufferMesh${index}`);\n\n    const vertexElements: VertexElement[] = [];\n    const vertexStride = this.createVertexElements(vertexElements);\n\n    // vertices\n    this._vertexBuffers[index] = new Buffer(\n      engine,\n      BufferBindFlag.VertexBuffer,\n      MAX_VERTEX_COUNT * 4 * vertexStride,\n      BufferUsage.Dynamic\n    );\n    // indices\n    this._indiceBuffers[index] = new Buffer(\n      engine,\n      BufferBindFlag.IndexBuffer,\n      MAX_VERTEX_COUNT * 2 * 3,\n      BufferUsage.Dynamic\n    );\n    mesh.setVertexBufferBinding(this._vertexBuffers[index], vertexStride);\n    mesh.setIndexBufferBinding(this._indiceBuffers[index], IndexFormat.UInt16);\n    mesh.setVertexElements(vertexElements);\n\n    return mesh;\n  }\n\n  private _updateData(engine: Engine): void {\n    const { _meshes, _flushId } = this;\n\n    if (!Basic2DBatcher._canUploadSameBuffer && this._meshCount <= _flushId) {\n      this._meshCount++;\n      _meshes[_flushId] = this._createMesh(engine, _flushId);\n    }\n\n    const { _batchedQueue: batchedQueue, _vertices: vertices, _indices: indices } = this;\n    const mesh = _meshes[_flushId];\n    mesh.clearSubMesh();\n\n    let vertexIndex = 0;\n    let indiceIndex = 0;\n    let vertexStartIndex = 0;\n    let vertexCount = 0;\n    let curIndiceStartIndex = 0;\n    let curMeshIndex = 0;\n    let preElement: Element = null;\n    for (let i = 0, len = batchedQueue.length; i < len; i++) {\n      const curElement = batchedQueue[i];\n\n      // Batch vertex\n      vertexIndex = this.updateVertices(curElement, vertices, vertexIndex);\n\n      // Batch indice\n      const { triangles } = curElement.renderData;\n      const triangleNum = triangles.length;\n      for (let j = 0; j < triangleNum; j++) {\n        indices[indiceIndex++] = triangles[j] + curIndiceStartIndex;\n      }\n\n      curIndiceStartIndex += curElement.renderData.vertexCount;\n\n      if (preElement === null) {\n        vertexCount += triangleNum;\n      } else {\n        if (this.canBatch(preElement, curElement)) {\n          vertexCount += triangleNum;\n        } else {\n          mesh.addSubMesh(this._getSubMeshFromPool(vertexStartIndex, vertexCount));\n          vertexStartIndex += vertexCount;\n          vertexCount = triangleNum;\n          batchedQueue[curMeshIndex++] = preElement;\n        }\n      }\n\n      preElement = curElement;\n    }\n\n    mesh.addSubMesh(this._getSubMeshFromPool(vertexStartIndex, vertexCount));\n    batchedQueue[curMeshIndex] = preElement;\n\n    this._vertexBuffers[_flushId].setData(vertices, 0, 0, vertexIndex);\n    this._indiceBuffers[_flushId].setData(indices, 0, 0, indiceIndex);\n  }\n\n  private _getSubMeshFromPool(start: number, count: number): SubMesh {\n    const subMesh = this._subMeshPool.getFromPool();\n    subMesh.start = start;\n    subMesh.count = count;\n    subMesh.topology = MeshTopology.Triangles;\n    return subMesh;\n  }\n\n  /**\n   * @internal\n   */\n  abstract createVertexElements(vertexElements: VertexElement[]): number;\n\n  /**\n   * @internal\n   */\n  abstract canBatch(preElement: Element, curElement: Element): boolean;\n\n  /**\n   * @internal\n   */\n  abstract updateVertices(element: Element, vertices: Float32Array, vertexIndex: number): number;\n\n  /**\n   * @internal\n   */\n  abstract drawBatches(camera: Camera, replaceMaterial: Material): void;\n}\n","import { SpriteMask } from \"../2d/sprite/SpriteMask\";\nimport { Camera } from \"../Camera\";\nimport { VertexElementFormat } from \"../graphic/enums/VertexElementFormat\";\nimport { VertexElement } from \"../graphic/VertexElement\";\nimport { StencilOperation } from \"../shader/enums/StencilOperation\";\nimport { Shader } from \"../shader/Shader\";\nimport { ShaderMacroCollection } from \"../shader/ShaderMacroCollection\";\nimport { Basic2DBatcher } from \"./Basic2DBatcher\";\nimport { SpriteMaskElement } from \"./SpriteMaskElement\";\n\nexport class SpriteMaskBatcher extends Basic2DBatcher {\n  createVertexElements(vertexElements: VertexElement[]): number {\n    vertexElements[0] = new VertexElement(\"POSITION\", 0, VertexElementFormat.Vector3, 0);\n    vertexElements[1] = new VertexElement(\"TEXCOORD_0\", 12, VertexElementFormat.Vector2, 0);\n    return 20;\n  }\n\n  canBatch(preElement: SpriteMaskElement, curElement: SpriteMaskElement): boolean {\n    if (preElement.isAdd !== curElement.isAdd) {\n      return false;\n    }\n\n    // Compare renderer property\n    const preShaderData = (<SpriteMask>preElement.component).shaderData;\n    const curShaderData = (<SpriteMask>curElement.component).shaderData;\n    const textureProperty = SpriteMask._textureProperty;\n    const alphaCutoffProperty = SpriteMask._alphaCutoffProperty;\n\n    return (\n      preShaderData.getTexture(textureProperty) === curShaderData.getTexture(textureProperty) &&\n      preShaderData.getTexture(alphaCutoffProperty) === curShaderData.getTexture(alphaCutoffProperty)\n    );\n  }\n\n  updateVertices(element: SpriteMaskElement, vertices: Float32Array, vertexIndex: number): number {\n    const { positions, uvs, vertexCount } = element.renderData;\n    for (let i = 0; i < vertexCount; i++) {\n      const curPos = positions[i];\n      const curUV = uvs[i];\n      vertices[vertexIndex++] = curPos.x;\n      vertices[vertexIndex++] = curPos.y;\n      vertices[vertexIndex++] = curPos.z;\n      vertices[vertexIndex++] = curUV.x;\n      vertices[vertexIndex++] = curUV.y;\n    }\n\n    return vertexIndex;\n  }\n\n  drawBatches(camera: Camera): void {\n    const { _engine: engine, _batchedQueue: batchedQueue } = this;\n    const mesh = this._meshes[this._flushId];\n    const subMeshes = mesh.subMeshes;\n    const sceneData = camera.scene.shaderData;\n    const cameraData = camera.shaderData;\n\n    for (let i = 0, len = subMeshes.length; i < len; i++) {\n      const subMesh = subMeshes[i];\n      const spriteMaskElement = <SpriteMaskElement>batchedQueue[i];\n\n      if (!subMesh || !spriteMaskElement) {\n        return;\n      }\n\n      const renderer = <SpriteMask>spriteMaskElement.component;\n      const material = spriteMaskElement.material;\n\n      const compileMacros = Shader._compileMacros;\n      // union render global macro and material self macro.\n      ShaderMacroCollection.unionCollection(\n        renderer._globalShaderMacro,\n        material.shaderData._macroCollection,\n        compileMacros\n      );\n\n      // Update stencil state\n      const stencilState = material.renderState.stencilState;\n      const op = spriteMaskElement.isAdd ? StencilOperation.IncrementSaturate : StencilOperation.DecrementSaturate;\n      stencilState.passOperationFront = op;\n      stencilState.passOperationBack = op;\n\n      const program = material.shader.passes[0]._getShaderProgram(engine, compileMacros);\n      if (!program.isValid) {\n        return;\n      }\n\n      program.bind();\n      program.groupingOtherUniformBlock();\n      program.uploadAll(program.sceneUniformBlock, sceneData);\n      program.uploadAll(program.cameraUniformBlock, cameraData);\n      program.uploadAll(program.rendererUniformBlock, renderer.shaderData);\n      program.uploadAll(program.materialUniformBlock, material.shaderData);\n\n      material.renderState._apply(engine, false);\n\n      engine._hardwareRenderer.drawPrimitive(mesh, subMesh, program);\n    }\n  }\n}\n","import { SpriteMaskInteraction } from \"../2d/enums/SpriteMaskInteraction\";\nimport { SpriteRenderer } from \"../2d/sprite/SpriteRenderer\";\nimport { Camera } from \"../Camera\";\nimport { Engine } from \"../Engine\";\nimport { SpriteMaskBatcher } from \"./SpriteMaskBatcher\";\n\n/**\n * @internal\n */\nexport class SpriteMaskManager {\n  _batcher: SpriteMaskBatcher;\n\n  private _preMaskLayer: number = 0;\n\n  constructor(engine: Engine) {\n    this._batcher = new SpriteMaskBatcher(engine);\n  }\n\n  clear(): void {\n    this._preMaskLayer = 0;\n    this._batcher.clear();\n  }\n\n  preRender(camera: Camera, renderer: SpriteRenderer): void {\n    if (renderer.maskInteraction === SpriteMaskInteraction.None) {\n      return;\n    }\n\n    this._batcher.clear();\n    this._processMasksDiff(camera, renderer);\n    this._batcher.flush(camera, null);\n  }\n\n  postRender(renderer: SpriteRenderer): void {\n    if (renderer.maskInteraction === SpriteMaskInteraction.None) {\n      return;\n    }\n\n    this._preMaskLayer = renderer.maskLayer;\n  }\n\n  destroy(): void {\n    this._batcher.destroy();\n    this._batcher = null;\n  }\n\n  private _processMasksDiff(camera: Camera, renderer: SpriteRenderer): void {\n    const preMaskLayer = this._preMaskLayer;\n    const curMaskLayer = renderer.maskLayer;\n    if (preMaskLayer !== curMaskLayer) {\n      const allMasks = camera._renderPipeline._allSpriteMasks;\n      const commonLayer = preMaskLayer & curMaskLayer;\n      const addLayer = curMaskLayer & ~preMaskLayer;\n      const reduceLayer = preMaskLayer & ~curMaskLayer;\n\n      const allMaskElements = allMasks._elements;\n      for (let i = 0, n = allMasks.length; i < n; i++) {\n        const mask = allMaskElements[i];\n        const influenceLayers = mask.influenceLayers;\n\n        if (influenceLayers & commonLayer) {\n          continue;\n        }\n\n        if (influenceLayers & addLayer) {\n          const maskRenderElement = mask._maskElement;\n          maskRenderElement.isAdd = true;\n          this._batcher.drawElement(maskRenderElement, camera, null);\n          continue;\n        }\n\n        if (influenceLayers & reduceLayer) {\n          const maskRenderElement = mask._maskElement;\n          maskRenderElement.isAdd = false;\n          this._batcher.drawElement(maskRenderElement, camera, null);\n        }\n      }\n    }\n  }\n}\n","import { RenderElement } from \"./RenderElement\";\nimport { SpriteElement } from \"./SpriteElement\";\n\nexport class TextRenderElement extends RenderElement {\n  charElements: SpriteElement[] = [];\n\n  constructor() {\n    super();\n    this.multiRenderData = true;\n  }\n}\n","/**\n * The Background mode enumeration.\n */\nexport enum BackgroundMode {\n  /* Solid color. */\n  SolidColor,\n  /* Sky. */\n  Sky,\n  /** Texture */\n  Texture\n}\n","/**\n * Filling mode of background texture.\n */\nexport enum BackgroundTextureFillMode {\n  /* Maintain the aspect ratio and scale the texture to fit the width of the canvas. */\n  AspectFitWidth,\n  /* Maintain the aspect ratio and scale the texture to fit the height of the canvas. */\n  AspectFitHeight,\n  /* Scale the texture fully fills the canvas. */\n  Fill\n}\n","import { MathUtil, Matrix } from \"@galacean/engine-math\";\nimport { Logger } from \"../base/Logger\";\nimport { Mesh } from \"../graphic/Mesh\";\nimport { Material } from \"../material\";\nimport { RenderContext } from \"../RenderPipeline/RenderContext\";\nimport { Shader } from \"../shader/Shader\";\nimport { ShaderMacroCollection } from \"../shader/ShaderMacroCollection\";\n\n/**\n * Sky.\n */\nexport class Sky {\n  private static _epsilon: number = 1e-6;\n  private static _viewProjMatrix: Matrix = new Matrix();\n  private static _projectionMatrix: Matrix = new Matrix(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, Sky._epsilon - 1, -1, 0, 0, 0, 0);\n\n  /** Material of the sky. */\n  material: Material;\n  /** Mesh of the sky. */\n  mesh: Mesh;\n\n  /**\n   * @internal\n   */\n  _render(context: RenderContext): void {\n    const { material, mesh } = this;\n    if (!material) {\n      Logger.warn(\"The material of sky is not defined.\");\n      return;\n    }\n    if (!mesh) {\n      Logger.warn(\"The mesh of sky is not defined.\");\n      return;\n    }\n\n    const { engine, aspectRatio, fieldOfView, viewMatrix, shaderData: cameraShaderData } = context.camera;\n    const { _viewProjMatrix: viewProjMatrix, _projectionMatrix: projectionMatrix } = Sky;\n    const rhi = engine._hardwareRenderer;\n    const { shaderData: materialShaderData, shader, renderState } = material;\n\n    // no-scale view matrix\n    viewProjMatrix.copyFrom(viewMatrix);\n    const e = viewProjMatrix.elements;\n    e[12] = e[13] = e[14] = 0;\n\n    // epsilon-infinity projection matrix http://terathon.com/gdc07_lengyel.pdf\n    const f = 1.0 / Math.tan(MathUtil.degreeToRadian(fieldOfView) / 2);\n    projectionMatrix.elements[0] = f / aspectRatio;\n    projectionMatrix.elements[5] = f;\n\n    // view-proj matrix\n    Matrix.multiply(projectionMatrix, viewProjMatrix, viewProjMatrix);\n    const originViewProjMatrix = cameraShaderData.getMatrix(RenderContext._vpMatrixProperty);\n    cameraShaderData.setMatrix(RenderContext._vpMatrixProperty, viewProjMatrix);\n\n    const compileMacros = Shader._compileMacros;\n    ShaderMacroCollection.unionCollection(\n      context.camera._globalShaderMacro,\n      materialShaderData._macroCollection,\n      compileMacros\n    );\n    const program = shader.passes[0]._getShaderProgram(engine, compileMacros);\n    program.bind();\n    program.groupingOtherUniformBlock();\n    program.uploadAll(program.cameraUniformBlock, cameraShaderData);\n    program.uploadAll(program.materialUniformBlock, materialShaderData);\n    program.uploadUnGroupTextures();\n\n    renderState._apply(engine, false);\n    rhi.drawPrimitive(mesh, mesh.subMesh, program);\n    cameraShaderData.setMatrix(RenderContext._vpMatrixProperty, originViewProjMatrix);\n  }\n}\n","import { Color, Vector2, Vector3 } from \"@galacean/engine-math\";\nimport { ModelMesh } from \".\";\nimport { Engine } from \"./Engine\";\nimport { BackgroundMode } from \"./enums/BackgroundMode\";\nimport { BackgroundTextureFillMode } from \"./enums/BackgroundTextureFillMode\";\nimport { Sky } from \"./sky/Sky\";\nimport { Texture2D } from \"./texture\";\n\n/**\n * Background of scene.\n */\nexport class Background {\n  /**\n   * Background mode.\n   * @defaultValue `BackgroundMode.SolidColor`\n   * @remarks If using `BackgroundMode.Sky` mode and material or mesh of the `sky` is not defined, it will downgrade to `BackgroundMode.SolidColor`.\n   */\n  mode: BackgroundMode = BackgroundMode.SolidColor;\n\n  /**\n   * Background solid color.\n   * @defaultValue `new Color(0.25, 0.25, 0.25, 1.0)`\n   * @remarks When `mode` is `BackgroundMode.SolidColor`, the property will take effects.\n   */\n  solidColor: Color = new Color(0.25, 0.25, 0.25, 1.0);\n\n  /**\n   * Background sky.\n   * @remarks When `mode` is `BackgroundMode.Sky`, the property will take effects.\n   */\n  readonly sky: Sky = new Sky();\n\n  /** @internal */\n  _textureFillMode: BackgroundTextureFillMode = BackgroundTextureFillMode.AspectFitHeight;\n\n  /** @internal */\n  _mesh: ModelMesh;\n\n  private _texture: Texture2D = null;\n\n  /**\n   * Background texture.\n   * @remarks When `mode` is `BackgroundMode.Texture`, the property will take effects.\n   */\n  get texture(): Texture2D {\n    return this._texture;\n  }\n\n  set texture(value: Texture2D) {\n    if (this._texture !== value) {\n      this._texture = value;\n      this._engine._backgroundTextureMaterial.shaderData.setTexture(\"u_baseTexture\", value);\n    }\n  }\n\n  /**\n   * @internal\n   * Background texture fill mode.\n   * @remarks When `mode` is `BackgroundMode.Texture`, the property will take effects.\n   * @defaultValue `BackgroundTextureFillMode.FitHeight`\n   */\n  get textureFillMode(): BackgroundTextureFillMode {\n    return this._textureFillMode;\n  }\n\n  set textureFillMode(value: BackgroundTextureFillMode) {\n    if (value !== this._textureFillMode) {\n      this._textureFillMode = value;\n      this._resizeBackgroundTexture();\n    }\n  }\n\n  /**\n   * Constructor of Background.\n   * @param _engine Engine Which the background belongs to.\n   */\n  constructor(private _engine: Engine) {\n    this._mesh = this._createPlane(_engine);\n  }\n\n  /**\n   * @internal\n   */\n  _resizeBackgroundTexture(): void {\n    if (!this._texture) {\n      return;\n    }\n    const { canvas } = this._engine;\n    const { width, height } = canvas;\n    const { _mesh:_backgroundTextureMesh } = this;\n    const positions = _backgroundTextureMesh.getPositions();\n\n    switch (this._textureFillMode) {\n      case BackgroundTextureFillMode.Fill:\n        positions[0].set(-1, -1, 1);\n        positions[1].set(1, -1, 1);\n        positions[2].set(-1, 1, 1);\n        positions[3].set(1, 1, 1);\n        break;\n      case BackgroundTextureFillMode.AspectFitWidth:\n        const fitWidthScale = (this._texture.height * width) / this.texture.width / height;\n        positions[0].set(-1, -fitWidthScale, 1);\n        positions[1].set(1, -fitWidthScale, 1);\n        positions[2].set(-1, fitWidthScale, 1);\n        positions[3].set(1, fitWidthScale, 1);\n        break;\n      case BackgroundTextureFillMode.AspectFitHeight:\n        const fitHeightScale = (this._texture.width * height) / this.texture.height / width;\n        positions[0].set(-fitHeightScale, -1, 1);\n        positions[1].set(fitHeightScale, -1, 1);\n        positions[2].set(-fitHeightScale, 1, 1);\n        positions[3].set(fitHeightScale, 1, 1);\n        break;\n    }\n    _backgroundTextureMesh.setPositions(positions);\n    _backgroundTextureMesh.uploadData(false);\n  }\n\n  private _createPlane(\n    engine: Engine,\n  ): ModelMesh {\n    const mesh = new ModelMesh(engine);\n    mesh.isGCIgnored = true;\n    const indices = new Uint8Array([1, 2, 0, 1, 3, 2]);\n\n    const positions: Vector3[] = new Array(4);\n    const uvs: Vector2[] = new Array(4);\n\n    for (let i = 0; i < 4; ++i) {\n      positions[i] = new Vector3();\n      uvs[i] = new Vector2(i % 2, 1 - ((i * 0.5) | 0));\n    }\n\n    mesh.setPositions(positions);\n    mesh.setUVs(uvs);\n    mesh.setIndices(indices);\n\n    mesh.uploadData(false);\n    mesh.addSubMesh(0, indices.length);\n    return mesh;\n  }\n}\n","/**\n * Fog Mode.\n */\nexport enum FogMode {\n  /** Disable fog. */\n  None,\n  /** Linear fog. */\n  Linear,\n  /** Exponential fog. */\n  Exponential,\n  /** Exponential squared fog. */\n  ExponentialSquared\n}\n","/**\n * Diffuse mode.\n */\nexport enum DiffuseMode {\n  /** Solid color mode. */\n  SolidColor,\n\n  /**\n   * SH mode\n   * @remarks\n   * Use SH3 to represent irradiance environment maps efficiently, allowing for interactive rendering of diffuse objects under distant illumination.\n   */\n  SphericalHarmonics\n}\n","import { Color, SphericalHarmonics3 } from \"@galacean/engine-math\";\nimport { Scene } from \"../Scene\";\nimport { Shader, ShaderData } from \"../shader\";\nimport { ShaderMacro } from \"../shader/ShaderMacro\";\nimport { ShaderProperty } from \"../shader/ShaderProperty\";\nimport { TextureCube } from \"../texture\";\nimport { DiffuseMode } from \"./enums/DiffuseMode\";\n\n/**\n * Ambient light.\n */\nexport class AmbientLight {\n  private static _shMacro: ShaderMacro = Shader.getMacroByName(\"O3_USE_SH\");\n  private static _specularMacro: ShaderMacro = Shader.getMacroByName(\"O3_USE_SPECULAR_ENV\");\n  private static _decodeRGBMMacro: ShaderMacro = Shader.getMacroByName(\"O3_DECODE_ENV_RGBM\");\n\n  private static _diffuseColorProperty: ShaderProperty = Shader.getPropertyByName(\"u_envMapLight.diffuse\");\n  private static _diffuseSHProperty: ShaderProperty = Shader.getPropertyByName(\"u_env_sh\");\n  private static _diffuseIntensityProperty: ShaderProperty = Shader.getPropertyByName(\"u_envMapLight.diffuseIntensity\");\n  private static _specularTextureProperty: ShaderProperty = Shader.getPropertyByName(\"u_env_specularSampler\");\n  private static _specularIntensityProperty: ShaderProperty = Shader.getPropertyByName(\n    \"u_envMapLight.specularIntensity\"\n  );\n  private static _mipLevelProperty: ShaderProperty = Shader.getPropertyByName(\"u_envMapLight.mipMapLevel\");\n\n  private _diffuseSphericalHarmonics: SphericalHarmonics3;\n  private _diffuseSolidColor: Color = new Color(0.212, 0.227, 0.259);\n  private _diffuseIntensity: number = 1.0;\n  private _specularTexture: TextureCube;\n  private _specularIntensity: number = 1.0;\n  private _diffuseMode: DiffuseMode = DiffuseMode.SolidColor;\n  private _shArray: Float32Array = new Float32Array(27);\n  private _scenes: Scene[] = [];\n  private _specularTextureDecodeRGBM: boolean = false;\n\n  /**\n   * Whether to decode from specularTexture with RGBM format.\n   */\n  get specularTextureDecodeRGBM(): boolean {\n    return this._specularTextureDecodeRGBM;\n  }\n\n  set specularTextureDecodeRGBM(value: boolean) {\n    this._specularTextureDecodeRGBM = value;\n\n    const scenes = this._scenes;\n    for (let i = 0, n = scenes.length; i < n; i++) {\n      this._setSpecularTextureDecodeRGBM(scenes[i].shaderData);\n    }\n  }\n\n  /**\n   * Diffuse mode of ambient light.\n   */\n  get diffuseMode(): DiffuseMode {\n    return this._diffuseMode;\n  }\n\n  set diffuseMode(value: DiffuseMode) {\n    this._diffuseMode = value;\n\n    const scenes = this._scenes;\n    for (let i = 0, n = scenes.length; i < n; i++) {\n      this._setDiffuseMode(scenes[i].shaderData);\n    }\n  }\n\n  /**\n   * Diffuse reflection solid color.\n   * @remarks Effective when diffuse reflection mode is `DiffuseMode.SolidColor`.\n   */\n  get diffuseSolidColor(): Color {\n    return this._diffuseSolidColor;\n  }\n\n  set diffuseSolidColor(value: Color) {\n    if (value !== this._diffuseSolidColor) {\n      this._diffuseSolidColor.copyFrom(value);\n    }\n  }\n\n  /**\n   * Diffuse reflection spherical harmonics 3.\n   * @remarks Effective when diffuse reflection mode is `DiffuseMode.SphericalHarmonics`.\n   */\n  get diffuseSphericalHarmonics(): SphericalHarmonics3 {\n    return this._diffuseSphericalHarmonics;\n  }\n\n  set diffuseSphericalHarmonics(value: SphericalHarmonics3) {\n    this._diffuseSphericalHarmonics = value;\n    if (value) {\n      this._preComputeSH(value, this._shArray);\n      const scenes = this._scenes;\n      for (let i = 0, n = scenes.length; i < n; i++) {\n        scenes[i].shaderData.setFloatArray(AmbientLight._diffuseSHProperty, this._shArray);\n      }\n    }\n  }\n\n  /**\n   * Diffuse reflection intensity.\n   */\n  get diffuseIntensity(): number {\n    return this._diffuseIntensity;\n  }\n\n  set diffuseIntensity(value: number) {\n    this._diffuseIntensity = value;\n\n    const scenes = this._scenes;\n    for (let i = 0, n = scenes.length; i < n; i++) {\n      scenes[i].shaderData.setFloat(AmbientLight._diffuseIntensityProperty, value);\n    }\n  }\n\n  /**\n   * Specular reflection texture.\n   */\n  get specularTexture(): TextureCube {\n    return this._specularTexture;\n  }\n\n  set specularTexture(value: TextureCube) {\n    this._specularTexture = value;\n\n    const scenes = this._scenes;\n    for (let i = 0, n = scenes.length; i < n; i++) {\n      this._setSpecularTexture(scenes[i].shaderData);\n    }\n  }\n\n  /**\n   * Specular reflection intensity.\n   */\n  get specularIntensity(): number {\n    return this._specularIntensity;\n  }\n\n  set specularIntensity(value: number) {\n    this._specularIntensity = value;\n\n    for (let i = 0, n = this._scenes.length; i < n; i++) {\n      this._scenes[i].shaderData.setFloat(AmbientLight._specularIntensityProperty, value);\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _addToScene(scene: Scene): void {\n    this._scenes.push(scene);\n\n    const shaderData = scene.shaderData;\n    shaderData.setColor(AmbientLight._diffuseColorProperty, this._diffuseSolidColor);\n    shaderData.setFloat(AmbientLight._diffuseIntensityProperty, this._diffuseIntensity);\n    shaderData.setFloat(AmbientLight._specularIntensityProperty, this._specularIntensity);\n    shaderData.setFloatArray(AmbientLight._diffuseSHProperty, this._shArray);\n\n    this._setDiffuseMode(shaderData);\n    this._setSpecularTextureDecodeRGBM(shaderData);\n    this._setSpecularTexture(shaderData);\n  }\n\n  /**\n   * @internal\n   */\n  _removeFromScene(scene: Scene): void {\n    const scenes = this._scenes;\n    const index = scenes.indexOf(scene);\n    scenes.splice(index, 1);\n  }\n\n  private _setDiffuseMode(sceneShaderData: ShaderData): void {\n    if (this._diffuseMode === DiffuseMode.SphericalHarmonics) {\n      sceneShaderData.enableMacro(AmbientLight._shMacro);\n    } else {\n      sceneShaderData.disableMacro(AmbientLight._shMacro);\n    }\n  }\n\n  private _setSpecularTexture(sceneShaderData: ShaderData): void {\n    if (this._specularTexture) {\n      sceneShaderData.setTexture(AmbientLight._specularTextureProperty, this._specularTexture);\n      sceneShaderData.setFloat(AmbientLight._mipLevelProperty, this._specularTexture.mipmapCount - 1);\n      sceneShaderData.enableMacro(AmbientLight._specularMacro);\n    } else {\n      sceneShaderData.disableMacro(AmbientLight._specularMacro);\n    }\n  }\n\n  private _setSpecularTextureDecodeRGBM(sceneShaderData: ShaderData): void {\n    if (this._specularTextureDecodeRGBM) {\n      sceneShaderData.enableMacro(AmbientLight._decodeRGBMMacro);\n    } else {\n      sceneShaderData.disableMacro(AmbientLight._decodeRGBMMacro);\n    }\n  }\n\n  private _preComputeSH(sh: SphericalHarmonics3, out: Float32Array): void {\n    /**\n     * Basis constants\n     *\n     * 0: 1/2 * Math.sqrt(1 / Math.PI)\n     *\n     * 1: -1/2 * Math.sqrt(3 / Math.PI)\n     * 2: 1/2 * Math.sqrt(3 / Math.PI)\n     * 3: -1/2 * Math.sqrt(3 / Math.PI)\n     *\n     * 4: 1/2 * Math.sqrt(15 / Math.PI)\n     * 5: -1/2 * Math.sqrt(15 / Math.PI)\n     * 6: 1/4 * Math.sqrt(5 / Math.PI)\n     * 7: -1/2 * Math.sqrt(15 / Math.PI)\n     * 8: 1/4 * Math.sqrt(15 / Math.PI)\n     */\n\n    /**\n     * Convolution kernel\n     *\n     * 0: Math.PI\n     * 1: (2 * Math.PI) / 3\n     * 2: Math.PI / 4\n     */\n\n    const src = sh.coefficients;\n\n    // l0\n    out[0] = src[0] * 0.886227; // kernel0 * basis0 = 0.886227\n    out[1] = src[1] * 0.886227;\n    out[2] = src[2] * 0.886227;\n\n    // l1\n    out[3] = src[3] * -1.023327; // kernel1 * basis1 = -1.023327;\n    out[4] = src[4] * -1.023327;\n    out[5] = src[5] * -1.023327;\n    out[6] = src[6] * 1.023327; // kernel1 * basis2 = 1.023327\n    out[7] = src[7] * 1.023327;\n    out[8] = src[8] * 1.023327;\n    out[9] = src[9] * -1.023327; // kernel1 * basis3 = -1.023327\n    out[10] = src[10] * -1.023327;\n    out[11] = src[11] * -1.023327;\n\n    // l2\n    out[12] = src[12] * 0.858086; // kernel2 * basis4 = 0.858086\n    out[13] = src[13] * 0.858086;\n    out[14] = src[14] * 0.858086;\n    out[15] = src[15] * -0.858086; // kernel2 * basis5 = -0.858086\n    out[16] = src[16] * -0.858086;\n    out[17] = src[17] * -0.858086;\n    out[18] = src[18] * 0.247708; // kernel2 * basis6 = 0.247708\n    out[19] = src[19] * 0.247708;\n    out[20] = src[20] * 0.247708;\n    out[21] = src[21] * -0.858086; // kernel2 * basis7 = -0.858086\n    out[22] = src[22] * -0.858086;\n    out[23] = src[23] * -0.858086;\n    out[24] = src[24] * 0.429042; // kernel2 * basis8 = 0.429042\n    out[25] = src[25] * 0.429042;\n    out[26] = src[26] * 0.429042;\n  }\n}\n","import { Color, Vector3, Vector4 } from \"@galacean/engine-math\";\nimport { Background } from \"./Background\";\nimport { EngineObject, Logger } from \"./base\";\nimport { Camera } from \"./Camera\";\nimport { Engine } from \"./Engine\";\nimport { Entity } from \"./Entity\";\nimport { FogMode } from \"./enums/FogMode\";\nimport { Light } from \"./lighting\";\nimport { AmbientLight } from \"./lighting/AmbientLight\";\nimport { Shader } from \"./shader\";\nimport { ShaderDataGroup } from \"./shader/enums/ShaderDataGroup\";\nimport { ShaderData } from \"./shader/ShaderData\";\nimport { ShaderMacroCollection } from \"./shader/ShaderMacroCollection\";\nimport { ShadowCascadesMode } from \"./shadow/enum/ShadowCascadesMode\";\nimport { ShadowResolution } from \"./shadow/enum/ShadowResolution\";\nimport { ShadowType } from \"./shadow/enum/ShadowType\";\n\n/**\n * Scene.\n */\nexport class Scene extends EngineObject {\n  private static _fogColorProperty = Shader.getPropertyByName(\"oasis_FogColor\");\n  private static _fogParamsProperty = Shader.getPropertyByName(\"oasis_FogParams\");\n\n  /** Scene name. */\n  name: string;\n\n  /** The background of the scene. */\n  readonly background: Background = new Background(this._engine);\n  /** Scene-related shader data. */\n  readonly shaderData: ShaderData = new ShaderData(ShaderDataGroup.Scene);\n\n  /** If cast shadows. */\n  castShadows: boolean = true;\n  /** The resolution of the shadow maps. */\n  shadowResolution: ShadowResolution = ShadowResolution.Medium;\n  /** The splits of two cascade distribution. */\n  shadowTwoCascadeSplits: number = 1.0 / 3.0;\n  /** The splits of four cascade distribution. */\n  shadowFourCascadeSplits: Vector3 = new Vector3(1.0 / 15, 3.0 / 15.0, 7.0 / 15.0);\n  /** Max Shadow distance. */\n  shadowDistance: number = 50;\n\n  /** @internal */\n  _activeCameras: Camera[] = [];\n  /** @internal */\n  _isActiveInEngine: boolean = false;\n  /** @internal */\n  _globalShaderMacro: ShaderMacroCollection = new ShaderMacroCollection();\n  /** @internal */\n  _rootEntities: Entity[] = [];\n  /** @internal */\n  _sunLight: Light;\n\n  private _shadowCascades: ShadowCascadesMode = ShadowCascadesMode.NoCascades;\n  private _ambientLight: AmbientLight;\n  private _fogMode: FogMode = FogMode.None;\n  private _fogColor: Color = new Color(0.5, 0.5, 0.5, 1.0);\n  private _fogStart: number = 0;\n  private _fogEnd: number = 300;\n  private _fogDensity: number = 0.01;\n  private _fogParams: Vector4 = new Vector4();\n\n  /**\n   *  Number of cascades to use for directional light shadows.\n   */\n  get shadowCascades(): ShadowCascadesMode {\n    return this._shadowCascades;\n  }\n\n  set shadowCascades(value: ShadowCascadesMode) {\n    if (this._shadowCascades !== value) {\n      this.shaderData.enableMacro(\"CASCADED_COUNT\", value.toString());\n      this._shadowCascades = value;\n    }\n  }\n\n  /**\n   * Ambient light.\n   */\n  get ambientLight(): AmbientLight {\n    return this._ambientLight;\n  }\n\n  set ambientLight(value: AmbientLight) {\n    if (!value) {\n      Logger.warn(\"The scene must have one ambient light\");\n      return;\n    }\n\n    const lastAmbientLight = this._ambientLight;\n    if (lastAmbientLight !== value) {\n      lastAmbientLight && lastAmbientLight._removeFromScene(this);\n      value._addToScene(this);\n      this._ambientLight = value;\n    }\n  }\n\n  /**\n   * Fog mode.\n   * @remarks\n   * If set to `FogMode.None`, the fog will be disabled.\n   * If set to `FogMode.Linear`, the fog will be linear and controlled by `fogStart` and `fogEnd`.\n   * If set to `FogMode.Exponential`, the fog will be exponential and controlled by `fogDensity`.\n   * If set to `FogMode.ExponentialSquared`, the fog will be exponential squared and controlled by `fogDensity`.\n   */\n  get fogMode(): FogMode {\n    return this._fogMode;\n  }\n\n  set fogMode(value: FogMode) {\n    if (this._fogMode !== value) {\n      this.shaderData.enableMacro(\"OASIS_FOG_MODE\", value.toString());\n      this._fogMode = value;\n    }\n  }\n\n  /**\n   * Fog color.\n   */\n  get fogColor(): Color {\n    return this._fogColor;\n  }\n\n  set fogColor(value: Color) {\n    if (this._fogColor !== value) {\n      this._fogColor.copyFrom(value);\n    }\n  }\n\n  /**\n   * Fog start.\n   */\n  get fogStart(): number {\n    return this._fogStart;\n  }\n\n  set fogStart(value: number) {\n    if (this._fogStart !== value) {\n      this._computeLinearFogParams(value, this._fogEnd);\n      this._fogStart = value;\n    }\n  }\n\n  /**\n   * Fog end.\n   */\n  get fogEnd(): number {\n    return this._fogEnd;\n  }\n\n  set fogEnd(value: number) {\n    if (this._fogEnd !== value) {\n      this._computeLinearFogParams(this._fogStart, value);\n      this._fogEnd = value;\n    }\n  }\n\n  /**\n   * Fog density.\n   */\n  get fogDensity(): number {\n    return this._fogDensity;\n  }\n\n  set fogDensity(value: number) {\n    if (this._fogDensity !== value) {\n      this._computeExponentialFogParams(value);\n      this._fogDensity = value;\n    }\n  }\n\n  /**\n   * Count of root entities.\n   */\n  get rootEntitiesCount(): number {\n    return this._rootEntities.length;\n  }\n\n  /**\n   * Root entity collection.\n   */\n  get rootEntities(): Readonly<Entity[]> {\n    return this._rootEntities;\n  }\n\n  /**\n   * Create scene.\n   * @param engine - Engine\n   * @param name - Name\n   */\n  constructor(engine: Engine, name?: string) {\n    super(engine);\n    this.name = name || \"\";\n\n    const shaderData = this.shaderData;\n    shaderData._addRefCount(1);\n    this.ambientLight = new AmbientLight();\n    engine.sceneManager._allScenes.push(this);\n\n    shaderData.enableMacro(\"OASIS_FOG_MODE\", this._fogMode.toString());\n    shaderData.enableMacro(\"CASCADED_COUNT\", this.shadowCascades.toString());\n    shaderData.setColor(Scene._fogColorProperty, this._fogColor);\n    shaderData.setVector4(Scene._fogParamsProperty, this._fogParams);\n\n    this._computeLinearFogParams(this._fogStart, this._fogEnd);\n    this._computeExponentialFogParams(this._fogDensity);\n  }\n\n  /**\n   * Create root entity.\n   * @param name - Entity name\n   * @returns Entity\n   */\n  createRootEntity(name?: string): Entity {\n    const entity = new Entity(this._engine, name);\n    this.addRootEntity(entity);\n    return entity;\n  }\n\n  /**\n   * Append an entity.\n   * @param entity - The root entity to add\n   */\n  addRootEntity(entity: Entity): void;\n\n  /**\n   * Append an entity.\n   * @param index - specified index\n   * @param entity - The root entity to add\n   */\n  addRootEntity(index: number, entity: Entity): void;\n\n  addRootEntity(indexOrChild: number | Entity, entity?: Entity): void {\n    let index: number;\n    if (typeof indexOrChild === \"number\") {\n      index = indexOrChild;\n    } else {\n      index = undefined;\n      entity = indexOrChild;\n    }\n\n    const isRoot = entity._isRoot;\n    // let entity become root\n    if (!isRoot) {\n      entity._isRoot = true;\n      entity._removeFromParent();\n    }\n\n    // add or remove from scene's rootEntities\n    const oldScene = entity._scene;\n    if (oldScene !== this) {\n      if (oldScene && isRoot) {\n        oldScene._removeFromEntityList(entity);\n      }\n      this._addToRootEntityList(index, entity);\n      Entity._traverseSetOwnerScene(entity, this);\n    } else if (!isRoot) {\n      this._addToRootEntityList(index, entity);\n    }\n\n    // process entity active/inActive\n    if (this._isActiveInEngine) {\n      !entity._isActiveInHierarchy && entity._isActive && entity._processActive();\n    } else {\n      entity._isActiveInHierarchy && entity._processInActive();\n    }\n  }\n\n  /**\n   * Remove an entity.\n   * @param entity - The root entity to remove\n   */\n  removeRootEntity(entity: Entity): void {\n    if (entity._isRoot && entity._scene == this) {\n      this._removeFromEntityList(entity);\n      entity._isRoot = false;\n      this._isActiveInEngine && entity._isActiveInHierarchy && entity._processInActive();\n      Entity._traverseSetOwnerScene(entity, null);\n    }\n  }\n\n  /**\n   * Get root entity from index.\n   * @param index - Index\n   * @returns Entity\n   */\n  getRootEntity(index: number = 0): Entity | null {\n    return this._rootEntities[index];\n  }\n\n  /**\n   * Find entity globally by name.\n   * @param name - Entity name\n   * @returns Entity\n   */\n  findEntityByName(name: string): Entity | null {\n    const rootEntities = this._rootEntities;\n    for (let i = 0, n = rootEntities.length; i < n; i++) {\n      const entity = rootEntities[i].findByName(name);\n      if (entity) {\n        return entity;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Find entity globally by name,use ‘/’ symbol as a path separator.\n   * @param path - Entity's path\n   * @returns Entity\n   */\n  findEntityByPath(path: string): Entity | null {\n    const splits = path.split(\"/\").filter(Boolean);\n    for (let i = 0, n = this.rootEntitiesCount; i < n; i++) {\n      let findEntity = this.getRootEntity(i);\n      if (findEntity.name != splits[0]) continue;\n      for (let j = 1, m = splits.length; j < m; ++j) {\n        findEntity = Entity._findChildByName(findEntity, splits[j]);\n        if (!findEntity) break;\n      }\n      return findEntity;\n    }\n    return null;\n  }\n\n  /**\n   * Destroy this scene.\n   */\n  destroy(): void {\n    if (this._destroyed) {\n      return;\n    }\n\n    this._destroy();\n\n    const allScenes = this.engine.sceneManager._allScenes;\n    allScenes.splice(allScenes.indexOf(this), 1);\n  }\n\n  /**\n   * @internal\n   */\n  _attachRenderCamera(camera: Camera): void {\n    const index = this._activeCameras.indexOf(camera);\n    if (index === -1) {\n      this._activeCameras.push(camera);\n    } else {\n      Logger.warn(\"Camera already attached.\");\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _detachRenderCamera(camera: Camera): void {\n    const index = this._activeCameras.indexOf(camera);\n    if (index !== -1) {\n      this._activeCameras.splice(index, 1);\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _processActive(active: boolean): void {\n    this._isActiveInEngine = active;\n    const rootEntities = this._rootEntities;\n    for (let i = rootEntities.length - 1; i >= 0; i--) {\n      const entity = rootEntities[i];\n      if (entity._isActive) {\n        active ? entity._processActive() : entity._processInActive();\n      }\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _updateShaderData(): void {\n    const shaderData = this.shaderData;\n    const lightManager = this._engine._lightManager;\n\n    lightManager._updateShaderData(this.shaderData);\n    const sunLightIndex = lightManager._getSunLightIndex();\n    if (sunLightIndex !== -1) {\n      this._sunLight = lightManager._directLights.get(sunLightIndex);\n    }\n\n    if (this.castShadows && this._sunLight && this._sunLight.shadowType !== ShadowType.None) {\n      shaderData.enableMacro(\"SHADOW_TYPE\", this._sunLight.shadowType.toString());\n    } else {\n      shaderData.disableMacro(\"SHADOW_TYPE\");\n    }\n\n    // union scene and camera macro.\n    ShaderMacroCollection.unionCollection(\n      this.engine._macroCollection,\n      shaderData._macroCollection,\n      this._globalShaderMacro\n    );\n  }\n\n  /**\n   * @internal\n   */\n  _removeFromEntityList(entity: Entity): void {\n    const rootEntities = this._rootEntities;\n    let index = entity._siblingIndex;\n    rootEntities.splice(index, 1);\n    for (let n = rootEntities.length; index < n; index++) {\n      rootEntities[index]._siblingIndex--;\n    }\n    entity._siblingIndex = -1;\n  }\n\n  /**\n   * @internal\n   */\n  _destroy(): void {\n    this._isActiveInEngine && (this._engine.sceneManager.activeScene = null);\n    while (this.rootEntitiesCount > 0) {\n      this._rootEntities[0].destroy();\n    }\n    this._activeCameras.length = 0;\n    this.shaderData._addRefCount(-1);\n  }\n\n  private _addToRootEntityList(index: number, rootEntity: Entity): void {\n    const rootEntities = this._rootEntities;\n    const rootEntityCount = rootEntities.length;\n    if (index === undefined) {\n      rootEntity._siblingIndex = rootEntityCount;\n      rootEntities.push(rootEntity);\n    } else {\n      if (index < 0 || index > rootEntityCount) {\n        throw `The index ${index} is out of child list bounds ${rootEntityCount}`;\n      }\n      rootEntity._siblingIndex = index;\n      rootEntities.splice(index, 0, rootEntity);\n      for (let i = index + 1, n = rootEntityCount + 1; i < n; i++) {\n        rootEntities[i]._siblingIndex++;\n      }\n    }\n  }\n\n  private _computeLinearFogParams(fogStart: number, fogEnd: number): void {\n    const fogRange = fogEnd - fogStart;\n    const fogParams = this._fogParams;\n    fogParams.x = -1 / fogRange;\n    fogParams.y = fogEnd / fogRange;\n  }\n\n  private _computeExponentialFogParams(density: number) {\n    this._fogParams.z = density / Math.LN2;\n    this._fogParams.w = density / Math.sqrt(Math.LN2);\n  }\n}\n","import { AssetPromise } from \"./asset/AssetPromise\";\nimport { Engine } from \"./Engine\";\nimport { Scene } from \"./Scene\";\n\n/**\n * Scene manager.\n */\nexport class SceneManager {\n  /** @internal */\n  _allScenes: Scene[] = [];\n  /** @internal */\n  _activeScene: Scene;\n\n  /**\n   * Get the activated scene.\n   */\n  get activeScene(): Scene {\n    return this._activeScene;\n  }\n\n  set activeScene(scene: Scene) {\n    const oldScene = this._activeScene;\n    if (oldScene !== scene) {\n      oldScene && oldScene._processActive(false);\n      scene && scene._processActive(true);\n      this._activeScene = scene;\n    }\n  }\n\n  /**\n   * @internal\n   */\n  constructor(public readonly engine: Engine) {}\n\n  /**\n   * Load and activate scene.\n   * @param url - the path of the scene\n   * @param destroyOldScene - whether to destroy old scene information\n   * @returns scene promise\n   */\n  loadScene(url: string, destroyOldScene: boolean = true): AssetPromise<Scene> {\n    const scenePromise = this.engine.resourceManager.load<Scene>(url);\n    scenePromise.then((scene: Scene) => {\n      const oldScene: Scene = this._activeScene;\n      this.activeScene = scene;\n      if (oldScene && destroyOldScene) {\n        oldScene.destroy();\n      }\n    });\n    return scenePromise;\n  }\n\n  /**\n   * Merge the source scene into the target scene.\n   * @remarks the global information of destScene will be used after the merge, and the lightingMap information will be merged.\n   * @param sourceScene - source scene\n   * @param destScene - target scene\n   */\n  mergeScenes(sourceScene: Scene, destScene: Scene): void {\n    const oldRootEntities = sourceScene.rootEntities;\n    for (let i: number = 0, n: number = oldRootEntities.length; i < n; i++) {\n      destScene.addRootEntity(oldRootEntities[i]);\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _destroyAllScene(): void {\n    const allScenes = this._allScenes;\n    for (let i = 0, n = allScenes.length; i < n; i++) {\n      allScenes[i]._destroy();\n    }\n    allScenes.length = 0;\n  }\n}\n","import blinnPhongFs from \"../shaderlib/extra/blinn-phong.fs.glsl\";\nimport blinnPhongVs from \"../shaderlib/extra/blinn-phong.vs.glsl\";\nimport particleFs from \"../shaderlib/extra/particle.fs.glsl\";\nimport particleVs from \"../shaderlib/extra/particle.vs.glsl\";\nimport pbrFs from \"../shaderlib/extra/pbr.fs.glsl\";\nimport pbrSpecularFs from \"../shaderlib/extra/pbr-specular.fs.glsl\";\nimport pbrVs from \"../shaderlib/extra/pbr.vs.glsl\";\nimport shadowMapFs from \"../shaderlib/extra/shadow-map.fs.glsl\";\nimport shadowMapVs from \"../shaderlib/extra/shadow-map.vs.glsl\";\nimport skyboxFs from \"../shaderlib/extra/skybox.fs.glsl\";\nimport skyboxVs from \"../shaderlib/extra/skybox.vs.glsl\";\nimport spriteMaskFs from \"../shaderlib/extra/sprite-mask.fs.glsl\";\nimport spriteMaskVs from \"../shaderlib/extra/sprite-mask.vs.glsl\";\nimport spriteFs from \"../shaderlib/extra/sprite.fs.glsl\";\nimport spriteVs from \"../shaderlib/extra/sprite.vs.glsl\";\nimport unlitFs from \"../shaderlib/extra/unlit.fs.glsl\";\nimport unlitVs from \"../shaderlib/extra/unlit.vs.glsl\";\nimport backgroundTextureVs from \"../shaderlib/extra/background-texture.vs.glsl\";\nimport backgroundTextureFs from \"../shaderlib/extra/background-texture.fs.glsl\";\nimport { Shader } from \"./Shader\";\n\n/**\n * Internal shader pool.\n * @internal\n */\nexport class ShaderPool {\n  static init(): void {\n    Shader.create(\"blinn-phong\", blinnPhongVs, blinnPhongFs);\n    Shader.create(\"pbr\", pbrVs, pbrFs);\n    Shader.create(\"pbr-specular\", pbrVs, pbrSpecularFs);\n    Shader.create(\"unlit\", unlitVs, unlitFs);\n    Shader.create(\"shadow-map\", shadowMapVs, shadowMapFs);\n    Shader.create(\"skybox\", skyboxVs, skyboxFs);\n    Shader.create(\"particle-shader\", particleVs, particleFs);\n    Shader.create(\"SpriteMask\", spriteMaskVs, spriteMaskFs);\n    Shader.create(\"Sprite\", spriteVs, spriteFs);\n    Shader.create(\"background-texture\", backgroundTextureVs, backgroundTextureFs);\n  }\n}\n","import { ShaderMacroCollection } from \"./ShaderMacroCollection\";\nimport { ShaderProgram } from \"./ShaderProgram\";\n\n/**\n * Shader program pool.\n * @internal\n */\nexport class ShaderProgramPool {\n  private _cacheHierarchy: number = 1;\n  private _cacheMap: object = Object.create(null);\n  private _lastQueryMap: Record<number, ShaderProgram>;\n  private _lastQueryKey: number;\n\n  /**\n   * Get shader program by macro collection.\n   * @param macros - macro collection\n   * @returns shader program\n   */\n  get(macros: ShaderMacroCollection): ShaderProgram | null {\n    let cacheMap = this._cacheMap;\n    const maskLength = macros._length;\n    if (maskLength > this._cacheHierarchy) {\n      this._resizeCacheMapHierarchy(cacheMap, 0, maskLength);\n    }\n\n    const mask = macros._mask;\n    const endIndex = macros._length - 1;\n    const maxEndIndex = this._cacheHierarchy - 1;\n    for (let i = 0; i < maxEndIndex; i++) {\n      const subMask = endIndex < i ? 0 : mask[i];\n      let subCacheShaders: object = cacheMap[subMask];\n      subCacheShaders || (cacheMap[subMask] = subCacheShaders = Object.create(null));\n      cacheMap = subCacheShaders;\n    }\n\n    const cacheKey = endIndex < maxEndIndex ? 0 : mask[maxEndIndex];\n    const shader = (<Record<number, ShaderProgram>>cacheMap)[cacheKey];\n    if (!shader) {\n      this._lastQueryKey = cacheKey;\n      this._lastQueryMap = <Record<number, ShaderProgram>>cacheMap;\n    }\n    return shader;\n  }\n\n  /**\n   * Cache the shader program.\n   *\n   * @remarks\n   * The method must return an empty value after calling get() to run normally.\n   *\n   * @param shaderProgram - shader program\n   */\n  cache(shaderProgram: ShaderProgram): void {\n    this._lastQueryMap[this._lastQueryKey] = shaderProgram;\n  }\n\n  private _resizeCacheMapHierarchy(cacheMap: object, hierarchy: number, resizeLength: number): void {\n    // only expand but not shrink.\n    const end = this._cacheHierarchy - 1;\n    if (hierarchy == end) {\n      for (let k in cacheMap) {\n        const shader: ShaderProgram = cacheMap[k];\n        let subCacheMap = cacheMap;\n        for (let i = 0, n = resizeLength - end; i < n; i++) {\n          if (i == n - 1) {\n            subCacheMap[0] = shader;\n          } else {\n            subCacheMap = subCacheMap[i == 0 ? k : 0] = Object.create(null);\n          }\n        }\n      }\n      this._cacheHierarchy = resizeLength;\n    } else {\n      for (let k in cacheMap) {\n        this._resizeCacheMapHierarchy(cacheMap[k], ++hierarchy, resizeLength);\n      }\n    }\n  }\n}\n","import { Color } from \"@galacean/engine-math/src/Color\";\nimport { Font } from \"./2d/text/Font\";\nimport { ResourceManager } from \"./asset/ResourceManager\";\nimport { Event, EventDispatcher, Logger, Time } from \"./base\";\nimport { GLCapabilityType } from \"./base/Constant\";\nimport { Canvas } from \"./Canvas\";\nimport { ComponentsManager } from \"./ComponentsManager\";\nimport { EngineSettings } from \"./EngineSettings\";\nimport { Entity } from \"./Entity\";\nimport { ColorSpace } from \"./enums/ColorSpace\";\nimport { InputManager } from \"./input\";\nimport { LightManager } from \"./lighting/LightManager\";\nimport { Material } from \"./material/Material\";\nimport { PhysicsManager } from \"./physics\";\nimport { IHardwareRenderer } from \"./renderingHardwareInterface\";\nimport { ClassPool } from \"./RenderPipeline/ClassPool\";\nimport { MeshRenderElement } from \"./RenderPipeline/MeshRenderElement\";\nimport { RenderContext } from \"./RenderPipeline/RenderContext\";\nimport { SpriteElement } from \"./RenderPipeline/SpriteElement\";\nimport { SpriteMaskElement } from \"./RenderPipeline/SpriteMaskElement\";\nimport { SpriteMaskManager } from \"./RenderPipeline/SpriteMaskManager\";\nimport { TextRenderElement } from \"./RenderPipeline/TextRenderElement\";\nimport { Scene } from \"./Scene\";\nimport { SceneManager } from \"./SceneManager\";\nimport { BlendFactor } from \"./shader/enums/BlendFactor\";\nimport { BlendOperation } from \"./shader/enums/BlendOperation\";\nimport { ColorWriteMask } from \"./shader/enums/ColorWriteMask\";\nimport { CompareFunction } from \"./shader/enums/CompareFunction\";\nimport { CullMode } from \"./shader/enums/CullMode\";\nimport { RenderQueueType } from \"./shader/enums/RenderQueueType\";\nimport { Shader } from \"./shader/Shader\";\nimport { ShaderMacro } from \"./shader/ShaderMacro\";\nimport { ShaderMacroCollection } from \"./shader/ShaderMacroCollection\";\nimport { ShaderPass } from \"./shader/ShaderPass\";\nimport { ShaderPool } from \"./shader/ShaderPool\";\nimport { ShaderProgramPool } from \"./shader/ShaderProgramPool\";\nimport { RenderState } from \"./shader/state/RenderState\";\nimport { Texture2D, Texture2DArray, TextureCube, TextureCubeFace, TextureFormat } from \"./texture\";\n\nShaderPool.init();\n\n/**\n * Engine.\n */\nexport class Engine extends EventDispatcher {\n  /** @internal */\n  static _gammaMacro: ShaderMacro = Shader.getMacroByName(\"OASIS_COLORSPACE_GAMMA\");\n  /** @internal */\n  static _noDepthTextureMacro: ShaderMacro = Shader.getMacroByName(\"OASIS_NO_DEPTH_TEXTURE\");\n  /** @internal Conversion of space units to pixel units for 2D. */\n  static _pixelsPerUnit: number = 100;\n\n  /** Physics manager of Engine. */\n  readonly physicsManager: PhysicsManager;\n  readonly inputManager: InputManager;\n\n  _lightManager: LightManager = new LightManager();\n  _componentsManager: ComponentsManager = new ComponentsManager();\n  _hardwareRenderer: IHardwareRenderer;\n  _lastRenderState: RenderState = new RenderState();\n  _renderElementPool: ClassPool<MeshRenderElement> = new ClassPool(MeshRenderElement);\n  _spriteElementPool: ClassPool<SpriteElement> = new ClassPool(SpriteElement);\n  _spriteMaskElementPool: ClassPool<SpriteMaskElement> = new ClassPool(SpriteMaskElement);\n  _textElementPool: ClassPool<TextRenderElement> = new ClassPool(TextRenderElement);\n  _spriteDefaultMaterial: Material;\n  _spriteMaskDefaultMaterial: Material;\n  _textDefaultFont: Font;\n  _renderContext: RenderContext = new RenderContext();\n\n  /* @internal */\n  _magentaTexture2D: Texture2D;\n  /* @internal */\n  _magentaTextureCube: TextureCube;\n  /* @internal */\n  _magentaTexture2DArray: Texture2DArray;\n  /* @internal */\n  _magentaMaterial: Material;\n  /* @internal */\n  _depthTexture2D: Texture2D;\n\n  /* @internal */\n  _backgroundTextureMaterial: Material;\n  /* @internal */\n  _renderCount: number = 0;\n  /* @internal */\n  _shaderProgramPools: ShaderProgramPool[] = [];\n  /** @internal */\n  _spriteMaskManager: SpriteMaskManager;\n  /** @internal */\n  _canSpriteBatch: boolean = true;\n  /** @internal @todo: temporary solution */\n  _macroCollection: ShaderMacroCollection = new ShaderMacroCollection();\n\n  protected _canvas: Canvas;\n\n  private _settings: EngineSettings = {};\n  private _resourceManager: ResourceManager = new ResourceManager(this);\n  private _sceneManager: SceneManager = new SceneManager(this);\n  private _vSyncCount: number = 1;\n  private _targetFrameRate: number = 60;\n  private _time: Time = new Time();\n  private _isPaused: boolean = true;\n  private _requestId: number;\n  private _timeoutId: number;\n  private _vSyncCounter: number = 1;\n  private _targetFrameInterval: number = 1000 / 60;\n  private _destroyed: boolean = false;\n  private _frameInProcess: boolean = false;\n  private _waittingDestroy: boolean = false;\n\n  private _animate = () => {\n    if (this._vSyncCount) {\n      this._requestId = requestAnimationFrame(this._animate);\n      if (this._vSyncCounter++ % this._vSyncCount === 0) {\n        this.update();\n        this._vSyncCounter = 1;\n      }\n    } else {\n      this._timeoutId = window.setTimeout(this._animate, this._targetFrameInterval);\n      this.update();\n    }\n  };\n\n  /**\n   * Settings of Engine.\n   */\n  get settings(): EngineSettings {\n    return this._settings;\n  }\n\n  /**\n   * The canvas to use for rendering.\n   */\n  get canvas(): Canvas {\n    return this._canvas;\n  }\n\n  /**\n   * Get the resource manager.\n   */\n  get resourceManager(): ResourceManager {\n    return this._resourceManager;\n  }\n\n  /**\n   * Get the scene manager.\n   */\n  get sceneManager(): SceneManager {\n    return this._sceneManager;\n  }\n\n  /**\n   * Get the Time class.\n   */\n  get time(): Time {\n    return this._time;\n  }\n\n  /**\n   * Whether the engine is paused.\n   */\n  get isPaused(): boolean {\n    return this._isPaused;\n  }\n\n  /**\n   * The number of vertical synchronization means the number of vertical blanking for one frame.\n   * @remarks 0 means that the vertical synchronization is turned off.\n   */\n  get vSyncCount(): number {\n    return this._vSyncCount;\n  }\n\n  set vSyncCount(value: number) {\n    this._vSyncCount = Math.max(0, Math.floor(value));\n  }\n\n  /**\n   * Set the target frame rate you want to achieve.\n   * @remarks\n   * It only takes effect when vSyncCount = 0 (ie, vertical synchronization is turned off).\n   * The larger the value, the higher the target frame rate, Number.POSITIVE_INFINITY represents the infinite target frame rate.\n   */\n  get targetFrameRate(): number {\n    return this._targetFrameRate;\n  }\n\n  set targetFrameRate(value: number) {\n    value = Math.max(0.000001, value);\n    this._targetFrameRate = value;\n    this._targetFrameInterval = 1000 / value;\n  }\n\n  /**\n   * Indicates whether the engine is destroyed.\n   */\n  get destroyed(): boolean {\n    return this._destroyed;\n  }\n\n  /**\n   * Create engine.\n   * @param canvas - The canvas to use for rendering\n   * @param hardwareRenderer - Graphics API renderer\n   * @param settings - Engine Settings\n   */\n  constructor(canvas: Canvas, hardwareRenderer: IHardwareRenderer, settings?: EngineSettings) {\n    super();\n    this._hardwareRenderer = hardwareRenderer;\n    this._hardwareRenderer.init(canvas);\n\n    this.physicsManager = new PhysicsManager(this);\n\n    this._canvas = canvas;\n    this._sceneManager.activeScene = new Scene(this, \"DefaultScene\");\n\n    this._spriteMaskManager = new SpriteMaskManager(this);\n    this._spriteDefaultMaterial = this._createSpriteMaterial();\n    this._spriteMaskDefaultMaterial = this._createSpriteMaskMaterial();\n    this._textDefaultFont = Font.createFromOS(this, \"Arial\");\n    this._textDefaultFont.isGCIgnored = false;\n\n    this.inputManager = new InputManager(this);\n\n    const magentaPixel = new Uint8Array([255, 0, 255, 255]);\n\n    const magentaTexture2D = new Texture2D(this, 1, 1, TextureFormat.R8G8B8A8, false);\n    magentaTexture2D.setPixelBuffer(magentaPixel);\n    magentaTexture2D.isGCIgnored = true;\n\n    const magentaTextureCube = new TextureCube(this, 1, TextureFormat.R8G8B8A8, false);\n    magentaTextureCube.setPixelBuffer(TextureCubeFace.PositiveX, magentaPixel);\n    magentaTextureCube.setPixelBuffer(TextureCubeFace.NegativeX, magentaPixel);\n    magentaTextureCube.setPixelBuffer(TextureCubeFace.PositiveY, magentaPixel);\n    magentaTextureCube.setPixelBuffer(TextureCubeFace.NegativeY, magentaPixel);\n    magentaTextureCube.setPixelBuffer(TextureCubeFace.PositiveZ, magentaPixel);\n    magentaTextureCube.setPixelBuffer(TextureCubeFace.NegativeZ, magentaPixel);\n    magentaTextureCube.isGCIgnored = true;\n\n    if (!hardwareRenderer.canIUse(GLCapabilityType.depthTexture)) {\n      this._macroCollection.enable(Engine._noDepthTextureMacro);\n    } else {\n      const depthTexture2D = new Texture2D(this, 1, 1, TextureFormat.Depth16, false);\n      depthTexture2D.isGCIgnored = true;\n      this._depthTexture2D = depthTexture2D;\n    }\n\n    this._magentaTexture2D = magentaTexture2D;\n    this._magentaTextureCube = magentaTextureCube;\n\n    if (hardwareRenderer.isWebGL2) {\n      const magentaTexture2DArray = new Texture2DArray(this, 1, 1, 1, TextureFormat.R8G8B8A8, false);\n      magentaTexture2DArray.setPixelBuffer(0, magentaPixel);\n      magentaTexture2DArray.isGCIgnored = true;\n      this._magentaTexture2DArray = magentaTexture2DArray;\n    }\n\n    const magentaMaterial = new Material(this, Shader.find(\"unlit\"));\n    magentaMaterial.shaderData.setColor(\"u_baseColor\", new Color(1.0, 0.0, 1.01, 1.0));\n    this._magentaMaterial = magentaMaterial;\n\n    const backgroundTextureMaterial = new Material(this, Shader.find(\"background-texture\"));\n    backgroundTextureMaterial.isGCIgnored = true;\n    backgroundTextureMaterial.renderState.depthState.compareFunction = CompareFunction.LessEqual;\n    this._backgroundTextureMaterial = backgroundTextureMaterial;\n\n    const innerSettings = this._settings;\n    const colorSpace = settings?.colorSpace || ColorSpace.Linear;\n    colorSpace === ColorSpace.Gamma && this._macroCollection.enable(Engine._gammaMacro);\n    innerSettings.colorSpace = colorSpace;\n  }\n\n  /**\n   * Create an entity.\n   * @param name - The name of the entity\n   * @returns Entity\n   */\n  createEntity(name?: string): Entity {\n    return new Entity(this, name);\n  }\n\n  /**\n   * Pause the engine.\n   */\n  pause(): void {\n    this._isPaused = true;\n    cancelAnimationFrame(this._requestId);\n    clearTimeout(this._timeoutId);\n  }\n\n  /**\n   * Resume the engine.\n   */\n  resume(): void {\n    if (!this._isPaused) return;\n    this._isPaused = false;\n    this.time.reset();\n    this._requestId = requestAnimationFrame(this._animate);\n  }\n\n  /**\n   * Update the engine loop manually. If you call engine.run(), you generally don't need to call this function.\n   */\n  update(): void {\n    const time = this._time;\n    time.tick();\n    \n    const deltaTime = time.deltaTime;\n    this._frameInProcess = true;\n\n    this._renderElementPool.resetPool();\n    this._spriteElementPool.resetPool();\n    this._spriteMaskElementPool.resetPool();\n    this._textElementPool.resetPool();\n\n    const scene = this._sceneManager._activeScene;\n    const componentsManager = this._componentsManager;\n    if (scene) {\n      scene._activeCameras.sort((camera1, camera2) => camera1.priority - camera2.priority);\n\n      componentsManager.callScriptOnStart();\n      this.physicsManager._initialized && this.physicsManager._update(deltaTime / 1000.0);\n      this.inputManager._update();\n      componentsManager.callScriptOnUpdate(deltaTime);\n      componentsManager.callAnimationUpdate(deltaTime);\n      componentsManager.callScriptOnLateUpdate(deltaTime);\n      this._render(scene);\n    }\n\n    if (!this._waittingDestroy) {\n      componentsManager.handlingInvalidScripts();\n    }\n    if (this._waittingDestroy) {\n      this._destroy();\n    }\n    this._frameInProcess = false;\n  }\n\n  /**\n   * Execution engine loop.\n   */\n  run(): void {\n    this.resume();\n    this.trigger(new Event(\"run\", this));\n  }\n\n  private _destroy(): void {\n    this._sceneManager._destroyAllScene();\n    this._componentsManager.handlingInvalidScripts();\n\n    this._resourceManager._destroy();\n    this._magentaTexture2D.destroy(true);\n    this._magentaTextureCube.destroy(true);\n    this._textDefaultFont.destroy(true);\n\n    this.inputManager._destroy();\n    this.trigger(new Event(\"shutdown\", this));\n\n    // -- cancel animation\n    this.pause();\n\n    this._animate = null;\n\n    this._sceneManager = null;\n    this._resourceManager = null;\n    this._canvas = null;\n    this._time = null;\n\n    // delete mask manager\n    this._spriteMaskManager.destroy();\n\n    this.removeAllEventListeners();\n    this._waittingDestroy = false;\n    this._destroyed = true;\n  }\n\n  /**\n   * Destroy engine.\n   * @remarks If call during frame execution will delay until the end of the frame\n   */\n  destroy(): void {\n    if (this._destroyed) {\n      return;\n    }\n\n    if (this._frameInProcess) {\n      this._waittingDestroy = true;\n    } else {\n      this._destroy();\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _getShaderProgramPool(shaderPass: ShaderPass): ShaderProgramPool {\n    const index = shaderPass._shaderPassId;\n    const shaderProgramPools = this._shaderProgramPools;\n    let pool = shaderProgramPools[index];\n    if (!pool) {\n      const length = index + 1;\n      if (length > shaderProgramPools.length) {\n        shaderProgramPools.length = length;\n      }\n      shaderProgramPools[index] = pool = new ShaderProgramPool();\n    }\n    return pool;\n  }\n\n  /**\n   * @intenral\n   */\n  _render(scene: Scene): void {\n    const cameras = scene._activeCameras;\n    const componentsManager = this._componentsManager;\n    const deltaTime = this.time.deltaTime;\n    componentsManager.callRendererOnUpdate(deltaTime);\n\n    scene._updateShaderData();\n\n    if (cameras.length > 0) {\n      for (let i = 0, n = cameras.length; i < n; i++) {\n        const camera = cameras[i];\n        componentsManager.callCameraOnBeginRender(camera);\n        camera.render();\n        componentsManager.callCameraOnEndRender(camera);\n\n        // temp solution for webgl implement bug\n        if (this._hardwareRenderer._options._forceFlush) {\n          this._hardwareRenderer.flush();\n        }\n      }\n    } else {\n      Logger.debug(\"NO active camera.\");\n    }\n  }\n\n  private _createSpriteMaterial(): Material {\n    const material = new Material(this, Shader.find(\"Sprite\"));\n    const renderState = material.renderState;\n    const target = renderState.blendState.targetBlendState;\n    target.enabled = true;\n    target.sourceColorBlendFactor = BlendFactor.SourceAlpha;\n    target.destinationColorBlendFactor = BlendFactor.OneMinusSourceAlpha;\n    target.sourceAlphaBlendFactor = BlendFactor.One;\n    target.destinationAlphaBlendFactor = BlendFactor.OneMinusSourceAlpha;\n    target.colorBlendOperation = target.alphaBlendOperation = BlendOperation.Add;\n    renderState.depthState.writeEnabled = false;\n    renderState.rasterState.cullMode = CullMode.Off;\n    material.renderState.renderQueueType = RenderQueueType.Transparent;\n    material.isGCIgnored = true;\n    return material;\n  }\n\n  private _createSpriteMaskMaterial(): Material {\n    const material = new Material(this, Shader.find(\"SpriteMask\"));\n    const renderState = material.renderState;\n    renderState.blendState.targetBlendState.colorWriteMask = ColorWriteMask.None;\n    renderState.rasterState.cullMode = CullMode.Off;\n    renderState.stencilState.enabled = true;\n    renderState.depthState.enabled = false;\n    material.isGCIgnored = true;\n    return material;\n  }\n}\n","import { Camera } from \"./Camera\";\nimport { ignoreClone } from \"./clone/CloneManager\";\nimport { Component } from \"./Component\";\nimport { Pointer } from \"./input\";\nimport { ColliderShape } from \"./physics\";\n\n/**\n * Script class, used for logic writing.\n */\nexport class Script extends Component {\n  /** @internal */\n  @ignoreClone\n  _started: boolean = false;\n  /** @internal */\n  @ignoreClone\n  _onStartIndex: number = -1;\n  /** @internal */\n  @ignoreClone\n  _onUpdateIndex: number = -1;\n  /** @internal */\n  @ignoreClone\n  _onLateUpdateIndex: number = -1;\n  /** @internal */\n  @ignoreClone\n  _onPhysicsUpdateIndex: number = -1;\n  /** @internal */\n  @ignoreClone\n  _onPreRenderIndex: number = -1;\n  /** @internal */\n  @ignoreClone\n  _onPostRenderIndex: number = -1;\n  @ignoreClone\n  _entityScriptsIndex: number = -1;\n  @ignoreClone\n  _waitHandlingInValid: boolean = false;\n\n  /**\n   * Called when be enabled first time, only once.\n   */\n  onAwake(): void {}\n\n  /**\n   * Called when be enabled.\n   */\n  onEnable(): void {}\n\n  /**\n   * Called before the frame-level loop start for the first time, only once.\n   */\n  onStart(): void {}\n\n  /**\n   * The main loop, called frame by frame.\n   * @param deltaTime - The deltaTime when the script update.\n   */\n  onUpdate(deltaTime: number): void {}\n\n  /**\n   * Called after the onUpdate finished, called frame by frame.\n   * @param deltaTime - The deltaTime when the script update.\n   */\n  onLateUpdate(deltaTime: number): void {}\n\n  /**\n   * Called before camera rendering, called per camera.\n   * @param camera - Current camera.\n   */\n  onBeginRender(camera: Camera): void {}\n\n  /**\n   * Called after camera rendering, called per camera.\n   * @param camera - Current camera.\n   */\n  onEndRender(camera: Camera): void {}\n\n  /**\n   * Called before physics calculations, the number of times is related to the physical update frequency.\n   */\n  onPhysicsUpdate(): void {}\n\n  /**\n   * Called when the collision enter.\n   * @param other - ColliderShape\n   */\n  onTriggerEnter(other: ColliderShape): void {}\n\n  /**\n   * Called when the collision stay.\n   * @remarks onTriggerStay is called every frame while the collision stay.\n   * @param other - ColliderShape\n   */\n  onTriggerExit(other: ColliderShape): void {}\n\n  /**\n   * Called when the collision exit.\n   * @param other - ColliderShape\n   */\n  onTriggerStay(other: ColliderShape): void {}\n\n  /**\n   * Called when the collision enter.\n   * @param other - ColliderShape\n   */\n  onCollisionEnter(other: ColliderShape): void {}\n\n  /**\n   * Called when the collision stay.\n   * @remarks onTriggerStay is called every frame while the collision stay.\n   * @param other - ColliderShape\n   */\n  onCollisionExit(other: ColliderShape): void {}\n\n  /**\n   * Called when the collision exit.\n   * @param other - ColliderShape\n   */\n  onCollisionStay(other: ColliderShape): void {}\n\n  /**\n   * Called when the pointer is down while over the ColliderShape.\n   * @param pointer - The pointer that triggered\n   */\n  onPointerDown(pointer: Pointer): void {}\n\n  /**\n   * Called when the pointer is up while over the ColliderShape.\n   * @param pointer - The pointer that triggered\n   */\n  onPointerUp(pointer: Pointer): void {}\n\n  /**\n   * Called when the pointer is down and up with the same collider.\n   * @param pointer - The pointer that triggered\n   */\n  onPointerClick(pointer: Pointer): void {}\n\n  /**\n   * Called when the pointer is enters the ColliderShape.\n   * @param pointer - The pointer that triggered\n   */\n  onPointerEnter(pointer: Pointer): void {}\n\n  /**\n   * Called when the pointer is no longer over the ColliderShape.\n   * @param pointer - The pointer that triggered\n   */\n  onPointerExit(pointer: Pointer): void {}\n\n  /**\n   * Called when the pointer is down while over the ColliderShape and is still holding down.\n   * @param pointer - The pointer that triggered\n   * @remarks onPointerDrag is called every frame while the pointer is down.\n   */\n  onPointerDrag(pointer: Pointer): void {}\n\n  /**\n   * Called when be disabled.\n   */\n  onDisable(): void {}\n\n  /**\n   * Called at the end of the destroyed frame.\n   */\n  onDestroy(): void {}\n\n  /**\n   * @internal\n   * @inheritDoc\n   * @override\n   */\n  _onAwake(): void {\n    this.onAwake();\n  }\n\n  /**\n   * @internal\n   * @inheritDoc\n   * @override\n   */\n  _onEnable(): void {\n    if (this._waitHandlingInValid) {\n      this._waitHandlingInValid = false;\n    } else {\n      const { _componentsManager: componentsManager } = this.engine;\n      const { prototype } = Script;\n      if (!this._started) {\n        componentsManager.addOnStartScript(this);\n      }\n      if (this.onUpdate !== prototype.onUpdate) {\n        componentsManager.addOnUpdateScript(this);\n      }\n      if (this.onLateUpdate !== prototype.onLateUpdate) {\n        componentsManager.addOnLateUpdateScript(this);\n      }\n      if (this.onPhysicsUpdate !== prototype.onPhysicsUpdate) {\n        componentsManager.addOnPhysicsUpdateScript(this);\n      }\n      this._entity._addScript(this);\n    }\n\n    this.onEnable();\n  }\n\n  /**\n   * @internal\n   * @inheritDoc\n   * @override\n   */\n  _onDisable(): void {\n    this._waitHandlingInValid = true;\n    this._engine._componentsManager.addDisableScript(this);\n    this.onDisable();\n  }\n\n  /**\n   * @internal\n   * @inheritDoc\n   * @override\n   */\n  _onDestroy(): void {\n    this._engine._componentsManager.addPendingDestroyScript(this);\n  }\n\n  /**\n   * @internal\n   */\n  _handlingInValid(): void {\n    const componentsManager = this.engine._componentsManager;\n    const { prototype } = Script;\n    if (this.onUpdate !== prototype.onUpdate) {\n      componentsManager.removeOnUpdateScript(this);\n    }\n    if (this.onLateUpdate !== prototype.onLateUpdate) {\n      componentsManager.removeOnLateUpdateScript(this);\n    }\n    if (this.onPhysicsUpdate !== prototype.onPhysicsUpdate) {\n      componentsManager.removeOnPhysicsUpdateScript(this);\n    }\n\n    this._entity._removeScript(this);\n    this._waitHandlingInValid = false;\n  }\n}\n","import { SpriteMaskInteraction } from \"../2d/enums/SpriteMaskInteraction\";\nimport { SpriteRenderer } from \"../2d/sprite/SpriteRenderer\";\nimport { Camera } from \"../Camera\";\nimport { VertexElementFormat } from \"../graphic/enums/VertexElementFormat\";\nimport { VertexElement } from \"../graphic/VertexElement\";\nimport { Material } from \"../material\";\nimport { Shader } from \"../shader/Shader\";\nimport { ShaderMacroCollection } from \"../shader/ShaderMacroCollection\";\nimport { ShaderProperty } from \"../shader/ShaderProperty\";\nimport { Basic2DBatcher } from \"./Basic2DBatcher\";\nimport { SpriteElement } from \"./SpriteElement\";\n\n/**\n * @internal\n */\nexport class SpriteBatcher extends Basic2DBatcher {\n  private static _textureProperty: ShaderProperty = Shader.getPropertyByName(\"u_spriteTexture\");\n\n  createVertexElements(vertexElements: VertexElement[]): number {\n    vertexElements[0] = new VertexElement(\"POSITION\", 0, VertexElementFormat.Vector3, 0);\n    vertexElements[1] = new VertexElement(\"TEXCOORD_0\", 12, VertexElementFormat.Vector2, 0);\n    vertexElements[2] = new VertexElement(\"COLOR_0\", 20, VertexElementFormat.Vector4, 0);\n    return 36;\n  }\n\n  canBatch(preElement: SpriteElement, curElement: SpriteElement): boolean {\n    if (!this._engine._canSpriteBatch) {\n      return false;\n    }\n\n    const preRenderer = <SpriteRenderer>preElement.component;\n    const curRenderer = <SpriteRenderer>curElement.component;\n\n    // Compare mask\n    if (!this.checkBatchWithMask(preRenderer, curRenderer)) {\n      return false;\n    }\n\n    // Compare texture\n    if (preElement.texture !== curElement.texture) {\n      return false;\n    }\n\n    // Compare material\n    return preElement.material === curElement.material;\n  }\n\n  checkBatchWithMask(left: SpriteRenderer, right: SpriteRenderer): boolean {\n    const leftMaskInteraction = left.maskInteraction;\n\n    if (leftMaskInteraction !== right.maskInteraction) {\n      return false;\n    }\n    if (leftMaskInteraction === SpriteMaskInteraction.None) {\n      return true;\n    }\n    return left.maskLayer === right.maskLayer;\n  }\n\n  updateVertices(element: SpriteElement, vertices: Float32Array, vertexIndex: number): number {\n    const { positions, uvs, color, vertexCount } = element.renderData;\n    for (let i = 0; i < vertexCount; i++) {\n      const curPos = positions[i];\n      const curUV = uvs[i];\n      vertices[vertexIndex++] = curPos.x;\n      vertices[vertexIndex++] = curPos.y;\n      vertices[vertexIndex++] = curPos.z;\n      vertices[vertexIndex++] = curUV.x;\n      vertices[vertexIndex++] = curUV.y;\n      vertices[vertexIndex++] = color.r;\n      vertices[vertexIndex++] = color.g;\n      vertices[vertexIndex++] = color.b;\n      vertices[vertexIndex++] = color.a;\n    }\n\n    return vertexIndex;\n  }\n\n  drawBatches(camera: Camera, replaceMaterial: Material): void {\n    const { _engine: engine, _batchedQueue: batchedQueue } = this;\n    const mesh = this._meshes[this._flushId];\n    const subMeshes = mesh.subMeshes;\n    const maskManager = engine._spriteMaskManager;\n    const sceneData = camera.scene.shaderData;\n    const cameraData = camera.shaderData;\n\n    for (let i = 0, len = subMeshes.length; i < len; i++) {\n      const subMesh = subMeshes[i];\n      const spriteElement = <SpriteElement>batchedQueue[i];\n\n      if (!subMesh || !spriteElement) {\n        return;\n      }\n\n      const renderer = <SpriteRenderer>spriteElement.component;\n      const material = spriteElement.material;\n      maskManager.preRender(camera, renderer);\n\n      const compileMacros = Shader._compileMacros;\n      // union render global macro and material self macro.\n      ShaderMacroCollection.unionCollection(\n        renderer._globalShaderMacro,\n        material.shaderData._macroCollection,\n        compileMacros\n      );\n\n      // @todo: temporary solution\n      (replaceMaterial || material)._preRender(spriteElement);\n      const program = spriteElement.shaderPass._getShaderProgram(engine, compileMacros);\n      if (!program.isValid) {\n        return;\n      }\n\n      renderer.shaderData.setTexture(SpriteBatcher._textureProperty, spriteElement.texture);\n\n      program.bind();\n      program.groupingOtherUniformBlock();\n      program.uploadAll(program.sceneUniformBlock, sceneData);\n      program.uploadAll(program.cameraUniformBlock, cameraData);\n      program.uploadAll(program.rendererUniformBlock, renderer.shaderData);\n      program.uploadAll(program.materialUniformBlock, material.shaderData);\n\n      spriteElement.renderState._apply(engine, false);\n      engine._hardwareRenderer.drawPrimitive(mesh, subMesh, program);\n\n      maskManager.postRender(renderer);\n    }\n  }\n\n  destroy(): void {\n    this._batchedQueue = null;\n\n    const { _meshes: meshes, _vertexBuffers: vertexBuffers, _indiceBuffers: indiceBuffers } = this;\n\n    for (let i = 0, n = meshes.length; i < n; ++i) {\n      meshes[i].destroy();\n    }\n    this._meshes = null;\n\n    for (let i = 0, n = vertexBuffers.length; i < n; ++i) {\n      vertexBuffers[i].destroy();\n    }\n    this._vertexBuffers = null;\n\n    for (let i = 0, n = indiceBuffers.length; i < n; ++i) {\n      indiceBuffers[i].destroy();\n    }\n    this._indiceBuffers = null;\n  }\n}\n","import { Camera } from \"../Camera\";\nimport { Engine } from \"../Engine\";\nimport { Layer } from \"../Layer\";\nimport { Material } from \"../material/Material\";\nimport { Shader } from \"../shader\";\nimport { ShaderMacroCollection } from \"../shader/ShaderMacroCollection\";\nimport { MeshRenderElement } from \"./MeshRenderElement\";\nimport { RenderElement } from \"./RenderElement\";\nimport { SpriteBatcher } from \"./SpriteBatcher\";\nimport { SpriteElement } from \"./SpriteElement\";\n\n/**\n * Render queue.\n */\nexport class RenderQueue {\n  /**\n   * @internal\n   */\n  static _compareFromNearToFar(a: RenderElement, b: RenderElement): number {\n    return a.component.priority - b.component.priority || a.component._distanceForSort - b.component._distanceForSort;\n  }\n\n  /**\n   * @internal\n   */\n  static _compareFromFarToNear(a: RenderElement, b: RenderElement): number {\n    return a.component.priority - b.component.priority || b.component._distanceForSort - a.component._distanceForSort;\n  }\n\n  readonly items: RenderElement[] = [];\n  private _spriteBatcher: SpriteBatcher;\n\n  constructor(engine: Engine) {\n    this._spriteBatcher = new SpriteBatcher(engine);\n  }\n\n  /**\n   * Push a render element.\n   */\n  pushPrimitive(element: RenderElement): void {\n    this.items.push(element);\n  }\n\n  render(camera: Camera, replaceMaterial: Material, mask: Layer, customShader: Shader): void {\n    const items = this.items;\n    if (items.length === 0) {\n      return;\n    }\n\n    const { engine, scene } = camera;\n    const renderCount = engine._renderCount;\n    const rhi = engine._hardwareRenderer;\n    const sceneData = scene.shaderData;\n    const cameraData = camera.shaderData;\n\n    for (let i = 0, n = items.length; i < n; i++) {\n      const item = items[i];\n      const renderPassFlag = item.component.entity.layer;\n\n      if (!(renderPassFlag & mask)) {\n        continue;\n      }\n\n      if (!!(item as MeshRenderElement).mesh) {\n        this._spriteBatcher.flush(camera, replaceMaterial);\n\n        const compileMacros = Shader._compileMacros;\n        const element = <MeshRenderElement>item;\n        const renderer = element.component;\n        const material = element.material.destroyed ? engine._magentaMaterial : element.material;\n        const rendererData = renderer.shaderData;\n        const materialData = material.shaderData;\n\n        // @todo: temporary solution\n        (replaceMaterial || material)._preRender(element);\n\n        // union render global macro and material self macro.\n        ShaderMacroCollection.unionCollection(\n          renderer._globalShaderMacro,\n          materialData._macroCollection,\n          compileMacros\n        );\n\n        // @todo: temporary solution\n        const program = (\n          customShader?.passes[0] ||\n          replaceMaterial?.shader.passes[0] ||\n          element.shaderPass\n        )._getShaderProgram(engine, compileMacros);\n\n        if (!program.isValid) {\n          continue;\n        }\n\n        const switchProgram = program.bind();\n        const switchRenderCount = renderCount !== program._uploadRenderCount;\n\n        if (switchRenderCount) {\n          program.groupingOtherUniformBlock();\n          program.uploadAll(program.sceneUniformBlock, sceneData);\n          program.uploadAll(program.cameraUniformBlock, cameraData);\n          program.uploadAll(program.rendererUniformBlock, rendererData);\n          program.uploadAll(program.materialUniformBlock, materialData);\n          // UnGroup textures should upload default value, texture uint maybe change by logic of texture bind.\n          program.uploadUnGroupTextures();\n          program._uploadScene = scene;\n          program._uploadCamera = camera;\n          program._uploadRenderer = renderer;\n          program._uploadMaterial = material;\n          program._uploadRenderCount = renderCount;\n        } else {\n          if (program._uploadScene !== scene) {\n            program.uploadAll(program.sceneUniformBlock, sceneData);\n            program._uploadScene = scene;\n          } else if (switchProgram) {\n            program.uploadTextures(program.sceneUniformBlock, sceneData);\n          }\n\n          if (program._uploadCamera !== camera) {\n            program.uploadAll(program.cameraUniformBlock, cameraData);\n            program._uploadCamera = camera;\n          } else if (switchProgram) {\n            program.uploadTextures(program.cameraUniformBlock, cameraData);\n          }\n\n          if (program._uploadRenderer !== renderer) {\n            program.uploadAll(program.rendererUniformBlock, rendererData);\n            program._uploadRenderer = renderer;\n          } else if (switchProgram) {\n            program.uploadTextures(program.rendererUniformBlock, rendererData);\n          }\n\n          if (program._uploadMaterial !== material) {\n            program.uploadAll(program.materialUniformBlock, materialData);\n            program._uploadMaterial = material;\n          } else if (switchProgram) {\n            program.uploadTextures(program.materialUniformBlock, materialData);\n          }\n\n          // We only consider switchProgram case, because UnGroup texture's value is always default.\n          if (switchProgram) {\n            program.uploadUnGroupTextures();\n          }\n        }\n        element.renderState._apply(engine, renderer.entity.transform._isFrontFaceInvert());\n\n        rhi.drawPrimitive(element.mesh, element.subMesh, program);\n      } else {\n        const spriteElement = <SpriteElement>item;\n        this._spriteBatcher.drawElement(spriteElement, camera, replaceMaterial);\n      }\n    }\n\n    this._spriteBatcher.flush(camera, replaceMaterial);\n  }\n\n  /**\n   * Clear collection.\n   */\n  clear(): void {\n    this.items.length = 0;\n    this._spriteBatcher.clear();\n  }\n\n  /**\n   * Destroy internal resources.\n   */\n  destroy(): void {\n    this._spriteBatcher.destroy();\n    this._spriteBatcher = null;\n  }\n\n  /**\n   * Sort the elements.\n   */\n  sort(compareFunc: Function): void {\n    this._quickSort(this.items, 0, this.items.length, compareFunc);\n  }\n\n  /**\n   * @remarks\n   * Modified based on v8.\n   * https://github.com/v8/v8/blob/7.2-lkgr/src/js/array.js\n   */\n  private _quickSort<T>(a: T[], from: number, to: number, compareFunc: Function): void {\n    while (true) {\n      // Insertion sort is faster for short arrays.\n      if (to - from <= 10) {\n        this._insertionSort(a, from, to, compareFunc);\n        return;\n      }\n      const third_index = (from + to) >> 1;\n      // Find a pivot as the median of first, last and middle element.\n      let v0 = a[from];\n      let v1 = a[to - 1];\n      let v2 = a[third_index];\n      const c01 = compareFunc(v0, v1);\n      if (c01 > 0) {\n        // v1 < v0, so swap them.\n        const tmp = v0;\n        v0 = v1;\n        v1 = tmp;\n      } // v0 <= v1.\n      const c02 = compareFunc(v0, v2);\n      if (c02 >= 0) {\n        // v2 <= v0 <= v1.\n        const tmp = v0;\n        v0 = v2;\n        v2 = v1;\n        v1 = tmp;\n      } else {\n        // v0 <= v1 && v0 < v2\n        const c12 = compareFunc(v1, v2);\n        if (c12 > 0) {\n          // v0 <= v2 < v1\n          const tmp = v1;\n          v1 = v2;\n          v2 = tmp;\n        }\n      }\n      // v0 <= v1 <= v2\n      a[from] = v0;\n      a[to - 1] = v2;\n      const pivot = v1;\n      let low_end = from + 1; // Upper bound of elements lower than pivot.\n      let high_start = to - 1; // Lower bound of elements greater than pivot.\n      a[third_index] = a[low_end];\n      a[low_end] = pivot;\n\n      // From low_end to i are elements equal to pivot.\n      // From i to high_start are elements that haven't been compared yet.\n      partition: for (let i = low_end + 1; i < high_start; i++) {\n        let element = a[i];\n        let order = compareFunc(element, pivot);\n        if (order < 0) {\n          a[i] = a[low_end];\n          a[low_end] = element;\n          low_end++;\n        } else if (order > 0) {\n          do {\n            high_start--;\n            if (high_start == i) break partition;\n            const top_elem = a[high_start];\n            order = compareFunc(top_elem, pivot);\n          } while (order > 0);\n          a[i] = a[high_start];\n          a[high_start] = element;\n          if (order < 0) {\n            element = a[i];\n            a[i] = a[low_end];\n            a[low_end] = element;\n            low_end++;\n          }\n        }\n      }\n      if (to - high_start < low_end - from) {\n        this._quickSort(a, high_start, to, compareFunc);\n        to = low_end;\n      } else {\n        this._quickSort(a, from, low_end, compareFunc);\n        from = high_start;\n      }\n    }\n  }\n\n  private _insertionSort<T>(a: T[], from: number, to: number, compareFunc: Function): void {\n    for (let i = from + 1; i < to; i++) {\n      let j;\n      const element = a[i];\n      for (j = i - 1; j >= from; j--) {\n        const tmp = a[j];\n        const order = compareFunc(tmp, element);\n        if (order > 0) {\n          a[j + 1] = tmp;\n        } else {\n          break;\n        }\n      }\n      a[j + 1] = element;\n    }\n  }\n}\n","import { Matrix, Vector3 } from \"@galacean/engine-math\";\n\n/**\n * @internal\n */\nexport class VirtualCamera {\n  position: Vector3 = new Vector3();\n  isOrthographic: boolean = false;\n  viewMatrix: Matrix = new Matrix();\n  projectionMatrix: Matrix = new Matrix();\n  viewProjectionMatrix: Matrix = new Matrix();\n  /** Only orth mode use. */\n  forward: Vector3 = new Vector3();\n}\n","import { BoundingSphere, Matrix, Plane, Vector3 } from \"@galacean/engine-math\";\nimport { VirtualCamera } from \"../VirtualCamera\";\n\n/**\n * @internal\n */\nexport class ShadowSliceData {\n  resolution: number;\n  virtualCamera: VirtualCamera = new VirtualCamera();\n  cullPlanes: Plane[] = [\n    new Plane(new Vector3()),\n    new Plane(new Vector3()),\n    new Plane(new Vector3()),\n    new Plane(new Vector3()),\n    new Plane(new Vector3()),\n    new Plane(new Vector3()),\n    new Plane(new Vector3()),\n    new Plane(new Vector3()),\n    new Plane(new Vector3()),\n    new Plane(new Vector3())\n  ];\n  cullPlaneCount: number;\n\n  // bounding sphere\n  splitBoundSphere: BoundingSphere = new BoundingSphere(new Vector3(), 0.0);\n  sphereCenterZ: number;\n}\n","import {\n  BoundingBox,\n  BoundingFrustum,\n  CollisionUtil,\n  FrustumFace,\n  MathUtil,\n  Matrix,\n  Plane,\n  Vector2,\n  Vector3\n} from \"@galacean/engine-math\";\nimport { Camera } from \"../Camera\";\nimport { DirectLight, Light } from \"../lighting\";\nimport { Renderer } from \"../Renderer\";\nimport { RenderContext } from \"../RenderPipeline/RenderContext\";\nimport { TextureFormat } from \"../texture\";\nimport { Utils } from \"../Utils\";\nimport { ShadowResolution } from \"./enum/ShadowResolution\";\nimport { ShadowType } from \"./enum/ShadowType\";\nimport { ShadowSliceData } from \"./ShadowSliceData\";\n\n/**\n * @internal\n */\nenum FrustumCorner {\n  FarBottomLeft = 0,\n  FarTopLeft = 1,\n  FarTopRight = 2,\n  FarBottomRight = 3,\n  nearBottomLeft = 4,\n  nearTopLeft = 5,\n  nearTopRight = 6,\n  nearBottomRight = 7,\n  unknown = 8\n}\n\n/**\n * @internal\n */\nexport class ShadowUtils {\n  private static _tempMatrix0: Matrix = new Matrix();\n\n  // prettier-ignore\n  /** @internal */\n  private static _shadowMapCoordMatrix: Matrix = new Matrix(\n    0.5, 0.0, 0.0, 0.0,\n    0.0, 0.5, 0.0, 0.0,\n    0.0, 0.0, 0.5, 0.0,\n    0.5, 0.5, 0.5, 1.0\n  );\n\n  private static _frustumCorners: Vector3[] = [\n    new Vector3(),\n    new Vector3(),\n    new Vector3(),\n    new Vector3(),\n    new Vector3(),\n    new Vector3(),\n    new Vector3(),\n    new Vector3()\n  ];\n  private static _adjustNearPlane: Plane = new Plane(new Vector3());\n  private static _adjustFarPlane: Plane = new Plane(new Vector3());\n  private static _backPlaneFaces: FrustumFace[] = new Array(5);\n  private static _edgePlanePoint2: Vector3 = new Vector3();\n\n  /** near, far, left, right, bottom, top  */\n  private static _frustumPlaneNeighbors: FrustumFace[][] = [\n    [FrustumFace.Left, FrustumFace.Right, FrustumFace.Top, FrustumFace.Bottom],\n    [FrustumFace.Left, FrustumFace.Right, FrustumFace.Top, FrustumFace.Bottom],\n    [FrustumFace.Near, FrustumFace.Far, FrustumFace.Top, FrustumFace.Bottom],\n    [FrustumFace.Near, FrustumFace.Far, FrustumFace.Top, FrustumFace.Bottom],\n    [FrustumFace.Near, FrustumFace.Far, FrustumFace.Left, FrustumFace.Right],\n    [FrustumFace.Near, FrustumFace.Far, FrustumFace.Left, FrustumFace.Right]\n  ];\n\n  /** near, far, left, right, bottom, top  */\n  private static _frustumTwoPlaneCorners: FrustumCorner[][][] = [\n    [\n      // near, far, left, right, bottom, top\n      [FrustumCorner.unknown, FrustumCorner.unknown],\n      [FrustumCorner.unknown, FrustumCorner.unknown],\n      [FrustumCorner.nearBottomLeft, FrustumCorner.nearTopLeft],\n      [FrustumCorner.nearTopRight, FrustumCorner.nearBottomRight],\n      [FrustumCorner.nearBottomRight, FrustumCorner.nearBottomLeft],\n      [FrustumCorner.nearTopLeft, FrustumCorner.nearTopRight]\n    ],\n    [\n      // near, far, left, right, bottom, top\n      [FrustumCorner.unknown, FrustumCorner.unknown],\n      [FrustumCorner.unknown, FrustumCorner.unknown],\n      [FrustumCorner.FarTopLeft, FrustumCorner.FarBottomLeft],\n      [FrustumCorner.FarBottomRight, FrustumCorner.FarTopRight],\n      [FrustumCorner.FarBottomLeft, FrustumCorner.FarBottomRight],\n      [FrustumCorner.FarTopRight, FrustumCorner.FarTopLeft]\n    ],\n    [\n      // near, far, left, right, bottom, top\n      [FrustumCorner.nearTopLeft, FrustumCorner.nearBottomLeft],\n      [FrustumCorner.FarBottomLeft, FrustumCorner.FarTopLeft],\n      [FrustumCorner.unknown, FrustumCorner.unknown],\n      [FrustumCorner.unknown, FrustumCorner.unknown],\n      [FrustumCorner.nearBottomLeft, FrustumCorner.FarBottomLeft],\n      [FrustumCorner.FarTopLeft, FrustumCorner.nearTopLeft]\n    ],\n    [\n      // near, far, left, right, bottom, top\n      [FrustumCorner.nearBottomRight, FrustumCorner.nearTopRight],\n      [FrustumCorner.FarTopRight, FrustumCorner.FarBottomRight],\n      [FrustumCorner.unknown, FrustumCorner.unknown],\n      [FrustumCorner.unknown, FrustumCorner.unknown],\n      [FrustumCorner.FarBottomRight, FrustumCorner.nearBottomRight],\n      [FrustumCorner.nearTopRight, FrustumCorner.FarTopRight]\n    ],\n    [\n      // near, far, left, right, bottom, top\n      [FrustumCorner.nearBottomLeft, FrustumCorner.nearBottomRight],\n      [FrustumCorner.FarBottomRight, FrustumCorner.FarBottomLeft],\n      [FrustumCorner.FarBottomLeft, FrustumCorner.nearBottomLeft],\n      [FrustumCorner.nearBottomRight, FrustumCorner.FarBottomRight],\n      [FrustumCorner.unknown, FrustumCorner.unknown],\n      [FrustumCorner.unknown, FrustumCorner.unknown]\n    ],\n    [\n      // near, far, left, right, bottom, top\n      [FrustumCorner.nearTopRight, FrustumCorner.nearTopLeft],\n      [FrustumCorner.FarTopLeft, FrustumCorner.FarTopRight],\n      [FrustumCorner.nearTopLeft, FrustumCorner.FarTopLeft],\n      [FrustumCorner.FarTopRight, FrustumCorner.nearTopRight],\n      [FrustumCorner.unknown, FrustumCorner.unknown],\n      [FrustumCorner.unknown, FrustumCorner.unknown]\n    ]\n  ];\n  //now max shadow sample tent is 5x5, atlas borderSize at least 3=ceil(2.5),and +1 pixel is for global border for no cascade mode.\n  static readonly atlasBorderSize: number = 4.0;\n\n  static shadowResolution(value: ShadowResolution): number {\n    switch (value) {\n      case ShadowResolution.Low:\n        return 512;\n      case ShadowResolution.Medium:\n        return 1024;\n      case ShadowResolution.High:\n        return 2048;\n      case ShadowResolution.VeryHigh:\n        return 4096;\n    }\n  }\n\n  static shadowDepthFormat(value: ShadowResolution, supportDepthTexture: boolean): TextureFormat {\n    if (supportDepthTexture) {\n      return TextureFormat.Depth16;\n    } else {\n      return TextureFormat.R8G8B8A8;\n    }\n  }\n\n  static cullingRenderBounds(bounds: BoundingBox, cullPlaneCount: number, cullPlanes: Plane[]): boolean {\n    const { min, max } = bounds;\n\n    for (let i = 0; i < cullPlaneCount; i++) {\n      const plane = cullPlanes[i];\n      const normal = plane.normal;\n      if (\n        normal.x * (normal.x >= 0.0 ? max.x : min.x) +\n          normal.y * (normal.y >= 0.0 ? max.y : min.y) +\n          normal.z * (normal.z >= 0.0 ? max.z : min.z) <\n        -plane.distance\n      ) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  static shadowCullFrustum(\n    context: RenderContext,\n    light: Light,\n    renderer: Renderer,\n    shadowSliceData: ShadowSliceData\n  ): void {\n    const layer = renderer._entity.layer;\n    // filter by camera culling mask\n    if (context.camera.cullingMask & layer && light.cullingMask & layer) {\n      if (\n        renderer.castShadows &&\n        ShadowUtils.cullingRenderBounds(renderer.bounds, shadowSliceData.cullPlaneCount, shadowSliceData.cullPlanes)\n      ) {\n        renderer._renderFrameCount = renderer.engine.time._frameCount;\n        renderer._prepareRender(context);\n      }\n    }\n  }\n\n  static getBoundSphereByFrustum(\n    near: number,\n    far: number,\n    camera: Camera,\n    forward: Vector3,\n    shadowSliceData: ShadowSliceData\n  ): void {\n    const { aspectRatio, fieldOfView } = camera;\n\n    // https://lxjk.github.io/2017/04/15/Calculate-Minimal-Bounding-Sphere-of-Frustum.html\n    let centerZ: number;\n    let radius: number;\n    const k = Math.sqrt(1.0 + aspectRatio * aspectRatio) * Math.tan(MathUtil.degreeToRadian(fieldOfView) / 2.0);\n    const k2 = k * k;\n    const farSNear = far - near;\n    const farANear = far + near;\n    if (k2 > farSNear / farANear) {\n      centerZ = far;\n      radius = far * k;\n    } else {\n      centerZ = 0.5 * farANear * (1 + k2);\n      radius =\n        0.5 * Math.sqrt(farSNear * farSNear + 2.0 * (far * far + near * near) * k2 + farANear * farANear * k2 * k2);\n    }\n\n    const center = shadowSliceData.splitBoundSphere.center;\n    shadowSliceData.splitBoundSphere.radius = radius;\n    Vector3.scale(forward, centerZ, center);\n    Vector3.add(camera.entity.transform.worldPosition, center, center);\n    shadowSliceData.sphereCenterZ = centerZ;\n  }\n\n  static getDirectionLightShadowCullPlanes(\n    cameraFrustum: BoundingFrustum,\n    splitDistance: number,\n    cameraNear: number,\n    direction: Vector3,\n    shadowSliceData: ShadowSliceData\n  ): void {\n    // http://lspiroengine.com/?p=187\n    const frustumCorners = ShadowUtils._frustumCorners;\n    const backPlaneFaces = ShadowUtils._backPlaneFaces;\n    const planeNeighbors = ShadowUtils._frustumPlaneNeighbors;\n    const twoPlaneCorners = ShadowUtils._frustumTwoPlaneCorners;\n    const edgePlanePoint2 = ShadowUtils._edgePlanePoint2;\n    const out = shadowSliceData.cullPlanes;\n\n    // cameraFrustumPlanes is share\n    const near = cameraFrustum.getPlane(FrustumFace.Near);\n    const far = cameraFrustum.getPlane(FrustumFace.Far);\n    const left = cameraFrustum.getPlane(FrustumFace.Left);\n    const right = cameraFrustum.getPlane(FrustumFace.Right);\n    const bottom = cameraFrustum.getPlane(FrustumFace.Bottom);\n    const top = cameraFrustum.getPlane(FrustumFace.Top);\n\n    // adjustment the near/far plane\n    const splitNearDistance = splitDistance - cameraNear;\n    const splitNear = ShadowUtils._adjustNearPlane;\n    const splitFar = ShadowUtils._adjustFarPlane;\n    splitNear.normal.copyFrom(near.normal);\n    splitFar.normal.copyFrom(far.normal);\n    splitNear.distance = near.distance - splitNearDistance;\n    // do a clamp if the sphere is out of range the far plane\n    splitFar.distance = Math.min(\n      -near.distance + shadowSliceData.sphereCenterZ + shadowSliceData.splitBoundSphere.radius,\n      far.distance\n    );\n\n    CollisionUtil.intersectionPointThreePlanes(splitNear, bottom, right, frustumCorners[FrustumCorner.nearBottomRight]);\n    CollisionUtil.intersectionPointThreePlanes(splitNear, top, right, frustumCorners[FrustumCorner.nearTopRight]);\n    CollisionUtil.intersectionPointThreePlanes(splitNear, top, left, frustumCorners[FrustumCorner.nearTopLeft]);\n    CollisionUtil.intersectionPointThreePlanes(splitNear, bottom, left, frustumCorners[FrustumCorner.nearBottomLeft]);\n    CollisionUtil.intersectionPointThreePlanes(splitFar, bottom, right, frustumCorners[FrustumCorner.FarBottomRight]);\n    CollisionUtil.intersectionPointThreePlanes(splitFar, top, right, frustumCorners[FrustumCorner.FarTopRight]);\n    CollisionUtil.intersectionPointThreePlanes(splitFar, top, left, frustumCorners[FrustumCorner.FarTopLeft]);\n    CollisionUtil.intersectionPointThreePlanes(splitFar, bottom, left, frustumCorners[FrustumCorner.FarBottomLeft]);\n\n    let backIndex = 0;\n    for (let i = 0; i < 6; i++) {\n      // maybe 3、4、5(light eye is at far, forward is near, or orthographic camera is any axis)\n      let plane: Plane;\n      switch (i) {\n        case FrustumFace.Near:\n          plane = splitNear;\n          break;\n        case FrustumFace.Far:\n          plane = splitFar;\n          break;\n        default:\n          plane = cameraFrustum.getPlane(i);\n          break;\n      }\n      if (Vector3.dot(plane.normal, direction) < 0.0) {\n        out[backIndex].copyFrom(plane);\n        backPlaneFaces[backIndex] = i;\n        backIndex++;\n      }\n    }\n\n    let edgeIndex = backIndex;\n    for (let i = 0; i < backIndex; i++) {\n      const backFace = backPlaneFaces[i];\n      const neighborFaces = planeNeighbors[backFace];\n      for (let j = 0; j < 4; j++) {\n        const neighborFace = neighborFaces[j];\n        let notBackFace = true;\n        for (let k = 0; k < backIndex; k++)\n          if (neighborFace == backPlaneFaces[k]) {\n            notBackFace = false;\n            break;\n          }\n        if (notBackFace) {\n          const corners = twoPlaneCorners[backFace][neighborFace];\n          const point0 = frustumCorners[corners[0]];\n          const point1 = frustumCorners[corners[1]];\n          Vector3.add(point0, direction, edgePlanePoint2);\n          Plane.fromPoints(point0, point1, edgePlanePoint2, out[edgeIndex++]);\n        }\n      }\n    }\n    shadowSliceData.cullPlaneCount = edgeIndex;\n  }\n\n  static getDirectionalLightMatrices(\n    lightUp: Vector3,\n    lightSide: Vector3,\n    lightForward: Vector3,\n    cascadeIndex: number,\n    nearPlane: number,\n    shadowResolution: number,\n    shadowSliceData: ShadowSliceData,\n    outShadowMatrices: Float32Array\n  ): void {\n    const boundSphere = shadowSliceData.splitBoundSphere;\n    shadowSliceData.resolution = shadowResolution;\n\n    // To solve shadow swimming problem.\n    const center = boundSphere.center;\n    const radius = boundSphere.radius;\n    const halfShadowResolution = shadowResolution / 2;\n    // Add border to project edge pixel PCF.\n    // Improve:the clip planes not consider the border,but I think is OK,because the object can clip is not continuous.\n    const borderRadius = (radius * halfShadowResolution) / (halfShadowResolution - ShadowUtils.atlasBorderSize);\n    const borderDiam = borderRadius * 2.0;\n    const sizeUnit = shadowResolution / borderDiam;\n    const radiusUnit = borderDiam / shadowResolution;\n    const upLen = Math.ceil(Vector3.dot(center, lightUp) * sizeUnit) * radiusUnit;\n    const sideLen = Math.ceil(Vector3.dot(center, lightSide) * sizeUnit) * radiusUnit;\n    const forwardLen = Vector3.dot(center, lightForward);\n    center.x = lightUp.x * upLen + lightSide.x * sideLen + lightForward.x * forwardLen;\n    center.y = lightUp.y * upLen + lightSide.y * sideLen + lightForward.y * forwardLen;\n    center.z = lightUp.z * upLen + lightSide.z * sideLen + lightForward.z * forwardLen;\n\n    // Direction light use shadow pancaking tech,do special dispose with nearPlane.\n    const virtualCamera = shadowSliceData.virtualCamera;\n    const position = virtualCamera.position;\n    const viewMatrix = virtualCamera.viewMatrix;\n    const projectMatrix = virtualCamera.projectionMatrix;\n\n    Vector3.scale(lightForward, radius + nearPlane, position);\n    Vector3.subtract(center, position, position);\n    Matrix.lookAt(position, center, lightUp, viewMatrix);\n    Matrix.ortho(\n      -borderRadius,\n      borderRadius,\n      -borderRadius,\n      borderRadius,\n      0.0,\n      radius * 2.0 + nearPlane,\n      projectMatrix\n    );\n\n    const viewProjectionMatrix = virtualCamera.viewProjectionMatrix;\n    Matrix.multiply(projectMatrix, viewMatrix, viewProjectionMatrix);\n    Utils._floatMatrixMultiply(\n      ShadowUtils._shadowMapCoordMatrix,\n      viewProjectionMatrix.elements,\n      0,\n      outShadowMatrices,\n      cascadeIndex * 16\n    );\n  }\n\n  static getMaxTileResolutionInAtlas(atlasWidth: number, atlasHeight: number, tileCount: number): number {\n    let resolution = Math.min(atlasWidth, atlasHeight);\n\n    let currentTileCount = Math.floor(atlasWidth / resolution) * Math.floor(atlasHeight / resolution);\n\n    while (currentTileCount < tileCount) {\n      resolution = Math.floor(resolution >> 1);\n      currentTileCount = Math.floor(atlasWidth / resolution) * Math.floor(atlasHeight / resolution);\n    }\n    return resolution;\n  }\n\n  static getShadowBias(light: DirectLight, projectionMatrix: Matrix, shadowResolution: number, out: Vector2): void {\n    // Frustum size is guaranteed to be a cube as we wrap shadow frustum around a sphere\n    // elements[0] = 2.0 / (right - left)\n    const frustumSize = 2.0 / projectionMatrix.elements[0];\n\n    // depth and normal bias scale is in shadowmap texel size in world space\n    const texelSize = frustumSize / shadowResolution;\n    let depthBias = -light.shadowBias * texelSize;\n    let normalBias = -light.shadowNormalBias * texelSize;\n\n    if (light.shadowType == ShadowType.SoftHigh) {\n      // TODO: depth and normal bias assume sample is no more than 1 texel away from shadowmap\n      // This is not true with PCF. Ideally we need to do either\n      // cone base bias (based on distance to center sample)\n      // or receiver place bias based on derivatives.\n      // For now we scale it by the PCF kernel size (5x5)\n      const kernelRadius = 2.5;\n      depthBias *= kernelRadius;\n      normalBias *= kernelRadius;\n    }\n    out.set(depthBias, normalBias);\n  }\n\n  /**\n   * Apply shadow slice scale and offset\n   */\n  static applySliceTransform(\n    tileSize: number,\n    atlasWidth: number,\n    atlasHeight: number,\n    cascadeIndex: number,\n    atlasOffset: Vector2,\n    outShadowMatrices: Float32Array\n  ): void {\n    const sliceMatrix = ShadowUtils._tempMatrix0;\n    const slice = sliceMatrix.elements;\n\n    const oneOverAtlasWidth = 1.0 / atlasWidth;\n    const oneOverAtlasHeight = 1.0 / atlasHeight;\n    const scaleX = tileSize * oneOverAtlasWidth;\n    const scaleY = tileSize * oneOverAtlasHeight;\n    const offsetX = atlasOffset.x * oneOverAtlasWidth;\n    const offsetY = atlasOffset.y * oneOverAtlasHeight;\n\n    (slice[0] = scaleX), (slice[1] = 0), (slice[2] = 0), (slice[3] = 0);\n    (slice[4] = 0), (slice[5] = scaleY), (slice[6] = 0), (slice[7] = 0);\n    (slice[8] = 0), (slice[9] = 0), (slice[10] = 1), (slice[11] = 0);\n    (slice[12] = offsetX), (slice[13] = offsetY), (slice[14] = 0), (slice[15] = 1);\n\n    const offset = cascadeIndex * 16;\n    Utils._floatMatrixMultiply(sliceMatrix, outShadowMatrices, offset, outShadowMatrices, offset);\n  }\n}\n","import { Color, MathUtil, Matrix, Vector2, Vector3, Vector4 } from \"@galacean/engine-math\";\nimport { Camera } from \"../Camera\";\nimport { Engine } from \"../Engine\";\nimport { Layer } from \"../Layer\";\nimport { RenderContext } from \"../RenderPipeline/RenderContext\";\nimport { RenderQueue } from \"../RenderPipeline/RenderQueue\";\nimport { GLCapabilityType } from \"../base/Constant\";\nimport { CameraClearFlags } from \"../enums/CameraClearFlags\";\nimport { DirectLight } from \"../lighting\";\nimport { Shader } from \"../shader\";\nimport { RenderTarget } from \"../texture/RenderTarget\";\nimport { Texture2D } from \"../texture/Texture2D\";\nimport { TextureDepthCompareFunction } from \"../texture/enums/TextureDepthCompareFunction\";\nimport { TextureFormat } from \"../texture/enums/TextureFormat\";\nimport { TextureWrapMode } from \"../texture/enums/TextureWrapMode\";\nimport { ShadowSliceData } from \"./ShadowSliceData\";\nimport { ShadowUtils } from \"./ShadowUtils\";\nimport { ShadowCascadesMode } from \"./enum/ShadowCascadesMode\";\n\n/**\n * Cascade shadow caster.\n */\nexport class CascadedShadowCasterPass {\n  private static _lightShadowBiasProperty = Shader.getPropertyByName(\"u_shadowBias\");\n  private static _lightDirectionProperty = Shader.getPropertyByName(\"u_lightDirection\");\n\n  private static _shadowMatricesProperty = Shader.getPropertyByName(\"u_shadowMatrices\");\n  private static _shadowMapSize = Shader.getPropertyByName(\"u_shadowMapSize\");\n  private static _shadowInfosProperty = Shader.getPropertyByName(\"u_shadowInfo\");\n  private static _shadowMapsProperty = Shader.getPropertyByName(\"u_shadowMap\");\n  private static _shadowSplitSpheresProperty = Shader.getPropertyByName(\"u_shadowSplitSpheres\");\n\n  private static _maxCascades: number = 4;\n  private static _cascadesSplitDistance: number[] = new Array(CascadedShadowCasterPass._maxCascades + 1);\n\n  private static _viewport = new Vector4(0, 0, 1, 1);\n  private static _clearColor = new Color(1, 1, 1, 1);\n  private static _tempVector = new Vector3();\n  private static _tempMatrix0 = new Matrix();\n\n  private readonly _camera: Camera;\n  private readonly _engine: Engine;\n  private readonly _shadowCasterShader: Shader;\n  private readonly _supportDepthTexture: boolean;\n\n  private _shadowMapResolution: number;\n  private _shadowMapSize: Vector4 = new Vector4();\n  private _shadowTileResolution: number;\n  private _shadowBias: Vector2 = new Vector2();\n  private _shadowMapFormat: TextureFormat;\n  private _shadowCascadeMode: ShadowCascadesMode;\n  private _shadowSliceData: ShadowSliceData = new ShadowSliceData();\n  private _lightUp: Vector3 = new Vector3();\n  private _lightSide: Vector3 = new Vector3();\n  private _existShadowMap: boolean = false;\n\n  private _splitBoundSpheres = new Float32Array(CascadedShadowCasterPass._maxCascades * 4);\n  /** The end is project prcision problem in shader. */\n  private _shadowMatrices = new Float32Array((CascadedShadowCasterPass._maxCascades + 1) * 16);\n  // strength, null, lightIndex\n  private _shadowInfos = new Vector3();\n  private _depthTexture: Texture2D;\n  private _renderTargets: RenderTarget;\n  private _viewportOffsets: Vector2[] = [new Vector2(), new Vector2(), new Vector2(), new Vector2()];\n\n  constructor(camera: Camera) {\n    this._camera = camera;\n    this._engine = camera.engine;\n\n    this._supportDepthTexture = camera.engine._hardwareRenderer.canIUse(GLCapabilityType.depthTexture);\n    this._shadowCasterShader = Shader.find(\"shadow-map\");\n    this._shadowSliceData.virtualCamera.isOrthographic = true;\n  }\n\n  /**\n   * @internal\n   */\n  _render(context: RenderContext): void {\n    this._updateShadowSettings();\n    this._existShadowMap = false;\n    this._renderDirectShadowMap(context);\n\n    if (this._existShadowMap) {\n      this._updateReceiversShaderData();\n    }\n  }\n\n  private _renderDirectShadowMap(context: RenderContext): void {\n    const {\n      _engine: engine,\n      _camera: camera,\n      _shadowCasterShader: shadowCasterShader,\n      _viewportOffsets: viewports,\n      _shadowSliceData: shadowSliceData,\n      _splitBoundSpheres: splitBoundSpheres,\n      _shadowMatrices: shadowMatrices\n    } = this;\n\n    const {\n      _opaqueQueue: opaqueQueue,\n      _alphaTestQueue: alphaTestQueue,\n      _transparentQueue: transparentQueue\n    } = camera._renderPipeline;\n\n    const componentsManager = engine._componentsManager;\n    const rhi = engine._hardwareRenderer;\n    const shadowCascades = camera.scene.shadowCascades;\n    const splitDistance = CascadedShadowCasterPass._cascadesSplitDistance;\n    const boundSphere = shadowSliceData.splitBoundSphere;\n    const lightWorld = CascadedShadowCasterPass._tempMatrix0;\n    const lightWorldE = lightWorld.elements;\n    const lightUp = this._lightUp;\n    const lightSide = this._lightSide;\n    const lightForward = shadowSliceData.virtualCamera.forward;\n\n    const sunLightIndex = engine._lightManager._getSunLightIndex();\n\n    if (sunLightIndex !== -1) {\n      const light = camera.scene._sunLight;\n      const shadowFar = Math.min(camera.scene.shadowDistance, camera.farClipPlane);\n      this._getCascadesSplitDistance(shadowFar);\n      // prepare render target\n      const renderTarget = this._getAvailableRenderTarget();\n      // @todo: shouldn't set viewport and scissor in activeRenderTarget\n      rhi.activeRenderTarget(renderTarget, CascadedShadowCasterPass._viewport, 0);\n      if (this._supportDepthTexture) {\n        rhi.clearRenderTarget(engine, CameraClearFlags.Depth, null);\n      } else {\n        rhi.clearRenderTarget(engine, CameraClearFlags.All, CascadedShadowCasterPass._clearColor);\n      }\n      this._shadowInfos.x = light.shadowStrength;\n      this._shadowInfos.z = sunLightIndex;\n\n      // prepare light and camera direction\n      Matrix.rotationQuaternion(light.entity.transform.worldRotationQuaternion, lightWorld);\n      lightSide.set(lightWorldE[0], lightWorldE[1], lightWorldE[2]);\n      lightUp.set(lightWorldE[4], lightWorldE[5], lightWorldE[6]);\n      lightForward.set(-lightWorldE[8], -lightWorldE[9], -lightWorldE[10]);\n      camera.entity.transform.getWorldForward(CascadedShadowCasterPass._tempVector);\n\n      const shadowTileResolution = this._shadowTileResolution;\n\n      for (let j = 0; j < shadowCascades; j++) {\n        ShadowUtils.getBoundSphereByFrustum(\n          splitDistance[j],\n          splitDistance[j + 1],\n          camera,\n          CascadedShadowCasterPass._tempVector.normalize(),\n          shadowSliceData\n        );\n        ShadowUtils.getDirectionLightShadowCullPlanes(\n          camera._frustum,\n          splitDistance[j],\n          camera.nearClipPlane,\n          lightForward,\n          shadowSliceData\n        );\n\n        ShadowUtils.getDirectionalLightMatrices(\n          lightUp,\n          lightSide,\n          lightForward,\n          j,\n          light.shadowNearPlane,\n          shadowTileResolution,\n          shadowSliceData,\n          shadowMatrices\n        );\n        if (shadowCascades > 1) {\n          const shadowMapSize = this._shadowMapSize;\n          ShadowUtils.applySliceTransform(\n            shadowTileResolution,\n            shadowMapSize.z,\n            shadowMapSize.w,\n            j,\n            this._viewportOffsets[j],\n            shadowMatrices\n          );\n        }\n        this._updateSingleShadowCasterShaderData(<DirectLight>light, shadowSliceData, context);\n\n        // upload pre-cascade infos.\n        const center = boundSphere.center;\n        const radius = boundSphere.radius;\n        const offset = j * 4;\n        splitBoundSpheres[offset] = center.x;\n        splitBoundSpheres[offset + 1] = center.y;\n        splitBoundSpheres[offset + 2] = center.z;\n        splitBoundSpheres[offset + 3] = radius * radius;\n        opaqueQueue.clear();\n        alphaTestQueue.clear();\n        transparentQueue.clear();\n        const renderers = componentsManager._renderers;\n        const elements = renderers._elements;\n        for (let k = renderers.length - 1; k >= 0; --k) {\n          ShadowUtils.shadowCullFrustum(context, light, elements[k], shadowSliceData);\n        }\n\n        if (opaqueQueue.items.length || alphaTestQueue.items.length) {\n          opaqueQueue.sort(RenderQueue._compareFromNearToFar);\n          alphaTestQueue.sort(RenderQueue._compareFromNearToFar);\n\n          const { x, y } = viewports[j];\n\n          rhi.setGlobalDepthBias(1.0, 1.0);\n\n          rhi.viewport(x, y, shadowTileResolution, shadowTileResolution);\n          // for no cascade is for the edge,for cascade is for the beyond maxCascade pixel can use (0,0,0) trick sample the shadowMap\n          rhi.scissor(x + 1, y + 1, shadowTileResolution - 2, shadowTileResolution - 2);\n          engine._renderCount++;\n\n          opaqueQueue.render(camera, null, Layer.Everything, shadowCasterShader);\n          alphaTestQueue.render(camera, null, Layer.Everything, shadowCasterShader);\n          rhi.setGlobalDepthBias(0, 0);\n        }\n      }\n      this._existShadowMap = true;\n    }\n  }\n\n  private _updateReceiversShaderData(): void {\n    const scene = this._camera.scene;\n    const splitBoundSpheres = this._splitBoundSpheres;\n    const shadowMatrices = this._shadowMatrices;\n    const shadowCascades = scene.shadowCascades;\n\n    // set zero matrix to project the index out of max cascade\n    if (shadowCascades > 1) {\n      for (let i = shadowCascades * 4, n = splitBoundSpheres.length; i < n; i++) {\n        splitBoundSpheres[i] = 0.0;\n      }\n    }\n\n    // set zero matrix to project the index out of max cascade\n    for (var i = shadowCascades * 16, n = shadowMatrices.length; i < n; i++) {\n      shadowMatrices[i] = 0.0;\n    }\n\n    const shaderData = scene.shaderData;\n    shaderData.setFloatArray(CascadedShadowCasterPass._shadowMatricesProperty, this._shadowMatrices);\n    shaderData.setVector3(CascadedShadowCasterPass._shadowInfosProperty, this._shadowInfos);\n    shaderData.setTexture(CascadedShadowCasterPass._shadowMapsProperty, this._depthTexture);\n    shaderData.setFloatArray(CascadedShadowCasterPass._shadowSplitSpheresProperty, this._splitBoundSpheres);\n    shaderData.setVector4(CascadedShadowCasterPass._shadowMapSize, this._shadowMapSize);\n  }\n\n  private _getCascadesSplitDistance(shadowFar: number): void {\n    const cascadesSplitDistance = CascadedShadowCasterPass._cascadesSplitDistance;\n    const { shadowTwoCascadeSplits, shadowFourCascadeSplits, shadowCascades } = this._camera.scene;\n    const { nearClipPlane, aspectRatio, fieldOfView } = this._camera;\n\n    cascadesSplitDistance[0] = nearClipPlane;\n    const range = shadowFar - nearClipPlane;\n    const tFov = Math.tan(MathUtil.degreeToRadian(fieldOfView) * 0.5);\n    const denominator = 1.0 + tFov * tFov * (aspectRatio * aspectRatio + 1.0);\n    switch (shadowCascades) {\n      case ShadowCascadesMode.NoCascades:\n        cascadesSplitDistance[1] = this._getFarWithRadius(shadowFar, denominator);\n        break;\n      case ShadowCascadesMode.TwoCascades:\n        cascadesSplitDistance[1] = this._getFarWithRadius(nearClipPlane + range * shadowTwoCascadeSplits, denominator);\n        cascadesSplitDistance[2] = this._getFarWithRadius(shadowFar, denominator);\n        break;\n      case ShadowCascadesMode.FourCascades:\n        cascadesSplitDistance[1] = this._getFarWithRadius(\n          nearClipPlane + range * shadowFourCascadeSplits.x,\n          denominator\n        );\n        cascadesSplitDistance[2] = this._getFarWithRadius(\n          nearClipPlane + range * shadowFourCascadeSplits.y,\n          denominator\n        );\n        cascadesSplitDistance[3] = this._getFarWithRadius(\n          nearClipPlane + range * shadowFourCascadeSplits.z,\n          denominator\n        );\n        cascadesSplitDistance[4] = this._getFarWithRadius(shadowFar, denominator);\n        break;\n    }\n  }\n\n  private _getFarWithRadius(radius: number, denominator: number): number {\n    // use the frustum side as the radius and get the far distance form camera.\n    // var tFov: number = Math.tan(fov * 0.5);// get this the equation using Pythagorean\n    // return Math.sqrt(radius * radius / (1.0 + tFov * tFov * (aspectRatio * aspectRatio + 1.0)));\n    return Math.sqrt((radius * radius) / denominator);\n  }\n\n  private _getAvailableRenderTarget(): RenderTarget {\n    const engine = this._engine;\n    const format = this._shadowMapFormat;\n    const { z: width, w: height } = this._shadowMapSize;\n    let depthTexture = this._depthTexture;\n    let renderTarget = this._renderTargets;\n    if (\n      renderTarget == null ||\n      depthTexture?.width !== width ||\n      depthTexture?.height !== height ||\n      depthTexture?.format !== format\n    ) {\n      depthTexture = this._depthTexture = new Texture2D(engine, width, height, format, false);\n      depthTexture.wrapModeV = depthTexture.wrapModeU = TextureWrapMode.Clamp;\n      if (engine._hardwareRenderer._isWebGL2) {\n        depthTexture.depthCompareFunction = TextureDepthCompareFunction.Less;\n      }\n\n      if (this._supportDepthTexture) {\n        renderTarget = this._renderTargets = new RenderTarget(engine, width, height, null, depthTexture);\n      } else {\n        renderTarget = this._renderTargets = new RenderTarget(engine, width, height, depthTexture);\n      }\n    }\n    return renderTarget;\n  }\n\n  private _updateShadowSettings(): void {\n    const scene = this._camera.scene;\n    const shadowFormat = ShadowUtils.shadowDepthFormat(scene.shadowResolution, this._supportDepthTexture);\n    const shadowResolution = ShadowUtils.shadowResolution(scene.shadowResolution);\n    const shadowCascades = scene.shadowCascades;\n\n    if (\n      shadowFormat !== this._shadowMapFormat ||\n      shadowResolution !== this._shadowMapResolution ||\n      shadowCascades !== this._shadowCascadeMode\n    ) {\n      this._shadowMapFormat = shadowFormat;\n      this._shadowMapResolution = shadowResolution;\n      this._shadowCascadeMode = shadowCascades;\n\n      if (shadowCascades == ShadowCascadesMode.NoCascades) {\n        this._shadowTileResolution = shadowResolution;\n        this._shadowMapSize.set(1 / shadowResolution, 1 / shadowResolution, shadowResolution, shadowResolution);\n      } else {\n        const shadowTileResolution = ShadowUtils.getMaxTileResolutionInAtlas(\n          shadowResolution,\n          shadowResolution,\n          shadowCascades\n        );\n        this._shadowTileResolution = shadowTileResolution;\n        const width = shadowTileResolution * 2;\n        const height =\n          shadowCascades == ShadowCascadesMode.TwoCascades ? shadowTileResolution : shadowTileResolution * 2;\n        this._shadowMapSize.set(1.0 / width, 1.0 / height, width, height);\n      }\n\n      this._renderTargets = null;\n\n      const viewportOffset = this._viewportOffsets;\n      const shadowTileResolution = this._shadowTileResolution;\n      switch (shadowCascades) {\n        case ShadowCascadesMode.NoCascades:\n          viewportOffset[0].set(0, 0);\n          break;\n        case ShadowCascadesMode.TwoCascades:\n          viewportOffset[0].set(0, 0);\n          viewportOffset[1].set(shadowTileResolution, 0);\n          break;\n        case ShadowCascadesMode.FourCascades:\n          viewportOffset[0].set(0, 0);\n          viewportOffset[1].set(shadowTileResolution, 0);\n          viewportOffset[2].set(0, shadowTileResolution);\n          viewportOffset[3].set(shadowTileResolution, shadowTileResolution);\n      }\n    }\n  }\n\n  private _updateSingleShadowCasterShaderData(\n    light: DirectLight,\n    shadowSliceData: ShadowSliceData,\n    context: RenderContext\n  ): void {\n    const virtualCamera = shadowSliceData.virtualCamera;\n    ShadowUtils.getShadowBias(light, virtualCamera.projectionMatrix, this._shadowTileResolution, this._shadowBias);\n\n    const sceneShaderData = this._camera.scene.shaderData;\n    sceneShaderData.setVector2(CascadedShadowCasterPass._lightShadowBiasProperty, this._shadowBias);\n    sceneShaderData.setVector3(CascadedShadowCasterPass._lightDirectionProperty, light.direction);\n\n    context.applyVirtualCamera(virtualCamera);\n  }\n}\n","import { Color } from \"@galacean/engine-math\";\nimport { Camera } from \"../Camera\";\nimport { CameraClearFlags } from \"../enums/CameraClearFlags\";\nimport { Layer } from \"../Layer\";\nimport { Material } from \"../material/Material\";\nimport { RenderTarget } from \"../texture/RenderTarget\";\nimport { RenderQueue } from \"./RenderQueue\";\n\nlet passNum = 0;\n\n/**\n * RenderPass.\n */\nclass RenderPass {\n  public name: string;\n  public enabled: boolean;\n  public priority: number;\n  public renderTarget: RenderTarget;\n  public replaceMaterial: Material;\n  public mask: Layer;\n  public renderOverride: boolean;\n  public clearFlags: CameraClearFlags | undefined;\n  public clearColor: Color | undefined;\n\n  /**\n   * Create a RenderPass.\n   * @param name - Pass name\n   * @param priority - Priority, less than 0 before the default pass, greater than 0 after the default pass\n   * @param renderTarget - The specified Render Target\n   * @param replaceMaterial -  Replaced material\n   * @param mask - Perform bit and operations with Entity.Layer to filter the objects that this Pass needs to render\n   */\n  constructor(\n    name = `RENDER_PASS${passNum++}`,\n    priority = 0,\n    renderTarget = null,\n    replaceMaterial = null,\n    mask = null\n  ) {\n    this.name = name;\n    this.enabled = true;\n    this.priority = priority;\n    this.renderTarget = renderTarget;\n    this.replaceMaterial = replaceMaterial;\n    this.mask = mask || Layer.Everything;\n    this.renderOverride = false; // If renderOverride is set to true, you need to implement the render method\n  }\n\n  /**\n   * Rendering callback, will be executed if renderOverride is set to true.\n   * @param camera - Camera\n   * @param opaqueQueue - Opaque queue\n   * @param alphaTestQueue - Alpha test queue\n   * @param transparentQueue - Transparent queue\n   */\n  render(camera: Camera, opaqueQueue: RenderQueue, alphaTestQueue: RenderQueue, transparentQueue: RenderQueue) {}\n\n  /**\n   * Post rendering callback.\n   * @param camera - Camera\n   * @param opaqueQueue - Opaque queue\n   * @param alphaTestQueue - Alpha test queue\n   * @param transparentQueue - Transparent queue\n   */\n  preRender(camera: Camera, opaqueQueue: RenderQueue, alphaTestQueue: RenderQueue, transparentQueue: RenderQueue) {}\n\n  /**\n   * Post rendering callback.\n   * @param camera - Camera\n   * @param opaqueQueue - Opaque queue\n   * @param alphaTestQueue - Alpha test queue\n   * @param transparentQueue - Transparent queue\n   */\n  postRender(camera: Camera, opaqueQueue: RenderQueue, alphaTestQueue: RenderQueue, transparentQueue: RenderQueue) {}\n}\n\nexport { RenderPass };\n","import { Vector2, Vector3 } from \"@galacean/engine-math\";\nimport { SpriteMask } from \"../2d\";\nimport { Background } from \"../Background\";\nimport { Camera } from \"../Camera\";\nimport { DisorderedArray } from \"../DisorderedArray\";\nimport { Engine } from \"../Engine\";\nimport { BackgroundMode } from \"../enums/BackgroundMode\";\nimport { BackgroundTextureFillMode } from \"../enums/BackgroundTextureFillMode\";\nimport { CameraClearFlags } from \"../enums/CameraClearFlags\";\nimport { Layer } from \"../Layer\";\nimport { Material } from \"../material\";\nimport { RenderQueueType } from \"../shader/enums/RenderQueueType\";\nimport { Shader } from \"../shader/Shader\";\nimport { CascadedShadowCasterPass } from \"../shadow/CascadedShadowCasterPass\";\nimport { ShadowType } from \"../shadow/enum/ShadowType\";\nimport { RenderTarget, TextureCubeFace } from \"../texture\";\nimport { RenderContext } from \"./RenderContext\";\nimport { RenderElement } from \"./RenderElement\";\nimport { RenderPass } from \"./RenderPass\";\nimport { RenderQueue } from \"./RenderQueue\";\n\n/**\n * Basic render pipeline.\n */\nexport class BasicRenderPipeline {\n  private static _tempVector0 = new Vector3();\n  private static _tempVector1 = new Vector3();\n\n  /** @internal */\n  _opaqueQueue: RenderQueue;\n  /** @internal */\n  _transparentQueue: RenderQueue;\n  /** @internal */\n  _alphaTestQueue: RenderQueue;\n  /** @internal */\n  _allSpriteMasks: DisorderedArray<SpriteMask> = new DisorderedArray();\n\n  private _camera: Camera;\n  private _defaultPass: RenderPass;\n  private _renderPassArray: Array<RenderPass>;\n  private _lastCanvasSize = new Vector2();\n  private _cascadedShadowCaster: CascadedShadowCasterPass;\n\n  /**\n   * Create a basic render pipeline.\n   * @param camera - Camera\n   */\n  constructor(camera: Camera) {\n    this._camera = camera;\n    const { engine } = camera;\n    this._opaqueQueue = new RenderQueue(engine);\n    this._alphaTestQueue = new RenderQueue(engine);\n    this._transparentQueue = new RenderQueue(engine);\n    this._cascadedShadowCaster = new CascadedShadowCasterPass(camera);\n\n    this._renderPassArray = [];\n    this._defaultPass = new RenderPass(\"default\", 0, null, null, 0);\n    this.addRenderPass(this._defaultPass);\n  }\n\n  /**\n   * Default render pass.\n   */\n  get defaultRenderPass() {\n    return this._defaultPass;\n  }\n\n  /**\n   * Add render pass.\n   * @param nameOrPass - The name of this Pass or RenderPass object. When it is a name, the following parameters need to be provided\n   * @param priority - Priority, less than 0 before the default pass, greater than 0 after the default pass\n   * @param renderTarget - The specified Render Target\n   * @param replaceMaterial -  Replaced material\n   * @param mask - Perform bit and operations with Entity.Layer to filter the objects that this Pass needs to render\n   */\n  addRenderPass(\n    nameOrPass: string | RenderPass,\n    priority: number = null,\n    renderTarget: RenderTarget = null,\n    replaceMaterial: Material = null,\n    mask: Layer = null\n  ) {\n    if (typeof nameOrPass === \"string\") {\n      const renderPass = new RenderPass(nameOrPass, priority, renderTarget, replaceMaterial, mask);\n      this._renderPassArray.push(renderPass);\n    } else if (nameOrPass instanceof RenderPass) {\n      this._renderPassArray.push(nameOrPass);\n    }\n\n    this._renderPassArray.sort(function (p1, p2) {\n      return p1.priority - p2.priority;\n    });\n  }\n\n  /**\n   * Remove render pass by name or render pass object.\n   * @param nameOrPass - Render pass name or render pass object\n   */\n  removeRenderPass(nameOrPass: string | RenderPass): void {\n    let pass: RenderPass;\n    if (typeof nameOrPass === \"string\") pass = this.getRenderPass(nameOrPass);\n    else if (nameOrPass instanceof RenderPass) pass = nameOrPass;\n    if (pass) {\n      const idx = this._renderPassArray.indexOf(pass);\n      this._renderPassArray.splice(idx, 1);\n    }\n  }\n\n  /**\n   * Get render pass by name.\n   * @param  name - Render pass name\n   */\n  getRenderPass(name: string) {\n    for (let i = 0, len = this._renderPassArray.length; i < len; i++) {\n      const pass = this._renderPassArray[i];\n      if (pass.name === name) return pass;\n    }\n\n    return null;\n  }\n\n  /**\n   * Destroy internal resources.\n   */\n  destroy(): void {\n    this._opaqueQueue.destroy();\n    this._alphaTestQueue.destroy();\n    this._transparentQueue.destroy();\n    this._allSpriteMasks = null;\n    this._renderPassArray = null;\n    this._defaultPass = null;\n    this._camera = null;\n  }\n\n  /**\n   * Perform scene rendering.\n   * @param context - Render context\n   * @param cubeFace - Render surface of cube texture\n   * @param mipLevel - Set mip level the data want to write\n   */\n  render(context: RenderContext, cubeFace?: TextureCubeFace, mipLevel?: number) {\n    const camera = this._camera;\n    const scene = camera.scene;\n    const opaqueQueue = this._opaqueQueue;\n    const alphaTestQueue = this._alphaTestQueue;\n    const transparentQueue = this._transparentQueue;\n\n    camera.engine._spriteMaskManager.clear();\n    if (scene.castShadows && scene._sunLight?.shadowType !== ShadowType.None) {\n      this._cascadedShadowCaster._render(context);\n    }\n    opaqueQueue.clear();\n    alphaTestQueue.clear();\n    transparentQueue.clear();\n    this._allSpriteMasks.length = 0;\n\n    context.applyVirtualCamera(camera._virtualCamera);\n\n    this._callRender(context);\n    opaqueQueue.sort(RenderQueue._compareFromNearToFar);\n    alphaTestQueue.sort(RenderQueue._compareFromNearToFar);\n    transparentQueue.sort(RenderQueue._compareFromFarToNear);\n\n    for (let i = 0, len = this._renderPassArray.length; i < len; i++) {\n      this._drawRenderPass(context, this._renderPassArray[i], camera, cubeFace, mipLevel);\n    }\n  }\n\n  private _drawRenderPass(\n    context: RenderContext,\n    pass: RenderPass,\n    camera: Camera,\n    cubeFace?: TextureCubeFace,\n    mipLevel?: number\n  ) {\n    pass.preRender(camera, this._opaqueQueue, this._alphaTestQueue, this._transparentQueue);\n\n    if (pass.enabled) {\n      const { engine, scene } = camera;\n      const { background } = scene;\n      const rhi = engine._hardwareRenderer;\n      const renderTarget = camera.renderTarget || pass.renderTarget;\n      rhi.activeRenderTarget(renderTarget, camera.viewport, mipLevel);\n      renderTarget?._setRenderTargetInfo(cubeFace, mipLevel);\n      const clearFlags = pass.clearFlags ?? camera.clearFlags;\n      const color = pass.clearColor ?? background.solidColor;\n      if (clearFlags !== CameraClearFlags.None) {\n        rhi.clearRenderTarget(camera.engine, clearFlags, color);\n      }\n\n      if (pass.renderOverride) {\n        pass.render(camera, this._opaqueQueue, this._alphaTestQueue, this._transparentQueue);\n      } else {\n        this._opaqueQueue.render(camera, pass.replaceMaterial, pass.mask, null);\n        this._alphaTestQueue.render(camera, pass.replaceMaterial, pass.mask, null);\n        if (camera.clearFlags & CameraClearFlags.Color) {\n          if (background.mode === BackgroundMode.Sky) {\n            background.sky._render(context);\n          } else if (background.mode === BackgroundMode.Texture && background.texture) {\n            this._drawBackgroundTexture(engine, background);\n          }\n        }\n        this._transparentQueue.render(camera, pass.replaceMaterial, pass.mask, null);\n      }\n\n      renderTarget?._blitRenderTarget();\n      renderTarget?.generateMipmaps();\n    }\n\n    pass.postRender(camera, this._opaqueQueue, this._alphaTestQueue, this._transparentQueue);\n  }\n\n  /**\n   * Push a render element to the render queue.\n   * @param element - Render element\n   */\n  pushPrimitive(element: RenderElement): void {\n    switch (element.renderState.renderQueueType) {\n      case RenderQueueType.Transparent:\n        this._transparentQueue.pushPrimitive(element);\n        break;\n      case RenderQueueType.AlphaTest:\n        this._alphaTestQueue.pushPrimitive(element);\n        break;\n      case RenderQueueType.Opaque:\n        this._opaqueQueue.pushPrimitive(element);\n        break;\n    }\n  }\n\n  private _drawBackgroundTexture(engine: Engine, background: Background) {\n    const rhi = engine._hardwareRenderer;\n    const { _backgroundTextureMaterial, canvas } = engine;\n    const mesh = background._mesh;\n\n    if (\n      (this._lastCanvasSize.x !== canvas.width || this._lastCanvasSize.y !== canvas.height) &&\n      background._textureFillMode !== BackgroundTextureFillMode.Fill\n    ) {\n      this._lastCanvasSize.set(canvas.width, canvas.height);\n      background._resizeBackgroundTexture();\n    }\n\n    const program = _backgroundTextureMaterial.shader.passes[0]._getShaderProgram(engine, Shader._compileMacros);\n    program.bind();\n    program.uploadAll(program.materialUniformBlock, _backgroundTextureMaterial.shaderData);\n    program.uploadUnGroupTextures();\n\n    _backgroundTextureMaterial.renderState._apply(engine, false);\n    rhi.drawPrimitive(mesh, mesh.subMesh, program);\n  }\n\n  private _callRender(context: RenderContext): void {\n    const engine = context.camera.engine;\n    const renderers = engine._componentsManager._renderers;\n    const camera = context.camera;\n    const elements = renderers._elements;\n    for (let i = renderers.length - 1; i >= 0; --i) {\n      const renderer = elements[i];\n\n      // filter by camera culling mask.\n      if (!(camera.cullingMask & renderer._entity.layer)) {\n        continue;\n      }\n\n      // filter by camera frustum.\n      if (camera.enableFrustumCulling) {\n        if (!camera._frustum.intersectsBox(renderer.bounds)) {\n          continue;\n        }\n      }\n      renderer._renderFrameCount = engine.time._frameCount;\n      renderer._prepareRender(context);\n    }\n  }\n}\n","import { BoundingFrustum, MathUtil, Matrix, Ray, Vector2, Vector3, Vector4 } from \"@galacean/engine-math\";\nimport { Logger } from \"./base\";\nimport { BoolUpdateFlag } from \"./BoolUpdateFlag\";\nimport { deepClone, ignoreClone } from \"./clone/CloneManager\";\nimport { Component } from \"./Component\";\nimport { dependentComponents } from \"./ComponentsDependencies\";\nimport { Entity } from \"./Entity\";\nimport { CameraClearFlags } from \"./enums/CameraClearFlags\";\nimport { Layer } from \"./Layer\";\nimport { BasicRenderPipeline } from \"./RenderPipeline/BasicRenderPipeline\";\nimport { ShaderDataGroup } from \"./shader/enums/ShaderDataGroup\";\nimport { Shader } from \"./shader/Shader\";\nimport { ShaderData } from \"./shader/ShaderData\";\nimport { ShaderMacroCollection } from \"./shader/ShaderMacroCollection\";\nimport { TextureCubeFace } from \"./texture/enums/TextureCubeFace\";\nimport { RenderTarget } from \"./texture/RenderTarget\";\nimport { Transform } from \"./Transform\";\nimport { VirtualCamera } from \"./VirtualCamera\";\n\nclass MathTemp {\n  static tempVec4 = new Vector4();\n  static tempVec3 = new Vector3();\n  static tempVec2 = new Vector2();\n}\n\n/**\n * Camera component, as the entrance to the three-dimensional world.\n * @decorator `@dependentComponents(Transform)`\n */\n@dependentComponents(Transform)\nexport class Camera extends Component {\n  /** @internal */\n  private static _inverseViewMatrixProperty = Shader.getPropertyByName(\"u_viewInvMat\");\n  /** @internal */\n  private static _cameraPositionProperty = Shader.getPropertyByName(\"u_cameraPos\");\n\n  /** Shader data. */\n  readonly shaderData: ShaderData = new ShaderData(ShaderDataGroup.Camera);\n\n  /** Rendering priority - A Camera with higher priority will be rendered on top of a camera with lower priority. */\n  priority: number = 0;\n\n  /** Whether to enable frustum culling, it is enabled by default. */\n  enableFrustumCulling: boolean = true;\n\n  /**\n   * Determining what to clear when rendering by a Camera.\n   * @defaultValue `CameraClearFlags.All`\n   */\n  clearFlags: CameraClearFlags = CameraClearFlags.All;\n\n  /**\n   * Culling mask - which layers the camera renders.\n   * @remarks Support bit manipulation, corresponding to `Layer`.\n   */\n  cullingMask: Layer = Layer.Everything;\n\n  /** @internal */\n  _globalShaderMacro: ShaderMacroCollection = new ShaderMacroCollection();\n  /** @internal */\n  @deepClone\n  _frustum: BoundingFrustum = new BoundingFrustum();\n  /** @internal */\n  @ignoreClone\n  _renderPipeline: BasicRenderPipeline;\n  /** @internal */\n  @ignoreClone\n  _virtualCamera: VirtualCamera = new VirtualCamera();\n\n  private _isProjMatSetting = false;\n  private _nearClipPlane: number = 0.1;\n  private _farClipPlane: number = 100;\n  private _fieldOfView: number = 45;\n  private _orthographicSize: number = 10;\n  private _isProjectionDirty = true;\n  private _isInvProjMatDirty: boolean = true;\n  private _isFrustumProjectDirty: boolean = true;\n  private _customAspectRatio: number | undefined = undefined;\n  private _renderTarget: RenderTarget = null;\n\n  @ignoreClone\n  private _frustumViewChangeFlag: BoolUpdateFlag;\n  @ignoreClone\n  private _transform: Transform;\n  @ignoreClone\n  private _isViewMatrixDirty: BoolUpdateFlag;\n  @ignoreClone\n  private _isInvViewProjDirty: BoolUpdateFlag;\n  @deepClone\n  private _viewport: Vector4 = new Vector4(0, 0, 1, 1);\n  @deepClone\n  private _inverseProjectionMatrix: Matrix = new Matrix();\n  @deepClone\n  private _lastAspectSize: Vector2 = new Vector2(0, 0);\n  @deepClone\n  private _invViewProjMat: Matrix = new Matrix();\n\n  /**\n   * Near clip plane - the closest point to the camera when rendering occurs.\n   */\n  get nearClipPlane(): number {\n    return this._nearClipPlane;\n  }\n\n  set nearClipPlane(value: number) {\n    this._nearClipPlane = value;\n    this._projMatChange();\n  }\n\n  /**\n   * Far clip plane - the furthest point to the camera when rendering occurs.\n   */\n  get farClipPlane(): number {\n    return this._farClipPlane;\n  }\n\n  set farClipPlane(value: number) {\n    this._farClipPlane = value;\n    this._projMatChange();\n  }\n\n  /**\n   * The camera's view angle. activating when camera use perspective projection.\n   */\n  get fieldOfView(): number {\n    return this._fieldOfView;\n  }\n\n  set fieldOfView(value: number) {\n    this._fieldOfView = value;\n    this._projMatChange();\n  }\n\n  /**\n   * Aspect ratio. The default is automatically calculated by the viewport's aspect ratio. If it is manually set,\n   * the manual value will be kept. Call resetAspectRatio() to restore it.\n   */\n  get aspectRatio(): number {\n    const canvas = this._entity.engine.canvas;\n    return this._customAspectRatio ?? (canvas.width * this._viewport.z) / (canvas.height * this._viewport.w);\n  }\n\n  set aspectRatio(value: number) {\n    this._customAspectRatio = value;\n    this._projMatChange();\n  }\n\n  /**\n   * Viewport, normalized expression, the upper left corner is (0, 0), and the lower right corner is (1, 1).\n   * @remarks Re-assignment is required after modification to ensure that the modification takes effect.\n   */\n  get viewport(): Vector4 {\n    return this._viewport;\n  }\n\n  set viewport(value: Vector4) {\n    if (value !== this._viewport) {\n      this._viewport.copyFrom(value);\n    }\n    this._projMatChange();\n  }\n\n  /**\n   * Whether it is orthogonal, the default is false. True will use orthographic projection, false will use perspective projection.\n   */\n  get isOrthographic(): boolean {\n    return this._virtualCamera.isOrthographic;\n  }\n\n  set isOrthographic(value: boolean) {\n    this._virtualCamera.isOrthographic = value;\n    this._projMatChange();\n  }\n\n  /**\n   * Half the size of the camera in orthographic mode.\n   */\n  get orthographicSize(): number {\n    return this._orthographicSize;\n  }\n\n  set orthographicSize(value: number) {\n    this._orthographicSize = value;\n    this._projMatChange();\n  }\n\n  /**\n   * View matrix.\n   */\n  get viewMatrix(): Readonly<Matrix> {\n    const viewMatrix = this._virtualCamera.viewMatrix;\n    if (this._isViewMatrixDirty.flag) {\n      this._isViewMatrixDirty.flag = false;\n      // Ignore scale.\n      const transform = this._transform;\n      Matrix.rotationTranslation(transform.worldRotationQuaternion, transform.worldPosition, viewMatrix);\n      viewMatrix.invert();\n    }\n    return viewMatrix;\n  }\n\n  /**\n   * The projection matrix is ​​calculated by the relevant parameters of the camera by default.\n   * If it is manually set, the manual value will be maintained. Call resetProjectionMatrix() to restore it.\n   */\n  set projectionMatrix(value: Matrix) {\n    this._virtualCamera.projectionMatrix.copyFrom(value);\n    this._isProjMatSetting = true;\n    this._projMatChange();\n  }\n\n  get projectionMatrix(): Matrix {\n    const virtualCamera = this._virtualCamera;\n    const projectionMatrix = virtualCamera.projectionMatrix;\n    const canvas = this._entity.engine.canvas;\n\n    if (\n      (!this._isProjectionDirty || this._isProjMatSetting) &&\n      this._lastAspectSize.x === canvas.width &&\n      this._lastAspectSize.y === canvas.height\n    ) {\n      return projectionMatrix;\n    }\n    this._isProjectionDirty = false;\n    this._lastAspectSize.x = canvas.width;\n    this._lastAspectSize.y = canvas.height;\n    const aspectRatio = this.aspectRatio;\n    if (!virtualCamera.isOrthographic) {\n      Matrix.perspective(\n        MathUtil.degreeToRadian(this._fieldOfView),\n        aspectRatio,\n        this._nearClipPlane,\n        this._farClipPlane,\n        projectionMatrix\n      );\n    } else {\n      const width = this._orthographicSize * aspectRatio;\n      const height = this._orthographicSize;\n      Matrix.ortho(-width, width, -height, height, this._nearClipPlane, this._farClipPlane, projectionMatrix);\n    }\n    return projectionMatrix;\n  }\n\n  /**\n   * Whether to enable HDR.\n   * @todo When render pipeline modification\n   */\n  get enableHDR(): boolean {\n    console.log(\"not implementation\");\n    return false;\n  }\n\n  set enableHDR(value: boolean) {\n    console.log(\"not implementation\");\n  }\n\n  /**\n   * RenderTarget. After setting, it will be rendered to the renderTarget. If it is empty, it will be rendered to the main canvas.\n   */\n  get renderTarget(): RenderTarget | null {\n    return this._renderTarget;\n  }\n\n  set renderTarget(value: RenderTarget | null) {\n    this._renderTarget = value;\n  }\n\n  /**\n   * @internal\n   */\n  constructor(entity: Entity) {\n    super(entity);\n\n    const transform = this.entity.transform;\n    this._transform = transform;\n    this._isViewMatrixDirty = transform.registerWorldChangeFlag();\n    this._isInvViewProjDirty = transform.registerWorldChangeFlag();\n    this._frustumViewChangeFlag = transform.registerWorldChangeFlag();\n    this._renderPipeline = new BasicRenderPipeline(this);\n    this.shaderData._addRefCount(1);\n  }\n\n  /**\n   * Restore the automatic calculation of projection matrix through fieldOfView, nearClipPlane and farClipPlane.\n   */\n  resetProjectionMatrix(): void {\n    this._isProjMatSetting = false;\n    this._projMatChange();\n  }\n\n  /**\n   * Restore the automatic calculation of the aspect ratio through the viewport aspect ratio.\n   */\n  resetAspectRatio(): void {\n    this._customAspectRatio = undefined;\n    this._projMatChange();\n  }\n\n  /**\n   * Transform a point from world space to viewport space.\n   * @param point - Point in world space\n   * @param out - Point in viewport space, X and Y are the camera viewport space coordinates, Z is in world space units from the plane that camera forward is normal to\n   * @returns Point in viewport space\n   */\n  worldToViewportPoint(point: Vector3, out: Vector3): Vector3 {\n    const cameraPoint = MathTemp.tempVec3;\n    const viewportPoint = MathTemp.tempVec4;\n\n    Vector3.transformCoordinate(point, this.viewMatrix, cameraPoint);\n    Vector3.transformToVec4(cameraPoint, this.projectionMatrix, viewportPoint);\n\n    const w = viewportPoint.w;\n    out.set((viewportPoint.x / w + 1.0) * 0.5, (1.0 - viewportPoint.y / w) * 0.5, -cameraPoint.z);\n    return out;\n  }\n\n  /**\n   * Transform a point from viewport space to world space.\n   * @param point - Point in viewport space, X and Y are the camera viewport space coordinates, Z is in world space units from the plane that camera forward is normal to\n   * @param out - Point in world space\n   * @returns Point in world space\n   */\n  viewportToWorldPoint(point: Vector3, out: Vector3): Vector3 {\n    const { nearClipPlane, farClipPlane } = this;\n    const nf = 1 / (nearClipPlane - farClipPlane);\n\n    let z: number;\n    if (this.isOrthographic) {\n      z = -point.z * 2 * nf;\n      z += (farClipPlane + nearClipPlane) * nf;\n    } else {\n      const pointZ = point.z;\n      z = -pointZ * (nearClipPlane + farClipPlane) * nf;\n      z += 2 * nearClipPlane * farClipPlane * nf;\n      z = z / pointZ;\n    }\n\n    this._innerViewportToWorldPoint(point.x, point.y, (z + 1.0) / 2.0, this._getInvViewProjMat(), out);\n    return out;\n  }\n\n  /**\n   * Generate a ray by a point in viewport.\n   * @param point - Point in viewport space, X and Y are the camera viewport space coordinates\n   * @param out - Ray\n   * @returns Ray\n   */\n  viewportPointToRay(point: Vector2, out: Ray): Ray {\n    const invViewProjMat = this._getInvViewProjMat();\n    // Use the intersection of the near clipping plane as the origin point.\n    const origin = this._innerViewportToWorldPoint(point.x, point.y, 0.0, invViewProjMat, out.origin);\n    // Use the intersection of the far clipping plane as the origin point.\n    const direction = this._innerViewportToWorldPoint(point.x, point.y, 1.0, invViewProjMat, out.direction);\n    Vector3.subtract(direction, origin, direction);\n    direction.normalize();\n    return out;\n  }\n\n  /**\n   * Transform the X and Y coordinates of a point from screen space to viewport space\n   * @param point - Point in screen space\n   * @param out - Point in viewport space\n   * @returns Point in viewport space\n   */\n  screenToViewportPoint<T extends Vector2 | Vector3>(point: Vector3 | Vector2, out: T): T {\n    const canvas = this.engine.canvas;\n    const viewport = this.viewport;\n    out.x = (point.x / canvas.width - viewport.x) / viewport.z;\n    out.y = (point.y / canvas.height - viewport.y) / viewport.w;\n    (<Vector3>point).z !== undefined && ((<Vector3>out).z = (<Vector3>point).z);\n    return out;\n  }\n\n  /**\n   * Transform the X and Y coordinates of a point from viewport space to screen space.\n   * @param point - Point in viewport space\n   * @param out - Point in screen space\n   * @returns Point in screen space\n   */\n  viewportToScreenPoint<T extends Vector2 | Vector3 | Vector4>(point: T, out: T): T {\n    const canvas = this.engine.canvas;\n    const viewport = this.viewport;\n    out.x = (viewport.x + point.x * viewport.z) * canvas.width;\n    out.y = (viewport.y + point.y * viewport.w) * canvas.height;\n    (<Vector3>point).z !== undefined && ((<Vector3>out).z = (<Vector3>point).z);\n    return out;\n  }\n\n  /**\n   * Transform a point from world space to screen space.\n   *\n   * @remarks\n   * Screen space is defined in pixels, the left-top of the screen is (0,0), the right-top is (canvasPixelWidth,canvasPixelHeight).\n   *\n   * @param point - Point in world space\n   * @param out - The result will be stored\n   * @returns X and Y are the coordinates of the point in screen space, Z is the distance from the camera in world space\n   */\n  worldToScreenPoint(point: Vector3, out: Vector3): Vector3 {\n    this.worldToViewportPoint(point, out);\n    return this.viewportToScreenPoint(out, out);\n  }\n\n  /**\n   * Transform a point from screen space to world space.\n   *\n   * @param point - Screen space point, the top-left of the screen is (0,0), the right-bottom is (pixelWidth,pixelHeight), The z position is in world units from the camera\n   * @param out - Point in world space\n   * @returns Point in world space\n   */\n  screenToWorldPoint(point: Vector3, out: Vector3): Vector3 {\n    this.screenToViewportPoint(point, out);\n    return this.viewportToWorldPoint(out, out);\n  }\n\n  /**\n   * Generate a ray by a point in screen.\n   * @param point - Point in screen space, the top-left of the screen is (0,0), the right-bottom is (pixelWidth,pixelHeight)\n   * @param out - Ray\n   * @returns Ray\n   */\n  screenPointToRay(point: Vector2, out: Ray): Ray {\n    const viewportPoint = MathTemp.tempVec2;\n    this.screenToViewportPoint(point, viewportPoint);\n    return this.viewportPointToRay(viewportPoint, out);\n  }\n\n  /**\n   * Manually call the rendering of the camera.\n   * @param cubeFace - Cube rendering surface collection\n   * @param mipLevel - Set mip level the data want to write, only take effect in webgl2.0\n   */\n  render(cubeFace?: TextureCubeFace, mipLevel: number = 0): void {\n    const context = this.engine._renderContext;\n    const virtualCamera = this._virtualCamera;\n\n    const transform = this.entity.transform;\n    Matrix.multiply(this.projectionMatrix, this.viewMatrix, virtualCamera.viewProjectionMatrix);\n    virtualCamera.position.copyFrom(transform.worldPosition);\n    if (virtualCamera.isOrthographic) {\n      transform.getWorldForward(virtualCamera.forward);\n    }\n\n    context.camera = this;\n    context.virtualCamera = virtualCamera;\n\n    // compute cull frustum.\n    if (this.enableFrustumCulling && (this._frustumViewChangeFlag.flag || this._isFrustumProjectDirty)) {\n      this._frustum.calculateFromMatrix(virtualCamera.viewProjectionMatrix);\n      this._frustumViewChangeFlag.flag = false;\n      this._isFrustumProjectDirty = false;\n    }\n\n    this._updateShaderData();\n\n    // union scene and camera macro.\n    ShaderMacroCollection.unionCollection(\n      this.scene._globalShaderMacro,\n      this.shaderData._macroCollection,\n      this._globalShaderMacro\n    );\n\n    if (mipLevel > 0 && !this.engine._hardwareRenderer.isWebGL2) {\n      mipLevel = 0;\n      Logger.error(\"mipLevel only take effect in WebGL2.0\");\n    }\n    this._renderPipeline.render(context, cubeFace, mipLevel);\n    this._engine._renderCount++;\n  }\n\n  /**\n   * @override\n   * @inheritdoc\n   */\n  _onEnable(): void {\n    this.entity.scene._attachRenderCamera(this);\n  }\n\n  /**\n   * @override\n   * @inheritdoc\n   */\n  _onDisable(): void {\n    this.entity.scene._detachRenderCamera(this);\n  }\n\n  /**\n   * @override\n   * @inheritdoc\n   */\n  _onDestroy(): void {\n    this._renderPipeline?.destroy();\n    this._isInvViewProjDirty.destroy();\n    this._isViewMatrixDirty.destroy();\n    this.shaderData._addRefCount(-1);\n  }\n\n  private _projMatChange(): void {\n    this._isFrustumProjectDirty = true;\n    this._isProjectionDirty = true;\n    this._isInvProjMatDirty = true;\n    this._isInvViewProjDirty.flag = true;\n  }\n\n  private _innerViewportToWorldPoint(x: number, y: number, z: number, invViewProjMat: Matrix, out: Vector3): Vector3 {\n    // Depth is a normalized value, 0 is nearPlane, 1 is farClipPlane.\n    // Transform to clipping space matrix\n    const clipPoint = MathTemp.tempVec3;\n    clipPoint.set(x * 2 - 1, 1 - y * 2, z * 2 - 1);\n    Vector3.transformCoordinate(clipPoint, invViewProjMat, out);\n    return out;\n  }\n\n  private _updateShaderData(): void {\n    const shaderData = this.shaderData;\n    shaderData.setMatrix(Camera._inverseViewMatrixProperty, this._transform.worldMatrix);\n    shaderData.setVector3(Camera._cameraPositionProperty, this._transform.worldPosition);\n  }\n\n  /**\n   * The inverse matrix of view projection matrix.\n   */\n  private _getInvViewProjMat(): Matrix {\n    if (this._isInvViewProjDirty.flag) {\n      this._isInvViewProjDirty.flag = false;\n      Matrix.multiply(this._transform.worldMatrix, this._getInverseProjectionMatrix(), this._invViewProjMat);\n    }\n    return this._invViewProjMat;\n  }\n\n  /**\n   * The inverse of the projection matrix.\n   */\n  private _getInverseProjectionMatrix(): Readonly<Matrix> {\n    if (this._isInvProjMatDirty) {\n      this._isInvProjMatDirty = false;\n      Matrix.invert(this.projectionMatrix, this._inverseProjectionMatrix);\n    }\n    return this._inverseProjectionMatrix;\n  }\n}\n","import { AssetPromise } from \"./AssetPromise\";\n\nconst mimeType = {\n  json: \"json\",\n  gltf: \"json\",\n  mtl: \"json\",\n  prefab: \"json\",\n  txt: \"text\",\n  bin: \"arraybuffer\",\n  png: \"image\",\n  webp: \"image\",\n  jpg: \"image\"\n};\n\nconst defaultRetryCount = 1;\nconst defaultTimeout = Infinity;\nconst defaultInterval = 500;\n\nexport type RequestConfig = {\n  type?: XMLHttpRequestResponseType | \"image\";\n  retryCount?: number;\n  retryInterval?: number;\n  timeout?: number;\n} & RequestInit;\n\n/**\n * Web request.\n * @param url - The link\n * @param config - Load configuration\n */\nexport function request<T>(url: string, config: RequestConfig = {}): AssetPromise<T> {\n  return new AssetPromise((resolve, reject, setProgress) => {\n    const retryCount = config.retryCount ?? defaultRetryCount;\n    const retryInterval = config.retryInterval ?? defaultInterval;\n    config.timeout = config.timeout ?? defaultTimeout;\n    config.type = config.type ?? getMimeTypeFromUrl(url);\n    const realRequest = config.type === \"image\" ? requestImage : requestRes;\n    let lastError: Error;\n    const executor = new MultiExecutor(\n      () => {\n        return realRequest<T>(url, config)\n          .onProgress(setProgress)\n          .then((res) => {\n            resolve(res);\n            executor.stop();\n          })\n          .catch((err) => (lastError = err));\n      },\n      retryCount,\n      retryInterval\n    );\n    executor.start(() => {\n      reject(lastError);\n    });\n  });\n}\n\nfunction requestImage<T>(url: string, config: RequestConfig): AssetPromise<T> {\n  return new AssetPromise((resolve, reject) => {\n    const { timeout } = config;\n    const img = new Image();\n    const onerror = () => {\n      reject(new Error(`request ${url} fail`));\n    };\n    img.onerror = onerror;\n\n    img.onabort = onerror;\n\n    let timeoutId = -1;\n    if (timeout != Infinity) {\n      timeoutId = window.setTimeout(() => {\n        reject(new Error(`request ${url} timeout`));\n      }, timeout);\n    }\n\n    img.onload = ((timeoutId) => {\n      return () => {\n        // Call requestAnimationFrame to avoid iOS's bug.\n        requestAnimationFrame(() => {\n          //@ts-ignore\n          resolve(img);\n          img.onload = null;\n          img.onerror = null;\n          img.onabort = null;\n        });\n        clearTimeout(timeoutId);\n      };\n    })(timeoutId);\n\n    img.crossOrigin = \"anonymous\";\n\n    img.src = url;\n  });\n}\n\nfunction requestRes<T>(url: string, config: RequestConfig): AssetPromise<T> {\n  return new AssetPromise((resolve, reject, setProgress) => {\n    const xhr = new XMLHttpRequest();\n    xhr.timeout = config.timeout;\n    config.method = config.method ?? \"get\";\n    xhr.onload = () => {\n      if (xhr.status < 200 || xhr.status >= 300) {\n        reject(new Error(`request failed from: ${url}`));\n        return;\n      }\n      const result = xhr.response ?? xhr.responseText;\n      resolve(result);\n    };\n    xhr.onerror = () => {\n      reject(new Error(`request failed from: ${url}`));\n    };\n    xhr.ontimeout = () => {\n      reject(new Error(`request timeout from: ${url}`));\n    };\n    xhr.onprogress = (e) => {\n      setProgress(e.loaded / e.total);\n    };\n    xhr.open(config.method, url, true);\n    xhr.withCredentials = config.credentials === \"include\";\n    //@ts-ignore\n    xhr.responseType = config.type;\n    const headers = config.headers;\n    if (headers) {\n      Object.keys(headers).forEach((name) => {\n        xhr.setRequestHeader(name, headers[name]);\n      });\n    }\n    // @ts-ignore\n    xhr.send(config.body as XMLHttpRequestBodyInit);\n  });\n}\n\nfunction getMimeTypeFromUrl(url: string) {\n  const extname = url.substring(url.lastIndexOf(\".\") + 1);\n  return mimeType[extname];\n}\n\nexport class MultiExecutor {\n  private _timeoutId: number = -100;\n  private _currentCount = 0;\n  constructor(\n    private execFunc: (count?: number) => Promise<any>,\n    private totalCount: number,\n    private interval: number\n  ) {\n    this.exec = this.exec.bind(this);\n  }\n\n  private done: Function;\n  start(done?: Function): void {\n    this.done = done;\n    this.exec();\n  }\n\n  stop(): void {\n    clearTimeout(this._timeoutId);\n  }\n\n  private exec(): void {\n    if (this._currentCount >= this.totalCount) {\n      this.done && this.done();\n      return;\n    }\n    this._currentCount++;\n    this.execFunc(this._currentCount).then(() => {\n      //@ts-ignore\n      this._timeoutId = setTimeout(this.exec, this.interval);\n    });\n  }\n}\n","import { AssetPromise } from \"./AssetPromise\";\nimport { LoadItem } from \"./LoadItem\";\nimport { request, RequestConfig } from \"./request\";\nimport { ResourceManager } from \"./ResourceManager\";\n/**\n * Loader abstract class.\n */\nexport abstract class Loader<T> {\n  /**\n   * Register a class with a string name for serialization and deserialization.\n   * @param key - class name\n   * @param obj - class object\n   */\n  public static registerClass(className: string, classDefine: { new (...args: any): any }) {\n    this._engineObjects[className] = classDefine;\n  }\n\n  /**\n   * Get the class object by class name.\n   * @param key - class name\n   * @returns class object\n   */\n  public static getClass(className: string): { new (...args: any): any } {\n    return this._engineObjects[className];\n  }\n\n  private static _engineObjects: { [key: string]: any } = {};\n\n  constructor(public readonly useCache: boolean) {}\n\n  request: <U>(url: string, config: RequestConfig) => AssetPromise<U> = request;\n  abstract load(item: LoadItem, resourceManager: ResourceManager): AssetPromise<T> | Record<string, AssetPromise<any>>;\n}\n","/**\n * Asset Type.\n */\nexport enum AssetType {\n  /**\n   * Plain text.\n   * @remarks Will not be cached based on url in ResourceManager.\n   */\n  Text = \"text\",\n  /**\n   * JSON.\n   * @remarks Will not be cached based on url in ResourceManager.\n   */\n  JSON = \"json\",\n  /**\n   * ArrayBuffer.\n   * @remarks Will not be cached based on url in ResourceManager.\n   */\n  Buffer = \"buffer\",\n  /** 2D Texture. */\n  Texture2D = \"texture2d\",\n  /** Cube Texture. */\n  TextureCube = \"texture-cube\",\n  /** Material. */\n  Material = \"material\",\n  /** Mesh. */\n  Mesh = \"mesh\",\n  /** AnimationClip. */\n  AnimationClip = \"AnimationClip\",\n  /** AnimatorController. */\n  AnimatorController = \"AnimatorController\",\n  /** Prefab.*/\n  Prefab = \"prefab\",\n  /** Compress Texture. */\n  KTX = \"ktx\",\n  /** Cube Compress Texture. */\n  KTXCube = \"ktx-cube\",\n  /** Sprite. */\n  Sprite = \"sprite\",\n  /** Sprite Atlas. */\n  SpriteAtlas = \"sprite-atlas\",\n  /** Ambient light. */\n  Env = \"environment\",\n  /** Scene. */\n  Scene = \"scene\",\n  /** HDR to cube. */\n  HDR = \"HDR\",\n  /** Font. */\n  Font = \"font\",\n  /** Source Font, include ttf、 otf and woff. */\n  SourceFont = \"source-font\"\n}\n","/**\n * Alpha blend mode.\n */\nexport enum BlendMode {\n  /** SRC ALPHA * SRC + (1 - SRC ALPHA) * DEST */\n  Normal,\n  /** SRC ALPHA * SRC + ONE * DEST */\n  Additive\n}\n","/**\n * Set which face for render.\n */\nexport enum RenderFace {\n  /** Render front face. */\n  Front,\n  /** Render back face. */\n  Back,\n  /** Render double face. */\n  Double\n}\n","import { Engine } from \"../Engine\";\nimport { BlendFactor, BlendOperation, CullMode, Shader } from \"../shader\";\nimport { RenderQueueType } from \"../shader/enums/RenderQueueType\";\nimport { ShaderMacro } from \"../shader/ShaderMacro\";\nimport { RenderState } from \"../shader/state/RenderState\";\nimport { BlendMode } from \"./enums/BlendMode\";\nimport { RenderFace } from \"./enums/RenderFace\";\nimport { Material } from \"./Material\";\n\nexport class BaseMaterial extends Material {\n  protected static _baseColorProp = Shader.getPropertyByName(\"u_baseColor\");\n  protected static _baseTextureProp = Shader.getPropertyByName(\"u_baseTexture\");\n  protected static _baseTextureMacro: ShaderMacro = Shader.getMacroByName(\"BASETEXTURE\");\n  protected static _tilingOffsetProp = Shader.getPropertyByName(\"u_tilingOffset\");\n  protected static _normalTextureProp = Shader.getPropertyByName(\"u_normalTexture\");\n  protected static _normalIntensityProp = Shader.getPropertyByName(\"u_normalIntensity\");\n  protected static _normalTextureMacro: ShaderMacro = Shader.getMacroByName(\"NORMALTEXTURE\");\n  protected static _emissiveColorProp = Shader.getPropertyByName(\"u_emissiveColor\");\n  protected static _emissiveTextureProp = Shader.getPropertyByName(\"u_emissiveTexture\");\n  protected static _emissiveTextureMacro: ShaderMacro = Shader.getMacroByName(\"EMISSIVETEXTURE\");\n  protected static _transparentMacro: ShaderMacro = Shader.getMacroByName(\"OASIS_TRANSPARENT\");\n\n  private static _alphaCutoffProp = Shader.getPropertyByName(\"u_alphaCutoff\");\n  private static _alphaCutoffMacro: ShaderMacro = Shader.getMacroByName(\"ALPHA_CUTOFF\");\n\n  private _renderFace: RenderFace = RenderFace.Front;\n  private _isTransparent: boolean = false;\n  private _blendMode: BlendMode = BlendMode.Normal;\n\n  /**\n   * Shader used by the material.\n   */\n  get shader(): Shader {\n    return this._shader;\n  }\n\n  set shader(value: Shader) {\n    this._shader = value;\n\n    const renderStates = this._renderStates;\n    const lastStatesCount = renderStates.length;\n    const passCount = value.passes.length;\n\n    if (lastStatesCount < passCount) {\n      for (let i = lastStatesCount; i < passCount; i++) {\n        renderStates.push(new RenderState());\n        this.setBlendMode(i, BlendMode.Normal);\n      }\n    } else {\n      renderStates.length = passCount;\n    }\n  }\n\n  /**\n   * Whethor transparent of first shader pass render state.\n   */\n  get isTransparent(): boolean {\n    return this._isTransparent;\n  }\n\n  set isTransparent(value: boolean) {\n    if (value !== this._isTransparent) {\n      this.setIsTransparent(0, value);\n      this._isTransparent = value;\n    }\n  }\n\n  /**\n   * Blend mode of first shader pass render state.\n   * @remarks Only take effect when `isTransparent` is `true`.\n   */\n  get blendMode(): BlendMode {\n    return this._blendMode;\n  }\n\n  set blendMode(value: BlendMode) {\n    if (value !== this._blendMode) {\n      this.setBlendMode(0, value);\n      this._blendMode = value;\n    }\n  }\n\n  /**\n   * Alpha cutoff value.\n   * @remarks\n   * Fragments with alpha channel lower than cutoff value will be discarded.\n   * `0` means no fragment will be discarded.\n   */\n  get alphaCutoff(): number {\n    return this.shaderData.getFloat(BaseMaterial._alphaCutoffProp);\n  }\n\n  set alphaCutoff(value: number) {\n    const { shaderData } = this;\n    if (shaderData.getFloat(BaseMaterial._alphaCutoffProp) !== value) {\n      if (value) {\n        shaderData.enableMacro(BaseMaterial._alphaCutoffMacro);\n      } else {\n        shaderData.disableMacro(BaseMaterial._alphaCutoffMacro);\n      }\n\n      const { renderStates } = this;\n      for (let i = 0, n = renderStates.length; i < n; i++) {\n        const renderState = renderStates[i];\n        if (value > 0) {\n          renderState.renderQueueType = renderState.blendState.targetBlendState.enabled\n            ? RenderQueueType.Transparent\n            : RenderQueueType.AlphaTest;\n        } else {\n          renderState.renderQueueType = renderState.blendState.targetBlendState.enabled\n            ? RenderQueueType.Transparent\n            : RenderQueueType.Opaque;\n        }\n      }\n\n      shaderData.setFloat(BaseMaterial._alphaCutoffProp, value);\n    }\n  }\n\n  /**\n   * Face for render of first shader pass render state.\n   */\n  get renderFace(): RenderFace {\n    return this._renderFace;\n  }\n\n  set renderFace(value: RenderFace) {\n    if (value !== this._renderFace) {\n      this.setRenderFace(0, value);\n      this._renderFace = value;\n    }\n  }\n\n  /**\n   * Create a BaseMaterial instance.\n   * @param engine - Engine to which the material belongs\n   * @param shader - Shader used by the material\n   */\n  constructor(engine: Engine, shader: Shader) {\n    super(engine, shader);\n    this.shaderData.setFloat(BaseMaterial._alphaCutoffProp, 0);\n  }\n\n  /**\n   * Set if is transparent of the shader pass render state.\n   * @param passIndex - Shader pass index\n   * @param isTransparent - If is transparent\n   */\n  setIsTransparent(passIndex: number, isTransparent: boolean): void {\n    const { renderStates } = this;\n    if (renderStates.length < passIndex) {\n      throw \"Pass should less than pass count.\";\n    }\n    const renderState = renderStates[passIndex];\n\n    if (isTransparent) {\n      renderState.blendState.targetBlendState.enabled = true;\n      renderState.depthState.writeEnabled = false;\n      renderState.renderQueueType = RenderQueueType.Transparent;\n      this.shaderData.enableMacro(BaseMaterial._transparentMacro);\n    } else {\n      renderState.blendState.targetBlendState.enabled = false;\n      renderState.depthState.writeEnabled = true;\n      renderState.renderQueueType = this.shaderData.getFloat(BaseMaterial._alphaCutoffProp)\n        ? RenderQueueType.AlphaTest\n        : RenderQueueType.Opaque;\n      this.shaderData.disableMacro(BaseMaterial._transparentMacro);\n    }\n  }\n\n  /**\n   * Set the blend mode of shader pass render state.\n   * @param passIndex - Shader pass index\n   * @param blendMode - Blend mode\n   */\n  setBlendMode(passIndex: number, blendMode: BlendMode): void {\n    const { renderStates } = this;\n    if (renderStates.length < passIndex) {\n      throw \"Pass should less than pass count.\";\n    }\n    const { targetBlendState: target } = renderStates[passIndex].blendState;\n\n    switch (blendMode) {\n      case BlendMode.Normal:\n        target.sourceColorBlendFactor = BlendFactor.SourceAlpha;\n        target.destinationColorBlendFactor = BlendFactor.OneMinusSourceAlpha;\n        target.sourceAlphaBlendFactor = BlendFactor.One;\n        target.destinationAlphaBlendFactor = BlendFactor.OneMinusSourceAlpha;\n        target.colorBlendOperation = target.alphaBlendOperation = BlendOperation.Add;\n        break;\n      case BlendMode.Additive:\n        target.sourceColorBlendFactor = BlendFactor.SourceAlpha;\n        target.destinationColorBlendFactor = BlendFactor.One;\n        target.sourceAlphaBlendFactor = BlendFactor.One;\n        target.destinationAlphaBlendFactor = BlendFactor.OneMinusSourceAlpha;\n        target.colorBlendOperation = target.alphaBlendOperation = BlendOperation.Add;\n        break;\n    }\n  }\n\n  /**\n   * Set the render face of shader pass render state.\n   * @param passIndex - Shader pass index\n   * @param renderFace - Render face\n   */\n  setRenderFace(passIndex: number, renderFace: RenderFace): void {\n    const { renderStates } = this;\n    if (renderStates.length < passIndex) {\n      throw \"Pass should less than pass count.\";\n    }\n\n    switch (renderFace) {\n      case RenderFace.Front:\n        renderStates[passIndex].rasterState.cullMode = CullMode.Back;\n        break;\n      case RenderFace.Back:\n        renderStates[passIndex].rasterState.cullMode = CullMode.Front;\n        break;\n      case RenderFace.Double:\n        renderStates[passIndex].rasterState.cullMode = CullMode.Off;\n        break;\n    }\n  }\n\n  /**\n   * @override\n   * Clone and return the instance.\n   */\n  clone(): BaseMaterial {\n    const dest = new BaseMaterial(this._engine, this.shader);\n    this.cloneTo(dest);\n    return dest;\n  }\n\n  /**\n   * @override\n   * Clone to the target material.\n   * @param target - target material\n   */\n  cloneTo(target: BaseMaterial): void {\n    super.cloneTo(target);\n    target._renderFace = this._renderFace;\n    target._isTransparent = this._isTransparent;\n    target._blendMode = this._blendMode;\n  }\n}\n","import { Color, Vector4 } from \"@galacean/engine-math\";\nimport { Engine } from \"../Engine\";\nimport { Shader } from \"../shader/Shader\";\nimport { Texture2D } from \"../texture/Texture2D\";\nimport { BaseMaterial } from \"./BaseMaterial\";\n\n/**\n * Blinn-phong Material.\n */\nexport class BlinnPhongMaterial extends BaseMaterial {\n  private static _specularColorProp = Shader.getPropertyByName(\"u_specularColor\");\n  private static _shininessProp = Shader.getPropertyByName(\"u_shininess\");\n  private static _specularTextureProp = Shader.getPropertyByName(\"u_specularTexture\");\n\n  /**\n   * Base color.\n   */\n  get baseColor(): Color {\n    return this.shaderData.getColor(BlinnPhongMaterial._baseColorProp);\n  }\n\n  set baseColor(value: Color) {\n    const baseColor = this.shaderData.getColor(BlinnPhongMaterial._baseColorProp);\n    if (value !== baseColor) {\n      baseColor.copyFrom(value);\n    }\n  }\n\n  /**\n   * Base texture.\n   */\n  get baseTexture(): Texture2D {\n    return <Texture2D>this.shaderData.getTexture(BlinnPhongMaterial._baseTextureProp);\n  }\n\n  set baseTexture(value: Texture2D) {\n    this.shaderData.setTexture(BlinnPhongMaterial._baseTextureProp, value);\n    if (value) {\n      this.shaderData.enableMacro(BlinnPhongMaterial._baseTextureMacro);\n    } else {\n      this.shaderData.disableMacro(BlinnPhongMaterial._baseTextureMacro);\n    }\n  }\n\n  /**\n   * Specular color.\n   */\n  get specularColor(): Color {\n    return this.shaderData.getColor(BlinnPhongMaterial._specularColorProp);\n  }\n\n  set specularColor(value: Color) {\n    const specularColor = this.shaderData.getColor(BlinnPhongMaterial._specularColorProp);\n    if (value !== specularColor) {\n      specularColor.copyFrom(value);\n    }\n  }\n\n  /**\n   * Specular texture.\n   */\n  get specularTexture(): Texture2D {\n    return <Texture2D>this.shaderData.getTexture(BlinnPhongMaterial._specularTextureProp);\n  }\n\n  set specularTexture(value: Texture2D) {\n    this.shaderData.setTexture(BlinnPhongMaterial._specularTextureProp, value);\n    if (value) {\n      this.shaderData.enableMacro(\"O3_SPECULAR_TEXTURE\");\n    } else {\n      this.shaderData.disableMacro(\"O3_SPECULAR_TEXTURE\");\n    }\n  }\n\n  /**\n   * Emissive color.\n   */\n  get emissiveColor(): Color {\n    return this.shaderData.getColor(BlinnPhongMaterial._emissiveColorProp);\n  }\n\n  set emissiveColor(value: Color) {\n    const emissiveColor = this.shaderData.getColor(BlinnPhongMaterial._emissiveColorProp);\n    if (value !== emissiveColor) {\n      emissiveColor.copyFrom(value);\n    }\n  }\n\n  /**\n   * Emissive texture.\n   */\n  get emissiveTexture(): Texture2D {\n    return <Texture2D>this.shaderData.getTexture(BlinnPhongMaterial._emissiveTextureProp);\n  }\n\n  set emissiveTexture(value: Texture2D) {\n    this.shaderData.setTexture(BlinnPhongMaterial._emissiveTextureProp, value);\n    if (value) {\n      this.shaderData.enableMacro(BlinnPhongMaterial._emissiveTextureMacro);\n    } else {\n      this.shaderData.disableMacro(BlinnPhongMaterial._emissiveTextureMacro);\n    }\n  }\n\n  /**\n   * Normal texture.\n   */\n  get normalTexture(): Texture2D {\n    return <Texture2D>this.shaderData.getTexture(BlinnPhongMaterial._normalTextureProp);\n  }\n\n  set normalTexture(value: Texture2D) {\n    this.shaderData.setTexture(BlinnPhongMaterial._normalTextureProp, value);\n    if (value) {\n      this.shaderData.enableMacro(BlinnPhongMaterial._normalTextureMacro);\n    } else {\n      this.shaderData.disableMacro(BlinnPhongMaterial._normalTextureMacro);\n    }\n  }\n\n  /**\n   * Normal texture intensity.\n   */\n  get normalIntensity(): number {\n    return this.shaderData.getFloat(BlinnPhongMaterial._normalIntensityProp);\n  }\n\n  set normalIntensity(value: number) {\n    this.shaderData.setFloat(BlinnPhongMaterial._normalIntensityProp, value);\n  }\n\n  /**\n   * Set the specular reflection coefficient, the larger the value, the more convergent the specular reflection effect.\n   */\n  get shininess(): number {\n    return this.shaderData.getFloat(BlinnPhongMaterial._shininessProp);\n  }\n\n  set shininess(value: number) {\n    this.shaderData.setFloat(BlinnPhongMaterial._shininessProp, Math.max(value, 1e-4));\n  }\n\n  /**\n   * Tiling and offset of main textures.\n   */\n  get tilingOffset(): Vector4 {\n    return this.shaderData.getVector4(BlinnPhongMaterial._tilingOffsetProp);\n  }\n\n  set tilingOffset(value: Vector4) {\n    const tilingOffset = this.shaderData.getVector4(BlinnPhongMaterial._tilingOffsetProp);\n    if (value !== tilingOffset) {\n      tilingOffset.copyFrom(value);\n    }\n  }\n\n  /**\n   * Create a BlinnPhong material instance.\n   * @param engine - Engine to which the material belongs\n   */\n  constructor(engine: Engine) {\n    super(engine, Shader.find(\"blinn-phong\"));\n\n    const shaderData = this.shaderData;\n\n    shaderData.enableMacro(\"O3_NEED_WORLDPOS\");\n    shaderData.enableMacro(\"O3_NEED_TILINGOFFSET\");\n\n    shaderData.setColor(BlinnPhongMaterial._baseColorProp, new Color(1, 1, 1, 1));\n    shaderData.setColor(BlinnPhongMaterial._specularColorProp, new Color(1, 1, 1, 1));\n    shaderData.setColor(BlinnPhongMaterial._emissiveColorProp, new Color(0, 0, 0, 1));\n    shaderData.setVector4(BlinnPhongMaterial._tilingOffsetProp, new Vector4(1, 1, 0, 0));\n    shaderData.setFloat(BlinnPhongMaterial._shininessProp, 16);\n    shaderData.setFloat(BlinnPhongMaterial._normalIntensityProp, 1);\n  }\n\n  /**\n   * @override\n   */\n  clone(): BlinnPhongMaterial {\n    var dest: BlinnPhongMaterial = new BlinnPhongMaterial(this._engine);\n    this.cloneTo(dest);\n    return dest;\n  }\n}\n","/**\n * Texture UV coordinate.\n */\nexport enum TextureCoordinate {\n  UV0 = 0,\n  UV1,\n  UV2,\n  UV3,\n  UV4,\n  UV5,\n  UV6,\n  UV7\n}\n","import { Color, Vector4 } from \"@galacean/engine-math\";\nimport { Logger } from \"..\";\nimport { Engine } from \"../Engine\";\nimport { Shader } from \"../shader/Shader\";\nimport { Texture2D } from \"../texture/Texture2D\";\nimport { BaseMaterial } from \"./BaseMaterial\";\nimport { TextureCoordinate } from \"./enums/TextureCoordinate\";\n\n/**\n * PBR (Physically-Based Rendering) Material.\n */\nexport abstract class PBRBaseMaterial extends BaseMaterial {\n  private static _occlusionTextureIntensityProp = Shader.getPropertyByName(\"u_occlusionIntensity\");\n  private static _occlusionTextureCoordProp = Shader.getPropertyByName(\"u_occlusionTextureCoord\");\n  private static _occlusionTextureProp = Shader.getPropertyByName(\"u_occlusionTexture\");\n\n  private static _clearCoatProp = Shader.getPropertyByName(\"u_clearCoat\");\n  private static _clearCoatTextureProp = Shader.getPropertyByName(\"u_clearCoatTexture\");\n  private static _clearCoatRoughnessProp = Shader.getPropertyByName(\"u_clearCoatRoughness\");\n  private static _clearCoatRoughnessTextureProp = Shader.getPropertyByName(\"u_clearCoatRoughnessTexture\");\n  private static _clearCoatNormalTextureProp = Shader.getPropertyByName(\"u_clearCoatNormalTexture\");\n\n  /**\n   * Base color.\n   */\n  get baseColor(): Color {\n    return this.shaderData.getColor(PBRBaseMaterial._baseColorProp);\n  }\n\n  set baseColor(value: Color) {\n    const baseColor = this.shaderData.getColor(PBRBaseMaterial._baseColorProp);\n    if (value !== baseColor) {\n      baseColor.copyFrom(value);\n    }\n  }\n\n  /**\n   * Base texture.\n   */\n  get baseTexture(): Texture2D {\n    return <Texture2D>this.shaderData.getTexture(PBRBaseMaterial._baseTextureProp);\n  }\n\n  set baseTexture(value: Texture2D) {\n    this.shaderData.setTexture(PBRBaseMaterial._baseTextureProp, value);\n    if (value) {\n      this.shaderData.enableMacro(PBRBaseMaterial._baseTextureMacro);\n    } else {\n      this.shaderData.disableMacro(PBRBaseMaterial._baseTextureMacro);\n    }\n  }\n\n  /**\n   * Normal texture.\n   */\n  get normalTexture(): Texture2D {\n    return <Texture2D>this.shaderData.getTexture(PBRBaseMaterial._normalTextureProp);\n  }\n\n  set normalTexture(value: Texture2D) {\n    this.shaderData.setTexture(PBRBaseMaterial._normalTextureProp, value);\n    if (value) {\n      this.shaderData.enableMacro(PBRBaseMaterial._normalTextureMacro);\n    } else {\n      this.shaderData.disableMacro(PBRBaseMaterial._normalTextureMacro);\n    }\n  }\n\n  /**\n   * Normal texture intensity.\n   */\n  get normalTextureIntensity(): number {\n    return this.shaderData.getFloat(PBRBaseMaterial._normalIntensityProp);\n  }\n\n  set normalTextureIntensity(value: number) {\n    this.shaderData.setFloat(PBRBaseMaterial._normalIntensityProp, value);\n  }\n\n  /**\n   * Emissive color.\n   */\n  get emissiveColor(): Color {\n    return this.shaderData.getColor(PBRBaseMaterial._emissiveColorProp);\n  }\n\n  set emissiveColor(value: Color) {\n    const emissiveColor = this.shaderData.getColor(PBRBaseMaterial._emissiveColorProp);\n    if (value !== emissiveColor) {\n      emissiveColor.copyFrom(value);\n    }\n  }\n\n  /**\n   * Emissive texture.\n   */\n  get emissiveTexture(): Texture2D {\n    return <Texture2D>this.shaderData.getTexture(PBRBaseMaterial._emissiveTextureProp);\n  }\n\n  set emissiveTexture(value: Texture2D) {\n    this.shaderData.setTexture(PBRBaseMaterial._emissiveTextureProp, value);\n    if (value) {\n      this.shaderData.enableMacro(PBRBaseMaterial._emissiveTextureMacro);\n    } else {\n      this.shaderData.disableMacro(PBRBaseMaterial._emissiveTextureMacro);\n    }\n  }\n\n  /**\n   * Occlusion texture.\n   */\n  get occlusionTexture(): Texture2D {\n    return <Texture2D>this.shaderData.getTexture(PBRBaseMaterial._occlusionTextureProp);\n  }\n\n  set occlusionTexture(value: Texture2D) {\n    this.shaderData.setTexture(PBRBaseMaterial._occlusionTextureProp, value);\n    if (value) {\n      this.shaderData.enableMacro(\"OCCLUSIONTEXTURE\");\n    } else {\n      this.shaderData.disableMacro(\"OCCLUSIONTEXTURE\");\n    }\n  }\n\n  /**\n   * Occlusion texture intensity.\n   */\n  get occlusionTextureIntensity(): number {\n    return this.shaderData.getFloat(PBRBaseMaterial._occlusionTextureIntensityProp);\n  }\n\n  set occlusionTextureIntensity(value: number) {\n    this.shaderData.setFloat(PBRBaseMaterial._occlusionTextureIntensityProp, value);\n  }\n\n  /**\n   * Occlusion texture uv coordinate.\n   * @remarks Must be UV0 or UV1.\n   */\n  get occlusionTextureCoord(): TextureCoordinate {\n    return this.shaderData.getFloat(PBRBaseMaterial._occlusionTextureCoordProp);\n  }\n\n  set occlusionTextureCoord(value: TextureCoordinate) {\n    if (value > TextureCoordinate.UV1) {\n      Logger.warn(\"Occlusion texture uv coordinate must be UV0 or UV1.\");\n    }\n    this.shaderData.setFloat(PBRBaseMaterial._occlusionTextureCoordProp, value);\n  }\n\n  /**\n   * Tiling and offset of main textures.\n   */\n  get tilingOffset(): Vector4 {\n    return this.shaderData.getVector4(PBRBaseMaterial._tilingOffsetProp);\n  }\n\n  set tilingOffset(value: Vector4) {\n    const tilingOffset = this.shaderData.getVector4(PBRBaseMaterial._tilingOffsetProp);\n    if (value !== tilingOffset) {\n      tilingOffset.copyFrom(value);\n    }\n  }\n\n  /**\n   * The clearCoat layer intensity, default 0.\n   */\n  get clearCoat(): number {\n    return this.shaderData.getFloat(PBRBaseMaterial._clearCoatProp);\n  }\n\n  set clearCoat(value: number) {\n    if (!!this.shaderData.getFloat(PBRBaseMaterial._clearCoatProp) !== !!value) {\n      if (value === 0) {\n        this.shaderData.disableMacro(\"CLEARCOAT\");\n      } else {\n        this.shaderData.enableMacro(\"CLEARCOAT\");\n      }\n    }\n    this.shaderData.setFloat(PBRBaseMaterial._clearCoatProp, value);\n  }\n\n  /**\n   * The clearCoat layer intensity texture.\n   */\n  get clearCoatTexture(): Texture2D {\n    return <Texture2D>this.shaderData.getTexture(PBRBaseMaterial._clearCoatTextureProp);\n  }\n\n  set clearCoatTexture(value: Texture2D) {\n    this.shaderData.setTexture(PBRBaseMaterial._clearCoatTextureProp, value);\n\n    if (value) {\n      this.shaderData.enableMacro(\"HAS_CLEARCOATTEXTURE\");\n    } else {\n      this.shaderData.disableMacro(\"HAS_CLEARCOATTEXTURE\");\n    }\n  }\n\n  /**\n   * The clearCoat layer roughness, default 0.\n   */\n  get clearCoatRoughness(): number {\n    return this.shaderData.getFloat(PBRBaseMaterial._clearCoatRoughnessProp);\n  }\n\n  set clearCoatRoughness(value: number) {\n    this.shaderData.setFloat(PBRBaseMaterial._clearCoatRoughnessProp, value);\n  }\n\n  /**\n   * The clearCoat layer roughness texture.\n   */\n  get clearCoatRoughnessTexture(): Texture2D {\n    return <Texture2D>this.shaderData.getTexture(PBRBaseMaterial._clearCoatRoughnessTextureProp);\n  }\n\n  set clearCoatRoughnessTexture(value: Texture2D) {\n    this.shaderData.setTexture(PBRBaseMaterial._clearCoatRoughnessTextureProp, value);\n\n    if (value) {\n      this.shaderData.enableMacro(\"HAS_CLEARCOATROUGHNESSTEXTURE\");\n    } else {\n      this.shaderData.disableMacro(\"HAS_CLEARCOATROUGHNESSTEXTURE\");\n    }\n  }\n\n  /**\n   * The clearCoat normal map texture.\n   */\n  get clearCoatNormalTexture(): Texture2D {\n    return <Texture2D>this.shaderData.getTexture(PBRBaseMaterial._clearCoatNormalTextureProp);\n  }\n\n  set clearCoatNormalTexture(value: Texture2D) {\n    this.shaderData.setTexture(PBRBaseMaterial._clearCoatNormalTextureProp, value);\n\n    if (value) {\n      this.shaderData.enableMacro(\"HAS_CLEARCOATNORMALTEXTURE\");\n    } else {\n      this.shaderData.disableMacro(\"HAS_CLEARCOATNORMALTEXTURE\");\n    }\n  }\n\n  /**\n   * Create a pbr base material instance.\n   * @param engine - Engine to which the material belongs\n   * @param shader - Shader used by the material\n   */\n  protected constructor(engine: Engine, shader: Shader) {\n    super(engine, shader);\n\n    const shaderData = this.shaderData;\n\n    shaderData.enableMacro(\"O3_NEED_WORLDPOS\");\n    shaderData.enableMacro(\"O3_NEED_TILINGOFFSET\");\n\n    shaderData.setColor(PBRBaseMaterial._baseColorProp, new Color(1, 1, 1, 1));\n    shaderData.setColor(PBRBaseMaterial._emissiveColorProp, new Color(0, 0, 0, 1));\n    shaderData.setVector4(PBRBaseMaterial._tilingOffsetProp, new Vector4(1, 1, 0, 0));\n\n    shaderData.setFloat(PBRBaseMaterial._normalIntensityProp, 1);\n    shaderData.setFloat(PBRBaseMaterial._occlusionTextureIntensityProp, 1);\n    shaderData.setFloat(PBRBaseMaterial._occlusionTextureCoordProp, TextureCoordinate.UV0);\n\n    shaderData.setFloat(PBRBaseMaterial._clearCoatProp, 0);\n    shaderData.setFloat(PBRBaseMaterial._clearCoatRoughnessProp, 0);\n  }\n}\n","import { Engine } from \"../Engine\";\nimport { Shader } from \"../shader/Shader\";\nimport { Texture2D } from \"../texture/Texture2D\";\nimport { PBRBaseMaterial } from \"./PBRBaseMaterial\";\n\n/**\n * PBR (Metallic-Roughness Workflow) Material.\n */\nexport class PBRMaterial extends PBRBaseMaterial {\n  private static _metallicProp = Shader.getPropertyByName(\"u_metal\");\n  private static _roughnessProp = Shader.getPropertyByName(\"u_roughness\");\n  private static _roughnessMetallicTextureProp = Shader.getPropertyByName(\"u_roughnessMetallicTexture\");\n\n  private static _iorProp = Shader.getPropertyByName(\"material_IOR\");\n\n  /**\n   * Index Of Refraction.\n   * @defaultValue `1.5`\n   */\n  get ior(): number {\n    return this.shaderData.getFloat(PBRMaterial._iorProp);\n  }\n\n  set ior(v: number) {\n    this.shaderData.setFloat(PBRMaterial._iorProp, Math.max(v, 0));\n  }\n\n  /**\n   * Metallic.\n   * @defaultValue `1.0`\n   */\n  get metallic(): number {\n    return this.shaderData.getFloat(PBRMaterial._metallicProp);\n  }\n\n  set metallic(value: number) {\n    this.shaderData.setFloat(PBRMaterial._metallicProp, value);\n  }\n\n  /**\n   * Roughness. default 1.0.\n   * @defaultValue `1.0`\n   */\n  get roughness(): number {\n    return this.shaderData.getFloat(PBRMaterial._roughnessProp);\n  }\n\n  set roughness(value: number) {\n    this.shaderData.setFloat(PBRMaterial._roughnessProp, value);\n  }\n\n  /**\n   * Roughness metallic texture.\n   * @remarks G channel is roughness, B channel is metallic\n   */\n  get roughnessMetallicTexture(): Texture2D {\n    return <Texture2D>this.shaderData.getTexture(PBRMaterial._roughnessMetallicTextureProp);\n  }\n\n  set roughnessMetallicTexture(value: Texture2D) {\n    this.shaderData.setTexture(PBRMaterial._roughnessMetallicTextureProp, value);\n    if (value) {\n      this.shaderData.enableMacro(\"ROUGHNESSMETALLICTEXTURE\");\n    } else {\n      this.shaderData.disableMacro(\"ROUGHNESSMETALLICTEXTURE\");\n    }\n  }\n\n  /**\n   * Create a pbr metallic-roughness workflow material instance.\n   * @param engine - Engine to which the material belongs\n   */\n  constructor(engine: Engine) {\n    super(engine, Shader.find(\"pbr\"));\n    this.shaderData.setFloat(PBRMaterial._metallicProp, 1);\n    this.shaderData.setFloat(PBRMaterial._roughnessProp, 1);\n    this.shaderData.setFloat(PBRMaterial._iorProp, 1.5);\n  }\n\n  /**\n   * @override\n   */\n  clone(): PBRMaterial {\n    const dest = new PBRMaterial(this._engine);\n    this.cloneTo(dest);\n    return dest;\n  }\n}\n","import { Color } from \"@galacean/engine-math\";\nimport { Engine } from \"../Engine\";\nimport { Shader } from \"../shader/Shader\";\nimport { ShaderMacro } from \"../shader/ShaderMacro\";\nimport { Texture2D } from \"../texture/Texture2D\";\nimport { PBRBaseMaterial } from \"./PBRBaseMaterial\";\n\n/**\n * PBR (Specular-Glossiness Workflow) Material.\n */\nexport class PBRSpecularMaterial extends PBRBaseMaterial {\n  private static _specularColorProp = Shader.getPropertyByName(\"u_PBRSpecularColor\");\n  private static _glossinessProp = Shader.getPropertyByName(\"u_glossiness\");\n  private static _specularGlossinessTextureProp = Shader.getPropertyByName(\"u_specularGlossinessTexture\");\n  private static _specularGlossinessTextureMacro: ShaderMacro = Shader.getMacroByName(\"SPECULARGLOSSINESSTEXTURE\");\n\n  /**\n   * Specular color.\n   */\n  get specularColor(): Color {\n    return this.shaderData.getColor(PBRSpecularMaterial._specularColorProp);\n  }\n\n  set specularColor(value: Color) {\n    const specularColor = this.shaderData.getColor(PBRSpecularMaterial._specularColorProp);\n    if (value !== specularColor) {\n      specularColor.copyFrom(value);\n    }\n  }\n\n  /**\n   * Glossiness.\n   */\n  get glossiness(): number {\n    return this.shaderData.getFloat(PBRSpecularMaterial._glossinessProp);\n  }\n\n  set glossiness(value: number) {\n    this.shaderData.setFloat(PBRSpecularMaterial._glossinessProp, value);\n  }\n\n  /**\n   * Specular glossiness texture.\n   * @remarks RGB is specular, A is glossiness\n   */\n  get specularGlossinessTexture(): Texture2D {\n    return <Texture2D>this.shaderData.getTexture(PBRSpecularMaterial._specularGlossinessTextureProp);\n  }\n\n  set specularGlossinessTexture(value: Texture2D) {\n    this.shaderData.setTexture(PBRSpecularMaterial._specularGlossinessTextureProp, value);\n    if (value) {\n      this.shaderData.enableMacro(PBRSpecularMaterial._specularGlossinessTextureMacro);\n    } else {\n      this.shaderData.disableMacro(PBRSpecularMaterial._specularGlossinessTextureMacro);\n    }\n  }\n\n  /**\n   * Create a pbr specular-glossiness workflow material instance.\n   * @param engine - Engine to which the material belongs\n   */\n  constructor(engine: Engine) {\n    super(engine, Shader.find(\"pbr-specular\"));\n\n    this.shaderData.setColor(PBRSpecularMaterial._specularColorProp, new Color(1, 1, 1, 1));\n    this.shaderData.setFloat(PBRSpecularMaterial._glossinessProp, 1.0);\n  }\n\n  /**\n   * @override\n   */\n  clone(): PBRSpecularMaterial {\n    const dest = new PBRSpecularMaterial(this._engine);\n    this.cloneTo(dest);\n    return dest;\n  }\n}\n","import { Color, Vector4 } from \"@galacean/engine-math\";\nimport { Engine } from \"../Engine\";\nimport { Shader } from \"../shader/Shader\";\nimport { Texture2D } from \"../texture/Texture2D\";\nimport { BaseMaterial } from \"./BaseMaterial\";\n\n/**\n * Unlit Material.\n */\nexport class UnlitMaterial extends BaseMaterial {\n  /**\n   * Base color.\n   */\n  get baseColor(): Color {\n    return this.shaderData.getColor(UnlitMaterial._baseColorProp);\n  }\n\n  set baseColor(value: Color) {\n    const baseColor = this.shaderData.getColor(UnlitMaterial._baseColorProp);\n    if (value !== baseColor) {\n      baseColor.copyFrom(value);\n    }\n  }\n\n  /**\n   * Base texture.\n   */\n  get baseTexture(): Texture2D {\n    return <Texture2D>this.shaderData.getTexture(UnlitMaterial._baseTextureProp);\n  }\n\n  set baseTexture(value: Texture2D) {\n    this.shaderData.setTexture(UnlitMaterial._baseTextureProp, value);\n    if (value) {\n      this.shaderData.enableMacro(UnlitMaterial._baseTextureMacro);\n    } else {\n      this.shaderData.disableMacro(UnlitMaterial._baseTextureMacro);\n    }\n  }\n\n  /**\n   * Tiling and offset of main textures.\n   */\n  get tilingOffset(): Vector4 {\n    return this.shaderData.getVector4(UnlitMaterial._tilingOffsetProp);\n  }\n\n  set tilingOffset(value: Vector4) {\n    const tilingOffset = this.shaderData.getVector4(UnlitMaterial._tilingOffsetProp);\n    if (value !== tilingOffset) {\n      tilingOffset.copyFrom(value);\n    }\n  }\n\n  /**\n   * Create a unlit material instance.\n   * @param engine - Engine to which the material belongs\n   */\n  constructor(engine: Engine) {\n    super(engine, Shader.find(\"unlit\"));\n\n    const shaderData = this.shaderData;\n\n    shaderData.enableMacro(\"OMIT_NORMAL\");\n    shaderData.enableMacro(\"O3_NEED_TILINGOFFSET\");\n\n    shaderData.setColor(UnlitMaterial._baseColorProp, new Color(1, 1, 1, 1));\n    shaderData.setVector4(UnlitMaterial._tilingOffsetProp, new Vector4(1, 1, 0, 0));\n  }\n\n  /**\n   * @override\n   */\n  clone(): UnlitMaterial {\n    const dest = new UnlitMaterial(this._engine);\n    this.cloneTo(dest);\n    return dest;\n  }\n}\n","/**\n * The horizontal alignment of the text.\n */\nexport enum TextHorizontalAlignment {\n  /** Align left horizontally */\n  Left = 0,\n  /** Align center horizontally */\n  Center = 1,\n  /** Align right horizontally */\n  Right = 2\n}\n\n/**\n * The vertical alignment of the text.\n */\nexport enum TextVerticalAlignment {\n  /** Align top vertically */\n  Top = 0,\n  /** Align center vertically */\n  Center = 1,\n  /** Align bottom vertically */\n  Bottom = 2\n}\n","/**\n * The way to handle the situation where wrapped text is too tall to fit in the height.\n */\nexport enum OverflowMode {\n  /** Overflow when the text is too tall */\n  Overflow = 0,\n  /** Truncate with height when the text is too tall */\n  Truncate = 1\n}\n","/**\n * The style of the font.\n */\nexport enum FontStyle {\n  /** Set font without style */\n  None = 0x0,\n  /** Set font bold */\n  Bold = 0x1,\n  /** Set font italic */\n  Italic = 0x2\n}\n","import { RefObject } from \"../../asset/RefObject\";\nimport { Engine } from \"../../Engine\";\nimport { Sprite } from \"../sprite/Sprite\";\n\n/**\n * Sprite Atlas.\n */\nexport class SpriteAtlas extends RefObject {\n  private _sprites: Sprite[] = new Array<Sprite>();\n  private _spriteNamesToIndex: Record<string, number> = {};\n\n  /**\n   * All the sprites in the atlas.\n   */\n  get sprites(): Readonly<Sprite[]> {\n    return this._sprites;\n  }\n\n  /**\n   * Get the last sprite named 'name' from the atlas.\n   * @param name - The name of the sprite you want to find\n   * @returns The sprite you want to find\n   */\n  getSprite(name: string): Sprite {\n    const sprite = this._sprites[this._spriteNamesToIndex[name]];\n    if (!sprite) {\n      console.warn(\"There is no sprite named \" + name + \" in the atlas.\");\n    }\n    return sprite;\n  }\n\n  /**\n   * Get all the sprite named 'name' from the atlas.\n   * @param name - The name of the sprites you want to find\n   * @param outSprites - This array holds the sprites found\n   * @returns The sprites you want to find\n   */\n  getSprites(name: string, outSprites: Sprite[]): Sprite[] {\n    outSprites.length = 0;\n    let i = this._spriteNamesToIndex[name];\n    if (i !== undefined) {\n      const { _sprites } = this;\n      for (; i >= 0; i--) {\n        const sprite = _sprites[i];\n        sprite.name === name && outSprites.push(sprite);\n      }\n    } else {\n      console.warn(\"The name of the sprite you want to find is not exit in SpriteAtlas.\");\n    }\n    return outSprites;\n  }\n\n  /**\n   * Constructor a SpriteAtlas.\n   * @param engine - Engine to which the SpriteAtlas belongs\n   */\n  constructor(engine: Engine) {\n    super(engine);\n  }\n\n  /**\n   * @internal\n   */\n  _addSprite(sprite: Sprite): void {\n    this._spriteNamesToIndex[sprite.name] = this._sprites.push(sprite) - 1;\n  }\n\n  /**\n   * @override\n   */\n  _onDestroy(): void {\n    this._sprites = null;\n    this._spriteNamesToIndex = null;\n  }\n}\n","/**\n * Sprite's drawing mode enumeration.\n */\nexport enum SpriteDrawMode {\n  /** Overall scaling when modifying size. */\n  Simple,\n  /** When modifying the size, it is transformed according to the 9-slice settings (border). */\n  Sliced\n}\n","import { BoundingBox, MathUtil, Rect, Vector2, Vector4 } from \"@galacean/engine-math\";\nimport { RefObject } from \"../../asset/RefObject\";\nimport { Engine } from \"../../Engine\";\nimport { Texture2D } from \"../../texture/Texture2D\";\nimport { UpdateFlagManager } from \"../../UpdateFlagManager\";\nimport { SpriteModifyFlags } from \"../enums/SpriteModifyFlags\";\n\n/**\n * 2D sprite.\n */\nexport class Sprite extends RefObject {\n  /** The name of sprite. */\n  name: string;\n\n  private _automaticWidth: number = 0;\n  private _automaticHeight: number = 0;\n  private _customWidth: number = undefined;\n  private _customHeight: number = undefined;\n\n  private _positions: Vector2[] = [new Vector2(), new Vector2(), new Vector2(), new Vector2()];\n  private _uvs: Vector2[] = [new Vector2(), new Vector2(), new Vector2(), new Vector2()];\n  private _bounds: BoundingBox = new BoundingBox();\n\n  private _texture: Texture2D = null;\n  private _atlasRotated: boolean = false;\n  private _atlasRegion: Rect = new Rect(0, 0, 1, 1);\n  private _atlasRegionOffset: Vector4 = new Vector4(0, 0, 0, 0);\n\n  private _region: Rect = new Rect(0, 0, 1, 1);\n  private _pivot: Vector2 = new Vector2(0.5, 0.5);\n  private _border: Vector4 = new Vector4(0, 0, 0, 0);\n\n  private _dirtyUpdateFlag: SpriteUpdateFlags = SpriteUpdateFlags.all;\n\n  /** @internal */\n  _updateFlagManager: UpdateFlagManager = new UpdateFlagManager();\n\n  /**\n   * The reference to the used texture.\n   */\n  get texture(): Texture2D {\n    return this._texture;\n  }\n\n  set texture(value: Texture2D) {\n    if (this._texture !== value) {\n      this._texture = value;\n      this._dispatchSpriteChange(SpriteModifyFlags.texture);\n      if (this._customWidth === undefined || this._customHeight === undefined) {\n        this._dispatchSpriteChange(SpriteModifyFlags.size);\n      }\n    }\n  }\n\n  /**\n   * The width of the sprite (in world coordinates).\n   * \n   * @remarks\n   * If width is set, return the set value,\n   * otherwise return the width calculated according to `Texture.width`, `Sprite.region`, `Sprite.atlasRegion`, `Sprite.atlasRegionOffset` and `Engine._pixelsPerUnit`.\n   */\n  get width(): number {\n    if (this._customWidth !== undefined) {\n      return this._customWidth;\n    } else {\n      this._dirtyUpdateFlag & SpriteUpdateFlags.automaticSize && this._calDefaultSize();\n      return this._automaticWidth;\n    }\n  }\n\n  set width(value: number) {\n    if (this._customWidth !== value) {\n      this._customWidth = value;\n      this._dispatchSpriteChange(SpriteModifyFlags.size);\n    }\n  }\n\n  /**\n   * The height of the sprite (in world coordinates).\n   * \n   * @remarks\n   * If height is set, return the set value,\n   * otherwise return the height calculated according to `Texture.height`, `Sprite.region`, `Sprite.atlasRegion`, `Sprite.atlasRegionOffset` and `Engine._pixelsPerUnit`.\n   */\n  get height(): number {\n    if (this._customHeight !== undefined) {\n      return this._customHeight;\n    } else {\n      this._dirtyUpdateFlag & SpriteUpdateFlags.automaticSize && this._calDefaultSize();\n      return this._automaticHeight;\n    }\n  }\n\n  set height(value: number) {\n    if (this._customHeight !== value) {\n      this._customHeight = value;\n      this._dispatchSpriteChange(SpriteModifyFlags.size);\n    }\n  }\n\n  /**\n   * Is it rotated 90 degrees clockwise when packing.\n   */\n  get atlasRotated(): boolean {\n    return this._atlasRotated;\n  }\n\n  set atlasRotated(value: boolean) {\n    if (this._atlasRotated != value) {\n      this._atlasRotated = value;\n    }\n  }\n\n  /**\n   * The rectangle region of the original texture on its atlas texture, specified in normalized.\n   */\n  get atlasRegion(): Rect {\n    return this._atlasRegion;\n  }\n\n  set atlasRegion(value: Rect) {\n    const x = MathUtil.clamp(value.x, 0, 1);\n    const y = MathUtil.clamp(value.y, 0, 1);\n    this._atlasRegion.set(x, y, MathUtil.clamp(value.width, 0, 1 - x), MathUtil.clamp(value.height, 0, 1 - y));\n    this._dispatchSpriteChange(SpriteModifyFlags.atlasRegion);\n    if (this._customWidth === undefined || this._customHeight === undefined) {\n      this._dispatchSpriteChange(SpriteModifyFlags.size);\n    }\n  }\n\n  /**\n   * The rectangle region offset of the original texture on its atlas texture, specified in normalized.\n   */\n  get atlasRegionOffset(): Vector4 {\n    return this._atlasRegionOffset;\n  }\n\n  set atlasRegionOffset(value: Vector4) {\n    const x = MathUtil.clamp(value.x, 0, 1);\n    const y = MathUtil.clamp(value.y, 0, 1);\n    this._atlasRegionOffset.set(x, y, MathUtil.clamp(value.z, 0, 1 - x), MathUtil.clamp(value.w, 0, 1 - y));\n    this._dispatchSpriteChange(SpriteModifyFlags.atlasRegionOffset);\n    if (this._customWidth === undefined || this._customHeight === undefined) {\n      this._dispatchSpriteChange(SpriteModifyFlags.size);\n    }\n  }\n\n  /**\n   * The rectangle region of the sprite, specified in normalized.\n   */\n  get region(): Rect {\n    return this._region;\n  }\n\n  set region(value: Rect) {\n    const region = this._region;\n    const x = MathUtil.clamp(value.x, 0, 1);\n    const y = MathUtil.clamp(value.y, 0, 1);\n    region.set(x, y, MathUtil.clamp(value.width, 0, 1 - x), MathUtil.clamp(value.height, 0, 1 - y));\n    this._dispatchSpriteChange(SpriteModifyFlags.region);\n    if (this._customWidth === undefined || this._customHeight === undefined) {\n      this._dispatchSpriteChange(SpriteModifyFlags.size);\n    }\n  }\n\n  /**\n   * Location of the sprite's center point in the rectangle region, specified in normalized.\n   * The origin is at the bottom left and the default value is (0.5, 0.5).\n   */\n  get pivot(): Vector2 {\n    return this._pivot;\n  }\n\n  set pivot(value: Vector2) {\n    const pivot = this._pivot;\n    if (pivot === value) {\n      this._dispatchSpriteChange(SpriteModifyFlags.pivot);\n    } else {\n      const { x, y } = value;\n      if (pivot.x !== x || pivot.y !== y) {\n        pivot.set(x, y);\n        this._dispatchSpriteChange(SpriteModifyFlags.pivot);\n      }\n    }\n  }\n\n  /**\n   * Get the border of the sprite.\n   *  x      y       z     w\n   *  |      |       |     |\n   * Left, bottom, right, top.\n   * @remarks only use in sliced mode.\n   */\n  get border(): Vector4 {\n    return this._border;\n  }\n\n  set border(value: Vector4) {\n    const border = this._border;\n    const x = MathUtil.clamp(value.x, 0, 1);\n    const y = MathUtil.clamp(value.y, 0, 1);\n    border.set(x, y, MathUtil.clamp(value.z, 0, 1 - x), MathUtil.clamp(value.w, 0, 1 - y));\n    this._dispatchSpriteChange(SpriteModifyFlags.border);\n  }\n\n  /**\n   * Constructor a Sprite.\n   * @param engine - Engine to which the sprite belongs\n   * @param texture - Texture from which to obtain the Sprite\n   * @param region - Rectangle region of the texture to use for the Sprite, specified in normalized\n   * @param pivot - Sprite's pivot point relative to its graphic rectangle, specified in normalized\n   * @param border - Boundaries when using Slice DrawMode, specified in normalized\n   * @param name - The name of Sprite\n   */\n  constructor(\n    engine: Engine,\n    texture: Texture2D = null,\n    region: Rect = null,\n    pivot: Vector2 = null,\n    border: Vector4 = null,\n    name: string = null\n  ) {\n    super(engine);\n    this._texture = texture;\n    region && this._region.copyFrom(region);\n    pivot && this._pivot.copyFrom(pivot);\n    border && this._border.copyFrom(border);\n    this.name = name;\n  }\n\n  /**\n   * Clone.\n   * @returns Cloned sprite\n   */\n  clone(): Sprite {\n    const cloneSprite = new Sprite(this._engine, this._texture, this._region, this._pivot, this._border, this.name);\n    cloneSprite._atlasRotated = this._atlasRotated;\n    cloneSprite._atlasRegion.copyFrom(this._atlasRegion);\n    cloneSprite._atlasRegionOffset.copyFrom(this._atlasRegionOffset);\n    return cloneSprite;\n  }\n\n  /**\n   * @internal\n   */\n  _getPositions(): Vector2[] {\n    this._dirtyUpdateFlag & SpriteUpdateFlags.positions && this._updatePositions();\n    return this._positions;\n  }\n\n  /**\n   * @internal\n   */\n  _getUVs(): Vector2[] {\n    this._dirtyUpdateFlag & SpriteUpdateFlags.uvs && this._updateUVs();\n    return this._uvs;\n  }\n\n  /**\n   * @internal\n   */\n  _getBounds(): BoundingBox {\n    this._dirtyUpdateFlag & SpriteUpdateFlags.positions && this._updatePositions();\n    return this._bounds;\n  }\n\n  /**\n   * @override\n   */\n  _onDestroy(): void {\n    if (this._texture) {\n      this._texture = null;\n    }\n  }\n\n  private _calDefaultSize(): void {\n    if (this._texture) {\n      const { _texture, _atlasRegion, _atlasRegionOffset, _region } = this;\n      const pixelsPerUnitReciprocal = 1.0 / Engine._pixelsPerUnit;\n      this._automaticWidth =\n        ((_texture.width * _atlasRegion.width) / (1 - _atlasRegionOffset.x - _atlasRegionOffset.z)) *\n        _region.width *\n        pixelsPerUnitReciprocal;\n      this._automaticHeight =\n        ((_texture.height * _atlasRegion.height) / (1 - _atlasRegionOffset.y - _atlasRegionOffset.w)) *\n        _region.height *\n        pixelsPerUnitReciprocal;\n    } else {\n      this._automaticWidth = this._automaticHeight = 0;\n    }\n    this._dirtyUpdateFlag &= ~SpriteUpdateFlags.automaticSize;\n  }\n\n  private _updatePositions(): void {\n    const blank = this._atlasRegionOffset;\n    const { x: regionX, y: regionY, width: regionW, height: regionH } = this._region;\n    const regionRight = 1 - regionX - regionW;\n    const regionBottom = 1 - regionY - regionH;\n    const left = Math.max(blank.x - regionX, 0) / regionW;\n    const bottom = Math.max(blank.w - regionY, 0) / regionH;\n    const right = 1 - Math.max(blank.z - regionRight, 0) / regionW;\n    const top = 1 - Math.max(blank.y - regionBottom, 0) / regionH;\n\n    // Update positions.\n    // ---------------\n    //  2 - 3\n    //  |   |\n    //  0 - 1\n    // ---------------\n    const positions = this._positions;\n    positions[0].set(left, bottom);\n    positions[1].set(right, bottom);\n    positions[2].set(left, top);\n    positions[3].set(right, top);\n\n    const { min, max } = this._bounds;\n    min.set(left, bottom, 0);\n    max.set(right, top, 0);\n    this._dirtyUpdateFlag &= ~SpriteUpdateFlags.positions;\n  }\n\n  private _updateUVs(): void {\n    const { _uvs: uv, _atlasRegionOffset: atlasRegionOffset } = this;\n    const { x: regionX, y: regionY, width: regionW, height: regionH } = this._region;\n    const regionRight = 1 - regionX - regionW;\n    const regionBottom = 1 - regionY - regionH;\n    const { x: atlasRegionX, y: atlasRegionY, width: atlasRegionW, height: atlasRegionH } = this._atlasRegion;\n    const { x: offsetLeft, y: offsetTop, z: offsetRight, w: offsetBottom } = atlasRegionOffset;\n    const realWidth = atlasRegionW / (1 - offsetLeft - offsetRight);\n    const realHeight = atlasRegionH / (1 - offsetTop - offsetBottom);\n    // Coordinates of the four boundaries.\n    const left = Math.max(regionX - offsetLeft, 0) * realWidth + atlasRegionX;\n    const top = Math.max(regionBottom - offsetTop, 0) * realHeight + atlasRegionY;\n    const right = atlasRegionW + atlasRegionX - Math.max(regionRight - offsetRight, 0) * realWidth;\n    const bottom = atlasRegionH + atlasRegionY - Math.max(regionY - offsetBottom, 0) * realHeight;\n    const { x: borderLeft, y: borderBottom, z: borderRight, w: borderTop } = this._border;\n    // Left-Bottom\n    uv[0].set(left, bottom);\n    // Border ( Left-Bottom )\n    uv[1].set(\n      (regionX - offsetLeft + borderLeft * regionW) * realWidth + atlasRegionX,\n      atlasRegionH + atlasRegionY - (regionY - offsetBottom + borderBottom * regionH) * realHeight\n    );\n    // Border ( Right-Top )\n    uv[2].set(\n      atlasRegionW + atlasRegionX - (regionRight - offsetRight + borderRight * regionW) * realWidth,\n      (regionBottom - offsetTop + borderTop * regionH) * realHeight + atlasRegionY\n    );\n    // Right-Top\n    uv[3].set(right, top);\n    this._dirtyUpdateFlag &= ~SpriteUpdateFlags.uvs;\n  }\n\n  private _dispatchSpriteChange(type: SpriteModifyFlags): void {\n    switch (type) {\n      case SpriteModifyFlags.texture:\n        this._dirtyUpdateFlag |= SpriteUpdateFlags.automaticSize;\n        break;\n      case SpriteModifyFlags.atlasRegionOffset:\n      case SpriteModifyFlags.region:\n        this._dirtyUpdateFlag |= SpriteUpdateFlags.all;\n        break;\n      case SpriteModifyFlags.atlasRegion:\n        this._dirtyUpdateFlag |= SpriteUpdateFlags.automaticSize | SpriteUpdateFlags.uvs;\n        break;\n      case SpriteModifyFlags.border:\n        this._dirtyUpdateFlag |= SpriteUpdateFlags.uvs;\n        break;\n    }\n    this._updateFlagManager.dispatch(type);\n  }\n}\n\nenum SpriteUpdateFlags {\n  positions = 0x1,\n  uvs = 0x2,\n  automaticSize = 0x4,\n  all = 0x7\n}\n","import { Matrix, Vector2, Vector3 } from \"@galacean/engine-math\";\nimport { StaticInterfaceImplement } from \"../../base/StaticInterfaceImplement\";\nimport { SpriteRenderer } from \"../sprite/SpriteRenderer\";\nimport { IAssembler } from \"./IAssembler\";\n\n/**\n * @internal\n */\n@StaticInterfaceImplement<IAssembler>()\nexport class SlicedSpriteAssembler {\n  static _worldMatrix: Matrix = new Matrix();\n  static resetData(renderer: SpriteRenderer): void {\n    const { _renderData: renderData } = renderer;\n    const { positions, uvs } = renderData;\n    if (positions.length < 16) {\n      for (let i = positions.length; i < 16; i++) {\n        positions.push(new Vector3());\n        uvs.push(new Vector2());\n      }\n    }\n    renderData.triangles = [];\n  }\n\n  static updatePositions(renderer: SpriteRenderer): void {\n    const { width, height, sprite } = renderer;\n    const { positions, uvs, triangles } = renderer._renderData;\n    const { border } = sprite;\n    const spriteUVs = sprite._getUVs();\n    // Update local positions.\n    const spritePositions = sprite._getPositions();\n    const { x: left, y: bottom } = spritePositions[0];\n    const { x: right, y: top } = spritePositions[3];\n    const { width: expectWidth, height: expectHeight } = sprite;\n    const fixedLeft = expectWidth * border.x;\n    const fixedBottom = expectHeight * border.y;\n    const fixedRight = expectWidth * border.z;\n    const fixedTop = expectHeight * border.w;\n\n    // ------------------------\n    //     [3]\n    //      |\n    //     [2]\n    //      |\n    //     [1]\n    //      |\n    // row [0] - [1] - [2] - [3]\n    //    column\n    // ------------------------\n    // Calculate row and column.\n    let row: number[], column: number[];\n    if (fixedLeft + fixedRight > width) {\n      const widthScale = width / (fixedLeft + fixedRight);\n      row = [\n        expectWidth * left * widthScale,\n        fixedLeft * widthScale,\n        fixedLeft * widthScale,\n        width - expectWidth * (1 - right) * widthScale\n      ];\n    } else {\n      row = [expectWidth * left, fixedLeft, width - fixedRight, width - expectWidth * (1 - right)];\n    }\n\n    if (fixedTop + fixedBottom > height) {\n      const heightScale = height / (fixedTop + fixedBottom);\n      column = [\n        expectHeight * bottom * heightScale,\n        fixedBottom * heightScale,\n        fixedBottom * heightScale,\n        height - expectHeight * (1 - top) * heightScale\n      ];\n    } else {\n      column = [expectHeight * bottom, fixedBottom, height - fixedTop, height - expectHeight * (1 - top)];\n    }\n\n    // Update renderer's worldMatrix.\n    const { x: pivotX, y: pivotY } = renderer.sprite.pivot;\n    const localTransX = renderer.width * pivotX;\n    const localTransY = renderer.height * pivotY;\n    // Renderer's worldMatrix.\n    const { _worldMatrix: worldMatrix } = SlicedSpriteAssembler;\n    const { elements: wE } = worldMatrix;\n    // Parent's worldMatrix.\n    const { elements: pWE } = renderer.entity.transform.worldMatrix;\n    const sx = renderer.flipX ? -1 : 1;\n    const sy = renderer.flipY ? -1 : 1;\n    (wE[0] = pWE[0] * sx), (wE[1] = pWE[1] * sx), (wE[2] = pWE[2] * sx);\n    (wE[4] = pWE[4] * sy), (wE[5] = pWE[5] * sy), (wE[6] = pWE[6] * sy);\n    (wE[8] = pWE[8]), (wE[9] = pWE[9]), (wE[10] = pWE[10]);\n    wE[12] = pWE[12] - localTransX * wE[0] - localTransY * wE[4];\n    wE[13] = pWE[13] - localTransX * wE[1] - localTransY * wE[5];\n    wE[14] = pWE[14] - localTransX * wE[2] - localTransY * wE[6];\n\n    // ------------------------\n    //  3 - 7 - 11 - 15\n    //  |   |   |    |\n    //  2 - 6 - 10 - 14\n    //  |   |   |    |\n    //  1 - 5 - 9  - 13\n    //  |   |   |    |\n    //  0 - 4 - 8  - 12\n    // ------------------------\n    // Assemble position and uv.\n    let vertexCount = 0;\n    let realICount = 0;\n    for (let i = 0; i < 4; i++) {\n      const rowValue = row[i];\n      const rowU = spriteUVs[i].x;\n      for (let j = 0; j < 4; j++) {\n        const columnValue = column[j];\n        positions[vertexCount].set(\n          wE[0] * rowValue + wE[4] * columnValue + wE[12],\n          wE[1] * rowValue + wE[5] * columnValue + wE[13],\n          wE[2] * rowValue + wE[6] * columnValue + wE[14]\n        );\n        uvs[vertexCount].set(rowU, spriteUVs[j].y);\n        ++vertexCount;\n      }\n      ++realICount;\n    }\n\n    const realJCount = vertexCount / realICount;\n    let indexOffset = 0;\n    for (let i = 0; i < realICount - 1; ++i) {\n      for (let j = 0; j < realJCount - 1; ++j) {\n        const start = i * realJCount + j;\n        triangles[indexOffset++] = start;\n        triangles[indexOffset++] = start + 1;\n        triangles[indexOffset++] = start + realJCount;\n        triangles[indexOffset++] = start + 1;\n        triangles[indexOffset++] = start + realJCount + 1;\n        triangles[indexOffset++] = start + realJCount;\n      }\n    }\n    renderer._renderData.vertexCount = realICount * realJCount;\n    triangles.length = (realICount - 1) * (realJCount - 1) * 6;\n\n    const { min, max } = renderer._bounds;\n    min.set(row[0], column[0], 0);\n    max.set(row[3], column[3], 0);\n    renderer._bounds.transform(worldMatrix);\n  }\n\n  static updateUVs(renderer: SpriteRenderer): void {}\n}\n","import { BoundingBox, Color } from \"@galacean/engine-math\";\nimport { assignmentClone, deepClone, ignoreClone } from \"../../clone/CloneManager\";\nimport { ICustomClone } from \"../../clone/ComponentCloner\";\nimport { Entity } from \"../../Entity\";\nimport { Renderer, RendererUpdateFlags } from \"../../Renderer\";\nimport { RenderContext } from \"../../RenderPipeline/RenderContext\";\nimport { CompareFunction } from \"../../shader/enums/CompareFunction\";\nimport { Shader } from \"../../shader/Shader\";\nimport { ShaderProperty } from \"../../shader/ShaderProperty\";\nimport { IAssembler } from \"../assembler/IAssembler\";\nimport { SimpleSpriteAssembler } from \"../assembler/SimpleSpriteAssembler\";\nimport { SlicedSpriteAssembler } from \"../assembler/SlicedSpriteAssembler\";\nimport { RenderData2D } from \"../data/RenderData2D\";\nimport { SpriteDrawMode } from \"../enums/SpriteDrawMode\";\nimport { SpriteMaskInteraction } from \"../enums/SpriteMaskInteraction\";\nimport { SpriteMaskLayer } from \"../enums/SpriteMaskLayer\";\nimport { SpriteModifyFlags } from \"../enums/SpriteModifyFlags\";\nimport { Sprite } from \"./Sprite\";\n\n/**\n * Renders a Sprite for 2D graphics.\n */\nexport class SpriteRenderer extends Renderer implements ICustomClone {\n  /** @internal */\n  static _textureProperty: ShaderProperty = Shader.getPropertyByName(\"u_spriteTexture\");\n\n  /** @internal */\n  @ignoreClone\n  _renderData: RenderData2D;\n\n  @ignoreClone\n  private _drawMode: SpriteDrawMode;\n  @ignoreClone\n  private _assembler: IAssembler;\n\n  @deepClone\n  private _color: Color = new Color(1, 1, 1, 1);\n  @ignoreClone\n  private _sprite: Sprite = null;\n\n  @ignoreClone\n  private _automaticWidth: number = 0;\n  @ignoreClone\n  private _automaticHeight: number = 0;\n  @assignmentClone\n  private _customWidth: number = undefined;\n  @assignmentClone\n  private _customHeight: number = undefined;\n  @assignmentClone\n  private _flipX: boolean = false;\n  @assignmentClone\n  private _flipY: boolean = false;\n\n  @assignmentClone\n  private _maskLayer: number = SpriteMaskLayer.Layer0;\n  @assignmentClone\n  private _maskInteraction: SpriteMaskInteraction = SpriteMaskInteraction.None;\n\n  /**\n   * The draw mode of the sprite renderer.\n   */\n  get drawMode(): SpriteDrawMode {\n    return this._drawMode;\n  }\n\n  set drawMode(drawMode: SpriteDrawMode) {\n    if (this._drawMode !== drawMode) {\n      this._drawMode = drawMode;\n      switch (drawMode) {\n        case SpriteDrawMode.Simple:\n          this._assembler = SimpleSpriteAssembler;\n          break;\n        case SpriteDrawMode.Sliced:\n          this._assembler = SlicedSpriteAssembler;\n          break;\n        default:\n          break;\n      }\n      this._assembler.resetData(this);\n      this._dirtyUpdateFlag |= SpriteRendererUpdateFlags.RenderData;\n    }\n  }\n\n  /**\n   * The Sprite to render.\n   */\n  get sprite(): Sprite {\n    return this._sprite;\n  }\n\n  set sprite(value: Sprite | null) {\n    const lastSprite = this._sprite;\n    if (lastSprite !== value) {\n      lastSprite && lastSprite._updateFlagManager.removeListener(this._onSpriteChange);\n      this._dirtyUpdateFlag |= SpriteRendererUpdateFlags.All;\n      if (value) {\n        value._updateFlagManager.addListener(this._onSpriteChange);\n        this.shaderData.setTexture(SpriteRenderer._textureProperty, value.texture);\n      } else {\n        this.shaderData.setTexture(SpriteRenderer._textureProperty, null);\n      }\n      this._sprite = value;\n    }\n  }\n\n  /**\n   * Rendering color for the Sprite graphic.\n   */\n  get color(): Color {\n    return this._color;\n  }\n\n  set color(value: Color) {\n    if (this._color !== value) {\n      this._color.copyFrom(value);\n    }\n  }\n\n  /**\n   * Render width (in world coordinates).\n   *\n   * @remarks\n   * If width is set, return the set value,\n   * otherwise return `SpriteRenderer.sprite.width`.\n   */\n  get width(): number {\n    if (this._customWidth !== undefined) {\n      return this._customWidth;\n    } else {\n      this._dirtyUpdateFlag & SpriteRendererUpdateFlags.AutomaticSize && this._calDefaultSize();\n      return this._automaticWidth;\n    }\n  }\n\n  set width(value: number) {\n    if (this._customWidth !== value) {\n      this._customWidth = value;\n      this._dirtyUpdateFlag |= RendererUpdateFlags.WorldVolume;\n    }\n  }\n\n  /**\n   * Render height (in world coordinates).\n   *\n   * @remarks\n   * If height is set, return the set value,\n   * otherwise return `SpriteRenderer.sprite.height`.\n   */\n  get height(): number {\n    if (this._customHeight !== undefined) {\n      return this._customHeight;\n    } else {\n      this._dirtyUpdateFlag & SpriteRendererUpdateFlags.AutomaticSize && this._calDefaultSize();\n      return this._automaticHeight;\n    }\n  }\n\n  set height(value: number) {\n    if (this._customHeight !== value) {\n      this._customHeight = value;\n      this._dirtyUpdateFlag |= RendererUpdateFlags.WorldVolume;\n    }\n  }\n\n  /**\n   * Flips the sprite on the X axis.\n   */\n  get flipX(): boolean {\n    return this._flipX;\n  }\n\n  set flipX(value: boolean) {\n    if (this._flipX !== value) {\n      this._flipX = value;\n      this._dirtyUpdateFlag |= RendererUpdateFlags.WorldVolume;\n    }\n  }\n\n  /**\n   * Flips the sprite on the Y axis.\n   */\n  get flipY(): boolean {\n    return this._flipY;\n  }\n\n  set flipY(value: boolean) {\n    if (this._flipY !== value) {\n      this._flipY = value;\n      this._dirtyUpdateFlag |= RendererUpdateFlags.WorldVolume;\n    }\n  }\n\n  /**\n   * The mask layer the sprite renderer belongs to.\n   */\n  get maskLayer(): number {\n    return this._maskLayer;\n  }\n\n  set maskLayer(value: number) {\n    this._maskLayer = value;\n  }\n\n  /**\n   * Interacts with the masks.\n   */\n  get maskInteraction(): SpriteMaskInteraction {\n    return this._maskInteraction;\n  }\n\n  set maskInteraction(value: SpriteMaskInteraction) {\n    if (this._maskInteraction !== value) {\n      this._maskInteraction = value;\n      this._updateStencilState();\n    }\n  }\n\n  /**\n   * @internal\n   */\n  constructor(entity: Entity) {\n    super(entity);\n    this._renderData = new RenderData2D(4, [], [], null, this._color);\n    this.drawMode = SpriteDrawMode.Simple;\n    this.setMaterial(this._engine._spriteDefaultMaterial);\n    this._onSpriteChange = this._onSpriteChange.bind(this);\n  }\n\n  /**\n   * @internal\n   */\n  _cloneTo(target: SpriteRenderer): void {\n    target.sprite = this._sprite;\n    target.drawMode = this._drawMode;\n  }\n\n  /**\n   * @internal\n   */\n  _onDestroy(): void {\n    this._sprite?._updateFlagManager.removeListener(this._onSpriteChange);\n    this._color = null;\n    this._sprite = null;\n    this._assembler = null;\n    this._renderData = null;\n    super._onDestroy();\n  }\n\n  /**\n   * @override\n   */\n  protected _updateBounds(worldBounds: BoundingBox): void {\n    if (this.sprite) {\n      this._assembler.updatePositions(this);\n    } else {\n      worldBounds.min.set(0, 0, 0);\n      worldBounds.max.set(0, 0, 0);\n    }\n  }\n\n  /**\n   * @override\n   */\n  protected _render(context: RenderContext): void {\n    if (!this.sprite?.texture || !this.width || !this.height) {\n      return;\n    }\n\n    // Update position\n    if (this._dirtyUpdateFlag & RendererUpdateFlags.WorldVolume) {\n      this._assembler.updatePositions(this);\n      this._dirtyUpdateFlag &= ~RendererUpdateFlags.WorldVolume;\n    }\n\n    // Update uv\n    if (this._dirtyUpdateFlag & SpriteRendererUpdateFlags.UV) {\n      this._assembler.updateUVs(this);\n      this._dirtyUpdateFlag &= ~SpriteRendererUpdateFlags.UV;\n    }\n\n    // Push primitive\n    const material = this.getMaterial();\n    const passes = material.shader.passes;\n    const renderStates = material.renderStates;\n    const texture = this.sprite.texture;\n    for (let i = 0, n = passes.length; i < n; i++) {\n      const spriteElement = this._engine._spriteElementPool.getFromPool();\n      spriteElement.setValue(this, this._renderData, material, texture, renderStates[i], passes[i]);\n      context.camera._renderPipeline.pushPrimitive(spriteElement);\n    }\n  }\n\n  private _calDefaultSize(): void {\n    const sprite = this._sprite;\n    if (sprite) {\n      this._automaticWidth = sprite.width;\n      this._automaticHeight = sprite.height;\n    } else {\n      this._automaticWidth = this._automaticHeight = 0;\n    }\n    this._dirtyUpdateFlag &= ~SpriteRendererUpdateFlags.AutomaticSize;\n  }\n\n  private _updateStencilState(): void {\n    // Update stencil.\n    const material = this.getInstanceMaterial();\n    const stencilState = material.renderState.stencilState;\n    const maskInteraction = this._maskInteraction;\n    if (maskInteraction === SpriteMaskInteraction.None) {\n      stencilState.enabled = false;\n      stencilState.writeMask = 0xff;\n      stencilState.referenceValue = 0;\n      stencilState.compareFunctionFront = stencilState.compareFunctionBack = CompareFunction.Always;\n    } else {\n      stencilState.enabled = true;\n      stencilState.writeMask = 0x00;\n      stencilState.referenceValue = 1;\n      const compare =\n        maskInteraction === SpriteMaskInteraction.VisibleInsideMask\n          ? CompareFunction.LessEqual\n          : CompareFunction.Greater;\n      stencilState.compareFunctionFront = compare;\n      stencilState.compareFunctionBack = compare;\n    }\n  }\n\n  @ignoreClone\n  private _onSpriteChange(type: SpriteModifyFlags): void {\n    switch (type) {\n      case SpriteModifyFlags.texture:\n        this.shaderData.setTexture(SpriteRenderer._textureProperty, this.sprite.texture);\n        break;\n      case SpriteModifyFlags.size:\n        this._dirtyUpdateFlag |= SpriteRendererUpdateFlags.AutomaticSize;\n        // When the width and height of `SpriteRenderer` are `undefined`,\n        // the `size` of `Sprite` will affect the position of `SpriteRenderer`.\n        if (\n          this._drawMode === SpriteDrawMode.Sliced ||\n          this._customWidth === undefined ||\n          this._customHeight === undefined\n        ) {\n          this._dirtyUpdateFlag |= RendererUpdateFlags.WorldVolume;\n        }\n        break;\n      case SpriteModifyFlags.border:\n        this._drawMode === SpriteDrawMode.Sliced && (this._dirtyUpdateFlag |= SpriteRendererUpdateFlags.RenderData);\n        break;\n      case SpriteModifyFlags.region:\n      case SpriteModifyFlags.atlasRegionOffset:\n        this._dirtyUpdateFlag |= SpriteRendererUpdateFlags.RenderData;\n        break;\n      case SpriteModifyFlags.atlasRegion:\n        this._dirtyUpdateFlag |= SpriteRendererUpdateFlags.UV;\n        break;\n      case SpriteModifyFlags.pivot:\n        this._dirtyUpdateFlag |= RendererUpdateFlags.WorldVolume;\n        break;\n    }\n  }\n}\n\n/**\n * @remarks Extends `RendererUpdateFlag`.\n */\nenum SpriteRendererUpdateFlags {\n  /** UV. */\n  UV = 0x2,\n  /** WorldVolume and UV . */\n  RenderData = 0x3,\n  /** Automatic Size. */\n  AutomaticSize = 0x4,\n  /** All. */\n  All = 0x7\n}\n","import { Vector3, Vector4 } from \"@galacean/engine-math\";\nimport { Texture2D } from \"../../texture\";\nimport { RenderData2D } from \"../data/RenderData2D\";\n\n/**\n * @internal\n */\nexport class CharRenderData {\n  static triangles: number[] = [0, 2, 1, 2, 0, 3];\n\n  texture: Texture2D;\n  /** x:Top y:Left z:Bottom w:Right */\n  localPositions: Vector4 = new Vector4();\n  renderData: RenderData2D;\n\n  constructor() {\n    const positions = [new Vector3(), new Vector3(), new Vector3(), new Vector3()];\n    this.renderData = new RenderData2D(4, positions, null, CharRenderData.triangles, null);\n  }\n}\n","/**\n * @internal\n */\nexport class CharRenderDataPool<T> {\n  private _elements: T[] = [];\n  private _type: new () => T;\n\n  constructor(type: new () => T, length: number) {\n    this._type = type;\n    const elements = this._elements;\n    for (let i = 0; i < length; ++i) {\n      elements[i] = new type();\n    }\n  }\n\n  get(): T {\n    if (this._elements.length > 0) {\n      return this._elements.pop();\n    }\n    return new this._type();\n  }\n\n  put(data: T): void {\n    this._elements.push(data);\n  }\n}\n","import { Engine } from \"../../Engine\";\nimport { CharInfo } from \"./CharInfo\";\nimport { FontStyle } from \"../enums/FontStyle\";\nimport { OverflowMode } from \"../enums/TextOverflow\";\nimport { TextRenderer } from \"./TextRenderer\";\nimport { Vector2 } from \"@galacean/engine-math\";\nimport { SubFont } from \"./SubFont\";\n\n/**\n * @internal\n * TextUtils includes some helper function for text.\n */\nexport class TextUtils {\n  /** @internal */\n  static _genericFontFamilies: Array<string> = [\n    \"serif\",\n    \"sans-serif\",\n    \"monospace\",\n    \"cursive\",\n    \"fantasy\",\n    \"system-ui\",\n    \"math\",\n    \"emoji\",\n    \"fangsong\"\n  ];\n  /** These characters are all tall to help calculate the height required for text. */\n  private static _measureString: string = \"|ÉqÅ\";\n  private static _measureBaseline: string = \"M\";\n  private static _heightMultiplier: number = 2;\n  private static _baselineMultiplier: number = 1.4;\n  private static _fontSizeInfoCache: Record<string, FontSizeInfo> = {};\n  private static _textContext: TextContext = null;\n\n  /**\n   * The instance function to get an object includes 2d context and canvas.\n   * @returns the TextContext object\n   */\n  static textContext(): TextContext {\n    let { _textContext: textContext } = TextUtils;\n    if (!textContext) {\n      let canvas: HTMLCanvasElement | OffscreenCanvas;\n      try {\n        canvas = new OffscreenCanvas(0, 0);\n      } catch {\n        canvas = document.createElement(\"canvas\");\n      }\n      const context = <CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D>canvas.getContext(\"2d\");\n      textContext = { canvas, context };\n      TextUtils._textContext = textContext;\n    }\n    return textContext;\n  }\n\n  /**\n   * Measure the font.\n   * @param fontString - the string of the font\n   * @returns the font size info\n   */\n  static measureFont(fontString: string): FontSizeInfo {\n    const { _fontSizeInfoCache: fontSizeInfoCache } = TextUtils;\n    let info = fontSizeInfoCache[fontString];\n    if (info) {\n      return info;\n    }\n\n    info = <FontSizeInfo>TextUtils._measureFontOrChar(fontString);\n    fontSizeInfoCache[fontString] = info;\n    return info;\n  }\n\n  /**\n   * Get native font string.\n   * @param fontName - The font name\n   * @param fontSize - The font size\n   * @param style - The font style\n   * @returns The native font string\n   */\n  static getNativeFontString(fontName: string, fontSize: number, style: FontStyle): string {\n    let str = style & FontStyle.Bold ? \"bold \" : \"\";\n    style & FontStyle.Italic && (str += \"italic \");\n    // Check if font already contains strings\n    if (!/([\\\"\\'])[^\\'\\\"]+\\1/.test(fontName) && TextUtils._genericFontFamilies.indexOf(fontName) == -1) {\n      fontName = `\"${fontName}\"`;\n    }\n    str += `${fontSize}px ${fontName}`;\n    return str;\n  }\n\n  static measureChar(char: string, fontString: string): CharInfo {\n    return <CharInfo>TextUtils._measureFontOrChar(fontString, char);\n  }\n\n  static measureTextWithWrap(renderer: TextRenderer): TextMetrics {\n    const { fontSize, fontStyle, _subFont: subFont } = renderer;\n    const { name } = renderer.font;\n    const fontString = TextUtils.getNativeFontString(name, fontSize, fontStyle);\n    const fontSizeInfo = TextUtils.measureFont(fontString);\n    const subTexts = renderer.text.split(/(?:\\r\\n|\\r|\\n)/);\n    const lines = new Array<string>();\n    const lineWidths = new Array<number>();\n    const lineMaxSizes = new Array<FontSizeInfo>();\n    const { _pixelsPerUnit } = Engine;\n    const lineHeight = fontSizeInfo.size + renderer.lineSpacing * _pixelsPerUnit;\n    const wrapWidth = renderer.width * _pixelsPerUnit;\n    let width = 0;\n\n    for (let i = 0, n = subTexts.length; i < n; ++i) {\n      const subText = subTexts[i];\n      let chars = \"\";\n      let charsWidth = 0;\n      let maxAscent = -1;\n      let maxDescent = -1;\n\n      for (let j = 0, m = subText.length; j < m; ++j) {\n        const char = subText[j];\n        const charInfo = TextUtils._getCharInfo(char, fontString, subFont);\n        const { w, offsetY } = charInfo;\n        const halfH = charInfo.h * 0.5;\n        const ascent = halfH + offsetY;\n        const descent = halfH - offsetY;\n        if (charsWidth + w > wrapWidth) {\n          if (charsWidth === 0) {\n            lines.push(char);\n            lineWidths.push(w);\n            lineMaxSizes.push({\n              ascent,\n              descent,\n              size: ascent + descent\n            });\n          } else {\n            lines.push(chars);\n            lineWidths.push(charsWidth);\n            lineMaxSizes.push({\n              ascent: maxAscent,\n              descent: maxDescent,\n              size: maxAscent + maxDescent\n            });\n            chars = char;\n            charsWidth = charInfo.xAdvance;\n            maxAscent = ascent;\n            maxDescent = descent;\n          }\n        } else {\n          chars += char;\n          charsWidth += charInfo.xAdvance;\n          maxAscent < ascent && (maxAscent = ascent);\n          maxDescent < descent && (maxDescent = descent);\n        }\n      }\n\n      if (charsWidth > 0) {\n        lines.push(chars);\n        lineWidths.push(charsWidth);\n        lineMaxSizes.push({\n          ascent: maxAscent,\n          descent: maxDescent,\n          size: maxAscent + maxDescent\n        });\n      }\n    }\n\n    let height = renderer.height * _pixelsPerUnit;\n    if (renderer.overflowMode === OverflowMode.Overflow) {\n      height = lineHeight * lines.length;\n    }\n\n    return {\n      width,\n      height,\n      lines,\n      lineWidths,\n      lineHeight,\n      lineMaxSizes\n    };\n  }\n\n  static measureTextWithoutWrap(renderer: TextRenderer): TextMetrics {\n    const { fontSize, fontStyle, _subFont: subFont } = renderer;\n    const { name } = renderer.font;\n    const fontString = TextUtils.getNativeFontString(name, fontSize, fontStyle);\n    const fontSizeInfo = TextUtils.measureFont(fontString);\n    const lines = renderer.text.split(/(?:\\r\\n|\\r|\\n)/);\n    const lineCount = lines.length;\n    const lineWidths = new Array<number>();\n    const lineMaxSizes = new Array<FontSizeInfo>();\n    const { _pixelsPerUnit } = Engine;\n    const lineHeight = fontSizeInfo.size + renderer.lineSpacing * _pixelsPerUnit;\n    let width = 0;\n    let height = renderer.height * _pixelsPerUnit;\n    if (renderer.overflowMode === OverflowMode.Overflow) {\n      height = lineHeight * lineCount;\n    }\n\n    for (let i = 0; i < lineCount; ++i) {\n      const line = lines[i];\n      let curWidth = 0;\n      let maxAscent = -1;\n      let maxDescent = -1;\n\n      for (let j = 0, m = line.length; j < m; ++j) {\n        const charInfo = TextUtils._getCharInfo(line[j], fontString, subFont);\n        curWidth += charInfo.xAdvance;\n        const { offsetY } = charInfo;\n        const halfH = charInfo.h * 0.5;\n        const ascent = halfH + offsetY;\n        const descent = halfH - offsetY;\n        maxAscent < ascent && (maxAscent = ascent);\n        maxDescent < descent && (maxDescent = descent);\n      }\n      lineWidths[i] = curWidth;\n      lineMaxSizes[i] = {\n        ascent: maxAscent,\n        descent: maxDescent,\n        size: maxAscent + maxDescent\n      };\n      if (curWidth > width) {\n        width = curWidth;\n      }\n    }\n\n    return {\n      width,\n      height,\n      lines,\n      lineWidths,\n      lineHeight,\n      lineMaxSizes\n    };\n  }\n\n  /**\n   * Get native font hash.\n   * @param fontName - The font name\n   * @param fontSize - The font size\n   * @param style - The font style\n   * @returns The native font hash\n   */\n  static getNativeFontHash(fontName: string, fontSize: number, style: FontStyle): string {\n    let str = style & FontStyle.Bold ? \"bold\" : \"\";\n    style & FontStyle.Italic && (str += \"italic\");\n    // Check if font already contains strings\n    if (!/([\\\"\\'])[^\\'\\\"]+\\1/.test(fontName) && TextUtils._genericFontFamilies.indexOf(fontName) == -1) {\n      fontName = `${fontName}`;\n    }\n    str += `${fontSize}px${fontName}`;\n    return str;\n  }\n\n  private static _measureFontOrChar(fontString: string, char: string = \"\"): FontSizeInfo | CharInfo {\n    const { canvas, context } = TextUtils.textContext();\n    context.font = fontString;\n    const measureString = char || TextUtils._measureString;\n    // Safari gets data confusion through getImageData when the canvas width is not an integer.\n    // The measure text width of some special invisible characters may be 0, so make sure the width is at least 1.\n    // @todo: Text layout may vary from standard and not support emoji.\n    const width = Math.max(1, Math.round(context.measureText(measureString).width));\n    let baseline = Math.ceil(context.measureText(TextUtils._measureBaseline).width);\n    const height = baseline * TextUtils._heightMultiplier;\n    baseline = (TextUtils._baselineMultiplier * baseline) | 0;\n\n    canvas.width = width;\n    canvas.height = height;\n\n    context.font = fontString;\n    context.fillStyle = \"#000\";\n    context.clearRect(0, 0, width, height);\n    context.textBaseline = \"middle\";\n    context.fillStyle = \"#fff\";\n    context.fillText(measureString, 0, baseline);\n\n    const colorData = context.getImageData(0, 0, width, height).data;\n    const len = colorData.length;\n\n    let top = -1;\n    let bottom = -1;\n    let y;\n    let ascent = 0;\n    let descent = 0;\n    let size = 0;\n\n    const integerW = canvas.width;\n    const integerWReciprocal = 1.0 / integerW;\n    for (let i = 0; i < len; i += 4) {\n      if (colorData[i + 3] !== 0) {\n        const idx = i * 0.25;\n        y = ~~(idx * integerWReciprocal);\n\n        if (top === -1) {\n          top = y;\n        }\n\n        if (y > bottom) {\n          bottom = y;\n        }\n      } else {\n        colorData[i] = colorData[i + 1] = colorData[i + 2] = 255;\n      }\n    }\n\n    if (top !== -1 && bottom !== -1) {\n      ascent = baseline - top;\n      descent = bottom - baseline + 1;\n      size = ascent + descent;\n    }\n    const sizeInfo = { ascent, descent, size };\n\n    if (char) {\n      let data = null;\n      if (size > 0) {\n        const lineIntegerW = integerW * 4;\n        // gl.texSubImage2D uploading data of type Uint8ClampedArray is not supported in some devices(eg: IphoneX IOS 13.6.1).\n        data = new Uint8Array(colorData.buffer, top * lineIntegerW, size * lineIntegerW);\n      }\n      return {\n        x: 0,\n        y: 0,\n        w: width,\n        h: size,\n        offsetX: 0,\n        offsetY: (ascent - descent) * 0.5,\n        xAdvance: width,\n        uvs: [new Vector2(), new Vector2(), new Vector2(), new Vector2()],\n        ascent,\n        descent,\n        index: 0,\n        data\n      };\n    } else {\n      return sizeInfo;\n    }\n  }\n\n  private static _getCharInfo(char: string, fontString: string, font: SubFont): CharInfo {\n    let charInfo = font._getCharInfo(char);\n    if (!charInfo) {\n      charInfo = TextUtils.measureChar(char, fontString);\n      font._uploadCharTexture(charInfo);\n      font._addCharInfo(char, charInfo);\n    }\n\n    return charInfo;\n  }\n}\n\n/**\n * @internal\n * TextContext.\n */\nexport interface TextContext {\n  canvas: HTMLCanvasElement | OffscreenCanvas;\n  context: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D;\n}\n\n/**\n * @internal\n * FontSizeInfo.\n */\nexport interface FontSizeInfo {\n  ascent: number;\n  descent: number;\n  size: number;\n}\n\n/**\n * @internal\n * TextMetrics.\n */\nexport interface TextMetrics {\n  width: number;\n  height: number;\n  lines: Array<string>;\n  lineWidths: Array<number>;\n  lineHeight: number;\n  lineMaxSizes?: Array<FontSizeInfo>;\n}\n","import { BoundingBox, Color, Vector3 } from \"@galacean/engine-math\";\nimport { assignmentClone, deepClone, ignoreClone } from \"../../clone/CloneManager\";\nimport { ICustomClone } from \"../../clone/ComponentCloner\";\nimport { Engine } from \"../../Engine\";\nimport { Entity } from \"../../Entity\";\nimport { Renderer } from \"../../Renderer\";\nimport { RenderContext } from \"../../RenderPipeline/RenderContext\";\nimport { CompareFunction } from \"../../shader/enums/CompareFunction\";\nimport { TransformModifyFlags } from \"../../Transform\";\nimport { FontStyle } from \"../enums/FontStyle\";\nimport { SpriteMaskInteraction } from \"../enums/SpriteMaskInteraction\";\nimport { SpriteMaskLayer } from \"../enums/SpriteMaskLayer\";\nimport { TextHorizontalAlignment, TextVerticalAlignment } from \"../enums/TextAlignment\";\nimport { OverflowMode } from \"../enums/TextOverflow\";\nimport { CharRenderData } from \"./CharRenderData\";\nimport { CharRenderDataPool } from \"./CharRenderDataPool\";\nimport { Font } from \"./Font\";\nimport { SubFont } from \"./SubFont\";\nimport { TextUtils } from \"./TextUtils\";\n\n/**\n * Renders a text for 2D graphics.\n */\nexport class TextRenderer extends Renderer implements ICustomClone {\n  private static _charRenderDataPool: CharRenderDataPool<CharRenderData> = new CharRenderDataPool(CharRenderData, 50);\n  private static _tempVec30: Vector3 = new Vector3();\n  private static _tempVec31: Vector3 = new Vector3();\n\n  /** @internal */\n  @assignmentClone\n  _subFont: SubFont = null;\n  /** @internal */\n  @ignoreClone\n  _charRenderDatas: CharRenderData[] = [];\n  @ignoreClone\n  _dirtyFlag: number = DirtyFlag.Font;\n\n  @deepClone\n  private _color: Color = new Color(1, 1, 1, 1);\n  @assignmentClone\n  private _text: string = \"\";\n  @assignmentClone\n  private _width: number = 0;\n  @assignmentClone\n  private _height: number = 0;\n  @ignoreClone\n  private _localBounds: BoundingBox = new BoundingBox();\n  @assignmentClone\n  private _font: Font = null;\n  @assignmentClone\n  private _fontSize: number = 24;\n  @assignmentClone\n  private _fontStyle: FontStyle = FontStyle.None;\n  @assignmentClone\n  private _lineSpacing: number = 0;\n  @assignmentClone\n  private _horizontalAlignment: TextHorizontalAlignment = TextHorizontalAlignment.Center;\n  @assignmentClone\n  private _verticalAlignment: TextVerticalAlignment = TextVerticalAlignment.Center;\n  @assignmentClone\n  private _enableWrapping: boolean = false;\n  @assignmentClone\n  private _overflowMode: OverflowMode = OverflowMode.Overflow;\n  @assignmentClone\n  private _maskInteraction: SpriteMaskInteraction = SpriteMaskInteraction.None;\n  @assignmentClone\n  private _maskLayer: number = SpriteMaskLayer.Layer0;\n\n  /**\n   * Rendering color for the Text.\n   */\n  get color(): Color {\n    return this._color;\n  }\n\n  set color(value: Color) {\n    if (this._color !== value) {\n      this._color.copyFrom(value);\n    }\n  }\n\n  /**\n   * Rendering string for the Text.\n   */\n  get text(): string {\n    return this._text;\n  }\n\n  set text(value: string) {\n    value = value || \"\";\n    if (this._text !== value) {\n      this._text = value;\n      this._setDirtyFlagTrue(DirtyFlag.Position);\n    }\n  }\n\n  /**\n   * The width of the TextRenderer (in 3D world coordinates).\n   */\n  get width(): number {\n    return this._width;\n  }\n\n  set width(value: number) {\n    if (this._width !== value) {\n      this._width = value;\n      this._setDirtyFlagTrue(DirtyFlag.Position);\n    }\n  }\n\n  /**\n   * The height of the TextRenderer (in 3D world coordinates).\n   */\n  get height(): number {\n    return this._height;\n  }\n\n  set height(value: number) {\n    if (this._height !== value) {\n      this._height = value;\n      this._setDirtyFlagTrue(DirtyFlag.Position);\n    }\n  }\n\n  /**\n   * The font of the Text.\n   */\n  get font(): Font {\n    return this._font;\n  }\n\n  set font(value: Font) {\n    const lastFont = this._font;\n    if (lastFont !== value) {\n      lastFont && lastFont._addRefCount(-1);\n      value && value._addRefCount(1);\n      this._font = value;\n      this._setDirtyFlagTrue(DirtyFlag.Font);\n    }\n  }\n\n  /**\n   * The font size of the Text.\n   */\n  get fontSize(): number {\n    return this._fontSize;\n  }\n\n  set fontSize(value: number) {\n    if (this._fontSize !== value) {\n      this._fontSize = value;\n      this._setDirtyFlagTrue(DirtyFlag.Font);\n    }\n  }\n\n  /**\n   * The style of the font.\n   */\n  get fontStyle(): FontStyle {\n    return this._fontStyle;\n  }\n\n  set fontStyle(value: FontStyle) {\n    if (this.fontStyle !== value) {\n      this._fontStyle = value;\n      this._setDirtyFlagTrue(DirtyFlag.Font);\n    }\n  }\n\n  /**\n   * The space between two lines (in pixels).\n   */\n  get lineSpacing(): number {\n    return this._lineSpacing;\n  }\n\n  set lineSpacing(value: number) {\n    if (this._lineSpacing !== value) {\n      this._lineSpacing = value;\n      this._setDirtyFlagTrue(DirtyFlag.Position);\n    }\n  }\n\n  /**\n   * The horizontal alignment.\n   */\n  get horizontalAlignment(): TextHorizontalAlignment {\n    return this._horizontalAlignment;\n  }\n\n  set horizontalAlignment(value: TextHorizontalAlignment) {\n    if (this._horizontalAlignment !== value) {\n      this._horizontalAlignment = value;\n      this._setDirtyFlagTrue(DirtyFlag.Position);\n    }\n  }\n\n  /**\n   * The vertical alignment.\n   */\n  get verticalAlignment(): TextVerticalAlignment {\n    return this._verticalAlignment;\n  }\n\n  set verticalAlignment(value: TextVerticalAlignment) {\n    if (this._verticalAlignment !== value) {\n      this._verticalAlignment = value;\n      this._setDirtyFlagTrue(DirtyFlag.Position);\n    }\n  }\n\n  /**\n   * Whether wrap text to next line when exceeds the width of the container.\n   */\n  get enableWrapping(): boolean {\n    return this._enableWrapping;\n  }\n\n  set enableWrapping(value: boolean) {\n    if (this._enableWrapping !== value) {\n      this._enableWrapping = value;\n      this._setDirtyFlagTrue(DirtyFlag.Position);\n    }\n  }\n\n  /**\n   * The overflow mode.\n   */\n  get overflowMode(): OverflowMode {\n    return this._overflowMode;\n  }\n\n  set overflowMode(value: OverflowMode) {\n    if (this._overflowMode !== value) {\n      this._overflowMode = value;\n      this._setDirtyFlagTrue(DirtyFlag.Position);\n    }\n  }\n\n  /**\n   * Interacts with the masks.\n   */\n  get maskInteraction(): SpriteMaskInteraction {\n    return this._maskInteraction;\n  }\n\n  set maskInteraction(value: SpriteMaskInteraction) {\n    if (this._maskInteraction !== value) {\n      this._maskInteraction = value;\n      this._setDirtyFlagTrue(DirtyFlag.MaskInteraction);\n    }\n  }\n\n  /**\n   * The mask layer the sprite renderer belongs to.\n   */\n  get maskLayer(): number {\n    return this._maskLayer;\n  }\n\n  set maskLayer(value: number) {\n    this._maskLayer = value;\n  }\n\n  /**\n   * The bounding volume of the TextRenderer.\n   */\n  get bounds(): BoundingBox {\n    this._isContainDirtyFlag(DirtyFlag.SubFont) && this._resetSubFont();\n    this._isContainDirtyFlag(DirtyFlag.LocalPositionBounds) && this._updateLocalData();\n    this._isContainDirtyFlag(DirtyFlag.WorldPosition) && this._updatePosition();\n    this._isContainDirtyFlag(DirtyFlag.WorldBounds) && this._updateBounds(this._bounds);\n    this._setDirtyFlagFalse(DirtyFlag.Font);\n\n    return this._bounds;\n  }\n\n  constructor(entity: Entity) {\n    super(entity);\n    const { engine } = this;\n    this._font = engine._textDefaultFont;\n    this._font._addRefCount(1);\n    this.setMaterial(engine._spriteDefaultMaterial);\n  }\n\n  /**\n   * @internal\n   */\n  _onDestroy(): void {\n    // Clear render data.\n    const charRenderDatas = this._charRenderDatas;\n    for (let i = 0, n = charRenderDatas.length; i < n; ++i) {\n      TextRenderer._charRenderDataPool.put(charRenderDatas[i]);\n    }\n    charRenderDatas.length = 0;\n\n    if (this._font) {\n      this._font._addRefCount(-1);\n      this._font = null;\n    }\n    this._subFont && (this._subFont = null);\n\n    super._onDestroy();\n  }\n\n  /**\n   * @internal\n   */\n  _cloneTo(target: TextRenderer): void {\n    target.font = this._font;\n    target._subFont = this._subFont;\n  }\n\n  /**\n   * @internal\n   */\n  _isContainDirtyFlag(type: number): boolean {\n    return (this._dirtyFlag & type) != 0;\n  }\n\n  /**\n   * @internal\n   */\n  _setDirtyFlagTrue(type: number): void {\n    this._dirtyFlag |= type;\n  }\n\n  /**\n   * @internal\n   */\n  _setDirtyFlagFalse(type: number): void {\n    this._dirtyFlag &= ~type;\n  }\n\n  /**\n   * @override\n   */\n  protected _updateBounds(worldBounds: BoundingBox): void {\n    BoundingBox.transform(this._localBounds, this._entity.transform.worldMatrix, worldBounds);\n  }\n\n  /**\n   * @override\n   */\n  protected _render(context: RenderContext): void {\n    if (\n      this._text === \"\" ||\n      (this.enableWrapping && this.width <= 0) ||\n      (this.overflowMode === OverflowMode.Truncate && this.height <= 0)\n    ) {\n      return;\n    }\n\n    if (this._isContainDirtyFlag(DirtyFlag.MaskInteraction)) {\n      this._updateStencilState();\n      this._setDirtyFlagFalse(DirtyFlag.MaskInteraction);\n    }\n\n    if (this._isContainDirtyFlag(DirtyFlag.SubFont)) {\n      this._resetSubFont();\n      this._setDirtyFlagFalse(DirtyFlag.SubFont);\n    }\n\n    if (this._isContainDirtyFlag(DirtyFlag.LocalPositionBounds)) {\n      this._updateLocalData();\n      this._setDirtyFlagFalse(DirtyFlag.LocalPositionBounds);\n    }\n\n    if (this._isContainDirtyFlag(DirtyFlag.WorldPosition)) {\n      this._updatePosition();\n      this._setDirtyFlagFalse(DirtyFlag.WorldPosition);\n    }\n\n    const spriteElementPool = this._engine._spriteElementPool;\n    const textElement = this._engine._textElementPool.getFromPool();\n    const charElements = textElement.charElements;\n    const material = this.getMaterial();\n    const charRenderDatas = this._charRenderDatas;\n    const charCount = charRenderDatas.length;\n    const passes = material.shader.passes;\n    const renderStates = material.renderStates;\n\n    textElement.component = this;\n    textElement.material = material;\n    charElements.length = charCount;\n    textElement.renderState = renderStates[0];\n\n    for (let i = 0; i < charCount; ++i) {\n      const charRenderData = charRenderDatas[i];\n      const spriteElement = spriteElementPool.getFromPool();\n      spriteElement.setValue(\n        this,\n        charRenderData.renderData,\n        material,\n        charRenderData.texture,\n        renderStates[0],\n        passes[0]\n      );\n      charElements[i] = spriteElement;\n    }\n    context.camera._renderPipeline.pushPrimitive(textElement);\n  }\n\n  private _updateStencilState(): void {\n    const material = this.getInstanceMaterial();\n    const stencilState = material.renderState.stencilState;\n    const maskInteraction = this._maskInteraction;\n\n    if (maskInteraction === SpriteMaskInteraction.None) {\n      stencilState.enabled = false;\n      stencilState.writeMask = 0xff;\n      stencilState.referenceValue = 0;\n      stencilState.compareFunctionFront = stencilState.compareFunctionBack = CompareFunction.Always;\n    } else {\n      stencilState.enabled = true;\n      stencilState.writeMask = 0x00;\n      stencilState.referenceValue = 1;\n      const compare =\n        maskInteraction === SpriteMaskInteraction.VisibleInsideMask\n          ? CompareFunction.LessEqual\n          : CompareFunction.Greater;\n      stencilState.compareFunctionFront = compare;\n      stencilState.compareFunctionBack = compare;\n    }\n  }\n\n  private _resetSubFont(): void {\n    this._subFont = this._font._getSubFont(this.fontSize, this.fontStyle);\n  }\n\n  private _updatePosition(): void {\n    const { transform } = this.entity;\n    const e = transform.worldMatrix.elements;\n    const charRenderDatas = this._charRenderDatas;\n\n    // prettier-ignore\n    const e0 = e[0], e1 = e[1], e2 = e[2],\n    e4 = e[4], e5 = e[5], e6 = e[6],\n    e12 = e[12], e13 = e[13], e14 = e[14];\n\n    const up = TextRenderer._tempVec31.set(e4, e5, e6);\n    const right = TextRenderer._tempVec30.set(e0, e1, e2);\n\n    for (let i = 0, n = charRenderDatas.length; i < n; ++i) {\n      const charRenderData = charRenderDatas[i];\n      const { localPositions } = charRenderData;\n      const { positions } = charRenderData.renderData;\n\n      const { x: topLeftX, y: topLeftY } = localPositions;\n\n      // Top-Left\n      const worldPosition0 = positions[0];\n      worldPosition0.x = topLeftX * e0 + topLeftY * e4 + e12;\n      worldPosition0.y = topLeftX * e1 + topLeftY * e5 + e13;\n      worldPosition0.z = topLeftX * e2 + topLeftY * e6 + e14;\n\n      // Right offset\n      const worldPosition1 = positions[1];\n      Vector3.scale(right, localPositions.z - topLeftX, worldPosition1);\n\n      // Top-Right\n      Vector3.add(worldPosition0, worldPosition1, worldPosition1);\n\n      // Up offset\n      const worldPosition2 = positions[2];\n      Vector3.scale(up, localPositions.w - topLeftY, worldPosition2);\n\n      // Bottom-Left\n      Vector3.add(worldPosition0, worldPosition2, positions[3]);\n      // Bottom-Right\n      Vector3.add(worldPosition1, worldPosition2, worldPosition2);\n    }\n  }\n\n  private _updateLocalData(): void {\n    const { color, horizontalAlignment, verticalAlignment, _charRenderDatas: charRenderDatas } = this;\n    const { min, max } = this._localBounds;\n    min.set(0, 0, 0);\n    max.set(0, 0, 0);\n    const { _pixelsPerUnit } = Engine;\n    const pixelsPerUnitReciprocal = 1.0 / _pixelsPerUnit;\n    const charFont = this._subFont;\n    const rendererWidth = this.width * _pixelsPerUnit;\n    const halfRendererWidth = rendererWidth * 0.5;\n    const rendererHeight = this.height * _pixelsPerUnit;\n\n    const textMetrics = this.enableWrapping\n      ? TextUtils.measureTextWithWrap(this)\n      : TextUtils.measureTextWithoutWrap(this);\n    const { height, lines, lineWidths, lineHeight, lineMaxSizes } = textMetrics;\n    const charRenderDataPool = TextRenderer._charRenderDataPool;\n    const halfLineHeight = lineHeight * 0.5;\n    const linesLen = lines.length;\n\n    let startY = 0;\n    const topDiff = lineHeight * 0.5 - lineMaxSizes[0].ascent;\n    const bottomDiff = lineHeight * 0.5 - lineMaxSizes[linesLen - 1].descent - 1;\n    switch (verticalAlignment) {\n      case TextVerticalAlignment.Top:\n        startY = rendererHeight * 0.5 - halfLineHeight + topDiff;\n        break;\n      case TextVerticalAlignment.Center:\n        startY = height * 0.5 - halfLineHeight - (bottomDiff - topDiff) * 0.5;\n        break;\n      case TextVerticalAlignment.Bottom:\n        startY = height - rendererHeight * 0.5 - halfLineHeight - bottomDiff;\n        break;\n    }\n\n    let renderDataCount = 0;\n    let minX = Number.MAX_SAFE_INTEGER;\n    let minY = Number.MAX_SAFE_INTEGER;\n    let maxX = Number.MIN_SAFE_INTEGER;\n    let maxY = Number.MIN_SAFE_INTEGER;\n    let lastLineIndex = linesLen - 1;\n    for (let i = 0; i < linesLen; ++i) {\n      const line = lines[i];\n      const lineWidth = lineWidths[i];\n\n      let startX = 0;\n      switch (horizontalAlignment) {\n        case TextHorizontalAlignment.Left:\n          startX = -halfRendererWidth;\n          break;\n        case TextHorizontalAlignment.Center:\n          startX = -lineWidth * 0.5;\n          break;\n        case TextHorizontalAlignment.Right:\n          startX = halfRendererWidth - lineWidth;\n          break;\n      }\n\n      for (let j = 0, m = line.length - 1; j <= m; ++j) {\n        const char = line[j];\n        const charInfo = charFont._getCharInfo(char);\n\n        if (charInfo.h > 0) {\n          const charRenderData = charRenderDatas[renderDataCount] || charRenderDataPool.get();\n          const { renderData, localPositions } = charRenderData;\n          charRenderData.texture = charFont._getTextureByIndex(charInfo.index);\n          renderData.color = color;\n\n          renderData.uvs = charInfo.uvs;\n          const { w, ascent, descent } = charInfo;\n\n          const left = startX * pixelsPerUnitReciprocal;\n          const right = (startX + w) * pixelsPerUnitReciprocal;\n          const top = (startY + ascent) * pixelsPerUnitReciprocal;\n          const bottom = (startY - descent + 1) * pixelsPerUnitReciprocal;\n\n          localPositions.set(left, top, right, bottom);\n          charRenderDatas[renderDataCount] = charRenderData;\n          renderDataCount++;\n\n          i === 0 && (maxY = Math.max(maxY, top));\n          i === lastLineIndex && (minY = Math.min(minY, bottom));\n          j === 0 && (minX = Math.min(minX, left));\n          j === m && (maxX = Math.max(maxX, right));\n        }\n        startX += charInfo.xAdvance;\n      }\n\n      startY -= lineHeight;\n    }\n\n    min.set(minX, minY, 0);\n    max.set(maxX, maxY, 0);\n\n    // Revert excess render data to pool.\n    const lastRenderDataCount = charRenderDatas.length;\n    if (lastRenderDataCount > renderDataCount) {\n      for (let i = renderDataCount; i < lastRenderDataCount; ++i) {\n        charRenderDataPool.put(charRenderDatas[i]);\n      }\n      charRenderDatas.length = renderDataCount;\n    }\n\n    charFont._getLastIndex() > 0 &&\n      charRenderDatas.sort((a, b) => {\n        return a.texture.instanceId - b.texture.instanceId;\n      });\n  }\n\n  protected _onTransformChanged(bit: TransformModifyFlags): void {\n    super._onTransformChanged(bit);\n    this._setDirtyFlagTrue(DirtyFlag.WorldPosition | DirtyFlag.WorldBounds);\n  }\n}\n\nenum DirtyFlag {\n  SubFont = 0x1,\n  LocalPositionBounds = 0x2,\n  WorldPosition = 0x4,\n  WorldBounds = 0x8,\n  MaskInteraction = 0x10,\n\n  Position = LocalPositionBounds | WorldPosition | WorldBounds,\n  Font = SubFont | Position\n}\n","import { KeyframeValueType } from \"../../../Keyframe\";\nimport { AnimationCurveOwner } from \"../AnimationCurveOwner\";\nimport { IAnimationCurveOwnerAssembler } from \"./IAnimationCurveOwnerAssembler\";\n\n/**\n * @internal\n */\nexport class UniversalAnimationCurveOwnerAssembler<V extends KeyframeValueType>\n  implements IAnimationCurveOwnerAssembler<V>\n{\n  private _mounted: Record<string, V>;\n  private _propertyName: string;\n\n  initialize(owner: AnimationCurveOwner<KeyframeValueType>): void {\n    let mounted: any = owner.component;\n    const properties = (owner.property as string).split(\".\");\n    const endIndex = properties.length - 1;\n    for (let i = 0; i < endIndex; i++) {\n      mounted = mounted[properties[i]];\n    }\n    this._mounted = mounted;\n    this._propertyName = properties[endIndex];\n  }\n\n  getTargetValue(): V {\n    return this._mounted[this._propertyName];\n  }\n\n  setTargetValue(value: V): void {\n    this._mounted[this._propertyName] = value;\n  }\n}\n","import { Component } from \"../../../Component\";\nimport { Entity } from \"../../../Entity\";\nimport { AnimationCurve } from \"../../animationCurve/AnimationCurve\";\nimport { IAnimationCurveCalculator } from \"../../animationCurve/interfaces/IAnimationCurveCalculator\";\nimport { KeyframeValueType } from \"../../Keyframe\";\nimport { IAnimationCurveOwnerAssembler } from \"./assembler/IAnimationCurveOwnerAssembler\";\nimport { UniversalAnimationCurveOwnerAssembler } from \"./assembler/UniversalAnimationCurveOwnerAssembler\";\n\n/**\n * @internal\n */\nexport class AnimationCurveOwner<V extends KeyframeValueType> {\n  private static _assemblerMap = new Map<ComponentType, Record<string, AssemblerType>>();\n\n  static registerAssembler(componentType: ComponentType, property: string, assemblerType: AssemblerType): void {\n    let subMap = AnimationCurveOwner._assemblerMap.get(componentType);\n    if (!subMap) {\n      subMap = {};\n      AnimationCurveOwner._assemblerMap.set(componentType, subMap);\n    }\n    subMap[property] = assemblerType;\n  }\n\n  static getAssemblerType(componentType: ComponentType, property: string): AssemblerType {\n    const subMap = AnimationCurveOwner._assemblerMap.get(componentType);\n    const assemblerType = subMap ? subMap[property] : undefined;\n    return assemblerType ?? UniversalAnimationCurveOwnerAssembler<KeyframeValueType>;\n  }\n\n  readonly target: Entity;\n  readonly type: new (entity: Entity) => Component;\n  readonly property: string;\n  readonly component: Component;\n\n  crossCurveMark: number = 0;\n  crossCurveDataIndex: number;\n  defaultValue: V;\n  fixedPoseValue: V;\n  hasSavedDefaultValue: boolean = false;\n  baseEvaluateData: IEvaluateData<V> = { curKeyframeIndex: 0, value: null };\n\n  crossEvaluateData: IEvaluateData<V> = { curKeyframeIndex: 0, value: null };\n  crossSrcCurveIndex: number;\n  crossDestCurveIndex: number;\n\n  referenceTargetValue: V;\n\n  private _assembler: IAnimationCurveOwnerAssembler<V>;\n  private _cureType: IAnimationCurveCalculator<V>;\n\n  constructor(\n    target: Entity,\n    type: new (entity: Entity) => Component,\n    property: string,\n    cureType: IAnimationCurveCalculator<V>\n  ) {\n    this.target = target;\n    this.type = type;\n    this.property = property;\n    this.component = target.getComponent(type);\n    this._cureType = cureType;\n\n    const assemblerType = AnimationCurveOwner.getAssemblerType(type, property);\n    this._assembler = <IAnimationCurveOwnerAssembler<V>>new assemblerType();\n    this._assembler.initialize(this);\n\n    if (cureType._isReferenceType) {\n      this.referenceTargetValue = this._assembler.getTargetValue();\n    }\n  }\n\n  evaluateAndApplyValue(curve: AnimationCurve<V>, time: number, layerWeight: number, additive: boolean): void {\n    if (curve.keys.length) {\n      if (additive) {\n        const value = curve._evaluateAdditive(time, this.baseEvaluateData);\n\n        const cureType = this._cureType;\n        if (cureType._isReferenceType) {\n          cureType._additiveValue(value, layerWeight, this.referenceTargetValue);\n        } else {\n          const assembler = this._assembler;\n          const originValue = assembler.getTargetValue();\n          const additiveValue = cureType._additiveValue(value, layerWeight, originValue);\n          assembler.setTargetValue(additiveValue);\n        }\n      } else {\n        const value = curve._evaluate(time, this.baseEvaluateData);\n\n        this._applyValue(value, layerWeight);\n      }\n    }\n  }\n\n  crossFadeAndApplyValue(\n    srcCurve: AnimationCurve<V>,\n    destCurve: AnimationCurve<V>,\n    srcTime: number,\n    destTime: number,\n    crossWeight: number,\n    layerWeight: number,\n    additive: boolean\n  ): void {\n    const srcValue =\n      srcCurve && srcCurve.keys.length\n        ? additive\n          ? srcCurve._evaluateAdditive(srcTime, this.baseEvaluateData)\n          : srcCurve._evaluate(srcTime, this.baseEvaluateData)\n        : additive\n        ? this._cureType._getZeroValue(this.baseEvaluateData.value)\n        : this.defaultValue;\n\n    const destValue =\n      destCurve && destCurve.keys.length\n        ? additive\n          ? destCurve._evaluateAdditive(destTime, this.crossEvaluateData)\n          : destCurve._evaluate(destTime, this.crossEvaluateData)\n        : additive\n        ? this._cureType._getZeroValue(this.crossEvaluateData.value)\n        : this.defaultValue;\n\n    this._applyCrossValue(srcValue, destValue, crossWeight, layerWeight, additive);\n  }\n\n  crossFadeFromPoseAndApplyValue(\n    destCurve: AnimationCurve<V>,\n    destTime: number,\n    crossWeight: number,\n    layerWeight: number,\n    additive: boolean\n  ): void {\n    const srcValue = additive\n      ? this._cureType._subtractValue(this.fixedPoseValue, this.defaultValue, this.baseEvaluateData.value)\n      : this.fixedPoseValue;\n    const destValue =\n      destCurve && destCurve.keys.length\n        ? additive\n          ? destCurve._evaluateAdditive(destTime, this.crossEvaluateData)\n          : destCurve._evaluate(destTime, this.crossEvaluateData)\n        : additive\n        ? this._cureType._getZeroValue(this.crossEvaluateData.value)\n        : this.defaultValue;\n\n    this._applyCrossValue(srcValue, destValue, crossWeight, layerWeight, additive);\n  }\n\n  revertDefaultValue(): void {\n    this._assembler.setTargetValue(this.defaultValue);\n  }\n\n  saveDefaultValue(): void {\n    if (this._cureType._isReferenceType) {\n      this._cureType._copyValue(this.referenceTargetValue, this.defaultValue);\n    } else {\n      this.defaultValue = this._assembler.getTargetValue();\n    }\n    this.hasSavedDefaultValue = true;\n  }\n\n  saveFixedPoseValue(): void {\n    if (this._cureType._isReferenceType) {\n      this._cureType._copyValue(this.referenceTargetValue, this.fixedPoseValue);\n    } else {\n      this.fixedPoseValue = this._assembler.getTargetValue();\n    }\n  }\n\n  private _applyValue(value: V, weight: number): void {\n    if (weight === 1.0) {\n      if (this._cureType._isReferenceType) {\n        this._cureType._copyValue(value, this.referenceTargetValue);\n      } else {\n        this._assembler.setTargetValue(value);\n      }\n    } else {\n      if (this._cureType._isReferenceType) {\n        const targetValue = this.referenceTargetValue;\n        this._cureType._lerpValue(targetValue, value, weight, targetValue);\n      } else {\n        const originValue = this._assembler.getTargetValue();\n        const lerpValue = this._cureType._lerpValue(originValue, value, weight);\n        this._assembler.setTargetValue(lerpValue);\n      }\n    }\n  }\n\n  private _applyCrossValue(\n    srcValue: V,\n    destValue: V,\n    crossWeight: number,\n    layerWeight: number,\n    additive: boolean\n  ): void {\n    let out: V;\n    if (this._cureType._isReferenceType) {\n      out = this.baseEvaluateData.value;\n      this._cureType._lerpValue(srcValue, destValue, crossWeight, out);\n    } else {\n      out = this._cureType._lerpValue(srcValue, destValue, crossWeight);\n    }\n\n    if (additive) {\n      if (this._cureType._isReferenceType) {\n        this._cureType._additiveValue(out, layerWeight, this.referenceTargetValue);\n      } else {\n        const originValue = this._assembler.getTargetValue();\n        const lerpValue = this._cureType._additiveValue(out, layerWeight, originValue);\n        this._assembler.setTargetValue(lerpValue);\n      }\n    } else {\n      this._applyValue(out, layerWeight);\n    }\n  }\n}\n\ntype ComponentType = new (entity: Entity) => Component;\ntype AssemblerType = new () => IAnimationCurveOwnerAssembler<KeyframeValueType>;\n\nexport interface IEvaluateData<V extends KeyframeValueType> {\n  curKeyframeIndex: number;\n  value: V;\n}\n","import { Vector3 } from \"@galacean/engine-math\";\nimport { Transform } from \"../../../../Transform\";\nimport { KeyframeValueType } from \"../../../Keyframe\";\nimport { AnimationCurveOwner } from \"../AnimationCurveOwner\";\nimport { IAnimationCurveOwnerAssembler } from \"./IAnimationCurveOwnerAssembler\";\n\n/**\n * @internal\n */\nexport class PositionAnimationCurveOwnerAssembler implements IAnimationCurveOwnerAssembler<Vector3> {\n  private _transform: Transform;\n\n  initialize(owner: AnimationCurveOwner<KeyframeValueType>): void {\n    this._transform = owner.target.transform;\n  }\n\n  getTargetValue(): Vector3 {\n    return this._transform.position;\n  }\n  setTargetValue(value: Vector3): void {\n    this._transform.position = value;\n  }\n}\n\nAnimationCurveOwner.registerAssembler(Transform, \"position\", PositionAnimationCurveOwnerAssembler);\n","import { Quaternion } from \"@galacean/engine-math\";\nimport { Transform } from \"../../../../Transform\";\nimport { KeyframeValueType } from \"../../../Keyframe\";\nimport { AnimationCurveOwner } from \"../AnimationCurveOwner\";\nimport { IAnimationCurveOwnerAssembler } from \"./IAnimationCurveOwnerAssembler\";\n\n/**\n * @internal\n */\nexport class RotationAnimationCurveOwnerAssembler implements IAnimationCurveOwnerAssembler<Quaternion> {\n  private _transform: Transform;\n\n  initialize(owner: AnimationCurveOwner<KeyframeValueType>): void {\n    this._transform = owner.target.transform;\n  }\n\n  getTargetValue(): Quaternion {\n    return this._transform.rotationQuaternion;\n  }\n\n  setTargetValue(value: Quaternion): void {\n    this._transform.rotationQuaternion = value;\n  }\n}\n\nAnimationCurveOwner.registerAssembler(Transform, \"rotationQuaternion\", RotationAnimationCurveOwnerAssembler);\n","import { Vector3 } from \"@galacean/engine-math\";\nimport { Transform } from \"../../../../Transform\";\nimport { KeyframeValueType } from \"../../../Keyframe\";\nimport { AnimationCurveOwner } from \"../AnimationCurveOwner\";\nimport { IAnimationCurveOwnerAssembler } from \"./IAnimationCurveOwnerAssembler\";\n\n/**\n * @internal\n */\nexport class ScaleAnimationCurveOwnerAssembler implements IAnimationCurveOwnerAssembler<Vector3> {\n  private _transform: Transform;\n\n  initialize(owner: AnimationCurveOwner<KeyframeValueType>): void {\n    this._transform = owner.target.transform;\n  }\n\n  getTargetValue(): Vector3 {\n    return this._transform.scale;\n  }\n\n  setTargetValue(value: Vector3): void {\n    this._transform.scale = value;\n  }\n}\nAnimationCurveOwner.registerAssembler(Transform, \"scale\", ScaleAnimationCurveOwnerAssembler);\n","import { SkinnedMeshRenderer } from \"../../../../mesh\";\nimport { KeyframeValueType } from \"../../../Keyframe\";\nimport { AnimationCurveOwner } from \"../AnimationCurveOwner\";\nimport { IAnimationCurveOwnerAssembler } from \"./IAnimationCurveOwnerAssembler\";\n\n/**\n * @internal\n */\nexport class BlendShapeWeightsAnimationCurveOwnerAssembler implements IAnimationCurveOwnerAssembler<Float32Array> {\n  private _skinnedMeshRenderer: SkinnedMeshRenderer;\n\n  initialize(owner: AnimationCurveOwner<KeyframeValueType>): void {\n    this._skinnedMeshRenderer = owner.target.getComponent(SkinnedMeshRenderer);\n  }\n\n  getTargetValue(): Float32Array {\n    return this._skinnedMeshRenderer.blendShapeWeights;\n  }\n\n  setTargetValue(value: Float32Array): void {\n    this._skinnedMeshRenderer.blendShapeWeights = value;\n  }\n}\n\nAnimationCurveOwner.registerAssembler(\n  SkinnedMeshRenderer,\n  \"blendShapeWeights\",\n  BlendShapeWeightsAnimationCurveOwnerAssembler\n);\n","import { Component } from \"../Component\";\nimport { Entity } from \"../Entity\";\nimport { AnimationCurve } from \"./animationCurve\";\nimport { IAnimationCurveCalculator } from \"./animationCurve/interfaces/IAnimationCurveCalculator\";\nimport { AnimationCurveOwner } from \"./internal/animationCurveOwner/AnimationCurveOwner\";\nimport { KeyframeValueType } from \"./Keyframe\";\n\n/**\n * Associate AnimationCurve and the Entity\n */\nexport class AnimationClipCurveBinding {\n  /**\n   * Path to the entity this curve applies to. The relativePath is formatted similar to a pathname,\n   * e.g. \"root/spine/leftArm\". If relativePath is empty it refers to the entity the animation clip is attached to.\n   */\n  relativePath: string;\n  /** The class type of the component that is animated. */\n  type: new (entity: Entity) => Component;\n  /** The name or path to the property being animated. */\n  property: string;\n  /** The animation curve. */\n  curve: AnimationCurve<KeyframeValueType>;\n\n  private _tempCurveOwner: Record<number, AnimationCurveOwner<KeyframeValueType>> = {};\n\n  /**\n   * @internal\n   */\n  _createCurveOwner(entity: Entity): AnimationCurveOwner<KeyframeValueType> {\n    const curveType = (<unknown>this.curve.constructor) as IAnimationCurveCalculator<KeyframeValueType>;\n    const owner = new AnimationCurveOwner(entity, this.type, this.property, curveType);\n\n    curveType._initializeOwner(owner);\n    return owner;\n  }\n\n  /**\n   * @internal\n   */\n  _getTempCurveOwner(entity: Entity): AnimationCurveOwner<KeyframeValueType> {\n    const { instanceId } = entity;\n    if (!this._tempCurveOwner[instanceId]) {\n      this._tempCurveOwner[instanceId] = this._createCurveOwner(entity);\n    }\n    return this._tempCurveOwner[instanceId];\n  }\n}\n","/**\n * AnimationEvent lets you call a script function similar to SendMessage as part of playing back an animation.\n */\nexport class AnimationEvent {\n  /** The time when the event be triggered. */\n  time: number;\n  /** The name of the method called in the script. */\n  functionName: string;\n  /** The parameter that is stored in the event and will be sent to the function. */\n  parameter: Object;\n}\n","import { Component } from \"../Component\";\nimport { Entity } from \"../Entity\";\nimport { AnimationClipCurveBinding } from \"./AnimationClipCurveBinding\";\nimport { AnimationCurve } from \"./animationCurve/AnimationCurve\";\nimport { AnimationEvent } from \"./AnimationEvent\";\nimport { KeyframeValueType } from \"./Keyframe\";\n\n/**\n * Stores keyframe based animations.\n */\nexport class AnimationClip {\n  /** @internal */\n  _curveBindings: AnimationClipCurveBinding[] = [];\n\n  private _length: number = 0;\n  private _events: AnimationEvent[] = [];\n\n  /**\n   * Animation events for this animation clip.\n   */\n  get events(): Readonly<AnimationEvent[]> {\n    return this._events;\n  }\n\n  /**\n   * Animation curve bindings for this animation clip.\n   */\n  get curveBindings(): Readonly<AnimationClipCurveBinding[]> {\n    return this._curveBindings;\n  }\n\n  /**\n   * Animation length in seconds.\n   */\n  get length(): number {\n    return this._length;\n  }\n\n  /**\n   * @param name - The AnimationClip's name\n   */\n  constructor(public readonly name: string) {}\n\n  /**\n   * Adds an animation event to the clip.\n   * @param functionName - The name of the method called in the script\n   * @param time - The time when the event be triggered\n   * @param parameter - The parameter that is stored in the event and will be sent to the function\n   */\n  addEvent(functionName: string, time: number, parameter: Object): void;\n\n  /**\n   * Adds an animation event to the clip.\n   * @param event - The animation event\n   */\n  addEvent(event: AnimationEvent): void;\n\n  addEvent(param: AnimationEvent | string, time?: number, parameter?: Object): void {\n    if (typeof param === \"string\") {\n      const event = new AnimationEvent();\n      event.functionName = param;\n      event.time = time;\n      event.parameter = parameter;\n      this._events.push(event);\n    } else {\n      this._events.push(param);\n    }\n    this._events.sort((a, b) => a.time - b.time);\n  }\n\n  /**\n   * Clears all events from the clip.\n   */\n  clearEvents(): void {\n    this._events.length = 0;\n  }\n\n  /**\n   * Add curve binding for the clip.\n   * @param relativePath - Path to the game object this curve applies to. The relativePath is formatted similar to a pathname, e.g. \"/root/spine/leftArm\"\n   * @param type- The class type of the component that is animated\n   * @param propertyName - The name or path to the property being animated\n   * @param curve - The animation curve\n   */\n  addCurveBinding<T extends Component>(\n    relativePath: string,\n    type: new (entity: Entity) => T,\n    propertyName: string,\n    curve: AnimationCurve<KeyframeValueType>\n  ): void {\n    const curveBinding = new AnimationClipCurveBinding();\n    curveBinding.relativePath = relativePath;\n    curveBinding.type = type;\n    curveBinding.property = propertyName;\n    curveBinding.curve = curve;\n    if (curve.length > this._length) {\n      this._length = curve.length;\n    }\n    this._curveBindings.push(curveBinding);\n  }\n\n  /**\n   * Clears all curve bindings from the clip.\n   */\n  clearCurveBindings(): void {\n    this._curveBindings.length = 0;\n    this._length = 0;\n  }\n\n  /**\n   * @internal\n   * Samples an animation at a given time.\n   * @param entity - The animated entity\n   * @param time - The time to sample an animation\n   */\n  _sampleAnimation(entity: Entity, time: number): void {\n    const { _curveBindings: curveBindings } = this;\n    for (let i = curveBindings.length - 1; i >= 0; i--) {\n      const curveData = curveBindings[i];\n      const targetEntity = entity.findByPath(curveData.relativePath);\n      if (targetEntity) {\n        const curveOwner = curveData._getTempCurveOwner(targetEntity);\n        curveOwner.evaluateAndApplyValue(curveData.curve, time, 1, false);\n      }\n    }\n  }\n}\n","/**\n * Animation interpolation method.\n */\nexport enum InterpolationType {\n  /** Linear interpolation */\n  Linear,\n  /** Cubic spline interpolation */\n  CubicSpine,\n  /** Stepped interpolation */\n  Step,\n  /** Hermite interpolation */\n  Hermite\n}\n","import { InterpolationType } from \"../enums/InterpolationType\";\nimport { IEvaluateData } from \"../internal/animationCurveOwner/AnimationCurveOwner\";\nimport { Keyframe, KeyframeValueType } from \"../Keyframe\";\nimport { IAnimationCurveCalculator } from \"./interfaces/IAnimationCurveCalculator\";\n\n/**\n * Store a collection of Keyframes that can be evaluated over time.\n */\nexport abstract class AnimationCurve<V extends KeyframeValueType> {\n  /** All keys defined in the animation curve. */\n  keys: Keyframe<V>[] = [];\n\n  protected _evaluateData: IEvaluateData<V> = { curKeyframeIndex: 0, value: null };\n  protected _length: number = 0;\n  protected _interpolation: InterpolationType;\n\n  private _type: IAnimationCurveCalculator<V>;\n\n  /**\n   * The interpolationType of the animation curve.\n   */\n  get interpolation(): InterpolationType {\n    return this._interpolation;\n  }\n\n  set interpolation(value: InterpolationType) {\n    if (!this._type._isInterpolationType && value !== InterpolationType.Step) {\n      this._interpolation = InterpolationType.Step;\n      console.warn(\"The interpolation type must be `InterpolationType.Step`.\");\n    } else {\n      this._interpolation = value;\n    }\n  }\n\n  /**\n   * Animation curve length in seconds.\n   */\n  get length(): number {\n    return this._length;\n  }\n\n  constructor() {\n    const type = (<unknown>this.constructor) as IAnimationCurveCalculator<V>;\n    this._interpolation = type._isInterpolationType ? InterpolationType.Linear : InterpolationType.Step;\n    this._type = type;\n  }\n\n  /**\n   * Add a new key to the curve.\n   * @param key - The keyframe\n   */\n  addKey(key: Keyframe<V>): void {\n    const { time } = key;\n    const { keys } = this;\n\n    if (time >= this._length) {\n      keys.push(key);\n      this._length = time;\n    } else {\n      let index = keys.length;\n      while (--index >= 0 && time < keys[index].time);\n      keys.splice(index + 1, 0, key);\n    }\n  }\n\n  /**\n   * Evaluate the curve at time.\n   * @param time - The time within the curve you want to evaluate\n   */\n  evaluate(time: number): V {\n    return this._evaluate(time, this._evaluateData);\n  }\n\n  /**\n   * Removes a key.\n   * @param index - The index of the key to remove\n   */\n  removeKey(index: number): void {\n    this.keys.splice(index, 1);\n    const { keys } = this;\n\n    let newLength = 0;\n    for (let i = keys.length - 1; i >= 0; i--) {\n      const key = keys[i];\n      if (key.time > length) {\n        newLength = key.time;\n      }\n    }\n    this._length = newLength;\n  }\n\n  /**\n   * @internal\n   */\n  _evaluate(time: number, evaluateData: IEvaluateData<V>): V {\n    const { length } = this.keys;\n    if (!length) {\n      console.warn(`This curve don't have any keyframes: `, this);\n      return;\n    }\n\n    const { keys, interpolation } = this;\n\n    // Compute curIndex and nextIndex.\n    let curIndex = evaluateData.curKeyframeIndex;\n\n    // Reset loop,if delete keyfranme may cause `curIndex >= length`\n    if (curIndex !== -1 && (curIndex >= length || time < keys[curIndex].time)) {\n      curIndex = -1;\n    }\n\n    let nextIndex = curIndex + 1;\n    while (nextIndex < length) {\n      if (time < keys[nextIndex].time) {\n        break;\n      }\n      curIndex++;\n      nextIndex++;\n    }\n    evaluateData.curKeyframeIndex = curIndex;\n\n    // Evaluate value.\n    let value: V;\n    if (curIndex === -1) {\n      value = this._type._copyValue(keys[0].value, evaluateData.value);\n    } else if (nextIndex === length) {\n      value = this._type._copyValue(keys[curIndex].value, evaluateData.value);\n    } else {\n      // Time between first frame and end frame.\n      const curFrame = keys[curIndex];\n      const nextFrame = keys[nextIndex];\n      const curFrameTime = curFrame.time;\n      const duration = nextFrame.time - curFrameTime;\n      const t = (time - curFrameTime) / duration;\n\n      switch (interpolation) {\n        case InterpolationType.Linear:\n          value = this._type._lerpValue(curFrame.value, nextFrame.value, t, evaluateData.value);\n          break;\n        case InterpolationType.Step:\n          value = this._type._copyValue(curFrame.value, evaluateData.value);\n          break;\n        case InterpolationType.CubicSpine:\n        case InterpolationType.Hermite:\n          value = this._type._hermiteInterpolationValue(curFrame, nextFrame, t, duration, evaluateData.value);\n          break;\n      }\n    }\n    return value;\n  }\n\n  /**\n   * @internal\n   */\n  _evaluateAdditive(time: number, evaluateData: IEvaluateData<V>): V {\n    const result = this._evaluate(time, evaluateData);\n    return this._type._subtractValue(result, this.keys[0].value, evaluateData.value);\n  }\n}\n","import { StaticInterfaceImplement } from \"../../base/StaticInterfaceImplement\";\nimport { AnimationCurveOwner } from \"../internal/animationCurveOwner/AnimationCurveOwner\";\nimport { Keyframe } from \"../Keyframe\";\nimport { AnimationCurve } from \"./AnimationCurve\";\nimport { IAnimationCurveCalculator } from \"./interfaces/IAnimationCurveCalculator\";\n\n/**\n * Store a collection of Keyframes that can be evaluated over time.\n */\n@StaticInterfaceImplement<IAnimationCurveCalculator<number[]>>()\nexport class AnimationArrayCurve extends AnimationCurve<number[]> {\n  /** @internal */\n  static _isReferenceType: boolean = true;\n  /** @internal */\n  static _isInterpolationType: boolean = true;\n\n  /**\n   * @internal\n   */\n  static _initializeOwner(owner: AnimationCurveOwner<number[]>): void {\n    owner.defaultValue = [];\n    owner.fixedPoseValue = [];\n    owner.baseEvaluateData.value = [];\n    owner.crossEvaluateData.value = [];\n  }\n\n  /**\n   * @internal\n   */\n  static _lerpValue(srcValue: number[], destValue: number[], weight: number, out: number[]): number[] {\n    for (let i = 0, n = out.length; i < n; ++i) {\n      const src = srcValue[i];\n      out[i] = src + (destValue[i] - src) * weight;\n    }\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _subtractValue(src: number[], base: number[], out: number[]): number[] {\n    for (let i = 0, n = src.length; i < n; i++) {\n      out[i] = src[i] - base[i];\n    }\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _getZeroValue(out: number[]): number[] {\n    for (let i = 0, n = out.length; i < n; i++) {\n      out[i] = 0;\n    }\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _additiveValue(value: number[], weight: number, out: number[]): number[] {\n    for (let i = 0, n = out.length; i < n; ++i) {\n      out[i] += value[i] * weight;\n    }\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _copyValue(source: number[], out: number[]): number[] {\n    for (let i = 0, n = out.length; i < n; ++i) {\n      out[i] = source[i];\n    }\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _hermiteInterpolationValue(\n    frame: Keyframe<number[]>,\n    nextFrame: Keyframe<number[]>,\n    t: number,\n    duration: number,\n    out: number[]\n  ): number[] {\n    const t0 = frame.outTangent;\n    const t1 = nextFrame.inTangent;\n    const p0 = frame.value;\n    const p1 = nextFrame.value;\n\n    const t2 = t * t;\n    const t3 = t2 * t;\n    const a = 2.0 * t3 - 3.0 * t2 + 1.0;\n    const b = t3 - 2.0 * t2 + t;\n    const c = t3 - t2;\n    const d = -2.0 * t3 + 3.0 * t2;\n\n    for (let i = 0, n = p0.length; i < n; ++i) {\n      if (Number.isFinite(t0[i]) && Number.isFinite(t1[i])) {\n        out[i] = a * p0[i] + b * t0[i] * duration + c * t1[i] * duration + d * p1[i];\n      } else {\n        out[i] = frame.value[i];\n      }\n    }\n    return out;\n  }\n\n  constructor() {\n    super();\n    this._evaluateData.value = [];\n  }\n}\n","import { StaticInterfaceImplement } from \"../../base/StaticInterfaceImplement\";\nimport { AnimationCurveOwner } from \"../internal/animationCurveOwner/AnimationCurveOwner\";\nimport { Keyframe } from \"../Keyframe\";\nimport { AnimationCurve } from \"./AnimationCurve\";\nimport { IAnimationCurveCalculator } from \"./interfaces/IAnimationCurveCalculator\";\n\n/**\n * Store a collection of Keyframes that can be evaluated over time.\n */\n@StaticInterfaceImplement<IAnimationCurveCalculator<boolean>>()\nexport class AnimationBoolCurve extends AnimationCurve<boolean> {\n  /** @internal */\n  static _isReferenceType: boolean = false;\n  /** @internal */\n  static _isInterpolationType: boolean = false;\n\n  /**\n   * @internal\n   */\n  static _initializeOwner(owner: AnimationCurveOwner<boolean>): void {\n    owner.defaultValue = false;\n    owner.fixedPoseValue = false;\n    owner.baseEvaluateData.value = false;\n    owner.crossEvaluateData.value = false;\n  }\n  /**\n   * @internal\n   */\n  static _lerpValue(srcValue: boolean, destValue: boolean): boolean {\n    return destValue;\n  }\n\n  /**\n   * @internal\n   */\n  static _subtractValue(src: boolean, base: boolean, out: boolean): boolean {\n    return src;\n  }\n\n  /**\n   * @internal\n   */\n  static _getZeroValue(): boolean {\n    return false;\n  }\n  /**\n   * @internal\n   */\n  static _additiveValue(value: boolean, weight: number, source: boolean): boolean {\n    return value;\n  }\n\n  /**\n   * @internal\n   */\n  static _copyValue(value: boolean): boolean {\n    return value;\n  }\n\n  /**\n   * @internal\n   */\n  static _hermiteInterpolationValue(frame: Keyframe<boolean>): boolean {\n    return frame.value;\n  }\n\n  constructor() {\n    super();\n    this._evaluateData.value = false;\n  }\n}\n","import { Color } from \"@galacean/engine-math\";\nimport { StaticInterfaceImplement } from \"../../base/StaticInterfaceImplement\";\nimport { AnimationCurveOwner } from \"../internal/animationCurveOwner/AnimationCurveOwner\";\nimport { Keyframe } from \"../Keyframe\";\nimport { AnimationCurve } from \"./AnimationCurve\";\nimport { IAnimationCurveCalculator } from \"./interfaces/IAnimationCurveCalculator\";\n\n/**\n * Store a collection of Keyframes that can be evaluated over time.\n */\n@StaticInterfaceImplement<IAnimationCurveCalculator<Color>>()\nexport class AnimationColorCurve extends AnimationCurve<Color> {\n  /** @internal */\n  static _isReferenceType: boolean = true;\n  /** @internal */\n  static _isInterpolationType: boolean = true;\n\n  /**\n   * @internal\n   */\n  static _initializeOwner(owner: AnimationCurveOwner<Color>): void {\n    owner.defaultValue = new Color();\n    owner.fixedPoseValue = new Color();\n    owner.baseEvaluateData.value = new Color();\n    owner.crossEvaluateData.value = new Color();\n  }\n\n  /**\n   * @internal\n   */\n  static _lerpValue(srcValue: Color, destValue: Color, weight: number, out: Color): Color {\n    Color.lerp(srcValue, destValue, weight, out);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _subtractValue(src: Color, base: Color, out: Color): Color {\n    Color.subtract(src, base, out);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _getZeroValue(out: Color) {\n    out.set(0, 0, 0, 0);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _additiveValue(value: Color, weight: number, out: Color): Color {\n    Color.scale(value, weight, value);\n    Color.add(out, value, out);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _copyValue(source: Color, out: Color): Color {\n    out.copyFrom(source);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _hermiteInterpolationValue(\n    frame: Keyframe<Color>,\n    nextFrame: Keyframe<Color>,\n    t: number,\n    dur: number,\n    out: Color\n  ): Color {\n    const p0 = frame.value;\n    const tan0 = frame.outTangent;\n    const p1 = nextFrame.value;\n    const tan1 = nextFrame.inTangent;\n\n    const t2 = t * t;\n    const t3 = t2 * t;\n    const a = 2.0 * t3 - 3.0 * t2 + 1.0;\n    const b = t3 - 2.0 * t2 + t;\n    const c = t3 - t2;\n    const d = -2.0 * t3 + 3.0 * t2;\n\n    let t0 = tan0.x,\n      t1 = tan1.x;\n    if (Number.isFinite(t0) && Number.isFinite(t1)) {\n      out.r = a * p0.r + b * t0 * dur + c * t1 * dur + d * p1.r;\n    } else {\n      out.r = p0.r;\n    }\n\n    (t0 = tan0.y), (t1 = tan1.y);\n    if (Number.isFinite(t0) && Number.isFinite(t1)) {\n      out.g = a * p0.g + b * t0 * dur + c * t1 * dur + d * p1.g;\n    } else {\n      out.g = p0.g;\n    }\n\n    (t0 = tan0.z), (t1 = tan1.z);\n    if (Number.isFinite(t0) && Number.isFinite(t1)) {\n      out.b = a * p0.b + b * t0 * dur + c * t1 * dur + d * p1.b;\n    } else {\n      out.b = p0.b;\n    }\n\n    (t0 = tan0.w), (t1 = tan1.w);\n    if (Number.isFinite(t0) && Number.isFinite(t1)) {\n      out.a = a * p0.a + b * t0 * dur + c * t1 * dur + d * p1.a;\n    } else {\n      out.a = p0.a;\n    }\n\n    return out;\n  }\n\n  constructor() {\n    super();\n    this._evaluateData.value = new Color();\n  }\n}\n","import { StaticInterfaceImplement } from \"../../base/StaticInterfaceImplement\";\nimport { AnimationCurveOwner } from \"../internal/animationCurveOwner/AnimationCurveOwner\";\nimport { Keyframe } from \"../Keyframe\";\nimport { AnimationCurve } from \"./AnimationCurve\";\nimport { IAnimationCurveCalculator } from \"./interfaces/IAnimationCurveCalculator\";\n\n/**\n * Store a collection of Keyframes that can be evaluated over time.\n */\n@StaticInterfaceImplement<IAnimationCurveCalculator<Float32Array>>()\nexport class AnimationFloatArrayCurve extends AnimationCurve<Float32Array> {\n  /** @internal */\n  static _isReferenceType: boolean = true;\n  /** @internal */\n  static _isInterpolationType: boolean = true;\n\n  /**\n   * @internal\n   */\n  static _initializeOwner(owner: AnimationCurveOwner<Float32Array>): void {\n    const size = owner.referenceTargetValue.length;\n    owner.defaultValue = new Float32Array(size);\n    owner.fixedPoseValue = new Float32Array(size);\n    owner.baseEvaluateData.value = new Float32Array(size);\n    owner.crossEvaluateData.value = new Float32Array(size);\n  }\n\n  /**\n   * @internal\n   */\n  static _lerpValue(srcValue: Float32Array, destValue: Float32Array, weight: number, out: Float32Array): Float32Array {\n    for (let i = 0, n = out.length; i < n; ++i) {\n      const src = srcValue[i];\n      out[i] = src + (destValue[i] - src) * weight;\n    }\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _subtractValue(src: Float32Array, base: Float32Array, out: Float32Array): Float32Array {\n    for (let i = 0, n = src.length; i < n; i++) {\n      out[i] = src[i] - base[i];\n    }\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _getZeroValue(out: Float32Array): Float32Array {\n    for (let i = 0, n = out.length; i < n; i++) {\n      out[i] = 0;\n    }\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _additiveValue(value: Float32Array, weight: number, out: Float32Array): Float32Array {\n    for (let i = 0, n = out.length; i < n; ++i) {\n      out[i] += value[i] * weight;\n    }\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _copyValue(source: Float32Array, out: Float32Array): Float32Array {\n    for (let i = 0, n = out.length; i < n; ++i) {\n      out[i] = source[i];\n    }\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _hermiteInterpolationValue(\n    frame: Keyframe<Float32Array>,\n    nextFrame: Keyframe<Float32Array>,\n    t: number,\n    dur: number,\n    out: Float32Array\n  ): Float32Array {\n    const t0 = frame.outTangent;\n    const t1 = nextFrame.inTangent;\n    const p0 = frame.value;\n    const p1 = nextFrame.value;\n\n    const t2 = t * t;\n    const t3 = t2 * t;\n    const a = 2.0 * t3 - 3.0 * t2 + 1.0;\n    const b = t3 - 2.0 * t2 + t;\n    const c = t3 - t2;\n    const d = -2.0 * t3 + 3.0 * t2;\n\n    for (let i = 0, n = p0.length; i < n; ++i) {\n      if (Number.isFinite(t0[i]) && Number.isFinite(t1[i])) {\n        out[i] = a * p0[i] + b * t0[i] * dur + c * t1[i] * dur + d * p1[i];\n      } else {\n        out[i] = frame.value[i];\n      }\n    }\n    return out;\n  }\n\n  /**\n   * @inheritdoc\n   * @override\n   */\n  addKey(key: Keyframe<Float32Array>): void {\n    super.addKey(key);\n\n    const evaluateData = this._evaluateData;\n    if (!evaluateData.value || evaluateData.value.length !== key.value.length) {\n      const size = key.value.length;\n      evaluateData.value = new Float32Array(size);\n    }\n  }\n}\n","import { StaticInterfaceImplement } from \"../../base/StaticInterfaceImplement\";\nimport { AnimationCurveOwner } from \"../internal/animationCurveOwner/AnimationCurveOwner\";\nimport { Keyframe } from \"../Keyframe\";\nimport { AnimationCurve } from \"./AnimationCurve\";\nimport { IAnimationCurveCalculator } from \"./interfaces/IAnimationCurveCalculator\";\n\n/**\n * Store a collection of Keyframes that can be evaluated over time.\n */\n@StaticInterfaceImplement<IAnimationCurveCalculator<number>>()\nexport class AnimationFloatCurve extends AnimationCurve<number> {\n  /** @internal */\n  static _isReferenceType: boolean = false;\n  /** @internal */\n  static _isInterpolationType: boolean = true;\n\n  /**\n   * @internal\n   */\n  static _initializeOwner(owner: AnimationCurveOwner<number>): void {\n    owner.defaultValue = 0;\n    owner.fixedPoseValue = 0;\n    owner.baseEvaluateData.value = 0;\n    owner.crossEvaluateData.value = 0;\n  }\n\n  /**\n   * @internal\n   */\n  static _lerpValue(srcValue: number, destValue: number, crossWeight: number): number {\n    return srcValue + (destValue - srcValue) * crossWeight;\n  }\n\n  /**\n   * @internal\n   */\n  static _additiveValue(value: number, weight: number, scource: number): number {\n    return (scource += value * weight);\n  }\n\n  /**\n   * @internal\n   */\n  static _subtractValue(src: number, base: number): number {\n    return src - base;\n  }\n\n  /**\n   * @internal\n   */\n  static _getZeroValue(): number {\n    return 0;\n  }\n\n  /**\n   * @internal\n   */\n  static _copyValue(source: number): number {\n    return source;\n  }\n\n  /**\n   * @internal\n   */\n  static _hermiteInterpolationValue(\n    frame: Keyframe<number>,\n    nextFrame: Keyframe<number>,\n    t: number,\n    dur: number\n  ): number {\n    const t0 = frame.outTangent;\n    const t1 = nextFrame.inTangent;\n    if (Number.isFinite(t0) && Number.isFinite(t1)) {\n      const t2 = t * t;\n      const t3 = t2 * t;\n      const a = 2.0 * t3 - 3.0 * t2 + 1.0;\n      const b = t3 - 2.0 * t2 + t;\n      const c = t3 - t2;\n      const d = -2.0 * t3 + 3.0 * t2;\n      return a * frame.value + b * t0 * dur + c * t1 * dur + d * nextFrame.value;\n    } else {\n      return frame.value;\n    }\n  }\n\n  constructor() {\n    super();\n    this._evaluateData.value = 0;\n  }\n}\n","import { Quaternion } from \"@galacean/engine-math\";\nimport { StaticInterfaceImplement } from \"../../base/StaticInterfaceImplement\";\nimport { AnimationCurveOwner } from \"../internal/animationCurveOwner/AnimationCurveOwner\";\nimport { Keyframe } from \"../Keyframe\";\nimport { AnimationCurve } from \"./AnimationCurve\";\nimport { IAnimationCurveCalculator } from \"./interfaces/IAnimationCurveCalculator\";\n\n/**\n * Store a collection of Keyframes that can be evaluated over time.\n */\n@StaticInterfaceImplement<IAnimationCurveCalculator<Quaternion>>()\nexport class AnimationQuaternionCurve extends AnimationCurve<Quaternion> {\n  /** @internal */\n  static _isInterpolationType: boolean = true;\n  /** @internal */\n  static _isReferenceType: boolean = true;\n\n  /** @internal */\n  private static _tempConjugateQuat = new Quaternion();\n\n  /**\n   * @internal\n   */\n  static _initializeOwner(owner: AnimationCurveOwner<Quaternion>): void {\n    owner.defaultValue = new Quaternion();\n    owner.fixedPoseValue = new Quaternion();\n    owner.baseEvaluateData.value = new Quaternion();\n    owner.crossEvaluateData.value = new Quaternion();\n  }\n\n  /**\n   * @internal\n   */\n  static _lerpValue(src: Quaternion, dest: Quaternion, weight: number, out: Quaternion): Quaternion {\n    Quaternion.slerp(src, dest, weight, out);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _additiveValue(value: Quaternion, weight: number, out: Quaternion): Quaternion {\n    value.x = value.x * weight;\n    value.y = value.y * weight;\n    value.z = value.z * weight;\n\n    value.normalize();\n    out.multiply(value);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _subtractValue(src: Quaternion, base: Quaternion, out: Quaternion): Quaternion {\n    const { _tempConjugateQuat: conjugate } = AnimationQuaternionCurve;\n    Quaternion.conjugate(base, conjugate);\n    Quaternion.multiply(conjugate, src, out);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _getZeroValue(out: Quaternion): Quaternion {\n    out.set(0, 0, 0, 1);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _copyValue(source: Quaternion, out: Quaternion): Quaternion {\n    out.copyFrom(source);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _hermiteInterpolationValue(\n    frame: Keyframe<Quaternion>,\n    nextFrame: Keyframe<Quaternion>,\n    t: number,\n    dur: number,\n    out: Quaternion\n  ): Quaternion {\n    const p0 = frame.value;\n    const tan0 = frame.outTangent;\n    const p1 = nextFrame.value;\n    const tan1 = nextFrame.inTangent;\n\n    const t2 = t * t;\n    const t3 = t2 * t;\n    const a = 2.0 * t3 - 3.0 * t2 + 1.0;\n    const b = t3 - 2.0 * t2 + t;\n    const c = t3 - t2;\n    const d = -2.0 * t3 + 3.0 * t2;\n\n    let t0 = tan0.x,\n      t1 = tan1.x;\n    if (Number.isFinite(t0) && Number.isFinite(t1)) {\n      out.x = a * p0.x + b * t0 * dur + c * t1 * dur + d * p1.x;\n    } else {\n      out.x = p0.x;\n    }\n\n    (t0 = tan0.y), (t1 = tan1.y);\n    if (Number.isFinite(t0) && Number.isFinite(t1)) {\n      out.y = a * p0.y + b * t0 * dur + c * t1 * dur + d * p1.y;\n    } else {\n      out.y = p0.y;\n    }\n\n    (t0 = tan0.z), (t1 = tan1.z);\n    if (Number.isFinite(t0) && Number.isFinite(t1)) {\n      out.z = a * p0.z + b * t0 * dur + c * t1 * dur + d * p1.z;\n    } else {\n      out.z = p0.z;\n    }\n\n    (t0 = tan0.w), (t1 = tan1.w);\n    if (Number.isFinite(t0) && Number.isFinite(t1)) {\n      out.w = a * p0.w + b * t0 * dur + c * t1 * dur + d * p1.w;\n    } else {\n      out.w = p0.w;\n    }\n    return out;\n  }\n\n  constructor() {\n    super();\n    this._evaluateData.value = new Quaternion();\n  }\n}\n","import { Vector2 } from \"@galacean/engine-math\";\nimport { StaticInterfaceImplement } from \"../../base/StaticInterfaceImplement\";\nimport { AnimationCurveOwner } from \"../internal/animationCurveOwner/AnimationCurveOwner\";\nimport { Keyframe } from \"../Keyframe\";\nimport { AnimationCurve } from \"./AnimationCurve\";\nimport { IAnimationCurveCalculator } from \"./interfaces/IAnimationCurveCalculator\";\n\n/**\n * Store a collection of Keyframes that can be evaluated over time.\n */\n@StaticInterfaceImplement<IAnimationCurveCalculator<Vector2>>()\nexport class AnimationVector2Curve extends AnimationCurve<Vector2> {\n  /** @internal */\n  static _isReferenceType: boolean = true;\n  /** @internal */\n  static _isInterpolationType: boolean = true;\n\n  /**\n   * @internal\n   */\n  static _initializeOwner(owner: AnimationCurveOwner<Vector2>): void {\n    owner.defaultValue = new Vector2();\n    owner.fixedPoseValue = new Vector2();\n    owner.baseEvaluateData.value = new Vector2();\n    owner.crossEvaluateData.value = new Vector2();\n  }\n\n  /**\n   * @internal\n   */\n  static _lerpValue(srcValue: Vector2, destValue: Vector2, weight: number, out: Vector2): Vector2 {\n    Vector2.lerp(srcValue, destValue, weight, out);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _additiveValue(value: Vector2, weight: number, out: Vector2): Vector2 {\n    Vector2.scale(value, weight, value);\n    Vector2.add(out, value, out);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _subtractValue(src: Vector2, base: Vector2, out: Vector2): Vector2 {\n    Vector2.subtract(src, base, out);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _getZeroValue(out: Vector2): Vector2 {\n    out.set(0, 0);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _copyValue(source: Vector2, out: Vector2): Vector2 {\n    out.copyFrom(source);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _hermiteInterpolationValue(\n    frame: Keyframe<Vector2>,\n    nextFrame: Keyframe<Vector2>,\n    t: number,\n    dur: number,\n    out: Vector2\n  ): Vector2 {\n    const p0 = frame.value;\n    const tan0 = frame.outTangent;\n    const p1 = nextFrame.value;\n    const tan1 = nextFrame.inTangent;\n\n    const t2 = t * t;\n    const t3 = t2 * t;\n    const a = 2.0 * t3 - 3.0 * t2 + 1.0;\n    const b = t3 - 2.0 * t2 + t;\n    const c = t3 - t2;\n    const d = -2.0 * t3 + 3.0 * t2;\n\n    let t0 = tan0.x,\n      t1 = tan1.x;\n    if (Number.isFinite(t0) && Number.isFinite(t1)) {\n      out.x = a * p0.x + b * t0 * dur + c * t1 * dur + d * p1.x;\n    } else {\n      out.x = p0.x;\n    }\n\n    (t0 = tan0.y), (t1 = tan1.y);\n    if (Number.isFinite(t0) && Number.isFinite(t1)) {\n      out.y = a * p0.y + b * t0 * dur + c * t1 * dur + d * p1.y;\n    } else {\n      out.y = p0.y;\n    }\n\n    return out;\n  }\n\n  constructor() {\n    super();\n    this._evaluateData.value = new Vector2();\n  }\n}\n","import { Vector3 } from \"@galacean/engine-math\";\nimport { StaticInterfaceImplement } from \"../../base/StaticInterfaceImplement\";\nimport { AnimationCurveOwner } from \"../internal/animationCurveOwner/AnimationCurveOwner\";\nimport { Keyframe } from \"../Keyframe\";\nimport { AnimationCurve } from \"./AnimationCurve\";\nimport { IAnimationCurveCalculator } from \"./interfaces/IAnimationCurveCalculator\";\n\n/**\n * Store a collection of Keyframes that can be evaluated over time.\n */\n@StaticInterfaceImplement<IAnimationCurveCalculator<Vector3>>()\nexport class AnimationVector3Curve extends AnimationCurve<Vector3> {\n  /** @internal */\n  static _isReferenceType: boolean = true;\n  /** @internal */\n  static _isInterpolationType: boolean = true;\n\n  /**\n   * @internal\n   */\n  static _initializeOwner(owner: AnimationCurveOwner<Vector3>): void {\n    owner.defaultValue = new Vector3();\n    owner.fixedPoseValue = new Vector3();\n    owner.baseEvaluateData.value = new Vector3();\n    owner.crossEvaluateData.value = new Vector3();\n  }\n\n  /**\n   * @internal\n   */\n  static _lerpValue(srcValue: Vector3, destValue: Vector3, weight: number, out: Vector3): Vector3 {\n    Vector3.lerp(srcValue, destValue, weight, out);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _relativeBaseValue(base: Vector3, out: Vector3): Vector3 {\n    Vector3.subtract(out, base, out);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _additiveValue(value: Vector3, weight: number, out: Vector3): Vector3 {\n    Vector3.scale(value, weight, value);\n    Vector3.add(out, value, out);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _subtractValue(src: Vector3, base: Vector3, out: Vector3): Vector3 {\n    Vector3.subtract(src, base, out);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _getZeroValue(out: Vector3): Vector3 {\n    out.set(0, 0, 0);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _copyValue(source: Vector3, out: Vector3): Vector3 {\n    out.copyFrom(source);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _hermiteInterpolationValue(\n    frame: Keyframe<Vector3>,\n    nextFrame: Keyframe<Vector3>,\n    t: number,\n    dur: number,\n    out: Vector3\n  ): Vector3 {\n    const p0 = frame.value;\n    const tan0 = frame.outTangent;\n    const p1 = nextFrame.value;\n    const tan1 = nextFrame.inTangent;\n\n    const t2 = t * t;\n    const t3 = t2 * t;\n    const a = 2.0 * t3 - 3.0 * t2 + 1.0;\n    const b = t3 - 2.0 * t2 + t;\n    const c = t3 - t2;\n    const d = -2.0 * t3 + 3.0 * t2;\n\n    let t0 = tan0.x,\n      t1 = tan1.x;\n    if (Number.isFinite(t0) && Number.isFinite(t1)) {\n      out.x = a * p0.x + b * t0 * dur + c * t1 * dur + d * p1.x;\n    } else {\n      out.x = p0.x;\n    }\n\n    (t0 = tan0.y), (t1 = tan1.y);\n    if (Number.isFinite(t0) && Number.isFinite(t1)) {\n      out.y = a * p0.y + b * t0 * dur + c * t1 * dur + d * p1.y;\n    } else {\n      out.y = p0.y;\n    }\n\n    (t0 = tan0.z), (t1 = tan1.z);\n    if (Number.isFinite(t0) && Number.isFinite(t1)) {\n      out.z = a * p0.z + b * t0 * dur + c * t1 * dur + d * p1.z;\n    } else {\n      out.z = p0.z;\n    }\n\n    return out;\n  }\n\n  constructor() {\n    super();\n    this._evaluateData.value = new Vector3();\n  }\n}\n","import { Vector4 } from \"@galacean/engine-math\";\nimport { StaticInterfaceImplement } from \"../../base/StaticInterfaceImplement\";\nimport { AnimationCurveOwner } from \"../internal/animationCurveOwner/AnimationCurveOwner\";\nimport { Keyframe } from \"../Keyframe\";\nimport { AnimationCurve } from \"./AnimationCurve\";\nimport { IAnimationCurveCalculator } from \"./interfaces/IAnimationCurveCalculator\";\n\n/**\n * Store a collection of Keyframes that can be evaluated over time.\n */\n@StaticInterfaceImplement<IAnimationCurveCalculator<Vector4>>()\nexport class AnimationVector4Curve extends AnimationCurve<Vector4> {\n  /** @internal */\n  static _isReferenceType: boolean = true;\n  /** @internal */\n  static _isInterpolationType: boolean = true;\n\n  /**\n   * @internal\n   */\n  static _initializeOwner(owner: AnimationCurveOwner<Vector4>): void {\n    owner.defaultValue = new Vector4();\n    owner.fixedPoseValue = new Vector4();\n    owner.baseEvaluateData.value = new Vector4();\n    owner.crossEvaluateData.value = new Vector4();\n  }\n\n  /**\n   * @internal\n   */\n  static _lerpValue(srcValue: Vector4, destValue: Vector4, weight: number, out: Vector4): Vector4 {\n    Vector4.lerp(srcValue, destValue, weight, out);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _additiveValue(value: Vector4, weight: number, out: Vector4): Vector4 {\n    Vector4.scale(value, weight, value);\n    Vector4.add(out, value, out);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _subtractValue(src: Vector4, base: Vector4, out: Vector4): Vector4 {\n    Vector4.subtract(src, base, out);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _getZeroValue(out: Vector4): Vector4 {\n    out.set(0, 0, 0, 0);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _copyValue(source: Vector4, out: Vector4): Vector4 {\n    out.copyFrom(source);\n    return out;\n  }\n\n  /**\n   * @internal\n   */\n  static _hermiteInterpolationValue(\n    frame: Keyframe<Vector4>,\n    nextFrame: Keyframe<Vector4>,\n    t: number,\n    dur: number,\n    out: Vector4\n  ): Vector4 {\n    const p0 = frame.value;\n    const tan0 = frame.outTangent;\n    const p1 = nextFrame.value;\n    const tan1 = nextFrame.inTangent;\n\n    const t2 = t * t;\n    const t3 = t2 * t;\n    const a = 2.0 * t3 - 3.0 * t2 + 1.0;\n    const b = t3 - 2.0 * t2 + t;\n    const c = t3 - t2;\n    const d = -2.0 * t3 + 3.0 * t2;\n\n    let t0 = tan0.x,\n      t1 = tan1.x;\n    if (Number.isFinite(t0) && Number.isFinite(t1)) {\n      out.x = a * p0.x + b * t0 * dur + c * t1 * dur + d * p1.x;\n    } else {\n      out.x = p0.x;\n    }\n\n    (t0 = tan0.y), (t1 = tan1.y);\n    if (Number.isFinite(t0) && Number.isFinite(t1)) {\n      out.y = a * p0.y + b * t0 * dur + c * t1 * dur + d * p1.y;\n    } else {\n      out.y = p0.y;\n    }\n\n    (t0 = tan0.z), (t1 = tan1.z);\n    if (Number.isFinite(t0) && Number.isFinite(t1)) {\n      out.z = a * p0.z + b * t0 * dur + c * t1 * dur + d * p1.z;\n    } else {\n      out.z = p0.z;\n    }\n\n    (t0 = tan0.w), (t1 = tan1.w);\n    if (Number.isFinite(t0) && Number.isFinite(t1)) {\n      out.w = a * p0.w + b * t0 * dur + c * t1 * dur + d * p1.w;\n    } else {\n      out.w = p0.w;\n    }\n    return out;\n  }\n\n  constructor() {\n    super();\n    this._evaluateData.value = new Vector4();\n  }\n}\n","/**\n * Animator culling mode.\n */\nexport enum AnimatorCullingMode {\n  /** Disable Culling. */\n  None,\n  /** Completely disabled when renderers are all culled. */\n  Complete\n}\n","export enum AnimatorLayerBlendingMode {\n  Override,\n  Additive\n}\n","/**\n * @internal\n */\nexport enum AnimatorStatePlayState {\n  UnStarted,\n  Playing,\n  Finished\n}\n","/**\n * Layer state.\n */\nexport enum LayerState {\n  /** Standby state. */\n  Standby, //CM: Standby 优化\n  /** Playing state. */\n  Playing,\n  /** CrossFading state. */\n  CrossFading,\n  /** FixedCrossFading state. */\n  FixedCrossFading\n}\n","import { AnimationEvent } from \"../AnimationEvent\";\n/**\n * @internal\n */\nexport class AnimationEventHandler {\n  event: AnimationEvent;\n  handlers: Function[] = [];\n}\n","import { AnimatorState } from \"./AnimatorState\";\n\n/**\n * Transitions define when and how the state machine switch from on state to another. AnimatorTransition always originate from a StateMachine or a StateMachine entry.\n */\nexport class AnimatorStateTransition {\n  /** The duration of the transition. This is represented in normalized time. */\n  duration: number = 0;\n  /** The time at which the destination state will start. This is represented in normalized time. */\n  offset: number = 0;\n  /** ExitTime represents the exact time at which the transition can take effect. This is represented in normalized time. */\n  exitTime: number = 1;\n  /** The destination state of the transition. */\n  destinationState: AnimatorState;\n}\n","/**\n * Animation wrap mode.\n */\nexport enum WrapMode {\n  /** Play once */\n  Once = 0,\n  /** Loop play */\n  Loop = 1\n}\n","import { AnimatorState } from \"../AnimatorState\";\nimport { AnimatorStatePlayState } from \"../enums/AnimatorStatePlayState\";\nimport { WrapMode } from \"../enums/WrapMode\";\nimport { AnimatorStateData } from \"./AnimatorStateData\";\n\n/**\n * @internal\n */\nexport class AnimatorStatePlayData {\n  state: AnimatorState;\n  stateData: AnimatorStateData;\n  frameTime: number;\n  playState: AnimatorStatePlayState;\n  clipTime: number;\n  currentEventIndex: number;\n\n  reset(state: AnimatorState, stateData: AnimatorStateData, offsetFrameTime: number): void {\n    this.state = state;\n    this.frameTime = offsetFrameTime;\n    this.stateData = stateData;\n    this.playState = AnimatorStatePlayState.UnStarted;\n    this.clipTime = state.clipStartTime * state.clip.length;\n    this.currentEventIndex = 0;\n  }\n\n  update(isBackwards: boolean): void {\n    const state = this.state;\n    let time = this.frameTime;\n    const duration = state._getDuration();\n    this.playState = AnimatorStatePlayState.Playing;\n    if (state.wrapMode === WrapMode.Loop) {\n      time = duration ? time % duration : 0;\n    } else {\n      if (Math.abs(time) > duration) {\n        time = time < 0 ? -duration : duration;\n        this.playState = AnimatorStatePlayState.Finished;\n      }\n    }\n\n    if (isBackwards && time === 0) {\n      this.clipTime = state.clipEndTime * state.clip.length;\n    } else {\n      time < 0 && (time += duration);\n      this.clipTime = time + state.clipStartTime * state.clip.length;\n    }\n  }\n}\n","import { AnimatorStateTransition } from \"../AnimatorTransition\";\nimport { LayerState } from \"../enums/LayerState\";\nimport { AnimatorStateData } from \"./AnimatorStateData\";\nimport { AnimatorStatePlayData } from \"./AnimatorStatePlayData\";\n\n/**\n * @internal\n */\nexport class AnimatorLayerData {\n  animatorStateDataMap: Record<string, AnimatorStateData> = {};\n  srcPlayData: AnimatorStatePlayData = new AnimatorStatePlayData();\n  destPlayData: AnimatorStatePlayData = new AnimatorStatePlayData();\n  layerState: LayerState = LayerState.Standby;\n  crossCurveMark: number = 0;\n  manuallyTransition: AnimatorStateTransition = new AnimatorStateTransition();\n  crossFadeTransition: AnimatorStateTransition;\n\n  switchPlayData(): void {\n    const srcPlayData = this.destPlayData;\n    const switchTemp = this.srcPlayData;\n    this.srcPlayData = srcPlayData;\n    this.destPlayData = switchTemp;\n  }\n}\n","import { KeyframeValueType } from \"../Keyframe\";\nimport { AnimationCurveOwner } from \"./animationCurveOwner/AnimationCurveOwner\";\nimport { AnimationEventHandler } from \"./AnimationEventHandler\";\n\n/**\n * @internal\n */\nexport class AnimatorStateData {\n  curveOwners: AnimationCurveOwner<KeyframeValueType>[] = [];\n  eventHandlers: AnimationEventHandler[] = [];\n}\n","import { BoolUpdateFlag } from \"../BoolUpdateFlag\";\nimport { assignmentClone, ignoreClone } from \"../clone/CloneManager\";\nimport { Component } from \"../Component\";\nimport { Entity } from \"../Entity\";\nimport { Renderer } from \"../Renderer\";\nimport { ClassPool } from \"../RenderPipeline/ClassPool\";\nimport { AnimatorController } from \"./AnimatorController\";\nimport { AnimatorState } from \"./AnimatorState\";\nimport { AnimatorStateTransition } from \"./AnimatorTransition\";\nimport { AnimatorCullingMode } from \"./enums/AnimatorCullingMode\";\nimport { AnimatorLayerBlendingMode } from \"./enums/AnimatorLayerBlendingMode\";\nimport { AnimatorStatePlayState } from \"./enums/AnimatorStatePlayState\";\nimport { LayerState } from \"./enums/LayerState\";\nimport { AnimationCurveOwner } from \"./internal/animationCurveOwner/AnimationCurveOwner\";\nimport { AnimationEventHandler } from \"./internal/AnimationEventHandler\";\nimport { AnimatorLayerData } from \"./internal/AnimatorLayerData\";\nimport { AnimatorStateData } from \"./internal/AnimatorStateData\";\nimport { AnimatorStatePlayData } from \"./internal/AnimatorStatePlayData\";\nimport { KeyframeValueType } from \"./Keyframe\";\n\n/**\n * The controller of the animation system.\n */\nexport class Animator extends Component {\n  /** Culling mode of this Animator. */\n  cullingMode: AnimatorCullingMode = AnimatorCullingMode.None;\n  /** The playback speed of the Animator, 1.0 is normal playback speed. */\n  @assignmentClone\n  speed: number = 1.0;\n\n  protected _animatorController: AnimatorController;\n\n  @ignoreClone\n  protected _controllerUpdateFlag: BoolUpdateFlag;\n\n  @ignoreClone\n  private _animatorLayersData: AnimatorLayerData[] = [];\n  @ignoreClone\n  private _crossOwnerCollection: AnimationCurveOwner<KeyframeValueType>[] = [];\n  @ignoreClone\n  private _animationCurveOwners: Record<string, AnimationCurveOwner<KeyframeValueType>>[] = [];\n  @ignoreClone\n  private _animationEventHandlerPool: ClassPool<AnimationEventHandler> = new ClassPool(AnimationEventHandler);\n\n  @ignoreClone\n  private _tempAnimatorStateInfo: IAnimatorStateInfo = { layerIndex: -1, state: null };\n\n  @ignoreClone\n  private _controlledRenderers: Renderer[] = [];\n\n  /**\n   * All layers from the AnimatorController which belongs this Animator.\n   */\n  get animatorController(): AnimatorController {\n    return this._animatorController;\n  }\n\n  set animatorController(animatorController: AnimatorController) {\n    if (animatorController !== this._animatorController) {\n      this._reset();\n      this._controllerUpdateFlag && this._controllerUpdateFlag.destroy();\n      this._controllerUpdateFlag = animatorController && animatorController._registerChangeFlag();\n      this._animatorController = animatorController;\n    }\n  }\n\n  /**\n   * @internal\n   */\n  constructor(entity: Entity) {\n    super(entity);\n  }\n\n  /**\n   * Play a state by name.\n   * @param stateName - The state name\n   * @param layerIndex - The layer index(default -1). If layer is -1, play the first state with the given state name\n   * @param normalizedTimeOffset - The time offset between 0 and 1(default 0)\n   */\n  play(stateName: string, layerIndex: number = -1, normalizedTimeOffset: number = 0): void {\n    if (this._controllerUpdateFlag?.flag) {\n      this._reset();\n    }\n\n    const stateInfo = this._getAnimatorStateInfo(stateName, layerIndex);\n    const { state } = stateInfo;\n\n    if (!state) {\n      return;\n    }\n    if (!state.clip) {\n      console.warn(`The state named ${stateName} has no AnimationClip data.`);\n      return;\n    }\n\n    const animatorLayerData = this._getAnimatorLayerData(stateInfo.layerIndex);\n    //TODO CM: Not consider same stateName, but different animation\n    const animatorStateData = this._getAnimatorStateData(stateName, state, animatorLayerData);\n\n    this._preparePlay(animatorLayerData, state, animatorStateData);\n\n    animatorLayerData.layerState = LayerState.Playing;\n    animatorLayerData.srcPlayData.reset(state, animatorStateData, state._getDuration() * normalizedTimeOffset);\n  }\n\n  /**\n   * Create a cross fade from the current state to another state.\n   * @param stateName - The state name\n   * @param normalizedTransitionDuration - The duration of the transition (normalized)\n   * @param layerIndex - The layer index(default -1). If layer is -1, play the first state with the given state name\n   * @param normalizedTimeOffset - The time offset between 0 and 1(default 0)\n   */\n  crossFade(\n    stateName: string,\n    normalizedTransitionDuration: number,\n    layerIndex: number = -1,\n    normalizedTimeOffset: number = 0\n  ): void {\n    if (this._controllerUpdateFlag?.flag) {\n      this._reset();\n    }\n\n    const { state } = this._getAnimatorStateInfo(stateName, layerIndex);\n    const { manuallyTransition } = this._getAnimatorLayerData(layerIndex);\n    manuallyTransition.duration = normalizedTransitionDuration;\n    manuallyTransition.offset = normalizedTimeOffset;\n    manuallyTransition.destinationState = state;\n    this._crossFadeByTransition(manuallyTransition, layerIndex);\n  }\n\n  /**\n   * Evaluates the animator component based on deltaTime.\n   * @param deltaTime - The deltaTime when the animation update\n   */\n  update(deltaTime: number): void {\n    let animationUpdate: boolean;\n    if (this.cullingMode === AnimatorCullingMode.Complete) {\n      animationUpdate = false;\n      const controlledRenderers = this._controlledRenderers;\n      for (let i = 0, n = controlledRenderers.length; i < n; i++) {\n        if (!controlledRenderers[i].isCulled) {\n          animationUpdate = true;\n          break;\n        }\n      }\n    } else {\n      animationUpdate = true;\n    }\n\n    const { _animatorController: animatorController } = this;\n    if (!animatorController) {\n      return;\n    }\n    if (this._controllerUpdateFlag?.flag) {\n      this._checkAutoPlay();\n      return;\n    }\n\n    deltaTime *= this.speed;\n    for (let i = 0, n = animatorController.layers.length; i < n; i++) {\n      const animatorLayerData = this._getAnimatorLayerData(i);\n      if (animatorLayerData.layerState === LayerState.Standby) {\n        continue;\n      }\n\n      this._updateLayer(i, i === 0, deltaTime / 1000, animationUpdate);\n    }\n  }\n\n  /**\n   * Get the playing state from the target layerIndex.\n   * @param layerIndex - The layer index\n   */\n  getCurrentAnimatorState(layerIndex: number): AnimatorState {\n    return this._animatorLayersData[layerIndex]?.srcPlayData?.state;\n  }\n\n  /**\n   * Get the state by name.\n   * @param stateName - The state name\n   * @param layerIndex - The layer index(default -1). If layer is -1, find the first state with the given state name\n   */\n  findAnimatorState(stateName: string, layerIndex: number = -1): AnimatorState {\n    return this._getAnimatorStateInfo(stateName, layerIndex).state;\n  }\n\n  /**\n   * @override\n   * @internal\n   */\n  _onEnable(): void {\n    this.engine._componentsManager.addOnUpdateAnimations(this);\n    this.animatorController && this._checkAutoPlay();\n    this._entity.getComponentsIncludeChildren(Renderer, this._controlledRenderers);\n  }\n\n  /**\n   * @override\n   * @internal\n   */\n  _onDisable(): void {\n    this.engine._componentsManager.removeOnUpdateAnimations(this);\n  }\n\n  /**\n   * @internal\n   */\n  _reset(): void {\n    const { _animationCurveOwners: animationCurveOwners } = this;\n    for (let instanceId in animationCurveOwners) {\n      const propertyOwners = animationCurveOwners[instanceId];\n      for (let property in propertyOwners) {\n        const owner = propertyOwners[property];\n        owner.hasSavedDefaultValue && owner.revertDefaultValue();\n      }\n    }\n\n    this._animatorLayersData.length = 0;\n    this._crossOwnerCollection.length = 0;\n    this._animationCurveOwners.length = 0;\n    this._animationEventHandlerPool.resetPool();\n\n    if (this._controllerUpdateFlag) {\n      this._controllerUpdateFlag.flag = false;\n    }\n  }\n\n  private _getAnimatorStateInfo(stateName: string, layerIndex: number): IAnimatorStateInfo {\n    const { _animatorController: animatorController, _tempAnimatorStateInfo: stateInfo } = this;\n    let state: AnimatorState = null;\n    if (animatorController) {\n      const layers = animatorController.layers;\n      if (layerIndex === -1) {\n        for (let i = 0, n = layers.length; i < n; i++) {\n          state = layers[i].stateMachine.findStateByName(stateName);\n          if (state) {\n            layerIndex = i;\n            break;\n          }\n        }\n      } else {\n        state = layers[layerIndex].stateMachine.findStateByName(stateName);\n      }\n    }\n    stateInfo.layerIndex = layerIndex;\n    stateInfo.state = state;\n    return stateInfo;\n  }\n\n  private _saveDefaultValues(stateData: AnimatorStateData): void {\n    const { curveOwners } = stateData;\n    for (let i = curveOwners.length - 1; i >= 0; i--) {\n      curveOwners[i]?.saveDefaultValue();\n    }\n  }\n\n  private _getAnimatorStateData(\n    stateName: string,\n    animatorState: AnimatorState,\n    animatorLayerData: AnimatorLayerData\n  ): AnimatorStateData {\n    const { animatorStateDataMap } = animatorLayerData;\n    let animatorStateData = animatorStateDataMap[stateName];\n    if (!animatorStateData) {\n      animatorStateData = new AnimatorStateData();\n      animatorStateDataMap[stateName] = animatorStateData;\n      this._saveAnimatorStateData(animatorState, animatorStateData);\n      this._saveAnimatorEventHandlers(animatorState, animatorStateData);\n    }\n    return animatorStateData;\n  }\n\n  private _saveAnimatorStateData(animatorState: AnimatorState, animatorStateData: AnimatorStateData): void {\n    const { entity, _animationCurveOwners: animationCureOwners } = this;\n    const { curveOwners } = animatorStateData;\n    const { _curveBindings: curves } = animatorState.clip;\n    for (let i = curves.length - 1; i >= 0; i--) {\n      const curve = curves[i];\n      const targetEntity = curve.relativePath === \"\" ? entity : entity.findByPath(curve.relativePath);\n      if (targetEntity) {\n        const { property } = curve;\n        const { instanceId } = targetEntity;\n        const propertyOwners = animationCureOwners[instanceId] || (animationCureOwners[instanceId] = {});\n        curveOwners[i] = propertyOwners[property] || (propertyOwners[property] = curve._createCurveOwner(targetEntity));\n      } else {\n        curveOwners[i] = null;\n        console.warn(`The entity don\\'t have the child entity which path is ${curve.relativePath}.`);\n      }\n    }\n  }\n\n  private _saveAnimatorEventHandlers(state: AnimatorState, animatorStateData: AnimatorStateData): void {\n    const eventHandlerPool = this._animationEventHandlerPool;\n    const scripts = this._entity._scripts;\n    const scriptCount = scripts.length;\n    const { eventHandlers } = animatorStateData;\n    const { events } = state.clip;\n\n    eventHandlers.length = 0;\n    for (let i = 0, n = events.length; i < n; i++) {\n      const event = events[i];\n      const eventHandler = eventHandlerPool.getFromPool();\n      const funcName = event.functionName;\n      const { handlers } = eventHandler;\n\n      eventHandler.event = event;\n      handlers.length = 0;\n      for (let j = scriptCount - 1; j >= 0; j--) {\n        const handler = <Function>scripts.get(j)[funcName];\n        handler && handlers.push(handler);\n      }\n      eventHandlers.push(eventHandler);\n    }\n  }\n\n  private _clearCrossData(animatorLayerData: AnimatorLayerData): void {\n    animatorLayerData.crossCurveMark++;\n    this._crossOwnerCollection.length = 0;\n  }\n\n  private _addCrossCurveData(\n    crossCurveData: AnimationCurveOwner<KeyframeValueType>[],\n    owner: AnimationCurveOwner<KeyframeValueType>,\n    curCurveIndex: number,\n    nextCurveIndex: number\n  ): void {\n    owner.crossSrcCurveIndex = curCurveIndex;\n    owner.crossDestCurveIndex = nextCurveIndex;\n    crossCurveData.push(owner);\n  }\n\n  private _prepareCrossFading(animatorLayerData: AnimatorLayerData): void {\n    const crossCurveData = this._crossOwnerCollection;\n    const { crossCurveMark } = animatorLayerData;\n\n    // Add src cross curve data.\n    this._prepareSrcCrossData(crossCurveData, animatorLayerData.srcPlayData, crossCurveMark, false);\n    // Add dest cross curve data.\n    this._prepareDestCrossData(crossCurveData, animatorLayerData.destPlayData, crossCurveMark, false);\n  }\n\n  private _prepareStandbyCrossFading(animatorLayerData: AnimatorLayerData): void {\n    const crossOwnerCollection = this._crossOwnerCollection;\n    const { srcPlayData, crossCurveMark } = animatorLayerData;\n\n    // Standby have two sub state, one is never play, one is finished, never play srcPlayData.state is null.\n    srcPlayData.state && this._prepareSrcCrossData(crossOwnerCollection, srcPlayData, crossCurveMark, true);\n    // Add dest cross curve data.\n    this._prepareDestCrossData(crossOwnerCollection, animatorLayerData.destPlayData, crossCurveMark, true);\n  }\n\n  private _prepareFixedPoseCrossFading(animatorLayerData: AnimatorLayerData): void {\n    const crossOwnerCollection = this._crossOwnerCollection;\n\n    // Save current cross curve data owner fixed pose.\n    for (let i = crossOwnerCollection.length - 1; i >= 0; i--) {\n      const item = crossOwnerCollection[i];\n      item.saveFixedPoseValue();\n      // Reset destCurveIndex When fixed pose crossFading again.\n      item.crossDestCurveIndex = -1;\n    }\n    // prepare dest AnimatorState cross data.\n    this._prepareDestCrossData(\n      crossOwnerCollection,\n      animatorLayerData.destPlayData,\n      animatorLayerData.crossCurveMark,\n      true\n    );\n  }\n\n  private _prepareSrcCrossData(\n    crossCurveData: AnimationCurveOwner<KeyframeValueType>[],\n    srcPlayData: AnimatorStatePlayData,\n    crossCurveMark: number,\n    saveFixed: boolean\n  ): void {\n    const { curveOwners } = srcPlayData.stateData;\n    for (let i = curveOwners.length - 1; i >= 0; i--) {\n      const owner = curveOwners[i];\n      if (!owner) continue;\n      owner.crossCurveMark = crossCurveMark;\n      owner.crossCurveDataIndex = crossCurveData.length;\n      saveFixed && owner.saveFixedPoseValue();\n      this._addCrossCurveData(crossCurveData, owner, i, -1);\n    }\n  }\n\n  private _prepareDestCrossData(\n    crossCurveData: AnimationCurveOwner<KeyframeValueType>[],\n    destPlayData: AnimatorStatePlayData,\n    crossCurveMark: number,\n    saveFixed: boolean\n  ): void {\n    const { curveOwners } = destPlayData.stateData;\n    for (let i = curveOwners.length - 1; i >= 0; i--) {\n      const owner = curveOwners[i];\n      if (!owner) continue;\n      if (owner.crossCurveMark === crossCurveMark) {\n        crossCurveData[owner.crossCurveDataIndex].crossDestCurveIndex = i;\n      } else {\n        owner.saveDefaultValue();\n        saveFixed && owner.saveFixedPoseValue();\n        owner.crossCurveMark = crossCurveMark;\n        owner.crossCurveDataIndex = crossCurveData.length;\n        this._addCrossCurveData(crossCurveData, owner, -1, i);\n      }\n    }\n  }\n\n  private _getAnimatorLayerData(layerIndex: number): AnimatorLayerData {\n    let animatorLayerData = this._animatorLayersData[layerIndex];\n    animatorLayerData || (this._animatorLayersData[layerIndex] = animatorLayerData = new AnimatorLayerData());\n    return animatorLayerData;\n  }\n\n  private _updateLayer(layerIndex: number, firstLayer: boolean, deltaTime: number, aniUpdate: boolean): void {\n    let { blendingMode, weight } = this._animatorController.layers[layerIndex];\n    const layerData = this._animatorLayersData[layerIndex];\n    const { srcPlayData, destPlayData, crossFadeTransition: crossFadeTransitionInfo } = layerData;\n    const additive = blendingMode === AnimatorLayerBlendingMode.Additive;\n    firstLayer && (weight = 1.0);\n    //TODO: 任意情况都应该检查，后面要优化\n    layerData.layerState !== LayerState.FixedCrossFading &&\n      this._checkTransition(srcPlayData, crossFadeTransitionInfo, layerIndex);\n\n    switch (layerData.layerState) {\n      case LayerState.Playing:\n        this._updatePlayingState(srcPlayData, layerData, layerIndex, weight, deltaTime, additive, aniUpdate);\n        break;\n      case LayerState.FixedCrossFading:\n        this._updateCrossFadeFromPose(destPlayData, layerData, layerIndex, weight, deltaTime, additive, aniUpdate);\n        break;\n      case LayerState.CrossFading:\n        this._updateCrossFade(srcPlayData, destPlayData, layerData, layerIndex, weight, deltaTime, additive, aniUpdate);\n        break;\n    }\n  }\n\n  private _updatePlayingState(\n    playData: AnimatorStatePlayData,\n    layerData: AnimatorLayerData,\n    layerIndex: number,\n    weight: number,\n    delta: number,\n    additive: boolean,\n    aniUpdate: boolean\n  ): void {\n    const { curveOwners, eventHandlers } = playData.stateData;\n    const { state, playState: lastPlayState, clipTime: lastClipTime } = playData;\n    const { _curveBindings: curveBindings } = state.clip;\n\n    playData.update(this.speed < 0);\n\n    if (!aniUpdate) {\n      return;\n    }\n\n    const { clipTime, playState } = playData;\n    eventHandlers.length && this._fireAnimationEvents(playData, eventHandlers, lastClipTime, clipTime);\n\n    for (let i = curveBindings.length - 1; i >= 0; i--) {\n      const owner = curveOwners[i];\n      owner?.evaluateAndApplyValue(curveBindings[i].curve, clipTime, weight, additive);\n    }\n\n    playData.frameTime += state.speed * delta;\n\n    if (playState === AnimatorStatePlayState.Finished) {\n      layerData.layerState = LayerState.Standby;\n    }\n\n    if (lastPlayState === AnimatorStatePlayState.UnStarted) {\n      this._callAnimatorScriptOnEnter(state, layerIndex);\n    }\n    if (playState === AnimatorStatePlayState.Finished) {\n      this._callAnimatorScriptOnExit(state, layerIndex);\n    } else {\n      this._callAnimatorScriptOnUpdate(state, layerIndex);\n    }\n  }\n\n  private _updateCrossFade(\n    srcPlayData: AnimatorStatePlayData,\n    destPlayData: AnimatorStatePlayData,\n    layerData: AnimatorLayerData,\n    layerIndex,\n    weight: number,\n    delta: number,\n    additive: boolean,\n    aniUpdate: boolean\n  ) {\n    const { _crossOwnerCollection: crossCurveDataCollection } = this;\n    const { _curveBindings: srcCurves } = srcPlayData.state.clip;\n    const { state: srcState, stateData: srcStateData, playState: lastSrcPlayState } = srcPlayData;\n    const { eventHandlers: srcEventHandlers } = srcStateData;\n    const { state: destState, stateData: destStateData, playState: lastDstPlayState } = destPlayData;\n    const { eventHandlers: destEventHandlers } = destStateData;\n    const { _curveBindings: destCurves } = destState.clip;\n    const { clipTime: lastSrcClipTime } = srcPlayData;\n    const { clipTime: lastDestClipTime } = destPlayData;\n\n    let crossWeight =\n      Math.abs(destPlayData.frameTime) / (destState._getDuration() * layerData.crossFadeTransition.duration);\n    crossWeight >= 1.0 && (crossWeight = 1.0);\n\n    srcPlayData.update(this.speed < 0);\n    destPlayData.update(this.speed < 0);\n\n    const { playState: srcPlayState } = srcPlayData;\n    const { playState: destPlayState } = destPlayData;\n\n    this._updateCrossFadeData(layerData, crossWeight, delta, false);\n\n    if (!aniUpdate) {\n      return;\n    }\n\n    const { clipTime: srcClipTime } = srcPlayData;\n    const { clipTime: destClipTime } = destPlayData;\n\n    srcEventHandlers.length && this._fireAnimationEvents(srcPlayData, srcEventHandlers, lastSrcClipTime, srcClipTime);\n    destEventHandlers.length &&\n      this._fireAnimationEvents(destPlayData, destEventHandlers, lastDestClipTime, destClipTime);\n\n    if (lastSrcPlayState === AnimatorStatePlayState.UnStarted) {\n      this._callAnimatorScriptOnEnter(srcState, layerIndex);\n    }\n    if (crossWeight === 1 || srcPlayState === AnimatorStatePlayState.Finished) {\n      this._callAnimatorScriptOnExit(srcState, layerIndex);\n    } else {\n      this._callAnimatorScriptOnUpdate(srcState, layerIndex);\n    }\n\n    if (lastDstPlayState === AnimatorStatePlayState.UnStarted) {\n      this._callAnimatorScriptOnEnter(destState, layerIndex);\n    }\n    if (destPlayState === AnimatorStatePlayState.Finished) {\n      this._callAnimatorScriptOnExit(destState, layerIndex);\n    } else {\n      this._callAnimatorScriptOnUpdate(destState, layerIndex);\n    }\n\n    for (let i = crossCurveDataCollection.length - 1; i >= 0; i--) {\n      const crossCurveData = crossCurveDataCollection[i];\n      const { crossSrcCurveIndex, crossDestCurveIndex } = crossCurveData;\n      crossCurveData.crossFadeAndApplyValue(\n        crossSrcCurveIndex >= 0 ? srcCurves[crossSrcCurveIndex].curve : null,\n        crossDestCurveIndex >= 0 ? destCurves[crossDestCurveIndex].curve : null,\n        srcClipTime,\n        destClipTime,\n        crossWeight,\n        weight,\n        additive\n      );\n    }\n  }\n\n  private _updateCrossFadeFromPose(\n    destPlayData: AnimatorStatePlayData,\n    layerData: AnimatorLayerData,\n    layerIndex: number,\n    layerWeight: number,\n    delta: number,\n    additive: boolean,\n    aniUpdate: boolean\n  ) {\n    const crossCurveDataCollection = this._crossOwnerCollection;\n    const { state, stateData, playState: lastPlayState } = destPlayData;\n    const { eventHandlers } = stateData;\n    const { _curveBindings: curveBindings } = state.clip;\n    const { clipTime: lastDestClipTime } = destPlayData;\n\n    let crossWeight =\n      Math.abs(destPlayData.frameTime) / (state._getDuration() * layerData.crossFadeTransition.duration);\n    crossWeight >= 1.0 && (crossWeight = 1.0);\n\n    destPlayData.update(this.speed < 0);\n\n    const { playState } = destPlayData;\n\n    this._updateCrossFadeData(layerData, crossWeight, delta, true);\n\n    if (!aniUpdate) {\n      return;\n    }\n\n    const { clipTime: destClipTime } = destPlayData;\n    //TODO: srcState 少了最新一段时间的判断\n    eventHandlers.length && this._fireAnimationEvents(destPlayData, eventHandlers, lastDestClipTime, destClipTime);\n\n    if (lastPlayState === AnimatorStatePlayState.UnStarted) {\n      this._callAnimatorScriptOnEnter(state, layerIndex);\n    }\n    if (playState === AnimatorStatePlayState.Finished) {\n      this._callAnimatorScriptOnExit(state, layerIndex);\n    } else {\n      this._callAnimatorScriptOnUpdate(state, layerIndex);\n    }\n\n    for (let i = crossCurveDataCollection.length - 1; i >= 0; i--) {\n      const crossCurveData = crossCurveDataCollection[i];\n      const { crossDestCurveIndex } = crossCurveData;\n      crossCurveData.crossFadeFromPoseAndApplyValue(\n        crossDestCurveIndex >= 0 ? curveBindings[crossDestCurveIndex].curve : null,\n        destClipTime,\n        crossWeight,\n        layerWeight,\n        additive\n      );\n    }\n  }\n\n  private _updateCrossFadeData(layerData: AnimatorLayerData, crossWeight: number, delta: number, fixed: boolean): void {\n    const { destPlayData } = layerData;\n    destPlayData.frameTime += destPlayData.state.speed * delta;\n    if (crossWeight === 1.0) {\n      if (destPlayData.playState === AnimatorStatePlayState.Finished) {\n        layerData.layerState = LayerState.Standby;\n      } else {\n        layerData.layerState = LayerState.Playing;\n      }\n      layerData.switchPlayData();\n      layerData.crossFadeTransition = null;\n    } else {\n      fixed || (layerData.srcPlayData.frameTime += layerData.srcPlayData.state.speed * delta);\n    }\n  }\n\n  private _preparePlay(layerData: AnimatorLayerData, playState: AnimatorState, playStateData: AnimatorStateData): void {\n    if (layerData.layerState === LayerState.Playing) {\n      const srcPlayData = layerData.srcPlayData;\n      if (srcPlayData.state !== playState) {\n        const { curveOwners } = srcPlayData.stateData;\n        for (let i = curveOwners.length - 1; i >= 0; i--) {\n          const owner = curveOwners[i];\n          owner?.hasSavedDefaultValue && owner.revertDefaultValue();\n        }\n        this._saveDefaultValues(playStateData);\n      }\n    } else {\n      // layerState is CrossFading, FixedCrossFading, Standby\n      const crossCurveDataCollection = this._crossOwnerCollection;\n      for (let i = crossCurveDataCollection.length - 1; i >= 0; i--) {\n        const owner = crossCurveDataCollection[i];\n        owner.hasSavedDefaultValue && owner.revertDefaultValue();\n      }\n      this._saveDefaultValues(playStateData);\n    }\n  }\n\n  private _checkTransition(\n    stateData: AnimatorStatePlayData,\n    crossFadeTransition: AnimatorStateTransition,\n    layerIndex: number\n  ) {\n    const { state, clipTime } = stateData;\n    const { transitions } = state;\n    const duration = state._getDuration();\n    for (let i = 0, n = transitions.length; i < n; ++i) {\n      const transition = transitions[i];\n      if (duration * transition.exitTime <= clipTime) {\n        crossFadeTransition !== transition && this._crossFadeByTransition(transition, layerIndex);\n      }\n    }\n  }\n\n  private _crossFadeByTransition(transition: AnimatorStateTransition, layerIndex: number): void {\n    const { name } = transition.destinationState;\n    const stateInfo = this._getAnimatorStateInfo(name, layerIndex);\n    const { state: crossState } = stateInfo;\n    if (!crossState) {\n      return;\n    }\n    if (!crossState.clip) {\n      console.warn(`The state named ${name} has no AnimationClip data.`);\n      return;\n    }\n\n    const animatorLayerData = this._getAnimatorLayerData(stateInfo.layerIndex);\n    const layerState = animatorLayerData.layerState;\n    const { destPlayData } = animatorLayerData;\n\n    const animatorStateData = this._getAnimatorStateData(name, crossState, animatorLayerData);\n    const duration = crossState._getDuration();\n    const offset = duration * transition.offset;\n    destPlayData.reset(crossState, animatorStateData, offset);\n\n    switch (layerState) {\n      // Maybe not play, maybe end.\n      case LayerState.Standby:\n        animatorLayerData.layerState = LayerState.FixedCrossFading;\n        this._clearCrossData(animatorLayerData);\n        this._prepareStandbyCrossFading(animatorLayerData);\n        break;\n      case LayerState.Playing:\n        animatorLayerData.layerState = LayerState.CrossFading;\n        this._clearCrossData(animatorLayerData);\n        this._prepareCrossFading(animatorLayerData);\n        break;\n      case LayerState.CrossFading:\n        animatorLayerData.layerState = LayerState.FixedCrossFading;\n        this._prepareFixedPoseCrossFading(animatorLayerData);\n        break;\n      case LayerState.FixedCrossFading:\n        this._prepareFixedPoseCrossFading(animatorLayerData);\n        break;\n    }\n\n    animatorLayerData.crossFadeTransition = transition;\n  }\n\n  private _fireAnimationEvents(\n    playState: AnimatorStatePlayData,\n    eventHandlers: AnimationEventHandler[],\n    lastClipTime: number,\n    clipTime: number\n  ): void {\n    const { state } = playState;\n    const clipDuration = state.clip.length;\n    if (this.speed >= 0) {\n      if (clipTime < lastClipTime) {\n        this._fireSubAnimationEvents(playState, eventHandlers, lastClipTime, state.clipEndTime * clipDuration);\n        playState.currentEventIndex = 0;\n        this._fireSubAnimationEvents(playState, eventHandlers, state.clipStartTime * clipDuration, clipTime);\n      } else {\n        this._fireSubAnimationEvents(playState, eventHandlers, lastClipTime, clipTime);\n      }\n    } else {\n      if (clipTime > lastClipTime) {\n        this._fireBackwardSubAnimationEvents(\n          playState,\n          eventHandlers,\n          lastClipTime,\n          state.clipStartTime * clipDuration\n        );\n        playState.currentEventIndex = eventHandlers.length - 1;\n        this._fireBackwardSubAnimationEvents(playState, eventHandlers, state.clipEndTime * clipDuration, clipTime);\n      } else {\n        this._fireBackwardSubAnimationEvents(playState, eventHandlers, lastClipTime, clipTime);\n      }\n    }\n  }\n\n  private _fireSubAnimationEvents(\n    playState: AnimatorStatePlayData,\n    eventHandlers: AnimationEventHandler[],\n    lastClipTime: number,\n    curClipTime: number\n  ): void {\n    let eventIndex = playState.currentEventIndex;\n    for (let n = eventHandlers.length; eventIndex < n; eventIndex++) {\n      const eventHandler = eventHandlers[eventIndex];\n      const { time, parameter } = eventHandler.event;\n\n      if (time > curClipTime) {\n        break;\n      }\n\n      const { handlers } = eventHandler;\n      if (time >= lastClipTime) {\n        for (let j = handlers.length - 1; j >= 0; j--) {\n          handlers[j](parameter);\n        }\n        playState.currentEventIndex = Math.min(eventIndex + 1, n - 1);\n      }\n    }\n  }\n\n  private _fireBackwardSubAnimationEvents(\n    playState: AnimatorStatePlayData,\n    eventHandlers: AnimationEventHandler[],\n    lastClipTime: number,\n    curClipTime: number\n  ): void {\n    let eventIndex = playState.currentEventIndex;\n    for (; eventIndex >= 0; eventIndex--) {\n      const eventHandler = eventHandlers[eventIndex];\n      const { time, parameter } = eventHandler.event;\n\n      if (time < curClipTime) {\n        break;\n      }\n\n      if (time <= lastClipTime) {\n        const { handlers } = eventHandler;\n        for (let j = handlers.length - 1; j >= 0; j--) {\n          handlers[j](parameter);\n        }\n        playState.currentEventIndex = Math.max(eventIndex - 1, 0);\n      }\n    }\n  }\n\n  private _callAnimatorScriptOnEnter(state: AnimatorState, layerIndex: number): void {\n    const scripts = state._onStateEnterScripts;\n    for (let i = 0, n = scripts.length; i < n; i++) {\n      scripts[i].onStateEnter(this, state, layerIndex);\n    }\n  }\n\n  private _callAnimatorScriptOnUpdate(state: AnimatorState, layerIndex: number): void {\n    const scripts = state._onStateUpdateScripts;\n    for (let i = 0, n = scripts.length; i < n; i++) {\n      scripts[i].onStateUpdate(this, state, layerIndex);\n    }\n  }\n\n  private _callAnimatorScriptOnExit(state: AnimatorState, layerIndex: number): void {\n    const scripts = state._onStateExitScripts;\n    for (let i = 0, n = scripts.length; i < n; i++) {\n      scripts[i].onStateExit(this, state, layerIndex);\n    }\n  }\n\n  private _checkAutoPlay(): void {\n    const { layers } = this._animatorController;\n    for (let i = 0, n = layers.length; i < n; ++i) {\n      const stateMachine = layers[i].stateMachine;\n      if (stateMachine?.defaultState) {\n        this.play(stateMachine.defaultState.name, i);\n      }\n    }\n  }\n}\n\ninterface IAnimatorStateInfo {\n  layerIndex: number;\n  state: AnimatorState;\n}\n","import { BoolUpdateFlag } from \"../BoolUpdateFlag\";\nimport { UpdateFlagManager } from \"../UpdateFlagManager\";\nimport { AnimatorControllerLayer } from \"./AnimatorControllerLayer\";\n\n/**\n * Store the data for Animator playback.\n */\nexport class AnimatorController {\n  private _updateFlagManager: UpdateFlagManager = new UpdateFlagManager();\n  private _layers: AnimatorControllerLayer[] = [];\n  private _layersMap: Record<string, AnimatorControllerLayer> = {};\n\n  /**\n   * The layers in the controller.\n   */\n  get layers(): Readonly<AnimatorControllerLayer[]> {\n    return this._layers;\n  }\n\n  /**\n   * Get the layer by name.\n   * @param name - The layer's name.\n   */\n  findLayerByName(name: string): AnimatorControllerLayer {\n    return this._layersMap[name];\n  }\n\n  /**\n   * Add a layer to the controller.\n   * @param layer - The layer to add\n   */\n  addLayer(layer: AnimatorControllerLayer): void {\n    this._layers.push(layer);\n    this._layersMap[layer.name] = layer;\n    this._updateFlagManager.dispatch();\n  }\n\n  /**\n   * Remove a layer from the controller.\n   * @param layerIndex - The index of the AnimatorLayer\n   */\n  removeLayer(layerIndex: number): void {\n    const theLayer = this.layers[layerIndex];\n    this._layers.splice(layerIndex, 1);\n    delete this._layersMap[theLayer.name];\n    this._updateFlagManager.dispatch();\n  }\n\n  /**\n   * Clear layers.\n   */\n  clearLayers(): void {\n    this._layers.length = 0;\n    for (let name in this._layersMap) {\n      delete this._layersMap[name];\n    }\n    this._updateFlagManager.dispatch();\n  }\n\n  /**\n   * @internal\n   */\n  _registerChangeFlag(): BoolUpdateFlag {\n    return this._updateFlagManager.createFlag(BoolUpdateFlag);\n  }\n}\n","import { AnimatorStateMachine } from \"./AnimatorStateMachine\";\nimport { AnimatorLayerBlendingMode } from \"./enums/AnimatorLayerBlendingMode\";\n\n/**\n * The Animation Layer contains a state machine that controls animations of a model or part of it.\n */\nexport class AnimatorControllerLayer {\n  /** The blending weight that the layers has. It is not taken into account for the first layer. */\n  weight: number = 1.0;\n  /** The blending mode used by the layer. It is not taken into account for the first layer. */\n  blendingMode: AnimatorLayerBlendingMode = AnimatorLayerBlendingMode.Override;\n  /** The state machine for the layer. */\n  stateMachine: AnimatorStateMachine;\n\n  /**\n   * @param name - The layer's name\n   */\n  constructor(public readonly name: string) {}\n}\n","import { Animator } from \"../animation/Animator\";\nimport { AnimatorState } from \"../animation/AnimatorState\";\n\n/**\n * StateMachineScript is a component that can be added to a animator state. It's the base class every script on a state derives from.\n */\nexport class StateMachineScript {\n  /** @internal */\n  _destroyed: boolean = false;\n  /** @internal */\n  _state: AnimatorState;\n  /**\n   * onStateEnter is called when a transition starts and the state machine starts to evaluate this state.\n   * @param animator - The animator\n   * @param animatorState - The state be evaluated\n   * @param layerIndex - The index of the layer where the state is located\n   */\n  onStateEnter(animator: Animator, animatorState: AnimatorState, layerIndex: number): void {}\n\n  /**\n   * onStateUpdate is called on each Update frame between onStateEnter and onStateExit callbacks.\n   * @param animator - The animator\n   * @param animatorState - The state be evaluated\n   * @param layerIndex - The index of the layer where the state is located\n   */\n  onStateUpdate(animator: Animator, animatorState: AnimatorState, layerIndex: number): void {}\n\n  /**\n   * onStateExit is called when a transition ends and the state machine finishes evaluating this state.\n   * @param animator - The animator\n   * @param animatorState - The state be evaluated\n   * @param layerIndex - The index of the layer where the state is located\n   */\n  onStateExit(animator: Animator, animatorState: AnimatorState, layerIndex: number): void {}\n\n  /**\n   * Destroy this instance.\n   */\n  destroy(): void {\n    if (this._destroyed) {\n      return;\n    }\n\n    this._state._removeStateMachineScript(this);\n    this._destroyed = true;\n  }\n}\n","import { AnimationClip } from \"./AnimationClip\";\nimport { AnimatorStateTransition } from \"./AnimatorTransition\";\nimport { WrapMode } from \"./enums/WrapMode\";\nimport { StateMachineScript } from \"./StateMachineScript\";\n\n/**\n * States are the basic building blocks of a state machine. Each state contains a AnimationClip which will play while the character is in that state.\n */\nexport class AnimatorState {\n  /** The speed of the clip. 1 is normal speed, default 1. */\n  speed: number = 1.0;\n  /** The wrap mode used in the state. */\n  wrapMode: WrapMode = WrapMode.Loop;\n\n  /** @internal */\n  _onStateEnterScripts: StateMachineScript[] = [];\n  /** @internal */\n  _onStateUpdateScripts: StateMachineScript[] = [];\n  /** @internal */\n  _onStateExitScripts: StateMachineScript[] = [];\n\n  private _clipStartTime: number = 0;\n  private _clipEndTime: number = 1;\n  private _clip: AnimationClip;\n  private _transitions: AnimatorStateTransition[] = [];\n\n  /**\n   * The transitions that are going out of the state.\n   */\n  get transitions(): Readonly<AnimatorStateTransition[]> {\n    return this._transitions;\n  }\n\n  /**\n   * The clip that is being played by this animator state.\n   */\n  get clip(): AnimationClip {\n    return this._clip;\n  }\n\n  set clip(clip: AnimationClip) {\n    this._clip = clip;\n    this._clipEndTime = Math.min(this._clipEndTime, 1);\n  }\n\n  /**\n   * The start time of the clip, the range is 0 to 1, default is 0.\n   */\n  get clipStartTime() {\n    return this._clipStartTime;\n  }\n\n  set clipStartTime(time: number) {\n    this._clipStartTime = Math.max(time, 0);\n  }\n\n  /**\n   * The end time of the clip, the range is 0 to 1, default is 1.\n   */\n  get clipEndTime() {\n    return this._clipEndTime;\n  }\n\n  set clipEndTime(time: number) {\n    this._clipEndTime = Math.min(time, 1);\n  }\n\n  /**\n   * @param name - The state's name\n   */\n  constructor(public readonly name: string) {}\n\n  /**\n   * Add an outgoing transition to the destination state.\n   * @param transition - The transition\n   */\n  addTransition(transition: AnimatorStateTransition): void {\n    this._transitions.push(transition);\n  }\n\n  /**\n   * Remove a transition from the state.\n   * @param transition - The transition\n   */\n  removeTransition(transition: AnimatorStateTransition): void {\n    const index = this._transitions.indexOf(transition);\n    index !== -1 && this._transitions.splice(index, 1);\n  }\n\n  /**\n   * Adds a state machine script class of type T to the AnimatorState.\n   * @param scriptType - The state machine script class of type T\n   */\n  addStateMachineScript<T extends StateMachineScript>(scriptType: new () => T): T {\n    const script = new scriptType();\n    script._state = this;\n\n    const { prototype } = StateMachineScript;\n    if (script.onStateEnter !== prototype.onStateEnter) {\n      this._onStateEnterScripts.push(script);\n    }\n    if (script.onStateUpdate !== prototype.onStateUpdate) {\n      this._onStateUpdateScripts.push(script);\n    }\n    if (script.onStateExit !== prototype.onStateExit) {\n      this._onStateExitScripts.push(script);\n    }\n\n    return script;\n  }\n\n  /**\n   * Clears all transitions from the state.\n   */\n  clearTransitions(): void {\n    this._transitions.length = 0;\n  }\n\n  /**\n   * @internal\n   */\n  _getDuration(): number {\n    if (this.clip) {\n      return (this._clipEndTime - this._clipStartTime) * this.clip.length;\n    }\n    return null;\n  }\n\n  /**\n   * @internal\n   */\n  _removeStateMachineScript(script: StateMachineScript): void {\n    const { prototype } = StateMachineScript;\n    if (script.onStateEnter !== prototype.onStateEnter) {\n      const index = this._onStateEnterScripts.indexOf(script);\n      index !== -1 && this._onStateEnterScripts.splice(index, 1);\n    }\n    if (script.onStateUpdate !== prototype.onStateUpdate) {\n      const index = this._onStateUpdateScripts.indexOf(script);\n      index !== -1 && this._onStateUpdateScripts.splice(index, 1);\n    }\n    if (script.onStateExit !== prototype.onStateExit) {\n      const index = this._onStateExitScripts.indexOf(script);\n      index !== -1 && this._onStateExitScripts.splice(index, 1);\n    }\n  }\n}\n","import { AnimatorState } from \"./AnimatorState\";\nexport interface AnimatorStateMap {\n  [key: string]: AnimatorState;\n}\n\n/**\n * A graph controlling the interaction of states. Each state references a motion.\n */\nexport class AnimatorStateMachine {\n  /** The list of states. */\n  readonly states: AnimatorState[] = [];\n\n  /**\n   * The state will be played automatically.\n   * @remarks When the Animator's AnimatorController changed or the Animator's onEnable be triggered.\n   */\n  defaultState: AnimatorState;\n\n  /** @internal */\n  _statesMap: AnimatorStateMap = {};\n\n  /**\n   * Add a state to the state machine.\n   * @param name - The name of the new state\n   */\n  addState(name: string): AnimatorState {\n    let state = this.findStateByName(name);\n    if (!state) {\n      state = new AnimatorState(name);\n      this.states.push(state);\n      this._statesMap[name] = state;\n    } else {\n      console.warn(`The state named ${name} has existed.`);\n    }\n    return state;\n  }\n\n  /**\n   * Remove a state from the state machine.\n   * @param state - The state\n   */\n  removeState(state: AnimatorState): void {\n    const { name } = state;\n    const index = this.states.indexOf(state);\n    if (index > -1) {\n      this.states.splice(index, 1);\n    }\n    delete this._statesMap[name];\n  }\n\n  /**\n   * Get the state by name.\n   * @param name - The layer's name\n   */\n  findStateByName(name: string): AnimatorState {\n    return this._statesMap[name];\n  }\n\n  /**\n   * Makes a unique state name in the state machine.\n   * @param name - Desired name for the state.\n   * @returns Unique name.\n   */\n  makeUniqueStateName(name: string): string {\n    const { _statesMap } = this;\n    const originName = name;\n    let index = 0;\n    while (_statesMap[name]) {\n      name = `${originName} ${index}`;\n      index++;\n    }\n    return name;\n  }\n}\n","export enum AnimatorConditionMode {\n  If,\n  IfNot,\n  Greater,\n  Less,\n  Equals,\n  NotEquals\n}\n","import { Color, Quaternion, Vector2, Vector3, Vector4 } from \"@galacean/engine-math\";\n\n/**\n * Keyframe.\n * @typeParam V - Type of Keyframe value\n */\nexport class Keyframe<\n  V extends KeyframeValueType,\n  T = V extends number\n    ? number\n    : V extends Vector2\n    ? Vector2\n    : V extends Vector3\n    ? Vector3\n    : V extends Vector4 | Color | Quaternion\n    ? Vector4\n    : V extends number[] | Float32Array\n    ? number[]\n    : never\n> {\n  /** The time of the Keyframe. */\n  time: number;\n  /** The value of the Keyframe. */\n  value: V;\n  /** Sets the incoming tangent for this key. The incoming tangent affects the slope of the curve from the previous key to this key. */\n  inTangent?: T;\n  /** Sets the outgoing tangent for this key. The outgoing tangent affects the slope of the curve from this key to the next key. */\n  outTangent?: T;\n}\n\n/**\n * Type of Keyframe value.\n */\nexport type KeyframeValueType =\n  | number\n  | Vector2\n  | Vector3\n  | Vector4\n  | number[]\n  | Float32Array\n  | Quaternion\n  | Color\n  | boolean;\n","import { Vector4 } from \"@galacean/engine-math\";\nimport { Engine } from \"../Engine\";\nimport { Material } from \"../material/Material\";\nimport { CompareFunction } from \"../shader/enums/CompareFunction\";\nimport { CullMode } from \"../shader/enums/CullMode\";\nimport { Shader } from \"../shader/Shader\";\nimport { TextureCube } from \"../texture\";\n\n/**\n * SkyboxMaterial\n */\nexport class SkyBoxMaterial extends Material {\n  private _decodeParam: Vector4 = new Vector4(0, 5, 0, 0);\n\n  /**\n   * Whether to decode from texture with RGBM format.\n   */\n  get textureDecodeRGBM(): boolean {\n    return Boolean(this._decodeParam.x);\n  }\n\n  set textureDecodeRGBM(value: boolean) {\n    this._decodeParam.x = Number(value);\n  }\n\n  /**\n   * RGBM decode factor, default 5.0.\n   */\n  get RGBMDecodeFactor(): number {\n    return this._decodeParam.y;\n  }\n\n  set RGBMDecodeFactor(value: number) {\n    this._decodeParam.y = value;\n  }\n\n  /**\n   * Texture cube map of the sky box material.\n   */\n  get textureCubeMap(): TextureCube {\n    return this.shaderData.getTexture(\"u_cube\") as TextureCube;\n  }\n\n  set textureCubeMap(v: TextureCube) {\n    this.shaderData.setTexture(\"u_cube\", v);\n  }\n\n  constructor(engine: Engine) {\n    super(engine, Shader.find(\"skybox\"));\n\n    this.renderState.rasterState.cullMode = CullMode.Off;\n    this.renderState.depthState.compareFunction = CompareFunction.LessEqual;\n\n    this.shaderData.setVector4(\"u_cubeDecodeParam\", this._decodeParam);\n  }\n}\n","import { MathUtil, Vector3, Color } from \"@galacean/engine-math\";\nimport { Buffer } from \"../graphic/Buffer\";\nimport { BufferBindFlag } from \"../graphic/enums/BufferBindFlag\";\nimport { BufferUsage } from \"../graphic/enums/BufferUsage\";\nimport { IndexFormat } from \"../graphic/enums/IndexFormat\";\nimport { VertexElementFormat } from \"../graphic/enums/VertexElementFormat\";\nimport { VertexElement } from \"../graphic/VertexElement\";\nimport { Material } from \"../material/Material\";\nimport { BlendFactor } from \"../shader/enums/BlendFactor\";\nimport { RenderQueueType } from \"../shader/enums/RenderQueueType\";\nimport { Shader, CullMode } from \"../shader\";\nimport { Texture } from \"../texture\";\nimport { MeshRenderer } from \"../mesh/MeshRenderer\";\nimport { GLCapabilityType } from \"../base/Constant\";\nimport { BufferMesh } from \"../mesh/BufferMesh\";\nimport { ignoreClone } from \"../clone/CloneManager\";\n\nenum DirtyFlagType {\n  Position = 0x1,\n  Velocity = 0x2,\n  Acceleration = 0x4,\n  Color = 0x8,\n  Alpha = 0x10,\n  Size = 0x20,\n  StartAngle = 0x40,\n  StartTime = 0x80,\n  LifeTime = 0x100,\n  RotateVelocity = 0x200,\n  Scale = 0x400,\n  Everything = 0xffffffff\n}\n\n/**\n * Blend mode enums of the particle renderer's material.\n */\nexport enum ParticleRendererBlendMode {\n  Transparent = 0,\n  Additive = 1\n}\n\n/**\n * Particle Renderer Component.\n */\nexport class ParticleRenderer extends MeshRenderer {\n  /** The max number of indices that Uint16Array can support. */\n  private static _uint16VertexLimit: number = 65535;\n\n  private static _getRandom(): number {\n    return Math.random() - 0.5;\n  }\n\n  private _vertexStride: number;\n  private _vertices: Float32Array;\n  private _vertexBuffer: Buffer;\n  private _maxCount: number = 1000;\n  private _position: Vector3 = new Vector3();\n  private _positionRandomness: Vector3 = new Vector3();\n  private _positionArray: Vector3[];\n  private _velocity: Vector3 = new Vector3();\n  private _velocityRandomness: Vector3 = new Vector3();\n  private _acceleration: Vector3 = new Vector3();\n  private _accelerationRandomness: Vector3 = new Vector3();\n  private _color: Color = new Color(1, 1, 1, 1);\n  private _colorRandomness: number = 0;\n  private _size: number = 1;\n  private _sizeRandomness: number = 0;\n  private _alpha: number = 1;\n  private _alphaRandomness: number = 0;\n  private _startAngle: number = 0;\n  private _startAngleRandomness: number = 0;\n  private _rotateVelocity: number = 0;\n  private _rotateVelocityRandomness: number = 0;\n  private _lifetime: number = 5;\n  private _startTimeRandomness: number = 0;\n  private _scale: number = 1;\n  private _isOnce: boolean = false;\n  private _onceTime: number = 0;\n  private _time: number = 0;\n  private _isInit: boolean = false;\n  private _isStart: boolean = false;\n  private _updateDirtyFlag: number = DirtyFlagType.Everything;\n  private _isRotateToVelocity: boolean = false;\n  private _isUseOriginColor: boolean = false;\n  private _isScaleByLifetime: boolean = false;\n  private _is2d: boolean = true;\n  private _isFadeIn: boolean = false;\n  private _isFadeOut: boolean = false;\n  private _playOnEnable: boolean = true;\n  private _blendMode: ParticleRendererBlendMode = ParticleRendererBlendMode.Transparent;\n\n  /**\n   * Sprite sheet of texture.\n   */\n  public spriteSheet: { x: number; y: number; w: number; h: number }[];\n\n  /**\n   * Texture of particle.\n   */\n  get texture(): Texture {\n    return this.getMaterial().shaderData.getTexture(\"u_texture\");\n  }\n\n  set texture(texture: Texture) {\n    if (texture) {\n      this.shaderData.enableMacro(\"particleTexture\");\n      this.getMaterial().shaderData.setTexture(\"u_texture\", texture);\n    } else {\n      this.shaderData.disableMacro(\"particleTexture\");\n    }\n  }\n\n  /**\n   * Position of particles.\n   */\n  get position(): Vector3 {\n    return this._position;\n  }\n\n  set position(value: Vector3) {\n    this._updateDirtyFlag |= DirtyFlagType.Position;\n    this._position = value;\n  }\n\n  /**\n   * Random range of positions.\n   */\n  get positionRandomness(): Vector3 {\n    return this._positionRandomness;\n  }\n\n  set positionRandomness(value: Vector3) {\n    this._updateDirtyFlag |= DirtyFlagType.Position;\n    this._positionRandomness = value;\n  }\n\n  /**\n   * Array of fixed positions.\n   */\n  get positionArray(): Vector3[] {\n    return this._positionArray;\n  }\n\n  set positionArray(value: Vector3[]) {\n    this._updateDirtyFlag |= DirtyFlagType.Position;\n    this._positionArray = value;\n  }\n\n  /**\n   * Velocity of particles.\n   */\n  get velocity(): Vector3 {\n    return this._velocity;\n  }\n\n  set velocity(value: Vector3) {\n    this._updateDirtyFlag |= DirtyFlagType.Velocity;\n    this._velocity = value;\n  }\n\n  /**\n   * Random range of velocity.\n   */\n  get velocityRandomness(): Vector3 {\n    return this._velocityRandomness;\n  }\n\n  set velocityRandomness(value: Vector3) {\n    this._updateDirtyFlag |= DirtyFlagType.Velocity;\n    this._velocityRandomness = value;\n  }\n\n  /**\n   * Acceleration of particles.\n   */\n  get acceleration(): Vector3 {\n    return this._acceleration;\n  }\n\n  set acceleration(value: Vector3) {\n    this._updateDirtyFlag |= DirtyFlagType.Acceleration;\n    this._acceleration = value;\n  }\n\n  /**\n   * Random range of acceleration.\n   */\n  get accelerationRandomness(): Vector3 {\n    return this._accelerationRandomness;\n  }\n\n  set accelerationRandomness(value: Vector3) {\n    this._updateDirtyFlag |= DirtyFlagType.Acceleration;\n    this._accelerationRandomness = value;\n  }\n\n  /**\n   * Color of particles.\n   */\n  get color(): Color {\n    return this._color;\n  }\n\n  set color(value: Color) {\n    this._color.copyFrom(value);\n  }\n\n  /**\n   * Random range of color.\n   */\n  get colorRandomness(): number {\n    return this._colorRandomness;\n  }\n\n  set colorRandomness(value: number) {\n    this._updateDirtyFlag |= DirtyFlagType.Color;\n    this._colorRandomness = value;\n  }\n\n  /**\n   * Size of particles.\n   */\n  get size(): number {\n    return this._size;\n  }\n\n  set size(value: number) {\n    this._updateDirtyFlag |= DirtyFlagType.Size;\n    this._size = value;\n  }\n\n  /**\n   * Random range of size.\n   */\n  get sizeRandomness(): number {\n    return this._sizeRandomness;\n  }\n\n  set sizeRandomness(value: number) {\n    this._updateDirtyFlag |= DirtyFlagType.Size;\n    this._sizeRandomness = value;\n  }\n\n  /**\n   * Alpha of particles.\n   */\n  get alpha(): number {\n    return this._alpha;\n  }\n\n  set alpha(value: number) {\n    this._updateDirtyFlag |= DirtyFlagType.Alpha;\n    this._alpha = value;\n  }\n\n  /**\n   * Random range of alpha.\n   */\n  get alphaRandomness(): number {\n    return this._alphaRandomness;\n  }\n\n  set alphaRandomness(value: number) {\n    this._updateDirtyFlag |= DirtyFlagType.Alpha;\n    this._alphaRandomness = value;\n  }\n\n  /**\n   * Angle of particles.\n   */\n  get angle(): number {\n    return this._startAngle;\n  }\n\n  set angle(value: number) {\n    this._updateDirtyFlag |= DirtyFlagType.StartAngle;\n    this._startAngle = value;\n  }\n\n  /**\n   * Random range of angle.\n   */\n  get angleRandomness(): number {\n    return this._startAngleRandomness;\n  }\n\n  set angleRandomness(value: number) {\n    this._updateDirtyFlag |= DirtyFlagType.StartAngle;\n    this._startAngleRandomness = value;\n  }\n\n  /**\n   * Rotate velocity of particles.\n   */\n  get rotateVelocity(): number {\n    return this._rotateVelocity;\n  }\n\n  set rotateVelocity(value: number) {\n    this._updateDirtyFlag |= DirtyFlagType.RotateVelocity;\n    this._rotateVelocity = value;\n  }\n\n  /**\n   * Random range of rotate velocity.\n   */\n  get rotateVelocityRandomness(): number {\n    return this._rotateVelocityRandomness;\n  }\n\n  set rotateVelocityRandomness(value: number) {\n    this._updateDirtyFlag |= DirtyFlagType.RotateVelocity;\n    this._rotateVelocityRandomness = value;\n  }\n\n  /**\n   * Lifetime of particles.\n   */\n  get lifetime(): number {\n    return this._lifetime;\n  }\n\n  set lifetime(value: number) {\n    this._updateDirtyFlag |= DirtyFlagType.LifeTime;\n    this._lifetime = value;\n    this._onceTime = 0;\n  }\n\n  /**\n   * Random range of start time.\n   */\n  get startTimeRandomness(): number {\n    return this._startTimeRandomness;\n  }\n\n  set startTimeRandomness(value: number) {\n    this._updateDirtyFlag |= DirtyFlagType.StartTime;\n    this._startTimeRandomness = value;\n    this._onceTime = 0;\n  }\n\n  /**\n   * Scale factor of particles.\n   */\n  get scale(): number {\n    return this._scale;\n  }\n\n  set scale(value: number) {\n    this._updateDirtyFlag |= DirtyFlagType.Scale;\n    this._scale = value;\n  }\n\n  /**\n   * Max count of particles.\n   */\n  get maxCount(): number {\n    return this._maxCount;\n  }\n\n  set maxCount(value: number) {\n    this._isStart = false;\n    this._isInit = false;\n    this._maxCount = value;\n    this._updateDirtyFlag = DirtyFlagType.Everything;\n    this.mesh = this._createMesh();\n\n    this._updateBuffer();\n\n    this._isInit = true;\n    this.shaderData.setFloat(\"u_time\", 0);\n  }\n\n  /**\n   * Whether play once.\n   */\n  get isOnce(): boolean {\n    return this._isOnce;\n  }\n\n  set isOnce(value: boolean) {\n    this._time = 0;\n    this.shaderData.setInt(\"u_once\", value ? 1 : 0);\n    this._isOnce = value;\n  }\n\n  /**\n   * Whether follow the direction of velocity.\n   */\n  get isRotateToVelocity(): boolean {\n    return this._isRotateToVelocity;\n  }\n\n  set isRotateToVelocity(value: boolean) {\n    if (value) {\n      this.shaderData.enableMacro(\"rotateToVelocity\");\n    } else {\n      this.shaderData.disableMacro(\"rotateToVelocity\");\n    }\n\n    this._isRotateToVelocity = value;\n  }\n\n  /**\n   * Whether use origin color.\n   */\n  get isUseOriginColor(): boolean {\n    return this._isUseOriginColor;\n  }\n\n  set isUseOriginColor(value: boolean) {\n    if (value) {\n      this.shaderData.enableMacro(\"useOriginColor\");\n    } else {\n      this.shaderData.disableMacro(\"useOriginColor\");\n    }\n\n    this._isUseOriginColor = value;\n  }\n\n  /**\n   * Whether scale by lifetime.\n   */\n  get isScaleByLifetime(): boolean {\n    return this._isScaleByLifetime;\n  }\n\n  set isScaleByLifetime(value: boolean) {\n    if (value) {\n      this.shaderData.enableMacro(\"isScaleByLifetime\");\n    } else {\n      this.shaderData.disableMacro(\"isScaleByLifetime\");\n    }\n\n    this._isScaleByLifetime = value;\n  }\n\n  /**\n   * Whether 2D rendering.\n   */\n  get is2d(): boolean {\n    return this._is2d;\n  }\n\n  set is2d(value: boolean) {\n    if (value) {\n      this.shaderData.enableMacro(\"is2d\");\n    } else {\n      this.shaderData.disableMacro(\"is2d\");\n      this.getMaterial().renderState.rasterState.cullMode = CullMode.Off;\n    }\n\n    this._is2d = value;\n  }\n\n  /**\n   * Whether fade in.\n   */\n  get isFadeIn(): boolean {\n    return this._isFadeIn;\n  }\n\n  set isFadeIn(value: boolean) {\n    if (value) {\n      this.shaderData.enableMacro(\"fadeIn\");\n    } else {\n      this.shaderData.disableMacro(\"fadeIn\");\n    }\n\n    this._isFadeIn = value;\n  }\n\n  /**\n   * Whether fade out.\n   */\n  get isFadeOut(): boolean {\n    return this._isFadeOut;\n  }\n\n  set isFadeOut(value: boolean) {\n    if (value) {\n      this.shaderData.enableMacro(\"fadeOut\");\n    } else {\n      this.shaderData.disableMacro(\"fadeOut\");\n    }\n\n    this._isFadeOut = value;\n  }\n\n  /**\n   * Whether play on enable.\n   */\n  get playOnEnable(): boolean {\n    return this._playOnEnable;\n  }\n\n  set playOnEnable(value: boolean) {\n    this._playOnEnable = value;\n\n    if (value) {\n      this.start();\n    } else {\n      this.stop();\n    }\n  }\n\n  /**\n   * Blend mode of the particle renderer's material.\n   */\n  get blendMode(): ParticleRendererBlendMode {\n    return this._blendMode;\n  }\n\n  set blendMode(value: ParticleRendererBlendMode) {\n    const blendState = this.getMaterial().renderState.blendState;\n    const target = blendState.targetBlendState;\n\n    if (value === ParticleRendererBlendMode.Transparent) {\n      target.enabled = true;\n      target.sourceColorBlendFactor = BlendFactor.SourceAlpha;\n      target.destinationColorBlendFactor = BlendFactor.OneMinusSourceAlpha;\n      target.sourceAlphaBlendFactor = BlendFactor.One;\n      target.destinationAlphaBlendFactor = BlendFactor.OneMinusSourceAlpha;\n    } else if (value === ParticleRendererBlendMode.Additive) {\n      target.enabled = true;\n      target.sourceColorBlendFactor = BlendFactor.SourceAlpha;\n      target.destinationColorBlendFactor = BlendFactor.One;\n      target.sourceAlphaBlendFactor = BlendFactor.One;\n      target.destinationAlphaBlendFactor = BlendFactor.OneMinusSourceAlpha;\n    }\n\n    this._blendMode = value;\n  }\n\n  constructor(props) {\n    super(props);\n\n    this._onColorChanged = this._onColorChanged.bind(this);\n    //@ts-ignore\n    this._color._onValueChanged = this._onColorChanged;\n\n    this.setMaterial(this._createMaterial());\n  }\n\n  /**\n   * @override\n   * @internal\n   */\n  update(deltaTime: number): void {\n    if (!this._isInit || !this._isStart) {\n      return;\n    }\n\n    // Stop after play once\n    if (this._isOnce && this._time > this._onceTime) {\n      return this.stop();\n    }\n\n    if (this._updateDirtyFlag) {\n      this._updateBuffer();\n      this._updateDirtyFlag = 0;\n    }\n\n    this._time += deltaTime / 1000;\n    this.shaderData.setFloat(\"u_time\", this._time);\n  }\n\n  /**\n   * @override\n   * @internal\n   */\n  _onEnable(): void {\n    super._onEnable();\n\n    if (this._playOnEnable) {\n      this.start();\n    }\n  }\n\n  /**\n   * Start emitting.\n   */\n  start(): void {\n    this._isStart = true;\n    this._time = 0;\n  }\n\n  /**\n   * Stop emitting.\n   */\n  stop(): void {\n    this._isStart = false;\n  }\n\n  private _createMaterial(): Material {\n    const material = new Material(this.engine, Shader.find(\"particle-shader\"));\n    const { renderState } = material;\n    const target = renderState.blendState.targetBlendState;\n\n    target.enabled = true;\n    target.sourceColorBlendFactor = BlendFactor.SourceAlpha;\n    target.destinationColorBlendFactor = BlendFactor.OneMinusSourceAlpha;\n    target.sourceAlphaBlendFactor = BlendFactor.One;\n    target.destinationAlphaBlendFactor = BlendFactor.OneMinusSourceAlpha;\n\n    renderState.depthState.writeEnabled = false;\n\n    material.renderState.renderQueueType = RenderQueueType.Transparent;\n\n    this.isUseOriginColor = true;\n    this.is2d = true;\n    this.isFadeOut = true;\n\n    return material;\n  }\n\n  private _createMesh(): BufferMesh {\n    const mesh = new BufferMesh(this._entity.engine, \"particleMesh\");\n    const vertexStride = 96;\n    const vertexCount = this._maxCount * 4;\n    const vertexFloatCount = vertexCount * vertexStride;\n    const vertices = new Float32Array(vertexFloatCount);\n    let indices: Uint16Array | Uint32Array = null;\n    let useUint32: boolean = false;\n    if (vertexCount > ParticleRenderer._uint16VertexLimit) {\n      if (this.engine._hardwareRenderer.canIUse(GLCapabilityType.elementIndexUint)) {\n        useUint32 = true;\n        indices = new Uint32Array(6 * this._maxCount);\n      } else {\n        throw Error(\"The vertex count is over limit.\");\n      }\n    } else {\n      indices = new Uint16Array(6 * this._maxCount);\n    }\n\n    for (let i = 0, idx = 0; i < this._maxCount; ++i) {\n      let startIndex = i * 4;\n      indices[idx++] = startIndex;\n      indices[idx++] = startIndex + 1;\n      indices[idx++] = startIndex + 2;\n      indices[idx++] = startIndex;\n      indices[idx++] = startIndex + 2;\n      indices[idx++] = startIndex + 3;\n    }\n\n    const vertexElements = [\n      new VertexElement(\"a_position\", 0, VertexElementFormat.Vector3, 0),\n      new VertexElement(\"a_velocity\", 12, VertexElementFormat.Vector3, 0),\n      new VertexElement(\"a_acceleration\", 24, VertexElementFormat.Vector3, 0),\n      new VertexElement(\"a_color\", 36, VertexElementFormat.Vector4, 0),\n      new VertexElement(\"a_lifeAndSize\", 52, VertexElementFormat.Vector4, 0),\n      new VertexElement(\"a_rotation\", 68, VertexElementFormat.Vector2, 0),\n      new VertexElement(\"a_uv\", 76, VertexElementFormat.Vector3, 0),\n      new VertexElement(\"a_normalizedUv\", 88, VertexElementFormat.Vector2, 0)\n    ];\n\n    const vertexBuffer = new Buffer(\n      this.engine,\n      BufferBindFlag.VertexBuffer,\n      vertexFloatCount * 4,\n      BufferUsage.Dynamic\n    );\n\n    const indexBuffer = new Buffer(this.engine, BufferBindFlag.IndexBuffer, indices, BufferUsage.Dynamic);\n\n    mesh.setVertexBufferBinding(vertexBuffer, vertexStride);\n    mesh.setIndexBufferBinding(indexBuffer, useUint32 ? IndexFormat.UInt32 : IndexFormat.UInt16);\n    mesh.setVertexElements(vertexElements);\n    mesh.addSubMesh(0, indices.length);\n\n    this._vertexBuffer = vertexBuffer;\n    this._vertexStride = vertexStride / 4;\n    this._vertices = vertices;\n\n    const { bounds } = mesh;\n    const minValue = Number.MIN_SAFE_INTEGER;\n    const maxValue = Number.MAX_SAFE_INTEGER;\n    bounds.min.set(minValue, minValue, minValue);\n    bounds.max.set(maxValue, maxValue, maxValue);\n\n    return mesh;\n  }\n\n  private _updateBuffer(): void {\n    for (let x = 0; x < this._maxCount; x++) {\n      this._updateSingleBuffer(x);\n    }\n\n    this._vertexBuffer.setData(this._vertices);\n  }\n\n  private _updateSingleBuffer(i: number): void {\n    const { _updateDirtyFlag, _vertices: vertices, _vertexStride: vertexStride } = this;\n    const { _getRandom: getRandom } = ParticleRenderer;\n    const offset = i * 4;\n\n    const k0 = offset * vertexStride;\n    const k1 = (offset + 1) * vertexStride;\n    const k2 = (offset + 2) * vertexStride;\n    const k3 = (offset + 3) * vertexStride;\n\n    if (_updateDirtyFlag & DirtyFlagType.Position) {\n      let { x, y, z } = this._position;\n      const { _positionArray, _positionRandomness } = this;\n\n      if (_positionArray) {\n        if (_positionArray.length !== this._maxCount) {\n          throw Error(\"The length of positionArray must be equal to maxCount.\");\n        }\n        const pos = _positionArray[i];\n\n        x += pos.x;\n        y += pos.y;\n        z += pos.z;\n      } else {\n        x += getRandom() * _positionRandomness.x;\n        y += getRandom() * _positionRandomness.y;\n        z += getRandom() * _positionRandomness.z;\n      }\n\n      vertices[k0] = vertices[k1] = vertices[k2] = vertices[k3] = x;\n      vertices[k0 + 1] = vertices[k1 + 1] = vertices[k2 + 1] = vertices[k3 + 1] = y;\n      vertices[k0 + 2] = vertices[k1 + 2] = vertices[k2 + 2] = vertices[k3 + 2] = z;\n    }\n\n    if (_updateDirtyFlag & DirtyFlagType.Velocity) {\n      const { _velocity, _velocityRandomness } = this;\n\n      vertices[k0 + 3] =\n        vertices[k1 + 3] =\n        vertices[k2 + 3] =\n        vertices[k3 + 3] =\n          _velocity.x + getRandom() * _velocityRandomness.x;\n      vertices[k0 + 4] =\n        vertices[k1 + 4] =\n        vertices[k2 + 4] =\n        vertices[k3 + 4] =\n          _velocity.y + getRandom() * _velocityRandomness.y;\n      vertices[k0 + 5] =\n        vertices[k1 + 5] =\n        vertices[k2 + 5] =\n        vertices[k3 + 5] =\n          _velocity.z + getRandom() * _velocityRandomness.z;\n    }\n\n    if (_updateDirtyFlag & DirtyFlagType.Acceleration) {\n      const { _acceleration, _accelerationRandomness } = this;\n\n      vertices[k0 + 6] =\n        vertices[k1 + 6] =\n        vertices[k2 + 6] =\n        vertices[k3 + 6] =\n          _acceleration.x + getRandom() * _accelerationRandomness.x;\n      vertices[k0 + 7] =\n        vertices[k1 + 7] =\n        vertices[k2 + 7] =\n        vertices[k3 + 7] =\n          _acceleration.y + getRandom() * _accelerationRandomness.y;\n      vertices[k0 + 8] =\n        vertices[k1 + 8] =\n        vertices[k2 + 8] =\n        vertices[k3 + 8] =\n          _acceleration.z + getRandom() * _accelerationRandomness.z;\n    }\n\n    if (_updateDirtyFlag & DirtyFlagType.Color) {\n      const { _color, _colorRandomness } = this;\n\n      vertices[k0 + 9] =\n        vertices[k1 + 9] =\n        vertices[k2 + 9] =\n        vertices[k3 + 9] =\n          MathUtil.clamp(_color.r + getRandom() * _colorRandomness, 0, 1);\n\n      vertices[k0 + 10] =\n        vertices[k1 + 10] =\n        vertices[k2 + 10] =\n        vertices[k3 + 10] =\n          MathUtil.clamp(_color.g + getRandom() * _colorRandomness, 0, 1);\n      vertices[k0 + 11] =\n        vertices[k1 + 11] =\n        vertices[k2 + 11] =\n        vertices[k3 + 11] =\n          MathUtil.clamp(_color.b + getRandom() * _colorRandomness, 0, 1);\n    }\n\n    if (_updateDirtyFlag & DirtyFlagType.Alpha) {\n      vertices[k0 + 12] =\n        vertices[k1 + 12] =\n        vertices[k2 + 12] =\n        vertices[k3 + 12] =\n          MathUtil.clamp(this._alpha + getRandom() * this._alphaRandomness, 0, 1);\n    }\n\n    if (_updateDirtyFlag & DirtyFlagType.StartTime) {\n      vertices[k0 + 13] =\n        vertices[k1 + 13] =\n        vertices[k2 + 13] =\n        vertices[k3 + 13] =\n          Math.random() * this._startTimeRandomness;\n    }\n\n    if (_updateDirtyFlag & DirtyFlagType.LifeTime) {\n      const { _lifetime } = this;\n\n      vertices[k0 + 14] =\n        vertices[k1 + 14] =\n        vertices[k2 + 14] =\n        vertices[k3 + 14] =\n          _lifetime + getRandom() * _lifetime;\n    }\n\n    // Update the duration of play once when startTime or lifetime changes.\n    if (_updateDirtyFlag & DirtyFlagType.StartTime || _updateDirtyFlag & DirtyFlagType.LifeTime) {\n      this._onceTime = Math.max(this._onceTime, vertices[k0 + 13] + vertices[k0 + 14]);\n    }\n\n    if (_updateDirtyFlag & DirtyFlagType.Size) {\n      const { _size } = this;\n\n      vertices[k0 + 15] =\n        vertices[k1 + 15] =\n        vertices[k2 + 15] =\n        vertices[k3 + 15] =\n          Math.max(_size + getRandom() * this._sizeRandomness * _size * 2, 0);\n    }\n\n    if (_updateDirtyFlag & DirtyFlagType.Scale) {\n      vertices[k0 + 16] = vertices[k1 + 16] = vertices[k2 + 16] = vertices[k3 + 16] = this._scale;\n    }\n\n    if (_updateDirtyFlag & DirtyFlagType.StartAngle) {\n      vertices[k0 + 17] =\n        vertices[k1 + 17] =\n        vertices[k2 + 17] =\n        vertices[k3 + 17] =\n          this._startAngle + getRandom() * Math.PI * this._startAngleRandomness * 2;\n    }\n\n    if (_updateDirtyFlag & DirtyFlagType.RotateVelocity) {\n      vertices[k0 + 18] =\n        vertices[k1 + 18] =\n        vertices[k2 + 18] =\n        vertices[k3 + 18] =\n          this._rotateVelocity + getRandom() * this._rotateVelocityRandomness;\n    }\n\n    this._updateSingleUv(i, k0, k1, k2, k3);\n  }\n\n  private _updateSingleUv(i: number, k0: number, k1: number, k2: number, k3: number): void {\n    const { spriteSheet } = this;\n    const texture = this.getMaterial().shaderData.getTexture(\"u_texture\");\n    const vertices = this._vertices;\n\n    if (texture) {\n      const width = texture.width;\n      const height = texture.height;\n\n      if (spriteSheet) {\n        const { x, y, w, h } = spriteSheet[i % spriteSheet.length];\n\n        const u = x / width;\n        const v = y / height;\n        const p = u + w / width;\n        const q = v + h / height;\n        const ratio = h / w;\n\n        // left bottom\n        vertices[k0 + 19] = u;\n        vertices[k0 + 20] = q;\n        vertices[k0 + 21] = ratio;\n\n        // right bottom\n        vertices[k1 + 19] = p;\n        vertices[k1 + 20] = q;\n        vertices[k1 + 21] = ratio;\n\n        // right top\n        vertices[k2 + 19] = p;\n        vertices[k2 + 20] = v;\n        vertices[k2 + 21] = ratio;\n\n        // left top\n        vertices[k3 + 19] = u;\n        vertices[k3 + 20] = v;\n        vertices[k3 + 21] = ratio;\n      } else {\n        const ratio = height / width;\n\n        // left bottom\n        vertices[k0 + 19] = 0;\n        vertices[k0 + 20] = 1;\n        vertices[k0 + 21] = ratio;\n\n        // right bottom\n        vertices[k1 + 19] = 1;\n        vertices[k1 + 20] = 1;\n        vertices[k1 + 21] = ratio;\n\n        // right top\n        vertices[k2 + 19] = 1;\n        vertices[k2 + 20] = 0;\n        vertices[k2 + 21] = ratio;\n\n        // left top\n        vertices[k3 + 19] = 0;\n        vertices[k3 + 20] = 0;\n        vertices[k3 + 21] = ratio;\n      }\n    } else {\n      // left bottom\n      vertices[k0 + 19] = 0;\n      vertices[k0 + 20] = 0;\n      vertices[k0 + 21] = 1;\n\n      // right bottom\n      vertices[k1 + 19] = 1;\n      vertices[k1 + 20] = 0;\n      vertices[k1 + 21] = 1;\n\n      // right top\n      vertices[k2 + 19] = 1;\n      vertices[k2 + 20] = 1;\n      vertices[k2 + 21] = 1;\n\n      // left top\n      vertices[k3 + 19] = 0;\n      vertices[k3 + 20] = 1;\n      vertices[k3 + 21] = 1;\n    }\n\n    vertices[k0 + 22] = -0.5;\n    vertices[k0 + 23] = -0.5;\n    vertices[k1 + 22] = 0.5;\n    vertices[k1 + 23] = -0.5;\n    vertices[k2 + 22] = 0.5;\n    vertices[k2 + 23] = 0.5;\n    vertices[k3 + 22] = -0.5;\n    vertices[k3 + 23] = 0.5;\n  }\n\n  @ignoreClone\n  private _onColorChanged(): void {\n    this._updateDirtyFlag |= DirtyFlagType.Color;\n  }\n}\n","import { Engine } from \"../Engine\";\nimport { Material } from \"../material/Material\";\nimport { BlendFactor, Shader } from \"../shader\";\nimport FRAG_SHADER from \"./trail.fs.glsl\";\nimport VERT_SHADER from \"./trail.vs.glsl\";\n\nShader.create(\"trail\", VERT_SHADER, FRAG_SHADER);\n\nexport class TrailMaterial extends Material {\n  constructor(engine: Engine) {\n    super(engine, Shader.find(\"trail\"));\n\n    const target = this.renderState.blendState.targetBlendState;\n    target.enabled = true;\n    target.sourceColorBlendFactor = target.sourceAlphaBlendFactor = BlendFactor.SourceAlpha;\n    target.destinationColorBlendFactor = target.destinationAlphaBlendFactor = BlendFactor.One;\n\n    this.renderState.depthState.writeEnabled = false;\n  }\n}\n","import { Matrix, Quaternion, Vector3 } from \"@galacean/engine-math\";\nimport { Entity } from \"../Entity\";\nimport { Buffer } from \"../graphic/Buffer\";\nimport { BufferUsage } from \"../graphic/enums/BufferUsage\";\nimport { MeshTopology } from \"../graphic/enums/MeshTopology\";\nimport { VertexElementFormat } from \"../graphic/enums/VertexElementFormat\";\nimport { VertexElement } from \"../graphic/VertexElement\";\nimport { BufferMesh } from \"../mesh/BufferMesh\";\nimport { MeshRenderer } from \"../mesh/MeshRenderer\";\nimport { RenderContext } from \"../RenderPipeline/RenderContext\";\nimport { Texture2D } from \"../texture\";\nimport { TrailMaterial } from \"./TrailMaterial\";\n\nconst _tempVector3 = new Vector3();\n\n/**\n * @deprecated\n */\nexport class TrailRenderer extends MeshRenderer {\n  private _vertexStride: number;\n  private _vertices: Float32Array;\n  private _vertexBuffer: Buffer;\n  private _stroke;\n  private _minSeg;\n  private _lifetime;\n  private _maxPointNum;\n  private _points: Array<Vector3>;\n  private _pointStates: Array<number>;\n  private _strapPoints: Array<Vector3>;\n  private _curPointNum;\n  private _prePointsNum;\n  /**\n   * @deprecated\n   */\n  constructor(entity: Entity, props: any) {\n    super(entity);\n\n    this._stroke = props.stroke || 0.2;\n    this._minSeg = props.minSeg || 0.02;\n    this._lifetime = props.lifetime || 1000;\n    this._maxPointNum = (this._lifetime / 1000.0) * entity.engine.targetFrameRate;\n\n    this._points = [];\n    this._pointStates = [];\n    this._strapPoints = [];\n    for (let i = 0; i < this._maxPointNum; i++) {\n      this._points.push(new Vector3());\n      this._pointStates.push(this._lifetime);\n\n      this._strapPoints.push(new Vector3());\n      this._strapPoints.push(new Vector3());\n    }\n    this._curPointNum = 0;\n\n    const mtl = props.material || new TrailMaterial(this.engine);\n    this.setMaterial(mtl);\n\n    this.setTexture(props.texture);\n    this._initGeometry();\n  }\n\n  /**\n   * @internal\n   */\n  update(deltaTime: number) {\n    let mov = 0,\n      newIdx = 0;\n    for (let i = 0; i < this._curPointNum; i++) {\n      this._pointStates[i] -= deltaTime;\n      if (this._pointStates[i] < 0) {\n        mov++;\n      } else if (mov > 0) {\n        newIdx = i - mov;\n\n        // Move data\n        this._pointStates[newIdx] = this._pointStates[i];\n\n        // Move point\n        this._points[newIdx].copyFrom(this._points[i]);\n      }\n    }\n    this._curPointNum -= mov;\n\n    let appendNewPoint = true;\n    if (this._curPointNum === this._maxPointNum) {\n      appendNewPoint = false;\n    } else if (this._curPointNum > 0) {\n      const lastPoint = this._points[this._points.length - 1];\n      if (Vector3.distance(this.entity.transform.worldPosition, lastPoint) < this._minSeg) {\n        appendNewPoint = false;\n      } else {\n        // debugger\n      }\n    }\n\n    if (appendNewPoint) {\n      this._pointStates[this._curPointNum] = this._lifetime;\n      this._points[this._curPointNum].copyFrom(this.entity.transform.worldPosition);\n\n      this._curPointNum++;\n    }\n  }\n\n  /**\n   * @deprecated\n   * Set trail texture.\n   * @param texture\n   */\n  setTexture(texture: Texture2D) {\n    if (texture) {\n      this.getMaterial().shaderData.setTexture(\"u_texture\", texture);\n    }\n  }\n\n  /**\n   * @override\n   */\n  protected _render(context: RenderContext): void {\n    this._updateStrapVertices(context.camera, this._points);\n    this._updateStrapCoords();\n    this._vertexBuffer.setData(this._vertices);\n\n    super._render(context);\n  }\n\n  private _initGeometry() {\n    const mesh = new BufferMesh(this._entity.engine);\n\n    const vertexStride = 20;\n    const vertexCount = this._maxPointNum * 2;\n    const vertexFloatCount = vertexCount * vertexStride;\n    const vertices = new Float32Array(vertexFloatCount);\n    const vertexElements = [\n      new VertexElement(\"POSITION\", 0, VertexElementFormat.Vector3, 0),\n      new VertexElement(\"TEXCOORD_0\", 12, VertexElementFormat.Vector2, 0)\n    ];\n    const vertexBuffer = new Buffer(this.engine, vertexFloatCount * 4, BufferUsage.Dynamic);\n\n    mesh.setVertexBufferBinding(vertexBuffer, vertexStride);\n    mesh.setVertexElements(vertexElements);\n    mesh.addSubMesh(0, vertexCount, MeshTopology.TriangleStrip);\n\n    this._vertexBuffer = vertexBuffer;\n    this._vertexStride = vertexStride;\n    this._vertices = vertices;\n    this.mesh = mesh;\n  }\n\n  private _updateStrapVertices(camera, points: Array<Vector3>) {\n    const m: Matrix = camera.viewMatrix;\n    const e = m.elements;\n    const vx = new Vector3(e[0], e[4], e[8]);\n    const vy = new Vector3(e[1], e[5], e[9]);\n    const vz = new Vector3(e[2], e[6], e[10]);\n    const s = this._stroke;\n\n    vy.scale(s);\n\n    const up = new Vector3();\n    const down = new Vector3();\n\n    const rotation = new Quaternion();\n\n    Vector3.transformByQuat(vx, rotation, vx);\n    Vector3.transformByQuat(vy, rotation, vy);\n\n    const dy = new Vector3();\n    const cross = new Vector3();\n    const perpVector = new Vector3();\n\n    vx.normalize();\n\n    const vertices = this._vertices;\n    //-- quad pos\n    for (let i = 0; i < this._maxPointNum; i++) {\n      //-- center pos\n      if (i < this._curPointNum) {\n        const p = points[i];\n\n        if (i === this._curPointNum - 1 && i !== 0) {\n          Vector3.subtract(p, points[i - 1], perpVector);\n        } else {\n          Vector3.subtract(points[i + 1], p, perpVector);\n        }\n\n        this._projectOnPlane(perpVector, vz, perpVector);\n        perpVector.normalize();\n\n        // Calculate angle between vectors\n        let angle = Math.acos(Vector3.dot(vx, perpVector));\n        Vector3.cross(vx, perpVector, cross);\n        if (Vector3.dot(cross, vz) <= 0) {\n          angle = Math.PI * 2 - angle;\n        }\n        Quaternion.rotationAxisAngle(vz, angle, rotation);\n        Vector3.transformByQuat(vy, rotation, dy);\n\n        Vector3.add(p, dy, up);\n        Vector3.subtract(p, dy, down);\n      }\n\n      const p0 = (i * 2 * this._vertexStride) / 4;\n      const p1 = ((i * 2 + 1) * this._vertexStride) / 4;\n      vertices[p0] = up.x;\n      vertices[p0 + 1] = up.y;\n      vertices[p0 + 2] = up.z;\n\n      vertices[p1] = down.x;\n      vertices[p1 + 1] = down.y;\n      vertices[p1 + 2] = down.z;\n    }\n  }\n\n  private _updateStrapCoords() {\n    if (this._prePointsNum === this._curPointNum) {\n      return;\n    }\n\n    this._prePointsNum = this._curPointNum;\n\n    const count = this._curPointNum;\n    const texDelta = 1.0 / count;\n    const vertices = this._vertices;\n    for (let i = 0; i < count; i++) {\n      const d = 1.0 - i * texDelta;\n      const p0 = (i * 2 * this._vertexStride) / 4;\n      const p1 = ((i * 2 + 1) * this._vertexStride) / 4;\n\n      vertices[p0] = 0;\n      vertices[p0 + 1] = d;\n\n      vertices[p1] = 1.0;\n      vertices[p1 + 1] = d;\n    }\n  }\n\n  private _projectOnVector(a: Vector3, p: Vector3, out: Vector3): void {\n    const n_p = p.clone();\n    Vector3.normalize(n_p, n_p);\n    const cosine = Vector3.dot(a, n_p);\n    out.x = n_p.x * cosine;\n    out.y = n_p.y * cosine;\n    out.z = n_p.z * cosine;\n  }\n\n  private _projectOnPlane(a: Vector3, n: Vector3, out: Vector3) {\n    this._projectOnVector(a, n, _tempVector3);\n    Vector3.subtract(a, _tempVector3, out);\n  }\n}\n","import { Camera } from \"../Camera\";\nimport { Layer } from \"../Layer\";\nimport { Script } from \"../Script\";\nimport { RenderBufferDepthFormat, Texture, Texture2D, TextureCube, TextureFormat } from \"../texture\";\nimport { RenderTarget } from \"../texture/RenderTarget\";\n\n/**\n * Environmental probes, providing necessary capabilities such as reflection and refraction.\n * @example\n * ```ts\n * const probe = cameraEntity.addComponent( CubeProbe )\n * probe.onTextureChange = cubeTexture => {\n *   envLight.specularTexture = cubeTexture;\n *   skybox.specularTexture = cubeTexture;\n * }\n * ```\n */\nexport abstract class Probe extends Script {\n  /**\n   * Probe's layer, render everything by default.\n   */\n  probeLayer: Layer = Layer.Everything;\n\n  /**\n   * The width of the probe rendering target.\n   */\n  width: number = 1024;\n\n  /**\n   * The height of the probe rendering target.\n   */\n  height: number = 1024;\n\n  /**\n   * When using WebGL2, you can turn on MSAA at the hardware layer.\n   */\n  antiAliasing: number = 1;\n\n  /**\n   * Whether the probe is rendered to the cube color texture.\n   */\n  protected readonly _isCube: boolean = false;\n\n  private _oriCameraRenderTarget: RenderTarget;\n  private _renderTarget: RenderTarget;\n  private _renderTargetSwap: RenderTarget;\n  private _activeRenderTarget: RenderTarget;\n  private _camera: Camera;\n  private _oriCameraCullingMask: Layer;\n\n  private get _texture(): Texture {\n    return this._activeRenderTarget?.getColorTexture();\n  }\n\n  /**\n   * Provide hooks for users to exchange Texture.\n   * @remarks Prevent issue: Feedback Loops Between Textures and the Framebuffer.\n   */\n  onTextureChange(renderColorTexture: Texture) {}\n\n  /**\n   * @override\n   */\n  onBeginRender(camera: Camera): void {\n    if (!this.enabled) return;\n    this._camera = camera;\n    this._oriCameraCullingMask = camera.cullingMask;\n    camera.cullingMask = this.probeLayer;\n    if (\n      !this._activeRenderTarget ||\n      this._activeRenderTarget.width !== this.width ||\n      this._activeRenderTarget.height !== this.height ||\n      this._activeRenderTarget.antiAliasing !== this.antiAliasing\n    ) {\n      this._renderTarget = new RenderTarget(\n        this.engine,\n        this.width,\n        this.height,\n        this._isCube ? new TextureCube(this.engine, this.width) : new Texture2D(this.engine, this.width, this.height),\n        RenderBufferDepthFormat.Depth,\n        this.antiAliasing\n      );\n\n      this._renderTargetSwap = new RenderTarget(\n        this.engine,\n        this.width,\n        this.height,\n        this._isCube ? new TextureCube(this.engine, this.width) : new Texture2D(this.engine, this.width, this.height),\n        RenderBufferDepthFormat.Depth,\n        this.antiAliasing\n      );\n\n      this._activeRenderTarget = this._renderTarget;\n    }\n\n    this._oriCameraRenderTarget = camera.renderTarget;\n    camera.renderTarget = this._activeRenderTarget;\n  }\n\n  /**\n   * @override\n   */\n  onEndRender(camera: Camera): void {\n    if (!this.enabled) return;\n\n    this.onTextureChange && this.onTextureChange(this._texture);\n\n    this._activeRenderTarget =\n      this._activeRenderTarget === this._renderTarget ? this._renderTargetSwap : this._renderTarget;\n  }\n\n  protected _reset(): void {\n    if (!this.enabled) return;\n    this._camera.renderTarget = this._oriCameraRenderTarget;\n    this._camera.cullingMask = this._oriCameraCullingMask;\n  }\n}\n","import { Matrix, Vector3 } from \"@galacean/engine-math\";\nimport { Camera } from \"../Camera\";\nimport { TextureCubeFace } from \"../texture\";\nimport { Probe } from \"./Probe\";\n\nconst cacheTarget: Vector3 = new Vector3();\nconst cacheUp: Vector3 = new Vector3();\nconst cacheDir: Vector3 = new Vector3();\n\n/**\n * Cube probe, generate cubeTexture, used for dynamic environment reflection and other effects.\n */\nexport class CubeProbe extends Probe {\n  /**\n   * The position of the probe can be set, the default is the origin [0,0,0].\n   */\n  position: Vector3 = new Vector3(0, 0, 0);\n\n  /**\n   * @override\n   */\n  protected readonly _isCube: boolean = true;\n\n  private oriViewMatrix = new Matrix();\n  private _oriFieldOfView: number;\n\n  /**\n   * @override\n   */\n  onBeginRender(camera: Camera): void {\n    if (!this.enabled) return;\n    super.onBeginRender(camera);\n    this._storeCamera(camera);\n\n    // Render 6 faces\n    for (let faceIndex = 0; faceIndex < 6; faceIndex++) {\n      // Change camera parameters\n      this._setCamera(faceIndex, camera);\n      camera.render(TextureCubeFace.PositiveX + faceIndex);\n    }\n\n    this._restoreCamera(camera);\n    super._reset();\n  }\n\n  /**\n   * Store original camera parameters.\n   */\n  private _storeCamera(camera: Camera) {\n    this.oriViewMatrix.copyFrom(camera.viewMatrix);\n    this._oriFieldOfView = camera.fieldOfView;\n  }\n\n  /**\n   * Restore camera parameters.\n   */\n  private _restoreCamera(camera: Camera) {\n    camera.viewMatrix.copyFrom(this.oriViewMatrix);\n    camera.fieldOfView = this._oriFieldOfView;\n  }\n\n  /**\n   * Set camera parameters according to the rendering surface.\n   */\n  private _setCamera(faceIndex: number, camera: Camera) {\n    switch (faceIndex) {\n      // positive_x\n      case 0:\n        cacheUp.set(0, -1, 0);\n        cacheDir.set(1, 0, 0);\n        break;\n      // negative_x\n      case 1:\n        cacheUp.set(0, -1, 0);\n        cacheDir.set(-1, 0, 0);\n        break;\n      // positive_y\n      case 2:\n        cacheUp.set(0, 0, 1);\n        cacheDir.set(0, 1, 0);\n        break;\n      // negative_y\n      case 3:\n        cacheUp.set(0, 0, -1);\n        cacheDir.set(0, -1, 0);\n        break;\n      // positive_z\n      case 4:\n        cacheUp.set(0, -1, 0);\n        cacheDir.set(0, 0, 1);\n        break;\n      // negative_z\n      case 5:\n        cacheUp.set(0, -1, 0);\n        cacheDir.set(0, 0, -1);\n        break;\n    }\n\n    Vector3.add(this.position, cacheDir, cacheTarget);\n    Matrix.lookAt(this.position, cacheTarget, cacheUp, camera.viewMatrix);\n    camera.fieldOfView = 90;\n  }\n}\n"],"names":["Platform","Android","IPhone","IPad","Mac","Unknown","MathUtil","clamp","v","min","max","Math","equals","a","b","abs","zeroTolerance","isPowerOf2","radianToDegree","r","radToDegreeFactor","degreeToRadian","d","degreeToRadFactor","PI","Color","g","_onValueChanged","_r","_g","_b","_a","set","add","color","scale","s","clone","ret","copyFrom","source","toLinear","out","gammaToLinearSpace","toGamma","linearToGammaSpace","getBrightness","toJSON","value","pow","left","right","subtract","lerp","start","end","t","CloneMode","Ignore","Assignment","Shallow","Deep","ignoreClone","target","propertyKey","CloneManager","registerCloneMode","assignmentClone","shallowClone","deepClone","mode","targetMap","_subCloneModeMap","get","constructor","Object","create","getCloneMode","type","cloneModes","_cloneModeMap","objectType","_objectType","cloneModeMap","subCloneModes","assign","getPrototypeOf","deepCloneObject","Uint8Array","Uint16Array","Uint32Array","Int8Array","Int16Array","Int32Array","Float32Array","Float64Array","Array","i","n","length","_deepCloneObjectItem","customSource","cloneTo","keys","k","sourceItem","itemType","sourceTypeArrayItem","targetTypeArrayItem","slice","sourceArrayItem","targetArrayItem","sourceCustomItem","targetCustomItem","targetItem","Map","EngineObject","engine","instanceId","_instanceIdCounter","_destroyed","_engine","destroy","resourceManager","_deleteAsset","destroyed","RefObject","isGCIgnored","_refCount","_addRefObject","force","_deleteRefObject","refCount","_getRefCount","_addRefCount","_onDestroy","_addToResourceManager","path","_addAsset","RenderBufferDepthFormat","Depth","DepthStencil","Stencil","Depth16","Depth24","Depth32","Depth24Stencil8","Depth32Stencil8","TextureCubeFace","PositiveX","NegativeX","PositiveY","NegativeY","PositiveZ","NegativeZ","TextureDepthCompareFunction","Never","Less","Equal","LessEqual","Greater","NotEqual","GreaterEqual","Always","TextureFilterMode","Point","Bilinear","Trilinear","TextureFormat","R8G8B8","R8G8B8A8","R4G4B4A4","R5G5B5A1","R5G6B5","Alpha8","LuminanceAlpha","R16G16B16A16","R32G32B32A32","DXT1","DXT5","ETC1_RGB","ETC2_RGB","ETC2_RGBA5","ETC2_RGBA8","PVRTC_RGB2","PVRTC_RGBA2","PVRTC_RGB4","PVRTC_RGBA4","ASTC_4x4","ASTC_5x5","ASTC_6x6","ASTC_8x8","ASTC_10x10","ASTC_12x12","TextureWrapMode","Clamp","Repeat","Mirror","Event","data","bubbles","_timeStamp","Date","getTime","_target","_currentTarget","_bubbles","_propagationStopped","_type","stopPropagation","propagationStopped","timeStamp","currentTarget","EventDispatcher","_events","_eventCount","_dispatchingListeners","hasEvent","event","eventNames","listenerCount","listeners","isArray","dispatch","count","dispatchingListeners","listener","once","off","fn","on","addEventListener","events","element","push","_clearEvent","splice","removeEventListener","removeAllEventListeners","trigger","e","noop","message","optionalParams","debug","console","log","bind","info","warn","error","Logger","isEnabled","enable","disable","Time","_frameCount","_clock","performance","_timeScale","_deltaTime","now","_startTime","_lastTickTime","reset","tick","nowTime","frameCount","deltaTime","timeScale","unscaledDeltaTime","timeSinceStartup","Util","toString","call","isArrayLike","x","obj","rst","l","hasOwnProperty","downloadBlob","blob","fileName","url","window","URL","createObjectURL","document","createElement","body","appendChild","style","display","href","download","parentElement","removeChild","click","revokeObjectURL","removeFromArray","array","item","index","indexOf","last","ObjectValues","map","key","DataType","FLOAT","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","INT","INT_VEC2","INT_VEC3","INT_VEC4","BOOL","BOOL_VEC2","BOOL_VEC3","BOOL_VEC4","FLOAT_MAT2","FLOAT_MAT3","FLOAT_MAT4","FLOAT_ARRAY","FLOAT_VEC2_ARRAY","FLOAT_VEC3_ARRAY","FLOAT_VEC4_ARRAY","INT_ARRAY","INT_VEC2_ARRAY","INT_VEC3_ARRAY","INT_VEC4_ARRAY","FLOAT_MAT2_ARRAY","FLOAT_MAT3_ARRAY","FLOAT_MAT4_ARRAY","SAMPLER_2D_ARRAY","SAMPLER_CUBE_ARRAY","SAMPLER_2D","SAMPLER_CUBE","BYTE","UNSIGNED_BYTE","SHORT","UNSIGNED_SHORT","UNSIGNED_INT","GLCapabilityType","shaderVertexID","standardDerivatives","shaderTextureLod","elementIndexUint","depthTexture","drawBuffers","vertexArrayObject","instancedArrays","multipleSample","textureFloat","textureFloatLinear","textureHalfFloat","textureHalfFloatLinear","WEBGL_colorBufferFloat","colorBufferFloat","colorBufferHalfFloat","textureFilterAnisotropic","blendMinMax","astc","astc_webkit","etc","etc_webkit","etc1","etc1_webkit","pvrtc","pvrtc_webkit","s3tc","s3tc_webkit","Texture","_isDepthTexture","_anisoLevel","_useDepthCompareMode","generateMipmaps","_mipmap","_platformTexture","_setUseDepthCompareMode","setUseDepthCompareMode","_getMaxMiplevel","size","floor","log2","_getMipmapCount","_width","_height","format","_format","width","height","wrapModeU","_wrapModeU","wrapModeV","_wrapModeV","mipmapCount","_mipmapCount","filterMode","_filterMode","anisoLevel","_hardwareRenderer","capability","maxAnisoLevel","depthCompareFunction","_depthCompareFunction","_isWebGL2","RenderTarget","renderTexture","depth","antiAliasing","_autoGenerateMipmaps","_antiAliasing","_depth","colorTextures","_colorTextures","_depthTexture","_platformRenderTarget","createPlatformRenderTarget","getColorTexture","colorTexture","_setRenderTargetInfo","faceIndex","mipLevel","setRenderTargetInfo","_blitRenderTarget","blitRenderTarget","autoGenerateMipmaps","colorTextureCount","Texture2D","mipmap","createPlatformTexture2D","setPixelBuffer","colorBuffer","y","setImageSource","imageSource","flipY","premultiplyAlpha","getPixelBuffer","xOrMipLevelOrOut","yOrMipLevel","mipLevelOrOut","argsLength","arguments","Texture2DArray","_length","createPlatformTexture2DArray","offsetIndex","elementIndex","TextureCube","createPlatformTextureCube","face","FontAtlas","_charInfoMap","_space","_curX","_curY","_nextY","_texture","uploadCharTexture","charInfo","w","h","space","texture","textureSize","offsetWidth","offsetHeight","Error","endX","endY","textureSizeReciprocal","u0","u1","v0","v1","uvs","addCharInfo","char","charCodeAt","getCharInfo","SubFont","_fontAtlases","_lastIndex","fontAtlases","_uploadCharTexture","lastIndex","_createFontAtlas","fontAtlas","_addCharInfo","_getCharInfo","_getTextureByIndex","_getLastIndex","Font","name","_name","_subFontMap","_getSubFont","fontSize","fontStyle","subFontMap","subFont","_fontMap","createFromOS","fontMap","font","AssetPromise","executor","_state","_onProgressCallback","_promise","Promise","resolve","reject","_reject","onResolve","undefined","onReject","reason","onCancel","callback","_onCancelHandler","setProgress","progress","forEach","onProgress","then","onfulfilled","onrejected","catch","onRejected","finally","onFinally","cancel","all","promises","onComplete","resultValue","completed","results","promise","Symbol","toStringTag","PromiseState","Pending","Fulfilled","Rejected","Canceled","ResourceManager","retryCount","retryInterval","timeout","Infinity","_assetPool","_assetUrlPool","_refObjectPool","_loadingPromises","_objectPool","_editorResourceConfig","_virtualPathMap","load","assetInfo","_loadSingleItem","getFromCache","getAssetPath","cancelNotLoaded","p","gc","_gc","asset","id","_destroy","_assignDefaultOptions","_getTypeByUrl","urls","join","itemOrURL","itemURL","_parseURL","assetBaseURL","queryPath","paths","_parseQueryPath","cacheObject","_getResolveResource","assetURL","shift","loadingPromises","loadingPromise","resource","loader","_loaders","useCache","subPromise","subURL","isMaster","forceDestroy","objects","len","subResource","_getParameterByName","location","replace","regex","RegExp","exec","decodeURIComponent","string","result","charCodeOfDot","rePropName","match","expression","quote","subString","reEscapeChar","trim","getResourceByRef","ref","refId","isClone","initVirtualResources","config","virtualPath","_addLoader","extNames","_extTypeMapping","split","substring","lastIndexOf","resourceLoader","assetType","extnames","Target","DisorderedArray","_elements","delete","deleteByIndex","elements","garbageCollection","ComponentsManager","_renderers","_onStartScripts","_onUpdateScripts","_onLateUpdateScripts","_onPhysicsUpdateScripts","_disableScripts","_pendingDestroyScripts","_disposeDestroyScripts","_onUpdateAnimations","_onUpdateRenderers","_componentsContainerPool","addRenderer","renderer","_rendererIndex","removeRenderer","replaced","addOnStartScript","script","_onStartIndex","removeOnStartScript","addOnUpdateScript","_onUpdateIndex","removeOnUpdateScript","addOnLateUpdateScript","_onLateUpdateIndex","removeOnLateUpdateScript","addOnPhysicsUpdateScript","_onPhysicsUpdateIndex","removeOnPhysicsUpdateScript","addOnUpdateAnimations","animation","removeOnUpdateAnimations","addOnUpdateRenderers","removeOnUpdateRenderers","addDisableScript","component","addPendingDestroyScript","callScriptOnStart","onStartScripts","_waitHandlingInValid","_started","onStart","callScriptOnUpdate","onUpdate","callScriptOnLateUpdate","onLateUpdate","callScriptOnPhysicsUpdate","onPhysicsUpdate","callAnimationUpdate","update","callRendererOnUpdate","handlingInvalidScripts","disableScripts","disableScript","_handlingInValid","pendingDestroyScripts","disposeDestroyScripts","onDestroy","callCameraOnBeginRender","camera","scripts","entity","_scripts","onBeginRender","callCameraOnEndRender","onEndRender","getActiveChangedTempList","pop","putActiveChangedTempList","componentContainer","ComponentCloner","cloneComponent","cloneMode","sourcePropS","tarProp","sourcePropD","_cloneTo","ComponentsDependencies","_register","currentComponent","dependentComponent","_addDependency","_dependenciesMap","_invDependenciesMap","_addCheck","dependentComponents","getComponent","addComponent","_removeCheck","invDependencies","components","Layer","Layer0","Layer1","Layer2","Layer3","Layer4","Layer5","Layer6","Layer7","Layer8","Layer9","Layer10","Layer11","Layer12","Layer13","Layer14","Layer15","Layer16","Layer17","Layer18","Layer19","Layer20","Layer21","Layer22","Layer23","Layer24","Layer25","Layer26","Layer27","Layer28","Layer29","Layer30","Layer31","Everything","Nothing","UpdateFlag","_flagManagers","clearFromManagers","_removeFromManagers","flagManagers","_updateFlags","BoolUpdateFlag","flag","Component","_awoken","_phasedActive","_enabled","_entity","_removeComponent","isActiveInHierarchy","_onDisable","_onAwake","_onEnable","_setActive","_isActiveInHierarchy","enabled","scene","UpdateFlagManager","_listensers","createFlag","addFlag","removeFlag","success","addListener","removeListener","param","updateFlags","Transform","_position","Vector3","_rotation","_rotationQuaternion","Quaternion","_scale","_worldPosition","_worldRotation","_worldRotationQuaternion","_lossyWorldScale","_localMatrix","Matrix","_worldMatrix","_isParentDirty","_parentTransformCache","_dirtyFlag","_updateFlagManager","_onPositionChanged","_onWorldPositionChanged","_onRotationChanged","_onWorldRotationChanged","_onRotationQuaternionChanged","_onWorldRotationQuaternionChanged","_onScaleChanged","setPosition","z","setRotation","setRotationQuaternion","setScale","setWorldPosition","setWorldRotation","setWorldRotationQuaternion","getWorldForward","forward","worldMatrix","normalize","getWorldRight","getWorldUp","up","translate","translationOrX","relativeToLocalOrY","relativeToLocal","_tempVec30","_translate","rotate","rotationOrX","_rotateXYZ","rotateByAxis","axis","angle","rad","rotationAxisAngle","_tempQuat0","_rotateByQuat","lookAt","targetPosition","worldUp","zAxis","worldPosition","axisLen","xAxis","_tempVec31","cross","yAxis","_tempVec32","rotMat","_tempMat41","getRotation","registerWorldChangeFlag","_parentChange","_updateAllWorldFlag","_isFrontFaceInvert","lossyWorldScale","isInvert","_updateWorldPositionFlag","_isContainDirtyFlags","_worldAssociatedChange","nodeChildren","_children","transform","_updateWorldRotationFlag","_updateWorldPositionAndRotationFlag","_updateWorldScaleFlag","_updateWorldPositionAndScaleFlag","_getParentTransform","parentCache","parent","_getScaleMatrix","invRotation","invRotationMat","_tempMat30","worldRotScaMat","_tempMat31","scaMat","_tempMat32","copyFromMatrix","invert","worldRotationQuaternion","Matrix3x3","rotationQuaternion","multiply","targetDirtyFlags","_isContainDirtyFlag","_setDirtyFlagTrue","_setDirtyFlagFalse","rotateQuat","translation","transformByQuat","radFactor","rotQuat","rotationEuler","transformCoordinate","worldRotation","invParentQuaternion","position","getTranslation","rotation","toEuler","normalized","scaleMat","localMatrix","affineTransformation","decompose","_tempMat42","TransformModifyFlags","LocalEuler","LocalQuat","WorldPosition","WorldEuler","WorldQuat","WorldScale","LocalMatrix","WorldMatrix","WmWp","WmWeWq","WmWpWeWq","WmWs","WmWpWs","WmWpWeWqWs","Entity","layer","_components","_isRoot","_isActive","_siblingIndex","_parent","_invModelMatrix","_inverseWorldMatFlag","getComponents","getComponentsIncludeChildren","_getComponentsInChildren","addChild","indexOrChild","child","_scene","_removeFromEntityList","_addToChildrenList","newScene","_traverseSetOwnerScene","_processActive","_processInActive","_setTransformDirty","_setParent","getChild","findByName","children","findByPath","splits","_findChildByName","createChild","clearChildren","cloneEntity","sourceComp","targetComp","_removeFromParent","_addScript","_entityScriptsIndex","_removeScript","oldParent","oldSibling","_activeChangedComponents","_componentsManager","_setActiveInHierarchy","_setActiveComponents","_setInActiveInHierarchy","childCount","siblingIndex","parentScene","isActive","activeChangedComponents","_setSiblingIndex","sibling","oldIndex","getInvModelMatrix","root","_isActiveInEngine","_rootEntities","ColorSpace","Linear","Gamma","PointerPhase","Down","Move","Stationary","Up","Leave","Pointer","phase","Vector2","deltaPosition","_upMap","_downMap","_upList","_downList","_firePointerExitAndEnter","rayCastEntity","_currentEnteredEntity","onPointerExit","onPointerEnter","_firePointerDown","onPointerDown","_currentPressedEntity","_firePointerDrag","onPointerDrag","_firePointerUpAndClick","pressedEntity","sameTarget","onPointerClick","onPointerUp","SystemInfo","_initialize","navigator","userAgent","test","platform","operatingSystem","devicePixelRatio","Keys","Backquote","Backslash","Backspace","BracketLeft","BracketRight","Comma","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","IntlBackslash","IntlRo","IntlYen","KeyA","KeyB","KeyC","KeyD","KeyE","KeyF","KeyG","KeyH","KeyI","KeyJ","KeyK","KeyL","KeyM","KeyN","KeyO","KeyP","KeyQ","KeyR","KeyS","KeyT","KeyU","KeyV","KeyW","KeyX","KeyY","KeyZ","Minus","Period","Quote","Semicolon","Slash","AltLeft","AltRight","CapsLock","ContextMenu","ControlLeft","ControlRight","Enter","MetaLeft","MetaRight","ShiftLeft","ShiftRight","Space","Tab","Convert","KanaMode","Lang1","Lang2","Lang3","Lang4","Lang5","NonConvert","Delete","End","Help","Home","Insert","PageDown","PageUp","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","NumLock","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadAdd","NumpadBackspace","NumpadClear","NumpadClearEntry","NumpadComma","NumpadDecimal","NumpadDivide","NumpadEnter","NumpadEqual","NumpadHash","NumpadMemoryAdd","NumpadMemoryClear","NumpadMemoryRecall","NumpadMemoryStore","NumpadMemorySubtract","NumpadMultiply","NumpadParenLeft","NumpadParenRight","NumpadStar","NumpadSubtract","Escape","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","F13","F14","F15","Fn","FnLock","PrintScreen","ScrollLock","Pause","BrowserBack","BrowserFavorites","BrowserForward","BrowserHome","BrowserRefresh","BrowserSearch","BrowserStop","Eject","LaunchApp1","LaunchApp2","LaunchMail","MediaPlayPause","MediaSelect","MediaStop","MediaTrackNext","MediaTrackPrevious","Power","Sleep","AudioVolumeDown","AudioVolumeMute","AudioVolumeUp","WakeUp","Hyper","Super","Turbo","Abort","Resume","Suspend","Again","Copy","Cut","Find","Open","Paste","Props","Select","Undo","Hiragana","Katakana","Unidentified","KeyboardManager","htmlCanvas","_curHeldDownKeyToIndexMap","_upKeyToFrameCountMap","_downKeyToFrameCountMap","_curFrameHeldDownList","_curFrameDownList","_curFrameUpList","_nativeEvents","_hadListener","_htmlCanvas","tabIndex","_onKeyEvent","_update","nativeEvents","curFrameDownList","curFrameUpList","curHeldDownKeyToIndexMap","curFrameHeldDownList","downKeyToFrameCountMap","upKeyToFrameCountMap","evt","codeKey","code","delIndex","swapCode","_onFocus","_onBlur","CameraClearFlags","None","ColorDepth","ColorStencil","All","HitResult","distance","point","normal","PhysicsManager","_initialized","_restTime","_colliders","_gravity","_physicalObjectsMap","_onContactEnter","obj1","obj2","shape1","shape2","collider","onCollisionEnter","_onContactExit","onCollisionExit","_onContactStay","onCollisionStay","_onTriggerEnter","onTriggerEnter","_onTriggerExit","onTriggerExit","_onTriggerStay","onTriggerStay","fixedTimeStep","maxAllowedTimeStep","_setGravity","initialize","physics","_nativePhysics","_nativePhysicsManager","createPhysicsManager","raycast","ray","distanceOrResult","layerMaskOrResult","outHitResult","hitResult","Number","MAX_VALUE","layerMask","onRaycast","shape","isSceneQuery","idx","_collider","nativePhysicsManager","componentsManager","simulateTime","step","_callColliderOnUpdate","_callColliderOnLateUpdate","_addColliderShape","colliderShape","addColliderShape","_nativeShape","_removeColliderShape","removeColliderShape","_addCollider","_index","addCollider","_nativeCollider","_addCharacterController","controller","addCharacterController","_removeCollider","removeCollider","_removeCharacterController","removeCharacterController","_onUpdate","_onLateUpdate","setGravity","gravity","maxSumTimeStep","PhysicsMaterialCombineMode","Average","Minimum","Multiply","Maximum","PhysicsMaterial","_bounciness","_dynamicFriction","_staticFriction","_bounceCombine","_frictionCombine","_nativeMaterial","createPhysicsMaterial","bounciness","setBounciness","dynamicFriction","setDynamicFriction","staticFriction","setStaticFriction","bounceCombine","setBounceCombine","frictionCombine","setFrictionCombine","Collider","_shapes","_updateFlag","addShape","oldCollider","removeShape","physicsManager","clearShapes","shapes","setWorldTransform","worldScale","setWorldScale","ControllerNonWalkableMode","PreventClimbing","PreventClimbingAndForceSliding","CharacterController","_stepOffset","_nonWalkableMode","_upDirection","_slopeLimit","createCharacterController","_setUpDirection","move","disp","minDist","elapsedTime","getWorldPosition","setUpDirection","stepOffset","setStepOffset","nonWalkableMode","setNonWalkableMode","upDirection","slopeLimit","setSlopeLimit","ColliderShape","_isTrigger","_contactOffset","_material","_id","_idGenerator","_setRotation","_setPosition","contactOffset","setContactOffset","material","setMaterial","isTrigger","setIsTrigger","BoxColliderShape","_size","createBoxColliderShape","_setSize","setSize","SphereColliderShape","_radius","createSphereColliderShape","radius","setRadius","PlaneColliderShape","createPlaneColliderShape","ColliderShapeUpAxis","X","Y","Z","CapsuleColliderShape","_upAxis","createCapsuleColliderShape","setHeight","upAxis","setUpAxis","Joint","_connectedCollider","JointCollider","_force","_torque","localPosition","connectedCollider","_nativeJoint","setConnectedCollider","connectedAnchor","setConnectedAnchor","connectedMassScale","massScale","setConnectedMassScale","connectedInertiaScale","inertiaScale","setConnectedInertiaScale","setMassScale","setInertiaScale","breakForce","setBreakForce","breakTorque","setBreakTorque","FixedJoint","createFixedJoint","HingeJointFlag","LimitEnabled","DriveEnabled","DriveFreeSpin","HingeJoint","_axis","_hingeFlags","_useSpring","createHingeJoint","setAxis","swingOffset","setSwingOffset","getAngle","velocity","getVelocity","useLimits","setHingeJointFlag","useMotor","useSpring","limits","_limits","motor","_jointMonitor","setDriveVelocity","targetVelocity","setDriveForceLimit","forceLimit","setDriveGearRatio","gearRation","freeSpin","setSoftLimit","stiffness","damping","setHardLimit","contactDistance","SpringJoint","_minDistance","_maxDistance","_tolerance","_stiffness","_damping","createSpringJoint","minDistance","setMinDistance","maxDistance","setMaxDistance","tolerance","setTolerance","setStiffness","setDamping","JointLimits","JointMotor","ControllerCollisionFlag","Sides","StaticCollider","createStaticCollider","DynamicCollider","_linearDamping","_angularDamping","_linearVelocity","_angularVelocity","_mass","_centerOfMass","_inertiaTensor","_maxAngularVelocity","_maxDepenetrationVelocity","_solverIterations","_isKinematic","_constraints","_collisionDetectionMode","Discrete","_sleepThreshold","createDynamicCollider","_setLinearVelocity","_setAngularVelocity","_setCenterOfMass","_setInertiaTensor","applyForce","addForce","applyTorque","torque","addTorque","positionOrRotation","sleep","wakeUp","getWorldTransform","setLinearVelocity","setAngularVelocity","setCenterOfMass","setInertiaTensor","linearDamping","setLinearDamping","angularDamping","setAngularDamping","linearVelocity","angularVelocity","mass","setMass","centerOfMass","inertiaTensor","maxAngularVelocity","setMaxAngularVelocity","maxDepenetrationVelocity","setMaxDepenetrationVelocity","sleepThreshold","setSleepThreshold","solverIterations","setSolverIterations","isKinematic","setIsKinematic","constraints","setConstraints","collisionDetectionMode","setCollisionDetectionMode","CollisionDetectionMode","Continuous","ContinuousDynamic","ContinuousSpeculative","DynamicColliderConstraints","FreezePositionX","FreezePositionY","FreezePositionZ","FreezeRotationX","FreezeRotationY","FreezeRotationZ","PointerButton","Primary","Secondary","Auxiliary","XButton1","XButton2","XButton3","XButton4","XButton5","XButton6","XButton7","XButton8","_pointerDec2BinMap","_pointerBin2DecMap","PointerManager","_pointers","_multiPointerEnabled","_buttons","_canvas","canvas","_onPointerEvent","_updatePointerWithPhysics","_updatePointerWithoutPhysics","_pointerPool","pointers","_getPointer","pointerId","updatePointer","clientRect","getBoundingClientRect","clientWidth","clientHeight","pointer","pressedButtons","onPointerEvent","focus","_getIndexByPointerID","_uniqueID","lastCount","pointerPool","_pointerRayCast","normalizedX","normalizedY","_tempPoint","_tempRay","_tempHitResult","sceneManager","activeScene","_activeCameras","cameras","renderTarget","viewport","vpX","vpY","vpW","vpH","viewportPointToRay","cullingMask","clearFlags","rect","clientW","clientH","canvasW","canvasH","latestEvent","clientX","clientY","top","currX","currY","button","buttons","Ray","WheelManager","_delta","_onWheelEvent","delta","deltaX","deltaY","deltaZ","cancelable","preventDefault","InputManager","_curFrameCount","_webCanvas","OffscreenCanvas","_wheelManager","_pointerManager","_keyboardManager","isKeyHeldDown","isKeyDown","isKeyUp","isPointerHeldDown","pointerButton","isPointerDown","isPointerUp","multiPointerEnabled","wheelDelta","ShadowCascadesMode","NoCascades","TwoCascades","FourCascades","ShadowResolution","Low","Medium","High","VeryHigh","ShadowType","Hard","SoftLow","SoftHigh","RenderQueueType","Opaque","AlphaTest","Transparent","BlendFactor","Zero","One","SourceColor","OneMinusSourceColor","DestinationColor","OneMinusDestinationColor","SourceAlpha","OneMinusSourceAlpha","DestinationAlpha","OneMinusDestinationAlpha","SourceAlphaSaturate","BlendColor","OneMinusBlendColor","BlendOperation","Add","Subtract","ReverseSubtract","Min","Max","ColorWriteMask","Red","Green","Blue","Alpha","CompareFunction","CullMode","Off","Front","Back","ShaderPropertyType","Float","Int","Vector4","FloatArray","IntArray","TextureArray","StencilOperation","Keep","Replace","IncrementSaturate","DecrementSaturate","Invert","IncrementWrap","DecrementWrap","ShaderMacro","maskIndex","maskValue","_maskIndex","_maskValue","macroNameIDMap","_macroNameIdMap","nameID","_macroNameCounter","_nameId","ShaderMacroCollection","_mask","macro","mask","maskStart","endIndex","newValue","unionCollection","macroCollection","addMask","addSize","maskSize","complementaryCollection","removeMask","intersectionCollection","unionMask","isEnable","clear","outMask","minSize","maxSize","minMask","maxMask","pbr_frag_define","pbr_helper","brdf","direct_irradiance_frag_define","ibl_frag_define","pbr_frag","ShadowCoord","ShadowFragmentDeclaration","shadow_sample_tent","ShadowVertexDeclaration","ShadowVertex","ShaderLib","common","common_vert","transform_declare","camera_declare","color_share","normal_share","uv_share","worldpos_share","FogVertexDeclaration","FogFragmentDeclaration","begin_normal_vert","begin_position_vert","position_vert","color_vert","normal_vert","skinning_vert","blendShape_input","blendShape_vert","uv_vert","worldpos_vert","FogVertex","light_frag_define","mobile_material_frag","FogFragment","begin_mobile_frag","begin_viewdir_frag","mobile_blinnphong_frag","noise_common","noise_cellular_2D","noise_cellular_2x2","noise_cellular_2x2x2","noise_cellular_3D","noise_cellular","noise_perlin_2D","noise_perlin_3D","noise_perlin_4D","noise_perlin","noise_psrd_2D","noise_simplex_2D","noise_simplex_3D_grad","noise_simplex_3D","noise_simplex_4D","noise_simplex","ShadowLib","PBRShaderLib","normal_get","ShaderFactory","parseCustomMacros","macros","m","parseIncludes","src","parseExtension","extensions","convertTo300","shader","isFrag","isMRT","_replaceMRTShader","declaration","mrtIndexSet","Set","res","ShaderDataGroup","Scene","Camera","Renderer","Material","ShaderUniform","textureUseComporeMode","rhi","_rhi","_gl","gl","_colorSpace","settings","colorSpace","upload1f","shaderUniform","cacheValue","uniform1f","upload1fv","uniform1fv","upload2f","uniform2f","upload2fv","uniform2fv","upload3f","uniform3f","upload3fv","uniform3fv","upload4f","uniform4f","upload4fv","uniform4fv","upload1i","uniform1i","upload1iv","uniform1iv","upload2i","uniform2i","upload2iv","uniform2iv","upload3i","uniform3i","upload3iv","uniform3iv","upload4i","uniform4i","upload4iv","uniform4iv","uploadMat4","uniformMatrix4fv","uploadMat4v","uploadTexture","activeTexture","textureIndex","bindTexture","uploadTextureArray","textureIndices","ShaderUniformBlock","constUniforms","textureUniforms","ShaderProgram","vertexSource","fragmentSource","sceneUniformBlock","cameraUniformBlock","rendererUniformBlock","materialUniformBlock","otherUniformBlock","_uploadRenderCount","attributeLocation","_activeTextureUint","_glProgram","_createProgram","_isValid","_recordLocation","_counter","uploadAll","uniformBlock","shaderData","uploadUniforms","uploadTextures","propertyValueMap","_propertyValueMap","uniform","propertyId","applyFunc","textureDefault","uploadUnGroupTextures","groupingOtherUniformBlock","_groupingSubOtherUniforms","_currentBind","useProgram","_vertexShader","deleteShader","_fragmentShader","deleteProgram","uniforms","isTexture","group","Shader","_getShaderPropertyGroup","_groupingUniform","vertexShader","_createShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","program","createProgram","attachShader","linkProgram","validateProgram","isContextLost","getProgramParameter","LINK_STATUS","getProgramInfoLog","shaderType","shaderSource","createShader","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","_addLineNum","uniformInfos","_getUniformInfos","attributeInfos","_getAttributeInfos","substr","getUniformLocation","getPropertyByName","_uniqueId","SAMPLER_2D_SHADOW","defaultTexture","_magentaTexture2D","_magentaTextureCube","_magentaTexture2DArray","_depthTexture2D","defaultTextures","glTextureIndices","TEXTURE0","glTextureIndex","getAttribLocation","uniformCount","ACTIVE_UNIFORMS","getActiveUniform","attributeCount","ACTIVE_ATTRIBUTES","getActiveAttrib","str","lines","limitLength","prefix","line","isValid","ShaderPass","_shaderPassId","_shaderPassCounter","_vertexSource","_fragmentSource","_getShaderProgram","shaderProgramPool","_getShaderProgramPool","shaderProgram","isWebGL2","macroNameList","_getNamesByMacros","macroNameStr","versionStr","graphicAPI","precisionStr","canIUse","_shaderExtension","cache","ShaderProperty","_propertyNameCounter","vertexSourceOrShaderPasses","_passes","passCount","compileVariant","compileMacros","_compileMacros","getMacroByName","passes","shaderMap","_shaderMap","find","_macroMap","maskMap","_macroMaskMap","counter","_macroCounter","bit","propertyNameMap","_propertyNameMap","property","_propertyIdMap","propertyName","shaderProperty","_group","subMaskMap","subMask","j","ShaderData","_macroCollection","getFloat","getPropertyValue","setFloat","_setPropertyValue","getInt","setInt","getFloatArray","setFloatArray","getIntArray","setIntArray","getVector2","setVector2","getVector3","setVector3","getVector4","setVector4","getMatrix","setMatrix","getColor","setColor","getTexture","setTexture","lastValue","getTextureArray","setTextureArray","enableMacro","lastMacro","disableMacro","currentMacro","getMacros","macroMap","values","getProperties","properties","propertyIdMap","targetPropertyValueMap","targetProperty","Light","intensity","shadowType","shadowBias","shadowNormalBias","shadowNearPlane","shadowStrength","_lightIndex","_color","_lightColor","_getLightColor","viewMatrix","_viewMat","inverseViewMatrix","_inverseViewMat","_maxLight","DirectLight","_forward","_reverseDirection","_appendData","lightIndex","cullingMaskStart","colorStart","directionStart","lightColor","direction","_combinedData","_lightManager","_attachDirectLight","_detachDirectLight","_updateShaderData","_cullingMaskProperty","_colorProperty","_directionProperty","reverseDirection","_shadowProjectionMatrix","PointLight","positionStart","distanceStart","lightPosition","_attachPointLight","_detachPointLight","_positionProperty","_distanceProperty","SpotLight","penumbra","_inverseDirection","_projectMatrix","penumbraCosStart","angleCosStart","angleCos","cos","penumbraCos","_attachSpotLight","_detachSpotLight","_angleCosProperty","_penumbraCosProperty","matrix","fov","sqrt","perspective","LightManager","_spotLights","_pointLights","_directLights","light","_getSunLightIndex","directLights","sunLightIndex","maxIntensity","NEGATIVE_INFINITY","hasShadowLight","directLight","spotLight","pointLight","spotLightCount","pointLightCount","directLightCount","RenderTargetBlendState","colorBlendOperation","alphaBlendOperation","sourceColorBlendFactor","sourceAlphaBlendFactor","destinationColorBlendFactor","destinationAlphaBlendFactor","colorWriteMask","BlendState","targetBlendState","blendColor","alphaToCoverage","_apply","hardwareRenderer","lastRenderState","_platformApply","blendState","lastState","lastTargetBlendState","BLEND","blendFuncSeparate","_getGLBlendFactor","blendEquationSeparate","_getGLBlendOperation","colorMask","SAMPLE_ALPHA_TO_COVERAGE","blendFactor","ZERO","ONE","SRC_COLOR","ONE_MINUS_SRC_COLOR","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","DST_ALPHA","ONE_MINUS_DST_ALPHA","SRC_ALPHA_SATURATE","CONSTANT_COLOR","ONE_MINUS_CONSTANT_COLOR","blendOperation","FUNC_ADD","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","MIN","MAX","DepthState","writeEnabled","compareFunction","depthState","DEPTH_TEST","depthFunc","_getGLCompareFunction","depthMask","NEVER","LESS","EQUAL","LEQUAL","GREATER","NOTEQUAL","GEQUAL","ALWAYS","RasterState","cullMode","depthBias","slopeScaledDepthBias","_cullFaceEnable","_frontFaceInvert","frontFaceInvert","rasterState","cullFaceEnable","CULL_FACE","cullFace","BACK","FRONT","frontFace","CW","CCW","_enableGlobalDepthBias","POLYGON_OFFSET_FILL","polygonOffset","StencilState","referenceValue","writeMask","compareFunctionFront","compareFunctionBack","passOperationFront","passOperationBack","failOperationFront","failOperationBack","zFailOperationFront","zFailOperationBack","stencilState","STENCIL_TEST","referenceOrMaskChange","stencilFuncSeparate","stencilOpSeparate","_getGLStencilOperation","stencilMask","KEEP","REPLACE","INCR","DECR","INVERT","INCR_WRAP","DECR_WRAP","RenderState","renderQueueType","_lastRenderState","_renderStates","dest","renderStates","_preRender","renderElement","_shader","lastStatesCount","renderState","ClassPool","_elementPoolIndex","_elementPool","getFromPool","pool","resetPool","RenderElement","MeshRenderElement","setValue","mesh","subMesh","shaderPass","RenderContext","applyVirtualCamera","virtualCamera","_viewMatrixProperty","_projectionMatrixProperty","projectionMatrix","_vpMatrixProperty","viewProjectionMatrix","SpriteElement","multiRenderData","renderDate","renderData","SpriteMaskElement","isAdd","SpriteMaskInteraction","VisibleInsideMask","VisibleOutsideMask","_globalShaderMacro","_bounds","BoundingBox","_overrideUpdate","_materials","_dirtyUpdateFlag","_mvMatrix","_mvpMatrix","_mvInvMatrix","_normalMatrix","_materialsInstanced","_priority","_receiveShadows","_rendererLayer","castShadows","prototype","_onTransformChanged","_registerEntityTransformListener","_receiveShadowMacro","_rendererLayerProperty","getInstanceMaterial","materials","_createInstanceMaterial","getMaterial","indexOrMaterial","_setMaterial","getInstanceMaterials","materialsInstance","getMaterials","setMaterials","internalMaterials","materialsInstanced","internalMaterial","_prepareRender","context","cameraPosition","boundsCenter","bounds","getCenter","_tempVector0","isOrthographic","_distanceForSort","dot","distanceSquared","_render","_updateTransformShaderData","mvMatrix","mvpMatrix","mvInvMatrix","normalMatrix","transpose","_localMatrixProperty","_worldMatrixProperty","_mvMatrixProperty","_mvpMatrixProperty","_mvInvMatrixProperty","_normalMatrixProperty","_updateBounds","worldBounds","insMaterial","isCulled","_renderFrameCount","time","receiveShadows","materialCount","priority","RendererUpdateFlags","WorldVolume","StaticInterfaceImplement","SimpleSpriteAssembler","resetData","_renderData","vertexCount","positions","triangles","_rectangleTriangles","updatePositions","sprite","pivot","pivotX","pivotY","wE","pWE","sx","flipX","sy","spritePositions","_getPositions","_getBounds","updateUVs","spriteUVs","_getUVs","renderUVs","bottom","RenderData2D","SpriteMaskLayer","SpriteModifyFlags","atlasRotate","atlasRegion","atlasRegionOffset","region","border","SpriteMask","influenceLayers","_sprite","_automaticWidth","_automaticHeight","_customWidth","_customHeight","_flipX","_flipY","_alphaCutoff","_spriteMaskDefaultMaterial","_alphaCutoffProperty","_onSpriteChange","spriteMaskElementPool","_spriteMaskElementPool","maskElement","_renderPipeline","_allSpriteMasks","_maskElement","_calDefaultSize","_textureProperty","lastSprite","alphaCutoff","SpriteMaskUpdateFlags","UV","RenderData","AutomaticSize","VertexElementFormat","Byte4","UByte4","NormalizedByte4","NormalizedUByte4","Short2","UShort2","NormalizedShort2","NormalizedUShort2","Short4","UShort4","NormalizedShort4","NormalizedUShort4","BufferUsage","Static","Dynamic","Stream","IndexFormat","UInt8","UInt16","UInt32","BufferUtil","_getGLBufferUsage","bufferUsage","STATIC_DRAW","DYNAMIC_DRAW","STREAM_DRAW","_getGLIndexType","indexFormat","_getGLIndexByteCount","_getElementInfo","VertexElement","semantic","offset","bindingIndex","instanceStepRate","_semantic","_offset","_bindingIndex","_glElementInfo","_instanceStepRate","BufferBindFlag","VertexBuffer","IndexBuffer","SetDataOptions","Discard","Buffer","byteLengthOrData","_bufferUsage","glBufferUsage","glBindTarget","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","_nativeBuffer","createBuffer","_glBufferUsage","_glBindTarget","_byteLength","bufferData","byteLength","bindBuffer","setData","bufferByteOffset","dataOffset","dataLength","options","byteSize","BYTES_PER_ELEMENT","dataByteLength","isArrayBufferView","byteOffset","bufferSubData","subData","buffer","getData","getBufferSubData","deleteBuffer","resize","MeshTopology","Points","Lines","LineLoop","LineStrip","Triangles","TriangleStrip","TriangleFan","IndexBufferBinding","_buffer","SubMesh","topology","Mesh","_vertexElementMap","_instanceCount","_vertexBufferBindings","_indexBufferBinding","_vertexElements","_enableVAO","_subMeshes","_platformPrimitive","createPlatformPrimitive","_onBoundsChanged","addSubMesh","startOrSubMesh","removeSubMesh","subMeshes","clearSubMesh","_clearVertexElements","vertexElementMap","_addVertexElement","_bufferStructChanged","_insertVertexElement","_setVertexBufferBinding","binding","lastBinding","_draw","draw","vertexBufferBindings","_setVertexElements","_setIndexBufferBinding","_glIndexType","_glIndexByteCount","MeshModifyFlags","Bounds","VertexElements","VertexBufferBinding","stride","_stride","BlendShapeManager","modelMesh","_blendShapeCount","_blendShapes","_subDataDirtyFlags","_vertexBuffers","_uniformOccupiesCount","_useBlendNormal","_useBlendTangent","_vertexElementCount","_storeInVertexBufferInfo","_maxCountSingleVertexBuffer","_lastCreateHostInfo","_canUseTextureStoreData","_dataTextureInfo","_modelMesh","canUseFloatTextureBlendShape","_updateLayoutChange","_addBlendShape","blendShape","_layoutChangeManager","_createSubDataDirtyFlag","_clearBlendShapes","blendShapes","subDataDirtyFlags","skinnedMeshRenderer","blendShapeCount","_blendShapeMacro","_useTextureMode","_blendShapeTextureMacro","_blendShapeTextureProperty","_vertexTexture","_blendShapeTextureInfoProperty","_blendShapeWeightsProperty","blendShapeWeights","maxBlendCount","_getVertexBufferModeSupportCount","condensedBlendShapeWeights","_condensedBlendShapeWeights","_filterCondensedBlendShapeWeights","_blendShapeNormalMacro","_blendShapeTangentMacro","_layoutOrCountChange","_vertexElementsNeedUpdate","maxSupportCount","_needUpdateData","_setAttributeModeOffsetInfo","vertexElementOffset","bufferBindingOffset","_vertexElementOffset","_bufferBindingOffset","_addVertexElements","bindingOffset","vertexCountChange","noLongerAccessible","useTexture","createHost","_createTextureArray","_createVertexBuffers","_updateTextureArray","_updateVertexBuffers","_releaseMemoryCache","blendShapeNamesMap","_blendShapeNames","dataChangedFlags","_vertices","vertexBuffers","vertexFloatCount","vertexByteCount","maxCountSingleBuffer","bufferCount","ceil","floatCount","containCount","usage","blendShapeBuffer","maxTextureSize","vertexPixelStride","textureWidth","textureHeight","blendShapeDataTexture","vertices","storeInfos","blendShapeFloatStride","blendShapeByteStride","bufferOffset","dataChangedFlag","frames","endFrame","deltaPositions","bufferIndex","indexInBuffer","bufferFloatStride","storeInfo","deltaNormals","deltaNormal","deltaTangents","deltaTangent","vertexTexture","subDirtyFlag","subBlendShapeDataStride","tangent","notFirst","vertexElementCount","useBlendNormal","_useBlendShapeNormal","useBlendTangent","_useBlendShapeTangent","_attributeModeUpdateVertexElement","vertexElements","vertexBufferStoreInfo","condensedIndex","elementOffset","vertexElement","condensedWeightsCount","thresholdWeight","POSITIVE_INFINITY","thresholdIndex","weight","condensedWeight","VertexAttribute","Position","Normal","Tangent","BoneWeight","BoneIndex","UV1","UV2","UV3","UV4","UV5","UV6","UV7","ModelMesh","_vertexCount","_accessible","_verticesFloat32","_verticesUint8","_indices","_indicesFormat","_indicesChangeFlag","_positions","_normals","_colors","_tangents","_uv","_uv1","_uv2","_uv3","_uv4","_uv5","_uv6","_uv7","_boneWeights","_boneIndices","_bufferStrides","_vertexBufferUpdateFlag","_vertexDataUpdateFlag","_vertexElementsUpdate","_customVertexElements","_vertexCountChanged","_blendShapeManager","setPositions","newVertexCount","getPositions","setNormals","normals","getNormals","setColors","colors","getColors","setBoneWeights","boneWeights","getBoneWeights","setBoneIndices","boneIndices","getBoneIndices","setTangents","tangents","getTangents","setUVs","uv","channelIndex","getUVs","setIndices","indices","getIndices","setVertexElements","customVertexElements","customVertexElementMap","uv1s","uv2s","uv3s","uv4s","uv5s","uv6s","uv7s","setVertexBufferBinding","bufferOrBinding","strideOrFirstIndex","isBinding","bindings","setVertexBufferBindings","firstIndex","needLength","addBlendShape","clearBlendShapes","getBlendShapeName","uploadData","_updateVertexElements","vertexBuffer","elementCount","_updateVertices","newVertexBuffer","indexBuffer","newIndexBuffer","blendShapeManager","_releaseCache","calculateTangents","_tempVec0","_tempVec1","e2","_tempVec2","_tempVec3","_tempVec4","temp","triangleCount","biTangents","i0","i1","i2","p0","p1","p2","w0","w1","w2","e1","x1","x2","y1","y2","_supplementaryVertexElements","_insertVertexAttribute","bsManager","bsAttributeUpdate","_vertexChangeFlag","_vertexStrideFloat","joint","internalStart","vertexAttribute","_getAttributeFormat","needByteLength","_getAttributeByteLength","lastOffset","attribute","accessible","positionElement","positionBufferBinding","VertexChangedFlags","Skin","inverseBindMatrices","joints","skeleton","MeshRenderer","_enableVertexColor","_onMeshChanged","_mesh","localBounds","_uvMacro","_uv1Macro","_normalMacro","_tangentMacro","_vertexColorMacro","enableVertexColor","renderPipeline","renderElementPool","_renderElementPool","shaderPasses","pushPrimitive","_setMesh","lastMesh","MeshRendererUpdateFlags","VertexElementMacro","Utils","_floatMatrixMultiply","re","rOffset","oe","le","l11","l12","l13","l14","l21","l22","l23","l24","l31","l32","l33","l34","l41","l42","l43","l44","r11","r12","r13","r14","r21","r22","r23","r24","r31","r32","r33","r34","r41","r42","r43","r44","_reflectGet","pathArr","_stringToPath","object","SkinnedMeshRenderer","_supportSkinning","_hasInitSkin","_jointDataCreateCache","_localBounds","_skin","maxVertexUniformVectors","getParameter","MAX_VERTEX_UNIFORM_VECTORS","_options","_maxAllowSkinUniformVectorCount","_maxVertexUniformVectors","_onLocalBoundsChanged","_initSkin","ibms","worldToLocal","_rootBone","_jointEntities","_jointMatrices","jointMatrices","skin","bsUniformOccupiesCount","jointCount","jointDataCreateCache","jointCountChange","remainUniformJointCount","canIUseMoreJoints","_jointTexture","_jointSamplerProperty","_jointMatrixProperty","_blendShapeWeights","jointEntities","_findByEntityName","lastRootBone","rootBone","rootIndex","approximateBindMatrix","subRootBoneCount","_computeApproximateBindMatrix","multiplyScalar","_jointCountProperty","rootEntity","rootChild","_checkBlendShapeWeightLength","newBlendShapeCount","lastBlendShapeWeights","lastBlendShapeWeightsCount","newBlendShapeWeights","_tempMatrix","PrimitiveMesh","createSphere","segments","rectangleCount","_generateIndices","thetaRange","alphaRange","countReciprocal","segmentsReciprocal","u","alphaDelta","thetaDelta","sinTheta","sin","posX","posY","posZ","c","createCuboid","halfWidth","halfHeight","halfDepth","createPlane","horizontalSegments","verticalSegments","horizontalCount","verticalCount","gridWidth","gridHeight","horizontalCountReciprocal","horizontalSegmentsReciprocal","verticalSegmentsReciprocal","createCylinder","radiusTop","radiusBottom","radialSegments","heightSegments","radialCount","unitHeight","torsoVertexCount","torsoRectangleCount","capTriangleCount","totalVertexCount","radialCountReciprocal","radialSegmentsReciprocal","heightSegmentsReciprocal","indicesOffset","thetaStart","radiusDiff","slope","radiusSlope","theta","cosTheta","diameterTopReciprocal","diameterBottomReciprocal","positionStride","curPosBottom","curPosX","curPosZ","curPosTop","topCapIndex","bottomIndiceIndex","topIndiceIndex","firstStride","secondStride","radiusMax","createTorus","tubeRadius","tubularSegments","arc","cosV","sinV","cosU","sinU","centerX","centerY","outerRadius","createCone","curRadius","curPos","createCapsule","capVertexCount","capRectangleCount","_createCapsuleCap","indexCount","capAlphaRange","posIndex","BufferMesh","setIndexBufferBinding","instanceCount","indexBufferBinding","BlendShapeFrame","BlendShape","_dataChangeManager","_frames","addFrame","frameOrWeight","frame","_addFrame","clearFrames","_updateUseNormalAndTangent","_addDataDirtyFlag","useNormal","useTangent","useBlendShapeNormal","useBlendShapeTangent","Basic2DBatcher","_subMeshPool","_batchedQueue","_meshes","_meshCount","_indiceBuffers","_flushId","_elementCount","MAX_VERTEX_COUNT","_createMesh","drawElement","replaceMaterial","charElements","_drawSubElement","flush","batchedQueue","_updateData","drawBatches","_canUploadSameBuffer","meshes","indiceBuffers","vertexStride","createVertexElements","vertexIndex","indiceIndex","vertexStartIndex","curIndiceStartIndex","curMeshIndex","preElement","curElement","updateVertices","triangleNum","canBatch","_getSubMeshFromPool","SpriteMaskBatcher","preShaderData","curShaderData","textureProperty","alphaCutoffProperty","curUV","sceneData","cameraData","spriteMaskElement","op","drawPrimitive","SpriteMaskManager","_preMaskLayer","_batcher","preRender","maskInteraction","_processMasksDiff","postRender","maskLayer","preMaskLayer","curMaskLayer","allMasks","commonLayer","addLayer","reduceLayer","allMaskElements","maskRenderElement","TextRenderElement","BackgroundMode","SolidColor","Sky","BackgroundTextureFillMode","AspectFitWidth","AspectFitHeight","Fill","aspectRatio","fieldOfView","cameraShaderData","_viewProjMatrix","_projectionMatrix","materialShaderData","viewProjMatrix","f","tan","originViewProjMatrix","_epsilon","Background","solidColor","sky","_textureFillMode","_createPlane","_resizeBackgroundTexture","_backgroundTextureMesh","fitWidthScale","fitHeightScale","_backgroundTextureMaterial","textureFillMode","FogMode","Exponential","ExponentialSquared","DiffuseMode","SphericalHarmonics","AmbientLight","_diffuseSolidColor","_diffuseIntensity","_specularIntensity","_diffuseMode","_shArray","_scenes","_specularTextureDecodeRGBM","_addToScene","_diffuseColorProperty","_diffuseIntensityProperty","_specularIntensityProperty","_diffuseSHProperty","_setDiffuseMode","_setSpecularTextureDecodeRGBM","_setSpecularTexture","_removeFromScene","scenes","sceneShaderData","_shMacro","_specularTexture","_specularTextureProperty","_mipLevelProperty","_specularMacro","_decodeRGBMMacro","_preComputeSH","sh","coefficients","specularTextureDecodeRGBM","diffuseMode","diffuseSolidColor","diffuseSphericalHarmonics","_diffuseSphericalHarmonics","diffuseIntensity","specularTexture","specularIntensity","background","shadowResolution","shadowTwoCascadeSplits","shadowFourCascadeSplits","shadowDistance","_shadowCascades","_fogMode","_fogColor","_fogStart","_fogEnd","_fogDensity","_fogParams","ambientLight","_allScenes","shadowCascades","_fogColorProperty","_fogParamsProperty","_computeLinearFogParams","_computeExponentialFogParams","createRootEntity","addRootEntity","isRoot","oldScene","_addToRootEntityList","removeRootEntity","getRootEntity","findEntityByName","rootEntities","findEntityByPath","filter","Boolean","rootEntitiesCount","findEntity","allScenes","_attachRenderCamera","_detachRenderCamera","active","lightManager","_sunLight","rootEntityCount","fogStart","fogEnd","fogRange","fogParams","density","LN2","_ambientLight","lastAmbientLight","fogMode","fogColor","fogDensity","SceneManager","loadScene","destroyOldScene","scenePromise","_activeScene","mergeScenes","sourceScene","destScene","oldRootEntities","_destroyAllScene","ShaderPool","init","blinnPhongVs","blinnPhongFs","pbrVs","pbrFs","pbrSpecularFs","unlitVs","unlitFs","shadowMapVs","shadowMapFs","skyboxVs","skyboxFs","particleVs","particleFs","spriteMaskVs","spriteMaskFs","spriteVs","spriteFs","backgroundTextureVs","backgroundTextureFs","ShaderProgramPool","_cacheHierarchy","_cacheMap","cacheMap","maskLength","_resizeCacheMapHierarchy","maxEndIndex","subCacheShaders","cacheKey","_lastQueryKey","_lastQueryMap","hierarchy","resizeLength","subCacheMap","Engine","_spriteElementPool","_textElementPool","_renderContext","_renderCount","_shaderProgramPools","_canSpriteBatch","_settings","_resourceManager","_sceneManager","_vSyncCount","_targetFrameRate","_time","_isPaused","_vSyncCounter","_targetFrameInterval","_frameInProcess","_waittingDestroy","_animate","_requestId","requestAnimationFrame","_timeoutId","setTimeout","_spriteMaskManager","_spriteDefaultMaterial","_createSpriteMaterial","_createSpriteMaskMaterial","_textDefaultFont","inputManager","magentaPixel","magentaTexture2D","magentaTextureCube","_noDepthTextureMacro","depthTexture2D","magentaTexture2DArray","magentaMaterial","_magentaMaterial","backgroundTextureMaterial","innerSettings","_gammaMacro","createEntity","pause","cancelAnimationFrame","clearTimeout","resume","sort","camera1","camera2","run","shaderProgramPools","render","_forceFlush","isPaused","vSyncCount","targetFrameRate","_pixelsPerUnit","Script","_onPreRenderIndex","_onPostRenderIndex","onAwake","onEnable","other","onDisable","SpriteBatcher","preRenderer","curRenderer","checkBatchWithMask","leftMaskInteraction","maskManager","spriteElement","RenderQueue","items","_spriteBatcher","customShader","renderCount","renderPassFlag","rendererData","materialData","switchProgram","switchRenderCount","_uploadScene","_uploadCamera","_uploadRenderer","_uploadMaterial","compareFunc","_quickSort","from","to","_insertionSort","third_index","v2","c01","tmp","c02","c12","low_end","high_start","partition","order","top_elem","_compareFromNearToFar","_compareFromFarToNear","VirtualCamera","ShadowSliceData","cullPlanes","Plane","splitBoundSphere","BoundingSphere","FrustumCorner","FarBottomLeft","FarTopLeft","FarTopRight","FarBottomRight","nearBottomLeft","nearTopLeft","nearTopRight","nearBottomRight","unknown","ShadowUtils","shadowDepthFormat","supportDepthTexture","cullingRenderBounds","cullPlaneCount","plane","shadowCullFrustum","shadowSliceData","getBoundSphereByFrustum","near","far","centerZ","k2","farSNear","farANear","center","sphereCenterZ","getDirectionLightShadowCullPlanes","cameraFrustum","splitDistance","cameraNear","frustumCorners","_frustumCorners","backPlaneFaces","_backPlaneFaces","planeNeighbors","_frustumPlaneNeighbors","twoPlaneCorners","_frustumTwoPlaneCorners","edgePlanePoint2","_edgePlanePoint2","getPlane","FrustumFace","Near","Far","Left","Right","Bottom","Top","splitNearDistance","splitNear","_adjustNearPlane","splitFar","_adjustFarPlane","CollisionUtil","intersectionPointThreePlanes","backIndex","edgeIndex","backFace","neighborFaces","neighborFace","notBackFace","corners","point0","point1","fromPoints","getDirectionalLightMatrices","lightUp","lightSide","lightForward","cascadeIndex","nearPlane","outShadowMatrices","boundSphere","resolution","halfShadowResolution","borderRadius","atlasBorderSize","borderDiam","sizeUnit","radiusUnit","upLen","sideLen","forwardLen","projectMatrix","ortho","_shadowMapCoordMatrix","getMaxTileResolutionInAtlas","atlasWidth","atlasHeight","tileCount","currentTileCount","getShadowBias","frustumSize","texelSize","normalBias","kernelRadius","applySliceTransform","tileSize","atlasOffset","sliceMatrix","_tempMatrix0","oneOverAtlasWidth","oneOverAtlasHeight","scaleX","scaleY","offsetX","offsetY","CascadedShadowCasterPass","_shadowMapSize","_shadowBias","_shadowSliceData","_lightUp","_lightSide","_existShadowMap","_splitBoundSpheres","_maxCascades","_shadowMatrices","_shadowInfos","_viewportOffsets","_camera","_supportDepthTexture","_shadowCasterShader","_updateShadowSettings","_renderDirectShadowMap","_updateReceiversShaderData","shadowCasterShader","viewports","splitBoundSpheres","shadowMatrices","_opaqueQueue","_alphaTestQueue","alphaTestQueue","_transparentQueue","transparentQueue","_cascadesSplitDistance","lightWorld","lightWorldE","shadowFar","farClipPlane","_getCascadesSplitDistance","_getAvailableRenderTarget","activeRenderTarget","_viewport","clearRenderTarget","_clearColor","_tempVector","shadowTileResolution","_shadowTileResolution","_frustum","nearClipPlane","shadowMapSize","_updateSingleShadowCasterShaderData","opaqueQueue","renderers","setGlobalDepthBias","scissor","_shadowMatricesProperty","_shadowInfosProperty","_shadowMapsProperty","_shadowSplitSpheresProperty","cascadesSplitDistance","range","tFov","denominator","_getFarWithRadius","_shadowMapFormat","_renderTargets","shadowFormat","_shadowMapResolution","_shadowCascadeMode","viewportOffset","_lightShadowBiasProperty","_lightDirectionProperty","passNum","RenderPass","renderOverride","BasicRenderPipeline","_lastCanvasSize","_cascadedShadowCaster","_renderPassArray","_defaultPass","addRenderPass","nameOrPass","renderPass","removeRenderPass","pass","getRenderPass","cubeFace","_virtualCamera","_callRender","_drawRenderPass","clearColor","_drawBackgroundTexture","enableFrustumCulling","intersectsBox","defaultRenderPass","_tempVector1","MathTemp","tempVec4","tempVec3","tempVec2","BoundingFrustum","_isProjMatSetting","_nearClipPlane","_farClipPlane","_fieldOfView","_orthographicSize","_isProjectionDirty","_isInvProjMatDirty","_isFrustumProjectDirty","_customAspectRatio","_renderTarget","_inverseProjectionMatrix","_lastAspectSize","_invViewProjMat","_transform","_isViewMatrixDirty","_isInvViewProjDirty","_frustumViewChangeFlag","resetProjectionMatrix","_projMatChange","resetAspectRatio","worldToViewportPoint","cameraPoint","viewportPoint","transformToVec4","viewportToWorldPoint","nf","pointZ","_innerViewportToWorldPoint","_getInvViewProjMat","invViewProjMat","origin","screenToViewportPoint","viewportToScreenPoint","worldToScreenPoint","screenToWorldPoint","screenPointToRay","calculateFromMatrix","clipPoint","_inverseViewMatrixProperty","_cameraPositionProperty","_getInverseProjectionMatrix","orthographicSize","rotationTranslation","enableHDR","mimeType","json","gltf","mtl","prefab","txt","bin","png","webp","jpg","defaultRetryCount","defaultTimeout","defaultInterval","request","getMimeTypeFromUrl","realRequest","requestImage","requestRes","lastError","MultiExecutor","stop","err","img","Image","onerror","onabort","timeoutId","onload","crossOrigin","xhr","XMLHttpRequest","method","status","response","responseText","ontimeout","onprogress","loaded","total","open","withCredentials","credentials","responseType","headers","setRequestHeader","send","extname","execFunc","totalCount","interval","_currentCount","done","Loader","registerClass","className","classDefine","_engineObjects","getClass","AssetType","Text","JSON","AnimationClip","AnimatorController","Prefab","KTX","KTXCube","Sprite","SpriteAtlas","Env","HDR","SourceFont","BlendMode","Additive","RenderFace","Double","BaseMaterial","_renderFace","_isTransparent","_blendMode","_alphaCutoffProp","setIsTransparent","passIndex","isTransparent","_transparentMacro","setBlendMode","blendMode","setRenderFace","renderFace","_alphaCutoffMacro","_baseColorProp","_baseTextureProp","_baseTextureMacro","_tilingOffsetProp","_normalTextureProp","_normalIntensityProp","_normalTextureMacro","_emissiveColorProp","_emissiveTextureProp","_emissiveTextureMacro","BlinnPhongMaterial","_specularColorProp","_shininessProp","baseColor","baseTexture","specularColor","_specularTextureProp","emissiveColor","emissiveTexture","normalTexture","normalIntensity","shininess","tilingOffset","TextureCoordinate","UV0","PBRBaseMaterial","_occlusionTextureIntensityProp","_occlusionTextureCoordProp","_clearCoatProp","_clearCoatRoughnessProp","normalTextureIntensity","occlusionTexture","_occlusionTextureProp","occlusionTextureIntensity","occlusionTextureCoord","clearCoat","clearCoatTexture","_clearCoatTextureProp","clearCoatRoughness","clearCoatRoughnessTexture","_clearCoatRoughnessTextureProp","clearCoatNormalTexture","_clearCoatNormalTextureProp","PBRMaterial","_metallicProp","_roughnessProp","_iorProp","ior","metallic","roughness","roughnessMetallicTexture","_roughnessMetallicTextureProp","PBRSpecularMaterial","_glossinessProp","glossiness","specularGlossinessTexture","_specularGlossinessTextureProp","_specularGlossinessTextureMacro","UnlitMaterial","TextHorizontalAlignment","Center","TextVerticalAlignment","OverflowMode","Overflow","Truncate","FontStyle","Bold","Italic","_sprites","_spriteNamesToIndex","getSprite","getSprites","outSprites","_addSprite","sprites","SpriteDrawMode","Simple","Sliced","_uvs","_atlasRotated","_atlasRegion","Rect","_atlasRegionOffset","_region","_pivot","_border","cloneSprite","_updatePositions","_updateUVs","pixelsPerUnitReciprocal","blank","regionX","regionW","regionH","regionRight","regionBottom","regionY","atlasRegionX","atlasRegionW","atlasRegionH","offsetLeft","offsetRight","offsetBottom","realWidth","realHeight","offsetTop","atlasRegionY","borderLeft","borderRight","borderTop","borderBottom","_dispatchSpriteChange","atlasRotated","SpriteUpdateFlags","automaticSize","SlicedSpriteAssembler","expectHeight","fixedLeft","expectWidth","fixedBottom","fixedRight","fixedTop","row","column","widthScale","heightScale","localTransX","localTransY","realICount","rowValue","rowU","columnValue","realJCount","indexOffset","SpriteRenderer","_maskLayer","_maskInteraction","drawMode","_drawMode","_assembler","_updateStencilState","compare","SpriteRendererUpdateFlags","CharRenderData","localPositions","CharRenderDataPool","put","TextUtils","textContext","_textContext","getContext","measureFont","fontString","fontSizeInfoCache","_fontSizeInfoCache","_measureFontOrChar","getNativeFontString","fontName","_genericFontFamilies","measureChar","measureTextWithWrap","_subFont","fontSizeInfo","subTexts","text","lineWidths","lineMaxSizes","lineHeight","lineSpacing","wrapWidth","subText","chars","charsWidth","maxAscent","maxDescent","halfH","ascent","descent","xAdvance","overflowMode","measureTextWithoutWrap","lineCount","curWidth","getNativeFontHash","measureString","_measureString","round","measureText","baseline","_measureBaseline","_heightMultiplier","_baselineMultiplier","fillStyle","clearRect","textBaseline","fillText","colorData","getImageData","integerW","integerWReciprocal","sizeInfo","lineIntegerW","TextRenderer","_charRenderDatas","_text","_font","_fontSize","_fontStyle","_lineSpacing","_horizontalAlignment","_verticalAlignment","_enableWrapping","_overflowMode","charRenderDatas","_charRenderDataPool","enableWrapping","_resetSubFont","_updateLocalData","_updatePosition","spriteElementPool","textElement","charCount","charRenderData","e0","e4","e5","e6","e12","e13","e14","topLeftY","worldPosition0","topLeftX","worldPosition1","worldPosition2","horizontalAlignment","verticalAlignment","charFont","rendererWidth","halfRendererWidth","rendererHeight","textMetrics","charRenderDataPool","halfLineHeight","linesLen","startY","topDiff","bottomDiff","renderDataCount","minX","MAX_SAFE_INTEGER","minY","maxX","MIN_SAFE_INTEGER","maxY","lastLineIndex","lineWidth","startX","lastRenderDataCount","lastFont","DirtyFlag","LocalPositionBounds","WorldBounds","MaskInteraction","UniversalAnimationCurveOwnerAssembler","owner","mounted","_mounted","_propertyName","getTargetValue","setTargetValue","AnimationCurveOwner","cureType","crossCurveMark","hasSavedDefaultValue","baseEvaluateData","curKeyframeIndex","crossEvaluateData","_cureType","assemblerType","getAssemblerType","_isReferenceType","referenceTargetValue","evaluateAndApplyValue","curve","layerWeight","additive","_evaluateAdditive","_additiveValue","assembler","originValue","additiveValue","_evaluate","_applyValue","crossFadeAndApplyValue","srcCurve","destCurve","srcTime","destTime","crossWeight","srcValue","_getZeroValue","defaultValue","destValue","_applyCrossValue","crossFadeFromPoseAndApplyValue","_subtractValue","fixedPoseValue","revertDefaultValue","saveDefaultValue","_copyValue","saveFixedPoseValue","targetValue","_lerpValue","lerpValue","registerAssembler","componentType","subMap","_assemblerMap","PositionAnimationCurveOwnerAssembler","RotationAnimationCurveOwnerAssembler","ScaleAnimationCurveOwnerAssembler","BlendShapeWeightsAnimationCurveOwnerAssembler","_skinnedMeshRenderer","AnimationClipCurveBinding","_tempCurveOwner","_createCurveOwner","curveType","_initializeOwner","_getTempCurveOwner","AnimationEvent","_curveBindings","addEvent","parameter","functionName","clearEvents","addCurveBinding","relativePath","curveBinding","clearCurveBindings","_sampleAnimation","curveBindings","curveData","targetEntity","curveOwner","InterpolationType","CubicSpine","Step","Hermite","AnimationCurve","_evaluateData","_interpolation","_isInterpolationType","addKey","evaluate","removeKey","newLength","evaluateData","interpolation","curIndex","nextIndex","curFrame","nextFrame","curFrameTime","duration","_hermiteInterpolationValue","AnimationArrayCurve","base","t0","outTangent","t1","inTangent","t2","t3","isFinite","AnimationBoolCurve","AnimationColorCurve","dur","tan0","tan1","AnimationFloatArrayCurve","AnimationFloatCurve","scource","AnimationQuaternionCurve","slerp","conjugate","_tempConjugateQuat","AnimationVector2Curve","AnimationVector3Curve","_relativeBaseValue","AnimationVector4Curve","AnimatorCullingMode","Complete","AnimatorLayerBlendingMode","Override","AnimatorStatePlayState","UnStarted","Playing","Finished","LayerState","Standby","CrossFading","FixedCrossFading","AnimationEventHandler","handlers","AnimatorStateTransition","exitTime","WrapMode","Once","Loop","AnimatorStatePlayData","state","stateData","offsetFrameTime","frameTime","playState","clipTime","clipStartTime","clip","currentEventIndex","isBackwards","_getDuration","wrapMode","clipEndTime","AnimatorLayerData","animatorStateDataMap","srcPlayData","destPlayData","layerState","manuallyTransition","switchPlayData","switchTemp","AnimatorStateData","curveOwners","eventHandlers","Animator","cullingMode","speed","_animatorLayersData","_crossOwnerCollection","_animationCurveOwners","_animationEventHandlerPool","_tempAnimatorStateInfo","layerIndex","_controlledRenderers","play","stateName","normalizedTimeOffset","_controllerUpdateFlag","_reset","stateInfo","_getAnimatorStateInfo","animatorLayerData","_getAnimatorLayerData","animatorStateData","_getAnimatorStateData","_preparePlay","crossFade","normalizedTransitionDuration","destinationState","_crossFadeByTransition","animationUpdate","controlledRenderers","animatorController","_animatorController","_checkAutoPlay","layers","_updateLayer","getCurrentAnimatorState","findAnimatorState","animationCurveOwners","propertyOwners","stateMachine","findStateByName","_saveDefaultValues","animatorState","_saveAnimatorStateData","_saveAnimatorEventHandlers","animationCureOwners","curves","eventHandlerPool","scriptCount","eventHandler","funcName","handler","_clearCrossData","_addCrossCurveData","crossCurveData","curCurveIndex","nextCurveIndex","crossSrcCurveIndex","crossDestCurveIndex","_prepareCrossFading","_prepareSrcCrossData","_prepareDestCrossData","_prepareStandbyCrossFading","crossOwnerCollection","_prepareFixedPoseCrossFading","saveFixed","crossCurveDataIndex","firstLayer","aniUpdate","blendingMode","layerData","crossFadeTransition","crossFadeTransitionInfo","_checkTransition","_updatePlayingState","_updateCrossFadeFromPose","_updateCrossFade","playData","lastPlayState","lastClipTime","_fireAnimationEvents","_callAnimatorScriptOnEnter","_callAnimatorScriptOnExit","_callAnimatorScriptOnUpdate","crossCurveDataCollection","srcCurves","srcState","srcStateData","lastSrcPlayState","srcEventHandlers","destState","destStateData","lastDstPlayState","destEventHandlers","destCurves","lastSrcClipTime","lastDestClipTime","srcPlayState","destPlayState","_updateCrossFadeData","srcClipTime","destClipTime","fixed","playStateData","transitions","transition","crossState","clipDuration","_fireSubAnimationEvents","_fireBackwardSubAnimationEvents","curClipTime","eventIndex","_onStateEnterScripts","onStateEnter","_onStateUpdateScripts","onStateUpdate","_onStateExitScripts","onStateExit","defaultState","_registerChangeFlag","_layers","_layersMap","findLayerByName","removeLayer","theLayer","clearLayers","AnimatorControllerLayer","StateMachineScript","animator","_removeStateMachineScript","AnimatorState","_clipStartTime","_clipEndTime","_transitions","addTransition","removeTransition","addStateMachineScript","scriptType","clearTransitions","_clip","AnimatorStateMachine","states","_statesMap","addState","removeState","makeUniqueStateName","originName","AnimatorConditionMode","If","IfNot","Equals","NotEquals","Keyframe","SkyBoxMaterial","_decodeParam","textureDecodeRGBM","RGBMDecodeFactor","textureCubeMap","DirtyFlagType","Velocity","Acceleration","Size","StartAngle","StartTime","LifeTime","RotateVelocity","Scale","ParticleRendererBlendMode","ParticleRenderer","props","_maxCount","_positionRandomness","_velocity","_velocityRandomness","_acceleration","_accelerationRandomness","_colorRandomness","_sizeRandomness","_alpha","_alphaRandomness","_startAngle","_startAngleRandomness","_rotateVelocity","_rotateVelocityRandomness","_lifetime","_startTimeRandomness","_isOnce","_onceTime","_isInit","_isStart","_updateDirtyFlag","_isRotateToVelocity","_isUseOriginColor","_isScaleByLifetime","_is2d","_isFadeIn","_isFadeOut","_playOnEnable","_onColorChanged","_createMaterial","_updateBuffer","isUseOriginColor","is2d","isFadeOut","useUint32","_uint16VertexLimit","startIndex","_vertexBuffer","_vertexStride","minValue","maxValue","_updateSingleBuffer","getRandom","_getRandom","k0","k1","k3","_positionArray","pos","random","_updateSingleUv","spriteSheet","q","ratio","positionRandomness","positionArray","velocityRandomness","acceleration","accelerationRandomness","colorRandomness","sizeRandomness","alpha","alphaRandomness","angleRandomness","rotateVelocity","rotateVelocityRandomness","lifetime","startTimeRandomness","maxCount","isOnce","isRotateToVelocity","isScaleByLifetime","isFadeIn","playOnEnable","VERT_SHADER","FRAG_SHADER","TrailMaterial","_tempVector3","TrailRenderer","_stroke","stroke","_minSeg","minSeg","_maxPointNum","_points","_pointStates","_strapPoints","_curPointNum","_initGeometry","mov","newIdx","appendNewPoint","lastPoint","_updateStrapVertices","_updateStrapCoords","points","vx","vy","vz","down","dy","perpVector","_projectOnPlane","acos","_prePointsNum","texDelta","_projectOnVector","n_p","cosine","Probe","probeLayer","_isCube","onTextureChange","renderColorTexture","_oriCameraCullingMask","_activeRenderTarget","_renderTargetSwap","_oriCameraRenderTarget","cacheTarget","cacheUp","cacheDir","CubeProbe","oriViewMatrix","_storeCamera","_setCamera","_restoreCamera","_oriFieldOfView"],"mappings":"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"}